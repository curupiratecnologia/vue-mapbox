(function(e){function t(t){for(var a,n,s=t[0],l=t[1],c=t[2],p=0,h=[];p<s.length;p++)n=s[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&h.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,n=1;n<o.length;n++){var l=o[n];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},r={app:0},i=[];function n(e){return s.p+"js/"+({"mapboxgl-core":"mapboxgl-core"}[e]||e)+"."+{"mapboxgl-core":"e0138fb5"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o=r[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,a){o=r[e]=[t,a]}));t.push(o[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=n(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(p);var o=r[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,o[1](c)}r[e]=void 0}};var p=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var p=0;p<l.length;p++)t(l[p]);var u=c;i.push([1,"chunk-vendors"]),o()})({0:function(e,t){},1:function(e,t,o){e.exports=o("56d7")},2:function(e,t){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a,r,i,n,s,l,c,p,u,h,m=o("2b0e"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("center",[o("VueMapbox",{attrs:{hash:"pos",mapStyle:"mapbox://styles/mapbox/dark-v10",height:"700px",width:"900px",images:e.images}},[o("vm-source",{attrs:{name:"painel_solucao_compartilhada_solucao_info",type:"vector",options:{type:"vector",tiles:["http://rspangea.mma.gov.br/tile/painel_solucao_compartilhada_solucao_info/{z}/{x}/{y}.mvt?ano_referencia="+e.ano],minzoom:1,maxzoom:24}}}),o("vmLayer",{attrs:{name:"myLayer",source:"painel_solucao_compartilhada_solucao_info",sourceLayer:"painel_solucao_compartilhada_solucao_info",type:"fill",paint:{"fill-color":e.fill,"fill-opacity":.6,"fill-color-transition":{duration:2e4,delay:2e3}},multipleFeatureSelectionOn:"alt"},scopedSlots:e._u([{key:"popupHover",fn:function(){return[o("h6",[e._v(" Here goes the pop up content while in "),o("b",[e._v("HOVER")]),e._v(" a Feature.")])]},proxy:!0},{key:"popupClick",fn:function(t){return[o("VmPopup",{attrs:{"max-width":"400px"}},[o("pre",[e._v(e._s(t.features&&t.features[0]&&t.features[0].properties))]),o("h6",[e._v("Here goes the pop up content while in "),o("b",[e._v("CLICK")]),e._v(" a Feature.")])])]}}])}),o("vmLayerArc",{attrs:{name:"arcLayer",data:e.fluxoFinal,witdh:10,sourceColor:"#ffffff",targetColor:"corDestino",sourcePosition:"geomOrigem",targetPosition:"geomDestino"}})],1)],1),e._v(" ano "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.ano,expression:"ano"}],attrs:{type:"text"},domProps:{value:e.ano},on:{input:function(t){t.target.composing||(e.ano=t.target.value)}}}),e._v(" fill "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fill,expression:"fill"}],attrs:{type:"text"},domProps:{value:e.fill},on:{input:function(t){t.target.composing||(e.fill=t.target.value)}}})],1)},y=[],f=(o("4160"),o("159b"),{name:"App",data:function(){return{show:!0,center:[-45,-15],drag:!1,open:!0,label:"a",mode:0,fill:"#ff7700",dataSet:[100,4,7],ano:2018,geojson1:{type:"FeatureCollection",features:[{type:"Feature",properties:{tipoRegiao:"estado",nome:"Rio de Janeiro",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"33",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-42.0711523406202,-22.0720646645004]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"São Paulo",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"35",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-49.1831841692549,-22.5736727410571]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Paraná",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"41",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-51.8183643619047,-24.6344451045557]}}]},geojson2:{type:"FeatureCollection",features:[{type:"Feature",properties:{tipoRegiao:"estado",nome:"Pará",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"15",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-52.0029177013392,-3.64654901351252]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Minas Gerais",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"31",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-45.2120202503997,-18.6336315895962]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Esprito Santo",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"32",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-40.4467034518567,-19.6054031735828]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Rio de Janeiro",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"},6:{nome:"Soluções Baseadas na Natureza (NBS)",total:3,cor:"#f97566"}},geocod:"33",colorSet:["#984593","#f97566"],dataSet:[1,3],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-42.0711523406202,-22.0720646645004]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"São Paulo",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"},6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"35",colorSet:["#984593","#f97566"],dataSet:[1,1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-49.1831841692549,-22.5736727410571]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Paraná",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"41",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-51.8183643619047,-24.6344451045557]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Distrito Federal",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"53",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-47.7808785770608,-15.7754886310227]}}]},geojson3:{type:"FeatureCollection",features:[]},geojson:{},fluxo:[{geocod_origem:5219902,geom_origem:{type:"Point",coordinates:[-49.26031485,-15.93202096]},destinos:[{geocod_destino:5219902,geom_destino:{type:"Point",coordinates:[-49.26031485,-15.93202096]},adequado:0,inadequado:4900,adequacao:0}]},{geocod_origem:5220108,geom_origem:{type:"Point",coordinates:[-50.37482105,-16.51410686]},destinos:[{geocod_destino:5220108,geom_destino:{type:"Point",coordinates:[-50.37482105,-16.51410686]},adequado:0,inadequado:61800,adequacao:0}]},{geocod_origem:5220264,geom_origem:{type:"Point",coordinates:[-48.66342725,-17.05642588]},destinos:[{geocod_destino:5220264,geom_destino:{type:"Point",coordinates:[-48.66342725,-17.05642588]},adequado:0,inadequado:2742.9,adequacao:0}]},{geocod_origem:5221007,geom_origem:{type:"Point",coordinates:[-49.60258016,-16.05500387]},destinos:[{geocod_destino:5221007,geom_destino:{type:"Point",coordinates:[-49.60258016,-16.05500387]},adequado:0,inadequado:3720,adequacao:0}]},{geocod_origem:5221304,geom_origem:{type:"Point",coordinates:[-47.78063797,-18.35978943]},destinos:[{geocod_destino:5221304,geom_destino:{type:"Point",coordinates:[-47.78063797,-18.35978943]},adequado:0,inadequado:21880,adequacao:0}]},{geocod_origem:5221700,geom_origem:{type:"Point",coordinates:[-49.67938453,-15.50501229]},destinos:[{geocod_destino:5221700,geom_destino:{type:"Point",coordinates:[-49.67938453,-15.50501229]},adequado:0,inadequado:56e3,adequacao:0}]},{geocod_origem:5222005,geom_origem:{type:"Point",coordinates:[-48.50667118,-16.74573646]},destinos:[{geocod_destino:5222005,geom_destino:{type:"Point",coordinates:[-48.50667118,-16.74573646]},adequado:0,inadequado:39130,adequacao:0}]},{geocod_origem:5222054,geom_origem:{type:"Point",coordinates:[-49.80746824,-17.73092192]},destinos:[{geocod_destino:5222054,geom_destino:{type:"Point",coordinates:[-49.80746824,-17.73092192]},adequado:0,inadequado:27533.1,adequacao:0}]},{geocod_origem:5300108,geom_origem:{type:"Point",coordinates:[-47.88061196,-15.78368965]},destinos:[{geocod_destino:5215603,geom_destino:{type:"Point",coordinates:[-48.28657588,-15.16421844]},adequado:216960,inadequado:0,adequacao:100},{geocod_destino:5300108,geom_destino:{type:"Point",coordinates:[-47.88061196,-15.78368965]},adequado:2960519.6,inadequado:140419.2,adequacao:95.47}]}]}},created:function(){this.geojson=this.geojson1},computed:{fluxoFinal:function(){var e=[];return this.fluxo.forEach((function(t){t.destinos.forEach((function(o){var a,r,i={geomDestino:null===o||void 0===o||null===(a=o.geom_destino)||void 0===a?void 0:a.coordinates,geomOrigem:null===t||void 0===t||null===(r=t.geom_origem)||void 0===r?void 0:r.coordinates,corOrigem:"#ffffff",corDestino:0===(null===o||void 0===o?void 0:o.adequacao)?"#ff0000":"#00FF00"};e.push(i)}))})),e},images:function(){return{water:"images/water-pattern.jpg","terrain-cgee":"images/terrain-pattern.jpg","tema-1-marker":"images/mobilidade.png","tema-1-circle":"images/mobilidade_2.png","tema-2-marker":"images/energia.png","tema-2-circle":"images/energia_2.png","tema-3-marker":"images/ambiente_construido.png","tema-3-circle":"images/ambiente_construido_2.png","tema-4-marker":"images/saneamento.png","tema-4-circle":"images/saneamento_2.png","tema-5-marker":"images/residuos_solidos.png","tema-5-circle":"images/residuos_solidos_2.png","tema-6-marker":"images/solucoes_natureza.png","tema-6-circle":"images/solucoes_natureza_2.png","tema-7-marker":"images/futuro_planejamento.png","tema-7-circle":"images/futuro_planejamento_2.png","tema-8-marker":"images/inovacao.png","tema-8-circle":"images/inovacao_2.png"}}},methods:{alert:function(){console.log("aaa")},featureenter:function(e){console.log(e)}}}),g=f,v=o("2877"),b=Object(v["a"])(g,d,y,!1,null,null,null),x=b.exports,k=(o("6cd4"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vue-mapbox",style:{position:"relative",width:e.myWidth,height:e.myHeight}},[o("div",{ref:"mapabaselayer",staticClass:"map-layer mapbox-map-container",staticStyle:{position:"absolute",left:"0px",top:"0",bottom:"0",right:"0",width:"100%"},attrs:{id:"mapaBaseLayer"}},[e.mapLoaded?o("div",[e._t("default")],2):e._e(),e.showLoader&&!e.mapLoaded?o("div",{staticClass:"loader"},[e._t("loader")],2):e._e(),e.devMode?o("div",{staticStyle:{position:"absolute",bottom:"0","font-size":"9px",padding:"0.4em","z-index":"10",background:"#00000066",color:"white"}},[e._v(e._s(e.camera))]):e._e()])])}),S=[],T=(o("caad"),o("c975"),o("d81d"),o("4ec9"),o("a9e3"),o("4fad"),o("d3b7"),o("2532"),o("3ca3"),o("ddb0"),o("5530")),$=(o("96cf"),o("1da1")),O=(o("ac6d"),o("9b02")),M=o.n(O),P=o("93c6"),C=o.n(P),L=o("b047c"),E=o.n(L),w=o("98dc"),_=o.n(w),F=["click","dblclick","mouseenter","mouseleave","mouseout","mousedown","mouseup","contextmenu","wheel","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","render","idle","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading","styleimagemissing"],I={name:"VueMapbox",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},showLoader:{type:Boolean,default:!0},accessToken:{type:String,default:""},mapStyle:{type:[String,Object],default:"mapbox://styles/mapbox/outdoors-v11"},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:24},zoom:{type:Number,default:4},center:{type:Array,default:function(){return[-53.048889,-14.951209500045001]}},hash:{type:[Boolean,String],default:!1},bounds:{type:Array,default:void 0},maxBounds:{type:Array,default:void 0},padding:{type:[Object,Number],default:0},otherOptions:{type:Object,default:function(){return{}}},images:{type:Object,default:function(){return{}}},devMode:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0}},provide:function(){var e=this;return{getMap:function(){return e.map},mapLoaded:this.mapLoaded,mapboxgl:function(){return e.mapboxgl},MapboxVueInstance:this}},data:function(){return{mapLoaded:!1,map:null,sources:null,layers:null,camera:""}},beforeCreate:function(){},created:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("created - vueMapbox"),window.mapboxgl){t.next=6;break}return t.next=4,o.e("mapboxgl-core").then(o.t.bind(null,"e192",7));case 4:a=t.sent,window.mapboxgl=a.default||a;case 6:e.mapboxgl=window.mapboxgl,window.mapboxgl.prewarm(),e.sources=new Map,e.layers=new Map,e.layersGroups=new Map,e.eventsOnMap=new Map,e.$nextTick((function(){e.createMap()}));case 13:case"end":return t.stop()}}),t)})))()},computed:{myHeight:function(){var e=this.height;return"number"===typeof e&&(e+="px"),e},myWidth:function(){var e=this.width;return"number"===typeof e&&(e+="px"),e}},watch:{bounds:function(e){this.map.fitBounds(e,{padding:this.padding})},maxBounds:function(e){this.map&&this.map.setMaxBounds(e)}},beforeUpdated:function(){console.log("beforeUpdated dom vueMapbox")},mounted:function(){console.log("Mounted - Mounted dom vueMapbox")},updated:function(){var e=this;console.log("Updated - updated dom vueMapbox"),this.$nextTick((function(){e.updateLayerOrder()}))},beforeDestroy:function(){this.map&&this.map.remove()},methods:{createMap:function(){var e=this;console.log("createding map - vueMapbox"),window.mapboxgl.prewarm(),""!==this.accessToken?window.mapboxgl.accessToken=this.accessToken:window.mapboxgl.accessToken="pk.eyJ1IjoibGVjZWxlcyIsImEiOiJjajUyZXBzbXEwZjYxMnFwOWFxeHd5ZDY3In0.dftZ4LdgXBkdZI0_l7pcNA",this.map=new window.mapboxgl.Map(Object(T["a"])({},this.otherOptions,{container:this.$refs.mapabaselayer,refreshExpiredTiles:!1,antialias:!0,style:this.mapStyle,center:this.center,zoom:this.zoom,hash:this.hash,bounds:this.bounds,maxBounds:this.maxBounds,interactive:this.interactive})),this.addPropsImages(),this.setupEvents(this.$listeners,this.map,F),console.log("setting mapa loaded"),this.map.on("load",(function(){var t=e;console.log("mapa loaded fired"),e.mapLoaded=!0,e.$emit("load",t,e.map)})),this.devMode&&this.map.on("moveend",(function(){e.camera=e.map.getZoom()}))},getMap:function(){return this.map},setupEvents:function(e,t,o,a){var r=this;e&&Object.entries(e).forEach((function(e){var i=e[0],n=e[1],s=function(e){n(e,r.map,r)},l=!1;0===i.indexOf("~")&&(l=!0,i=i.substring(1)),o.includes(i)&&(l?a?t.once(i,a,s):t.once(i,s):a?t.on(i,a,s):t.on(i,s))}))},addSource:function(e,t,o){this.map.getSource(e)&&(e=_()(e+t)),this.map.addSource(e,Object(T["a"])({type:t},o));var a=this.map.getSource(e);return this.sources.set(e,{id:e,type:t,options:o,instance:a}),this.sources.get(e)},removeSource:function(e){},updateSource:function(e,t,o){var a=this;this.sources.has(e)&&this.sources.delete(e);var r=this.map.getStyle().layers;r.forEach((function(t){t.source===e&&a.map.removeLayer(t.id)})),this.map.removeSource(e);var i=this.addSource(e,t,o);return r.forEach((function(t,o){if(t.source===e){var i=null===r||void 0===r?void 0:r[o-1];i?a.map.addLayer(t,i.id):a.map.addLayer(t)}})),i},getNewIdForLayer:function(e){var t=e;return this.map.getLayer(e)||(t=_()("layer"+e)),t},addLayerTemp:function(e){this.map.addLayer(e)},addLayer:function(e,t){var o=this,a=e.id;this.map.addLayer(e);this.map.getLayer(e.id);return this.layers.set(a,{id:a}),this.$nextTick((function(){return o.updateLayerOrder()})),this.map.once("idle",(function(){console.log("A styledata event occurred."),o.$nextTick((function(){return o.updateLayerOrder()}))})),a},updateLayerOrder:E()((function(){console.log("UPDATE LAYER ORDER ==============================================================================");var e=function e(t,o){if(o=o||[],Array.isArray(t))return t.forEach((function(t){e(t,o)})),o;var a;a=M()(t,"componentInstance")?M()(t,"componentInstance"):t,"VmLayer"===M()(a,"$options.name",M()(a,"componentOptions.Ctor.options.name"))&&o.push(a);var r=M()(a,"$children");return Array.isArray(r)&&r.forEach((function(t){e(t,o)})),o},t=e(this.$slots.default);if(t&&1!==t.length){var o=t.map((function(e,t){var o=e.componentInstance||e,a=M()(o,"$data.layerId"),r=M()(o,"$props.zIndex"),i=t;return r&&(i=parseInt(r)+i/10),{id:a,index:i}}));o=C()(o,["index"],["asc"]);this.map.getStyle().layers;for(var a=o.length;a>1;a--){var r=o[a-1].id;if(this.map.getLayer(r))if(a===o.length)this.map.moveLayer(r);else{var i=o[a].id;if(!this.map.getLayer(i))continue;this.map.moveLayer(r,i)}}}}),400),moveLayer:function(e,t){},addPropsImages:function(e){var t=this;this.map&&(e=e||this.images,Object.entries(e).forEach((function(e){var o=e[0],a=e[1];t.addImage(o,a)})))},addImage:function(e,t){var o=this;this.map&&this.map.loadImage(t,(function(a,r){a?(console.error(a),console.error(t)):o.map.hasImage(e)||o.map.addImage(e,r)}))},removeLayer:function(e){var t,o=this;this.map&&(this.layers.has(e)&&this.layers.delete(e),(null===(t=this.map)||void 0===t?void 0:t.getLayer(e))&&this.map.removeLayer(e),this.$nextTick((function(){return o.updateLayerOrder()})))},docEvents:function(){this.$emit("click"),this.$emit("dblclick"),this.$emit("mouseenter"),this.$emit("mouseleave"),this.$emit("mouseout"),this.$emit("contextmenu"),this.$emit("wheel"),this.$emit("touchstart"),this.$emit("touchend"),this.$emit("touchmove"),this.$emit("touchcancel"),this.$emit("movestart"),this.$emit("move"),this.$emit("moveend"),this.$emit("dragstart"),this.$emit("drag"),this.$emit("dragend"),this.$emit("zoomstart"),this.$emit("zoom"),this.$emit("zoomend"),this.$emit("rotatestart"),this.$emit("rotate"),this.$emit("rotateend"),this.$emit("pitchstart"),this.$emit("pitch"),this.$emit("pitchend"),this.$emit("boxzoomstart"),this.$emit("boxzoomend"),this.$emit("boxzoomcancel"),this.$emit("webglcontextlost"),this.$emit("webglcontextrestored"),this.$emit("load"),this.$emit("render"),this.$emit("idle"),this.$emit("error"),this.$emit("data"),this.$emit("styledata"),this.$emit("sourcedata"),this.$emit("dataloading"),this.$emit("styledataloading"),this.$emit("sourcedataloading"),this.$emit("styleimagemissing")}}},j=I,V=Object(v["a"])(j,k,S,!1,null,"df8293f4",null),z=V.exports,H=(o("99af"),o("ac1f"),o("5319"),o("18a5"),o("b0c0"),function(e){var t=e.$props,o={};return Object.entries(t).forEach((function(t){var a=t[0],r=t[1];void 0!==r&&e.$options.props[a].mapbox&&(a=e.$options.props[a].name||a,o[a]=r)})),o}),N=(o("b64b"),o("3852")),q=o.n(N),A=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o=[],a=function e(o,a){if(a=a||[],Array.isArray(o))return o.forEach((function(t){e(t,a)})),a;var r;r=M()(o,"componentInstance")?M()(o,"componentInstance"):o,M()(r,"$options.name",M()(r,"componentOptions.Ctor.options.name"))===t&&(a.push(r),console.log(M()(r,"$props.name")));var i=M()(r,"$children")||M()(r,"children");if(Array.isArray(i)&&i.forEach((function(t){e(t,a)})),q()(r,"$slots")){var n=Object.keys(r.$slots);n.forEach((function(t){e(r.$slots[t],a)}))}if(q()(r,"$scopedSlots")){var s=Object.keys(r.$scopedSlots);s.forEach((function(t){e(r.$scopedSlots[t](),a)}))}return a};if(o=a(e),0!==o.length)return o},B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{style:{maxHeight:e.myMaxHeight,overflow:"auto"}},[e._t("default")],2)},R=[],Z=["open","close"],D={name:"VmPopup",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{anchor:{type:String,default:"bottom",validator:function(e){return-1!==["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"].indexOf(e)}},open:{type:Boolean,default:!1},global:{type:Boolean,default:!1},center:{type:Array,default:function(){return[0,0]}},closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},closeOnMove:{type:Boolean,default:!1},offset:{type:[Number,Array],default:20},className:{type:String,default:""},maxWidth:{type:[Number,String],default:"240px"},maxHeight:{type:[Number,String],default:"auto"},trackPointer:{type:Boolean,default:!1},color:{type:String,default:"white"},textColor:{type:String,default:"black"},arrowColor:{type:String}},data:function(){return{popup:null}},computed:{myMaxHeight:function(){var e=this.maxHeight;return"number"===typeof e&&(e+="px"),e},myMaxWidth:function(){var e=this.maxWidth;return"number"===typeof e&&(e+="px"),e}},mounted:function(){var e=this;return Object($["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.createPopup();case 3:case"end":return t.stop()}}),t)})))()},watch:{center:function(e){this.setupPopup()},open:function(e){this.setupPopup()},trackPointer:function(e){this.setupPopup()},maxWidth:function(e){this.setupPopup()},color:function(e){this.setupPopup()}},beforeDestroy:function(){this.popup&&this.popup.remove()},methods:{createPopup:function(){var e=this;console.log("popup created!");var t={closeButton:this.closeButton,closeOnMove:this.closeOnMove,closeOnClick:this.closeOnClick,anchor:this.anchor,offset:this.offset,className:this.className,trackPointer:this.trackPointer,maxWidth:this.maxWidth},o=this.mapboxgl();this.popup=new o.Popup(t).setLngLat(this.center).setDOMContent(this.$el),this.popup.on("open",(function(){e.$emit("update:open",!0)})),this.popup.on("close",(function(){e.$emit("update:open",!1)})),this.popup.on("close",(function(){console.log("chamou fechou do popup")})),this.setupPopup(),this.MapboxVueInstance.setupEvents(this.$listeners,this.popup,Z)},setupPopup:function(){this.open?!1===this.popup.isOpen()&&this.popup.addTo(this.getMap()):!0===this.popup.isOpen()&&this.popup.remove(),this.popup.setLngLat(this.center),this.trackPointer&&this.popup.trackPointer(),this.popup.getMaxWidth()!==this.myMaxWidth&&this.popup.setMaxWidth(this.myMaxWidth);var e=this.popup.getElement();if(e){var t=e.querySelector(".mapboxgl-popup-content"),o=e.querySelector(".mapboxgl-popup-tip");t.style.backgroundColor=this.color,t.style.color=this.textColor,o.style.borderTopColor=this.arrowColor||this.color}},docEvents:function(){this.$emit("open"),this.$emit("close")}}},W=D,G=Object(v["a"])(W,B,R,!1,null,null,null),J=G.exports,U=o("0f5c"),X=o.n(U),Y=["dragstart","drag","dragend"],K={name:"VmMarker",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{center:{type:Array,default:function(){return[0,0]},required:!0},anchor:{type:String,default:"bottom",validator:function(e){return-1!==["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"].indexOf(e)},mapbox:!0},color:{type:String,default:"#3FB1CE",mapbox:!0},offset:{type:Array,mapbox:!0},draggable:{type:Boolean,mapbox:!0},rotation:{type:Number,mapbox:!0},minZoom:{type:[String,Number]},maxZoom:{type:[String,Number]},pitchAlignment:{type:String,validator:function(e){return-1!==["map","viewport","auto"].indexOf(e)},mapbox:!0},rotationAlignment:{type:String,validator:function(e){return-1!==["map","viewport","auto"].indexOf(e)},mapbox:!0},popUpContent:{type:String},metadata:{type:Object}},data:function(){return{marker:null,popupOpen:null,visible:!1}},computed:{},created:function(){console.count("marker created"),this.popup=null,this.markerElement=null,this.eventsFunction={},this.hasPopHover=!1,this.hasPopClick=!1,this.closeTimeout=null,(this.minZoom||this.maxZoom)&&this.getMap().on("zoom",this.markerVisibility)},mounted:function(){var e=this;console.count("marker mounted"),this.$nextTick((function(){return e.createMarker()}))},updated:function(){return Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},watch:{visible:function(e,t){!1===e&&!0===t&&"hover"===this.popupOpen&&(this.popupOpen=!1)},center:function(e){this.marker&&this.marker.setLngLat(e)},draggable:function(e){this.marker&&this.marker.setDraggable(e)},color:function(e){this.marker&&this.setupMarker()},anchor:function(e){this.marker&&this.setupMarker()},offset:function(e){this.marker&&this.marker.setOffset(e)},rotation:function(e){this.marker&&this.marker.setRotation(e)},rotationAlignment:function(e){this.marker&&this.marker.setRotationAlignment(e)},pitchAlignment:function(e){this.marker&&this.marker.setPitchAlignment(e)},popUpContent:function(e){this.marker&&this.updateHtmlContent()}},beforeDestroy:function(){console.count("remove marker"),this.getMap().off("zoom",this.markerVisibility),this.marker?(console.count("really remove marker"),this.marker.remove()):console.count("no marker to remove")},methods:{createMarker:function(){var e=this;console.log("setupMarker");var t=H(this);this.marker&&this.marker.remove(),this.$slots.marker&&(t.element=this.$refs.marker);var o=this.mapboxgl();this.marker=new o.Marker(t).setLngLat(this.center),this.MapboxVueInstance.setupEvents(this.$listeners,this.marker,Y),this.setupMarkerEvents(),this.$nextTick((function(){return e.setupMarker()}))},setupMarker:function(){this.markerElement=this.marker.getElement(),this.markerVisibility(),this.setupPopupEvents(),!0===M()(this.getPopupClick(),"componentOptions.propsData.open")&&(this.popupOpen="click")},setupMarkerEvents:function(){var e=this;this.marker&&(this.markerElement=this.marker.getElement(),Object.entries(this.$listeners).forEach((function(t){var o=t[0],a=t[1],r=!1,i=!1,n=!1,s=o.substr(0,2).replace(/[^a-z]/,"");"~"===s&&(r=!0),"!"===s&&(i=!0),"&"===s&&(n=!0),"~!"===s&&(r=!0,i=!0),o=o.replace(/^[^a-z]/,"");var l=a;e.markerElement.addEventListener(o,(function(e){return l(e)}),{capture:i,once:r,passive:n})})))},setupPopupEvents:function(){this.markerElement=this.marker.getElement(),this.hasPopupHover()&&(this.markerElement.addEventListener("mousemove",this.markerEventHover,{capture:!0}),this.markerElement.addEventListener("mouseleave",this.markerEventLeave,{capture:!1})),this.hasPopupClick()&&this.markerElement.addEventListener("click",this.markerEventClick,{capture:!0})},markerEventHover:function(e){e.stopPropagation(),clearTimeout(this.closeTimeout),this.closeTimeout=null,this.popupOpen||(this.popupOpen="hover")},markerEventLeave:function(e){var t=this;"hover"===this.popupOpen&&(this.closeTimeout=setTimeout((function(){t.popupOpen=!1}),100))},markerEventClick:function(e){e.stopPropagation(),"click"===this.popupOpen?this.popupOpen=!1:this.popupOpen="click"},markerVisibility:function(){var e=this.minZoom?this.minZoom:0,t=this.maxZoom?this.maxZoom:24,o=this.getMap().getZoom();o>=e&&o<=t&&!1===this.visible?(this.marker.addTo(this.getMap()),this.visible=!0):!0===this.visible&&(o<e||o>t)&&(this.marker.remove(),this.visible=!1)},getPopupHover:function(){return q()(this.$scopedSlots,"popupHover")?this.$scopedSlots.popupHover({metadata:this.metadata}):!!q()(this.$slots,"popupHover")&&this.$slots.popupHover},getPopupClick:function(){var e=A(this.$slots.default,"VmPopup");return q()(this.$scopedSlots,"popupClick")?this.$scopedSlots.popupClick({metadata:this.metadata}):q()(this.$slots,"popupClick")?this.$slots.popupClick:e?e[0]:!!this.popUpContent&&this.popUpContent},hasPopupHover:function(){return!(!q()(this.$scopedSlots,"popupHover")&&!q()(this.$slots,"popupHover"))},hasPopupClick:function(){var e=A(this.$slots.default,"VmPopup");return!!(q()(this.$scopedSlots,"popupClick")||q()(this.$slots,"popupClick")||e)},docEvents:function(){this.$emit("dragstart"),this.$emit("drag"),this.$emit("dragend"),this.$emit("click"),this.$emit("mouseleave"),this.$emit("mousemove"),this.$emit("mouseover"),this.$emit("**alldivmouseevents**")}},render:function(e){var t=this;console.log("marker render");var o,a,r,i=[],n={};if(this.marker&&(this.hasPopupClick()?this.marker.getElement().style.cursor="pointer":this.marker.getElement().style.cursor="hand"),"click"===this.popupOpen?(n={center:this.center,trackPointer:!1,closeOnClick:!0,closeButton:!0,open:!0},o=this.getPopupClick(),a="markerPopupClick"):"hover"===this.popupOpen&&(n={center:this.center,trackPointer:!1,closeButton:!1,closeOnClick:!1,open:!0},o=this.getPopupHover(),a="markerPopupHover"),o){var s=A(o,"VmPopup");r=s?s[0]:e(J,[o]),r&&r.$vnode&&(r=r.$vnode),r.key=a;var l,c=this.markerElement.getBoundingClientRect().height;if(this.anchor.indexOf("bottom")>-1?l=c+15:"center"===this.anchor?l=c/2:this.anchor.indexOf("top")>-1&&(l=4),n.offset=[0,-l],r.componentOptions.propsData=Object(T["a"])({},n,{},r.componentOptions.propsData),"click"===this.popupOpen){var p=M()(r,"componentOptions.listeners.close");X()(r.componentOptions,"listeners.close",(function(e){!0===t.visible&&(t.popupOpen=!1,p&&p(e))}))}}return this.$slots.marker&&i.push(e("div",{slot:"marker",ref:"marker"},[this.$slots.marker])),r&&this.visible&&i.push(r),e("div",{},[].concat(i))}},Q=K,ee=Object(v["a"])(Q,a,r,!1,null,null,null),te=ee.exports,oe=(o("a15b"),o("a434"),o("466d"),o("2909")),ae=o("53ca"),re=o("51f5"),ie=o.n(re),ne=o("9380"),se=o.n(ne),le=o("375a"),ce=o.n(le),pe=o("bba4"),ue=o.n(pe),he=["mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick","contextmenu","touchstart","touchend","touchcancel"],me={name:"VmLayer",inject:{getMap:"getMap",mapboxgl:"mapboxgl",MapboxVueInstance:"MapboxVueInstance",getSource:{from:"getSource",default:void 0}},props:{name:{type:String,default:""},type:{type:String,required:!0,validator:function(e){return-1!==["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background","custom"].indexOf(e)}},source:{type:[String,Object],mapbox:!0},customLayer:{type:Object,mapbox:!1},sourceLayer:{type:String,mapbox:!0,name:"source-layer"},filter:{type:Array,mapbox:!0},paint:{type:Object,mapbox:!0},layout:{type:Object,default:function(){return{}},mapbox:!0},maxzoom:{type:Number,default:24,mapbox:!0},minzoom:{type:Number,default:0,mapbox:!0},metadata:{type:Object,mapbox:!0},paintHover:{type:Object},paintClick:{type:Object},layoutHover:{type:Object},layoutClick:{type:Object},zIndex:{type:[Number,String]},classes:{type:[Array]},classesValueInterpolation:{type:String,default:"match",validator:function(e){return-1!==["match","step","interpolate"].indexOf(e)}},multipleFeatureSelectionOn:{type:[String,Boolean],default:!1,validator:function(e){return-1!==["shift","control","alt",!0,!1].indexOf(e)}},"background-color":{paint:!0,layerType:"background"},"background-opacity":{paint:!0,layerType:"background"},"background-pattern":{paint:!0,layerType:"background"},"fill-antialias":{paint:!0,layerType:"fill"},"fill-color":{paint:!0,layerType:"fill"},"fill-opacity":{paint:!0,layerType:"fill"},"fill-outline-color":{paint:!0,layerType:"fill"},"fill-pattern":{paint:!0,layerType:"fill"},"fill-sort-key":{layout:!0,layerType:"fill"},"fill-translate":{paint:!0,layerType:"fill"},"fill-translate-anchor":{paint:!0,layerType:"fill"},"line-blur":{paint:!0,layerType:"line"},"line-cap":{layout:!0,layerType:"line"},"line-color":{paint:!0,layerType:"line"},"line-dasharray":{paint:!0,layerType:"line"},"line-gap-width":{paint:!0,layerType:"line"},"line-gradient":{paint:!0,layerType:"line"},"line-join":{layout:!0,layerType:"line"},"line-miter-limit":{layout:!0,layerType:"line"},"line-offset":{paint:!0,layerType:"line"},"line-opacity":{paint:!0,layerType:"line"},"line-pattern":{paint:!0,layerType:"line"},"line-round-limit":{layout:!0,layerType:"line"},"line-sort-key":{layout:!0,layerType:"line"},"line-translate":{paint:!0,layerType:"line"},"line-translate-anchor":{paint:!0,layerType:"line"},"line-width":{paint:!0,layerType:"line"},"icon-allow-overlap":{layout:!0,layerType:"symbol"},"icon-anchor":{layout:!0,layerType:"symbol"},"icon-color":{paint:!0,layerType:"symbol"},"icon-halo-blur":{paint:!0,layerType:"symbol"},"icon-halo-color":{paint:!0,layerType:"symbol"},"icon-halo-width":{paint:!0,layerType:"symbol"},"icon-ignore-placement":{layout:!0,layerType:"symbol"},"icon-image":{layout:!0,layerType:"symbol"},"icon-keep-upright":{layout:!0,layerType:"symbol"},"icon-offset":{layout:!0,layerType:"symbol"},"icon-opacity":{paint:!0,layerType:"symbol"},"icon-optional":{layout:!0,layerType:"symbol"},"icon-padding":{layout:!0,layerType:"symbol"},"icon-pitch-alignment":{layout:!0,layerType:"symbol"},"icon-rotate":{layout:!0,layerType:"symbol"},"icon-rotation-alignment":{layout:!0,layerType:"symbol"},"icon-size":{layout:!0,layerType:"symbol"},"icon-text-fit":{layout:!0,layerType:"symbol"},"icon-text-fit-padding":{layout:!0,layerType:"symbol"},"icon-translate":{paint:!0,layerType:"symbol"},"icon-translate-anchor":{paint:!0,layerType:"symbol"},"symbol-avoid-edges":{layout:!0,layerType:"symbol"},"symbol-placement":{layout:!0,layerType:"symbol"},"symbol-sort-key":{layout:!0,layerType:"symbol"},"symbol-spacing":{layout:!0,layerType:"symbol"},"symbol-z-order":{layout:!0,layerType:"symbol"},"text-allow-overlap":{layout:!0,layerType:"symbol"},"text-anchor":{layout:!0,layerType:"symbol"},"text-color":{paint:!0,layerType:"symbol"},"text-field":{layout:!0,layerType:"symbol"},"text-font":{layout:!0,layerType:"symbol"},"text-halo-blur":{paint:!0,layerType:"symbol"},"text-halo-color":{paint:!0,layerType:"symbol"},"text-halo-width":{paint:!0,layerType:"symbol"},"text-ignore-placement":{layout:!0,layerType:"symbol"},"text-justify":{layout:!0,layerType:"symbol"},"text-keep-upright":{layout:!0,layerType:"symbol"},"text-letter-spacing":{layout:!0,layerType:"symbol"},"text-line-height":{layout:!0,layerType:"symbol"},"text-max-angle":{layout:!0,layerType:"symbol"},"text-max-width":{layout:!0,layerType:"symbol"},"text-offset":{layout:!0,layerType:"symbol"},"text-opacity":{paint:!0,layerType:"symbol"},"text-optional":{layout:!0,layerType:"symbol"},"text-padding":{layout:!0,layerType:"symbol"},"text-pitch-alignment":{layout:!0,layerType:"symbol"},"text-radial-offset":{layout:!0,layerType:"symbol"},"text-rotate":{layout:!0,layerType:"symbol"},"text-rotation-alignment":{layout:!0,layerType:"symbol"},"text-size":{layout:!0,layerType:"symbol"},"text-transform":{layout:!0,layerType:"symbol"},"text-translate":{paint:!0,layerType:"symbol"},"text-translate-anchor":{paint:!0,layerType:"symbol"},"text-variable-anchor":{layout:!0,layerType:"symbol"},"text-writing-mode":{layout:!0,layerType:"symbol"},"raster-brightness-max":{paint:!0,layerType:"raster"},"raster-brightness-min":{paint:!0,layerType:"raster"},"raster-contrast":{paint:!0,layerType:"raster"},"raster-fade-duration":{paint:!0,layerType:"raster"},"raster-hue-rotate":{paint:!0,layerType:"raster"},"raster-opacity":{paint:!0,layerType:"raster"},"raster-resampling":{paint:!0,layerType:"raster"},"raster-saturation":{paint:!0,layerType:"raster"},"circle-blur":{paint:!0,layerType:"circle"},"circle-color":{paint:!0,layerType:"circle"},"circle-opacity":{paint:!0,layerType:"circle"},"circle-pitch-alignment":{paint:!0,layerType:"circle"},"circle-pitch-scale":{paint:!0,layerType:"circle"},"circle-radius":{paint:!0,layerType:"circle"},"circle-sort-key":{layout:!0,layerType:"circle"},"circle-stroke-color":{paint:!0,layerType:"circle"},"circle-stroke-opacity":{paint:!0,layerType:"circle"},"circle-stroke-width":{paint:!0,layerType:"circle"},"circle-translate":{paint:!0,layerType:"circle"},"circle-translate-anchor":{paint:!0,layerType:"circle"},"fill-extrusion-base":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-color":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-height":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-opacity":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-pattern":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-translate":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-translate-anchor":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-vertical-gradient":{paint:!0,layerType:"fill-extrusion"},"heatmap-color":{paint:!0,layerType:"heatmap"},"heatmap-intensity":{paint:!0,layerType:"heatmap"},"heatmap-opacity":{paint:!0,layerType:"heatmap"},"heatmap-radius":{paint:!0,layerType:"heatmap"},"heatmap-weight":{paint:!0,layerType:"heatmap"},"hillshade-accent-color":{paint:!0,layerType:"hillshade"},"hillshade-exaggeration":{paint:!0,layerType:"hillshade"},"hillshade-highlight-color":{paint:!0,layerType:"hillshade"},"hillshade-illumination-anchor":{paint:!0,layerType:"hillshade"},"hillshade-illumination-direction":{paint:!0,layerType:"hillshade"},"hillshade-shadow-color":{paint:!0,layerType:"hillshade"},visibility:{layout:!0,layerType:"all"}},data:function(){return{layerId:null,sourceId:null,selectedFeatures:[],hoverFeatures:[],hasChildPopup:null,lastClick:null,lastHover:null,hasFeatureHover:!1,hasFeatureClick:!1}},computed:{myPaint:function(){var e=this.mountPaintLayoutObject("paint");return this.hasFeatureHover||this.hasFeatureClick?this.getFinalFeatureStateForPaintOrLayout(e,this.paintHover,this.paintClick):e},myLayout:function(){var e=this.mountPaintLayoutObject("layout");return this.hasFeatureHover||this.hasFeatureClick?this.getFinalFeatureStateForPaintOrLayout(e,this.layoutHover,this.layoutClick):e},layerInstance:function(){return this.getMap().getLayer(this.id)}},watch:{source:function(e){if("object"===Object(ae["a"])(e)){var t=this.getMap().getLayer(this.layerId).source;this.MapboxVueInstance.updateSource(t,e.type,Object(T["a"])({},e))}},minzoom:function(e){this.layerExist()&&this.getMap().setLayerZoomRange(this.layerId,this.minzoom,this.maxzoom)},maxzom:function(e){this.layerExist()&&this.getMap().setLayerZoomRange(this.layerId,this.minzoom,this.maxzoom)},zIndex:function(e){var t=this;console.log(e),this.$nextTick((function(){return t.MapboxVueInstance.updateLayerOrder()}))},filter:function(e){this.getMap().setFilter(this.layerId,e)},myPaint:function(e,t){var o=this;Object.entries(e).forEach((function(e){var a=e[0],r=e[1];JSON.stringify(r)!==JSON.stringify(t[a])&&o.layerExist()&&o.getMap().setPaintProperty(o.layerId,a,r)}))},myLayout:function(e,t){var o=this;Object.entries(e).forEach((function(e){var a=e[0],r=e[1];JSON.stringify(r)!==JSON.stringify(t[a])&&o.layerExist()&&o.getMap().setLayoutProperty(o.layerId,a,r)}))},selectedFeatures:function(e,t){var o=this,a=this.getMap();t.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{click:!1})})),e.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{click:!0})})),this.$emit("featureselect",e)},hoverFeatures:function(e,t){var o=this,a=this.getMap();t.length>0&&t.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{hover:!1})})),e.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{hover:!0})})),this.$emit("featurehover",e)}},created:function(){var e=this;this.popupOpen=!1;var t=H(this);if(!t.source){var o=this.getSource&&this.getSource();o&&o.id&&(t.source=o.id)}if(this.options=t,"custom"===this.type)this.addLayer();else if("string"===typeof this.options.source)if(this.getMap().getSource(this.options.source))this.addLayer();else{var a=function t(o){console.log(o),"source"==o.dataType&&o.sourceId===e.options.source&&(e.addLayer(),e.getMap().off("sourcedata",t))};this.getMap().on("sourcedata",a)}else this.addLayer()},mounted:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:this.setupLayerFeaturesEvents();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){this.layerId&&(console.log("destroying "+this.layerId),this.MapboxVueInstance.removeLayer(this.layerId),"object"===Object(ae["a"])(this.source)&&this.getMap().removeSource(this.sourceId))},methods:{layerExist:function(){var e=this.getMap().getLayer(this.layerId);return!!e},addLayer:function(){try{if(this.customLayer){var e=this.MapboxVueInstance.addLayer(this.customLayer);this.layerId=e}else{var t=this.MapboxVueInstance.getNewIdForLayer(this.name),o=this.MapboxVueInstance.addLayer(Object(T["a"])({},this.options,{id:t,type:this.type,paint:this.myPaint,layout:this.myLayout}));this.layerId=o,this.sourceId=this.getMap().getLayer(o).source,this.MapboxVueInstance.setupEvents(this.$listeners,this.getMap(),he,this.layerId,this.created_at,this.zIndex)}}catch(a){console.error("========================== Error adding Layer "+this.name),console.error("Error adding Layer "+this.name),console.log(this.myPaint),console.error(a)}},setupLayerFeaturesEvents:function(){this.paintHover||this.layoutHover||q()(this.$scopedSlots,"popupHover")||q()(this.$slots,"popupHover")?this.hasFeatureHover=!0:this.hasFeatureHover=!1,this.paintClick||this.layoutClick||q()(this.$scopedSlots,"popupClick")||q()(this.$slots,"popupClick")?this.hasFeatureClick=!0:this.hasFeatureClick=!1;var e=this.getMap();(this.hasFeatureHover||this.hasFeatureClick)&&(e.off("mousemove",this.layerId,this.featureMouseMoveEvent),e.off("mouseleave",this.layerId,this.featureMouseLeaveEvent),e.on("mousemove",this.layerId,this.featureMouseMoveEvent),e.on("mouseleave",this.layerId,this.featureMouseLeaveEvent)),this.hasFeatureClick&&(e.off("click",this.layerId,this.featureMouseClickEvent),e.on("click",this.layerId,this.featureMouseClickEvent),e.off("click",this.layerMouseClickOutEvent),e.on("click",this.layerMouseClickOutEvent))},featureMouseMoveEvent:function(e){if(this.popupOpen)return!1;var t=this.getMap().queryRenderedFeatures(e.point);if(M()(t,"[0].layer.id")!==this.layerId)return this.featureMouseLeaveEvent(e),!1;if(this.lastHover=e,e.features.length>0){if(this.hoverFeatures.map((function(e){return e.id})).join("")===e.features.map((function(e){return e.id})).join(""))return!1;this.hasFeatureClick&&(this.getMap().getCanvas().style.cursor="pointer"),this.hasFeatureHover&&(this.hoverFeatures=e.features)}},featureMouseLeaveEvent:function(e){if(this.hasFeatureClick&&this.getMap().getCanvas().style.removeProperty("cursor"),this.popupOpen)return!1;this.hoverFeatures=[]},featureMouseClickEvent:function(e){var t=this,o=this.getMap().queryRenderedFeatures(e.point);if(M()(o,"[0].layer.id")===this.layerId){this.lastClick=e;var a=Object(oe["a"])(this.selectedFeatures),r=[];e.features.length>0&&e.features.forEach((function(e){var o=ie()(t.selectedFeatures,{id:e.id});o>-1?a.splice(o,1):r.push(e)}));var i=!1;!0===this.multipleFeatureSelectionOn?i=!0:"string"===typeof this.multipleFeatureSelectionOn&&(!0===e.originalEvent[this.multipleFeatureSelectionOn+"Key"]&&(i=!0),"alt"===this.multipleFeatureSelectionOn&&!0===e.originalEvent.metaKey&&(i=!0)),i&&(r=r.concat(a)),this.selectedFeatures=r}else this.selectedFeatures=[]},layerMouseClickOutEvent:function(e){var t=this.getMap();if(null!==this.layerId){var o=t.queryRenderedFeatures(e.point,{layers:[this.layerId]});0===o.length&&(this.selectedFeatures=[])}},getFinalFeatureStateForPaintOrLayout:function(e,t,o){var a=Object(T["a"])({},e);return(this.hasFeatureHover||this.hasFeatureClick||this.hasChildPopup)&&Object.entries(a).forEach((function(e){var r=e[0],i=e[1],n=i;t&&t[r]&&(n=["case",["boolean",["feature-state","hover"],!1],t[r],i]),o&&o[r]&&(n=["case",["boolean",["feature-state","click"],!1],o[r],n]),a[r]=n})),a},mountPaintLayoutObject:function(e){var t=this,o=[];Object.entries(this.$options.props).forEach((function(a){var r=a[0],i=a[1];M()(i,e)&&M()(i,"layerType")===t.type&&(o.push(ce()(r)),o.push(ce()(r)+"-transition"))}));var a=this.$props[e]||{};return Object.keys(a).forEach((function(e){!1===o.includes(e)&&delete a[e]})),o.forEach((function(e){var o,r=e,i=ue()(r);o=M()(t,"$props[".concat(i,"]"))?t.$props[i]:M()(t,"$attrs[".concat(i,"]"))?t.$attrs[i]:a[r];var n=se()(t.classes,(function(e){return q()(e,r)}));if(n.length>0){var s=[],l=n[0].property;"match"===t.classesValueInterpolation?(s=["match",["get",l]],n.forEach((function(e,t){s.push(e.value),s.push(M()(e,r))})),s.push(o||s[s.length-1])):"step"===t.classesValueInterpolation?(s=["step",["to-number",["get",l]]],n.forEach((function(e,t){s.push(M()(e,r)),e.value&&s.push(e.value)}))):"interpolate"===t.classesValueInterpolation&&(s=e.match(/color/g)?["interpolate-hcl",["linear"],["to-number",["get",l]]]:["interpolate",["linear"],["to-number",["get",l]]],n.forEach((function(e,t){s.push(e.value),s.push(M()(e,r))}))),o=s}o&&(a[r]=o)})),a},docEvents:function(){this.$emit("mousedown"),this.$emit("mouseup"),this.$emit("mouseover"),this.$emit("mouseout"),this.$emit("mousemove"),this.$emit("mouseenter"),this.$emit("mouseleave"),this.$emit("click"),this.$emit("dblclick"),this.$emit("contextmenu"),this.$emit("touchstart"),this.$emit("touchend"),this.$emit("touchcancel")}},render:function(e){var t,o,a,r=this,i=null;if(0===this.hoverFeatures.length&&0===this.selectedFeatures.length||!q()(this.$scopedSlots,"popupHover")&&!q()(this.$scopedSlots,"popupClick")&&!q()(this.$slots,"popupHover")&&!q()(this.$slots,"popupClick"))return i;var n,s,l={};if(q()(this.$scopedSlots,"popupHover")?t=this.$scopedSlots.popupHover({features:this.hoverFeatures}):q()(this.$slots,"popupHover")&&(t=this.$slots.popupHover),q()(this.$scopedSlots,"popupClick")?o=this.$scopedSlots.popupClick({features:this.selectedFeatures}):q()(this.$slots,"popupClick")&&(o=this.$slots.popupClick),!t&&!o)return i;if(this.lastClick&&this.selectedFeatures.length>0&&o)a=o,n="layerPopupClick",l={center:[this.lastClick.lngLat.lng,this.lastClick.lngLat.lat],trackPointer:!1,closeOnClick:!0,closeButton:!0,open:!0};else{if(!(this.hoverFeatures.length>0&&t))return i;a=t,n="layerPopupOver",l={center:[this.lastHover.lngLat.lng,this.lastHover.lngLat.lat],trackPointer:!0,closeButton:!1,closeOnClick:!1,open:!0}}var c=A(a,"VmPopup");if(s=c?c[0]:e(J,[a]),s.componentOptions.propsData=Object(T["a"])({},s.componentOptions.propsData,{},l),"layerPopupClick"===n){this.popupOpen=!0;var p=M()(s,"componentOptions.listeners.close");X()(s.componentOptions,"listeners.close",(function(e){r.popupOpen=!1,r.selectedFeatures=[],r.hoverFeatures=[],p&&p(e)}))}return s.key=n+this.layerId,e("div",[s])}},de=me,ye=Object(v["a"])(de,i,n,!1,null,null,null),fe=ye.exports,ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.layerCreated?o("vm-layer",{attrs:{name:"arc"+this.name,customLayer:e.layer,zIndex:e.zIndex,type:"custom"}}):e._e()],1)},ve=[],be=o("60a4"),xe=o("4278"),ke={name:"VmLayerArc",inject:{getMap:"getMap",mapboxgl:"mapboxgl",MapboxVueInstance:"MapboxVueInstance"},props:{name:{type:String,required:!0},zIndex:{type:[Number,String]},data:{type:Array,required:!0},witdh:{type:[Number,Function],default:10},color:{type:String,default:"blue"},sourceColor:{type:[String,Function]},targetColor:{type:[String,Function]},sourcePosition:{type:[String,Function],default:"from"},targetPosition:{type:[String,Function],default:"to"}},data:function(){return{layerCreated:!1,id:!1}},destroyed:function(){this.layer=null},created:function(){this.layer=null},mounted:function(){var e=this;this.$nextTick((function(){e.addLayer()}))},watch:{"$props.data":function(e,t){this.layer&&this.layer.setProps({data:this.data})},"$props.width":function(e,t){var o=this;this.layer&&this.layer.setProps({getWidth:function(e){return o.getWidth(e)}})}},methods:{addLayer:function(){var e=this;this.id=this.MapboxVueInstance.getNewIdForLayer(this.name),this.layer=new xe["a"]({id:this.id,type:be["a"],data:this.data,autoHighlight:!0,pickable:!0,getWidth:function(t){return e.getWidth(t)},getSourcePosition:function(t){return e.getSourcePositionFunc(t)},getTargetPosition:function(t){return e.getTargetPositionFunc(t)},getSourceColor:function(t){return e.getSourceColorFunc(t)},getTargetColor:function(t){return e.getTargetColorFunc(t)}}),this.layerCreated=!0},getWidth:function(e){return"function"===typeof this.witdh?this.witdh(e):isNaN(this.witdh)?M()(e,this.witdh,5):this.witdh},getSourcePositionFunc:function(e){var t;return t="function"===typeof this.sourcePosition?this.sourcePosition(e):M()(e,this.sourcePosition,[-45,-15]),console.log(t),t},getTargetPositionFunc:function(e){var t;return t="function"===typeof this.targetPosition?this.targetPosition(e):M()(e,this.targetPosition,[-45,-15]),console.log(t),t},getSourceColorFunc:function(e){var t;return this.sourceColor||(t=this.color),t="function"===typeof this.sourceColor?this.sourceColor(e):q()(e,this.sourceColor)?M()(e,this.sourceColor):this.sourceColor,this.convertToArray(t)},getTargetColorFunc:function(e){var t;return this.targetColor||(t=this.color),t="function"===typeof this.targetColor?this.targetColor(e):q()(e,this.targetColor)?M()(e,this.targetColor):this.targetColor,this.convertToArray(t)},convertToArray:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,o,a){return t+t+o+o+a+a}));var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:[0,0,0]}},createLayer:function(){var e=this;return[new be["a"]({id:this.id,data:this.data,autoHighlight:!0,pickable:!0,getWidth:function(t){return e.getWidth(t)},getSourcePosition:function(t){return e.getSourcePositionFunc(t)},getTargetPosition:function(t){return e.getTargetPositionFunc(t)},getSourceColor:function(t){return e.getSourceColorFunc(t)},getTargetColor:function(t){return e.getTargetColorFunc(t)}})]}},Se=ke,Te=Object(v["a"])(Se,ge,ve,!1,null,null,null),$e=Te.exports,Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"none"}},[e._t("default")],2)},Me=[],Pe={name:"VmSource",inject:["getMap","mapboxgl","MapboxVueInstance"],provide:function(){return{getSource:this.getSource}},props:{name:{type:String,default:"",required:!0},type:{type:String,required:!0,default:"geojson",validator:function(e){return-1!==["vector","raster","raster-dem","geojson","image","video","canvas"].indexOf(e)}},options:{type:Object,required:!0}},data:function(){return{source:null}},watch:{"$props.options":function(e,t){"geojson"===this.type&&e&&e.data?this.source.instance.setData(e.data):JSON.stringify(e)!==JSON.stringify(t)&&(this.source=this.MapboxVueInstance.updateSource(this.source.id,this.type,Object(T["a"])({},e)))}},created:function(){var e=Object(T["a"])({},this.$props.options);this.source=this.MapboxVueInstance.addSource(this.name,this.type,e)},methods:{getSource:function(){return this.source}},beforeDestroy:function(){this.source&&(this.source=null)}},Ce=Pe,Le=Object(v["a"])(Ce,Oe,Me,!1,null,null,null),Ee=Le.exports,we={name:"vm-image",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{url:{type:String,required:!0},name:{type:String,required:!0}},created:function(){this.MapboxVueInstance.addImage(this.name,this.url)},render:function(e){return null}},_e=we,Fe=Object(v["a"])(_e,s,l,!1,null,null,null),Ie=Fe.exports,je={name:"VmLayerVector",inject:["getMap","mapboxgl","MapboxVueInstance","getSource"],props:{},created:function(){},data:function(){return{layerId:null,sourceId:null,selectedFeatures:[],hoverFeatures:[],hasChildPopup:null,lastClick:null}},render:function(e){return null}},Ve=je,ze=Object(v["a"])(Ve,c,p,!1,null,null,null),He=ze.exports,Ne=function(e,t){var o,a,r,i,n=1;if(2==e.length)n=e[1];else for(var s=0;s<e.length-2;s+=2){if(o=e[s],a=e[s+2],r=e[s+1],i=e[s+3],t>=o&&t<=a){n=(t-a)/(o-a)*(r-i)+i;break}if(t<=o){n=r;break}n=i}return n},qe={name:"VmMarkerDonut",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{radius:{type:[Number,String]},chartWidth:{type:[Number,String],default:"25%"},fontSize:{type:[Number,String]},dataSet:{type:Array,default:function(){return[4,7,40]}},dataColor:{type:Array,default:function(){return["red","green","blue"]}},zoomScale:{type:Array}},data:function(){return{currentZoom:null}},computed:{myradius:function(){return Number(this.radius)}},created:function(){this.zoomScale&&this.getMap()&&this.getMap().on("zoom",this.scaleMarker)},mounted:function(){var e=this;this.$nextTick((function(){return e.scaleMarker()}))},beforeDestroy:function(){this.zoomScale&&this.getMap()&&this.getMap().off("zoom",this.scaleMarker)},methods:{scaleMarker:function(e){if(this.zoomScale){var t=this.getMap().getZoom(),o=Ne(this.zoomScale,t);this.$refs.marker.style.transform="scale(".concat(o,")"),this.$refs.marker.style.transformOrigin="center"}},createDonutChart:function(e,t,o,a,r){for(var i=[],n=e,s=0,l=0;l<n.length;l++)i.push(s),s+=n[l];r=r||(s>=1e3?20:s>=100?18:s>=10?16:14);var c,p=o||(s>=1e3?50:s>=100?32:s>=10?24:18);c="string"===typeof a&&a.indexOf("%")>0?Math.round(p*(1-parseInt(a)/100)):parseInt(a);var u=2*p,h='<div><svg width="'+u+'" height="'+u+'" viewbox="0 0 '+u+" "+u+'" text-anchor="middle" style="font: '+r+'px sans-serif">';for(l=0;l<n.length;l++)h+=this.donutSegment(i[l]/s,(i[l]+n[l])/s,p,c,t[l]);return h+='<circle cx="'+p+'" cy="'+p+'" r="'+c+'" fill="white" /><text dominant-baseline="central" transform="translate('+p+", "+p+')">'+s.toLocaleString()+"</text></svg></div>",h},donutSegment:function(e,t,o,a,r){t-e===1&&(t-=1e-5);var i=2*Math.PI*(e-.25),n=2*Math.PI*(t-.25),s=Math.cos(i),l=Math.sin(i),c=Math.cos(n),p=Math.sin(n),u=t-e>.5?1:0;return['<path d="M',o+a*s,o+a*l,"L",o+o*s,o+o*l,"A",o,o,0,u,1,o+o*c,o+o*p,"L",o+a*c,o+a*p,"A",a,a,0,u,0,o+a*s,o+a*l,'" fill="'+r+'" />'].join(" ")}},render:function(e){var t=this.createDonutChart(this.dataSet,this.dataColor,this.myradius,this.chartWidth,parseInt(this.fontSize)),o=[],a=e("div",{style:{position:"relative",textAlign:"center"},slot:"marker",ref:"marker"},[e("div",{domProps:{innerHTML:t}}),this.$slots.marker]);return o.push(a),Object.entries(this.$slots).forEach((function(t){var a=t[0],r=t[1];"marker"!=a&&o.push(e("div",{slot:a,ref:a},r))})),e(te,{props:Object(T["a"])({},this.$attrs,{},this.$props,{anchor:"center"}),on:Object(T["a"])({},this.$listeners)},[].concat(o,[this.$slots.default]))}},Ae=qe,Be=o("9439"),Re=o.n(Be),Ze=Object(v["a"])(Ae,u,h,!1,null,null,null);"function"===typeof Re.a&&Re()(Ze);var De=Ze.exports,We={VueMapbox:z,VmMarker:te,VmPopup:J,VmLayer:fe,VmLayerArc:$e,VmSource:Ee,VmLayerVector:He,VmMarkerDonut:De,VmImage:Ie,install:function(e){e.component("VueMapbox",z),e.component("VmLayerArc",$e),e.component("VmMarker",te),e.component("VmPopup",J),e.component("VmLayer",fe),e.component("VmSource",Ee),e.component("VmImage",Ie),e.component("VmVectorLayersSource",He),e.component("VmMarkerDonut",De)}};m["a"].config.productionTip=!1,m["a"].config.MapBoxAccessToken="pk.eyJ1IjoibGVjZWxlcyIsImEiOiJjajUyZXBzbXEwZjYxMnFwOWFxeHd5ZDY3In0.dftZ4LdgXBkdZI0_l7pcNA",m["a"].use(We),new m["a"]({render:function(e){return e(x)}}).$mount("#app")},9439:function(e,t){}});