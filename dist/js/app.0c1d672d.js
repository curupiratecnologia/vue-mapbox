(function(e){function t(t){for(var a,n,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)n=s[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,s=1;s<o.length;s++){var l=o[s];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=o[0]))}return e}var a={},r={app:0},i=[];function n(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=a,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"11ec":function(e,t,o){"use strict";var a=o("1afa"),r=o.n(a);r.a},"1afa":function(e,t,o){var a=o("7dff");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=o("499e").default;r("04f858a6",a,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("center",[o("VueMapbox",{key:"mapbox",ref:"vuemapbox",attrs:{hash:"pos",mapStyle:"mapbox://styles/mapbox/dark-v10",height:"700px",width:"900px",images:e.images},on:{load:e.loaded}},[o("vmLayer",{attrs:{name:"myLayer",source:{type:"geojson",generateId:!0,data:"https://servicodados.ibge.gov.br/api/v2/malhas/52?formato=application/vnd.geo+json&resolucao=5&qualidade=4"},type:"fill",paint:{"fill-color":"#ff7700","fill-opacity":.6},"paint-hover":{"fill-color":"#ff7799","fill-opacity":1},"paint-click":{"fill-color":"blue","fill-opacity":1},multipleFeatureSelectionOn:"alt"},scopedSlots:e._u([{key:"popupHover",fn:function(t){return[t.features?o("vm-popup",{attrs:{"max-width":"200px","max-height":"290px",color:"#2E2D2D","text-color":"white"}},[o("h5",{staticStyle:{"font-size":"12px",color:"#FFFFFF66","letter-spacing":"0",margin:"0"}},[e._v(" "+e._s(t.features[0].properties)+" ")])]):e._e()]}},{key:"popupClick",fn:function(t){return[t.features?o("vm-popup",{attrs:{"max-width":"200px","max-height":"290px",color:"#2E2D2D","text-color":"white"}},[o("h5",{staticStyle:{"font-size":"12px",color:"#FFFFFF66","letter-spacing":"0",margin:"0"}},[e._v(" "+e._s(t.features[0].properties)+" ")])]):e._e()]}}])})],1),o("VueMapbox",{key:"mapbox2",ref:"vuemapbox2",attrs:{mapStyle:"mapbox://styles/mapbox/dark-v10",height:"700px",width:"900px",images:e.images}},[o("vmLayer",{key:"layer2",attrs:{name:"myLayer",source:{type:"geojson",generateId:!0,data:"https://servicodados.ibge.gov.br/api/v2/malhas/52?formato=application/vnd.geo+json&resolucao=5&qualidade=4"},type:"fill",paint:{"fill-color":"#ff7700","fill-opacity":.6},"paint-hover":{"fill-color":"#ff7799","fill-opacity":1},"paint-click":{"fill-color":"blue","fill-opacity":1},multipleFeatureSelectionOn:"alt"},scopedSlots:e._u([{key:"popupHover",fn:function(t){return[t.features?o("vm-popup",{attrs:{"max-width":"200px","max-height":"290px",color:"#2E2D2D","text-color":"white"}},[o("h5",{staticStyle:{"font-size":"12px",color:"#FFFFFF66","letter-spacing":"0",margin:"0"}},[e._v(" "+e._s(t.features[0].properties)+" ")])]):e._e()]}},{key:"popupClick",fn:function(t){return[t.features?o("vm-popup",{attrs:{"max-width":"200px","max-height":"290px",color:"#2E2D2D","text-color":"white"}},[o("h5",{staticStyle:{"font-size":"12px",color:"#FFFFFF66","letter-spacing":"0",margin:"0"}},[e._v(" "+e._s(t.features[0].properties)+" ")])]):e._e()]}}])})],1)],1),o("input",{directives:[{name:"model",rawName:"v-model",value:e.opacity,expression:"opacity"}],attrs:{type:"range",min:"0",max:"1",step:"0.1"},domProps:{value:e.opacity},on:{__r:function(t){e.opacity=t.target.value}}}),e._v(" color: "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"color"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.color)?e._i(e.color,null)>-1:e.color},on:{change:function(t){var o=e.color,a=t.target,r=!!a.checked;if(Array.isArray(o)){var i=null,n=e._i(o,i);a.checked?n<0&&(e.color=o.concat([i])):n>-1&&(e.color=o.slice(0,n).concat(o.slice(n+1)))}else e.color=r}}}),e._v(" "+e._s(e.color)+" "+e._s(e.capagClassesEstadual)+" fill "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.fill,expression:"fill"}],attrs:{type:"text"},domProps:{value:e.fill},on:{input:function(t){t.target.composing||(e.fill=t.target.value)}}})],1)},i=[],n=(o("4160"),o("d81d"),o("159b"),{name:"App",data:function(){return{color:!1,opacity:1,show:!0,center:[-45,-15],drag:!1,open:!0,label:"a",mode:0,fill:"#ff7700",dataSet:[100,4,7],ano:2018,dataJoin:[{id:4200101,color:"#ffffff"},{id:4109401,color:"#ffffff"},{id:5107305,color:"#ffffff"}],geojson1:{type:"FeatureCollection",features:[{type:"Feature",properties:{tipoRegiao:"estado",nome:"Rio de Janeiro",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"33",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-42.0711523406202,-22.0720646645004]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"São Paulo",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"35",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-49.1831841692549,-22.5736727410571]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Paraná",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"41",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-51.8183643619047,-24.6344451045557]}}]},geojson2:{type:"FeatureCollection",features:[{type:"Feature",properties:{tipoRegiao:"estado",nome:"Pará",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"15",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-52.0029177013392,-3.64654901351252]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Minas Gerais",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"31",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-45.2120202503997,-18.6336315895962]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Esprito Santo",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"32",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-40.4467034518567,-19.6054031735828]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Rio de Janeiro",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"},6:{nome:"Soluções Baseadas na Natureza (NBS)",total:3,cor:"#f97566"}},geocod:"33",colorSet:["#984593","#f97566"],dataSet:[1,3],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-42.0711523406202,-22.0720646645004]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"São Paulo",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"},6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"35",colorSet:["#984593","#f97566"],dataSet:[1,1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-49.1831841692549,-22.5736727410571]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Paraná",temas:{1:{nome:"Mobilidade",total:1,cor:"#984593"}},geocod:"41",colorSet:["#984593"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-51.8183643619047,-24.6344451045557]}},{type:"Feature",properties:{tipoRegiao:"estado",nome:"Distrito Federal",temas:{6:{nome:"Soluções Baseadas na Natureza (NBS)",total:1,cor:"#f97566"}},geocod:"53",colorSet:["#f97566"],dataSet:[1],cluster:!0},geometry:{type:"Point",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4674"}},coordinates:[-47.7808785770608,-15.7754886310227]}}]},geojson3:{type:"FeatureCollection",features:[]},geojson:{},fluxo:[{geocod_origem:5219902,geom_origem:{type:"Point",coordinates:[-49.26031485,-15.93202096]},destinos:[{geocod_destino:5219902,geom_destino:{type:"Point",coordinates:[-49.26031485,-15.93202096]},adequado:0,inadequado:4900,adequacao:0}]},{geocod_origem:5220108,geom_origem:{type:"Point",coordinates:[-50.37482105,-16.51410686]},destinos:[{geocod_destino:5220108,geom_destino:{type:"Point",coordinates:[-50.37482105,-16.51410686]},adequado:0,inadequado:61800,adequacao:0}]},{geocod_origem:5220264,geom_origem:{type:"Point",coordinates:[-48.66342725,-17.05642588]},destinos:[{geocod_destino:5220264,geom_destino:{type:"Point",coordinates:[-48.66342725,-17.05642588]},adequado:0,inadequado:2742.9,adequacao:0}]},{geocod_origem:5221007,geom_origem:{type:"Point",coordinates:[-49.60258016,-16.05500387]},destinos:[{geocod_destino:5221007,geom_destino:{type:"Point",coordinates:[-49.60258016,-16.05500387]},adequado:0,inadequado:3720,adequacao:0}]},{geocod_origem:5221304,geom_origem:{type:"Point",coordinates:[-47.78063797,-18.35978943]},destinos:[{geocod_destino:5221304,geom_destino:{type:"Point",coordinates:[-47.78063797,-18.35978943]},adequado:0,inadequado:21880,adequacao:0}]},{geocod_origem:5221700,geom_origem:{type:"Point",coordinates:[-49.67938453,-15.50501229]},destinos:[{geocod_destino:5221700,geom_destino:{type:"Point",coordinates:[-49.67938453,-15.50501229]},adequado:0,inadequado:56e3,adequacao:0}]},{geocod_origem:5222005,geom_origem:{type:"Point",coordinates:[-48.50667118,-16.74573646]},destinos:[{geocod_destino:5222005,geom_destino:{type:"Point",coordinates:[-48.50667118,-16.74573646]},adequado:0,inadequado:39130,adequacao:0}]},{geocod_origem:5222054,geom_origem:{type:"Point",coordinates:[-49.80746824,-17.73092192]},destinos:[{geocod_destino:5222054,geom_destino:{type:"Point",coordinates:[-49.80746824,-17.73092192]},adequado:0,inadequado:27533.1,adequacao:0}]},{geocod_origem:5300108,geom_origem:{type:"Point",coordinates:[-47.88061196,-15.78368965]},destinos:[{geocod_destino:5215603,geom_destino:{type:"Point",coordinates:[-48.28657588,-15.16421844]},adequado:216960,inadequado:0,adequacao:100},{geocod_destino:5300108,geom_destino:{type:"Point",coordinates:[-47.88061196,-15.78368965]},adequado:2960519.6,inadequado:140419.2,adequacao:95.47}]}]}},created:function(){this.geojson=this.geojson1},computed:{capagClassesEstadual:function(){return this.color?"#6666FF":"#666666"},fluxoFinal:function(){var e=[];return this.fluxo.forEach((function(t){t.destinos.forEach((function(o){var a,r,i={geomDestino:null===o||void 0===o||null===(a=o.geom_destino)||void 0===a?void 0:a.coordinates,geomOrigem:null===t||void 0===t||null===(r=t.geom_origem)||void 0===r?void 0:r.coordinates,corOrigem:"#ffffff",corDestino:0===(null===o||void 0===o?void 0:o.adequacao)?"#ff0000":"#00FF00"};e.push(i)}))})),e},images:function(){return{water:"images/water-pattern.jpg","terrain-cgee":"images/terrain-pattern.jpg","tema-1-marker":"images/mobilidade.png","tema-1-circle":"images/mobilidade_2.png","tema-2-marker":"images/energia.png","tema-2-circle":"images/energia_2.png","tema-3-marker":"images/ambiente_construido.png","tema-3-circle":"images/ambiente_construido_2.png","tema-4-marker":"images/saneamento.png","tema-4-circle":"images/saneamento_2.png","tema-5-marker":"images/residuos_solidos.png","tema-5-circle":"images/residuos_solidos_2.png","tema-6-marker":"images/solucoes_natureza.png","tema-6-circle":"images/solucoes_natureza_2.png","tema-7-marker":"images/futuro_planejamento.png","tema-7-circle":"images/futuro_planejamento_2.png","tema-8-marker":"images/inovacao.png","tema-8-circle":"images/inovacao_2.png"}}},methods:{alert:function(){},featureenter:function(e){},loaded:function(e,t){window.map=t,t.on("render",(function(e){console.count("render event occurred."),console.log("render event occurred.",e)}))}}}),s=n,l=(o("7faf"),o("2877")),c=Object(l["a"])(s,r,i,!1,null,null,null),u=c.exports,p=(o("6cd4"),o("7cd6"));a["a"].use(p["a"]),a["a"].config.productionTip=!1,a["a"].config.MapBoxAccessToken="pk.eyJ1IjoibGVjZWxlcyIsImEiOiJjajUyZXBzbXEwZjYxMnFwOWFxeHd5ZDY3In0.dftZ4LdgXBkdZI0_l7pcNA",a["a"].use(p["a"]),new a["a"]({render:function(e){return e(u)}}).$mount("#app")},"7cd6":function(e,t,o){"use strict";(function(e){o("4160"),o("4fad"),o("159b");var a=o("d0af"),r=o("b635"),i=function(e){i.installed||(i.installed=!0,Object.entries(r).forEach((function(t){var o=Object(a["a"])(t,2),r=o[0],i=o[1];e.component(r,i)})))},n={install:i};if("false"===Object({VUE_APP_CLI_UI_URL:"",NODE_ENV:"production",VUE_APP_MAPBOX_ACCESS_TOKEN:"pk.eyJ1IjoibGVjZWxlcyIsImEiOiJjajUyZXBzbXEwZjYxMnFwOWFxeHd5ZDY3In0.dftZ4LdgXBkdZI0_l7pcNA",BASE_URL:""}).ES_BUILD){var s=null;"undefined"!==typeof window?s=window.Vue:"undefined"!==typeof e&&(s=e.Vue),s&&s.use(n)}t["a"]=n}).call(this,o("c8ba"))},"7dff":function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,".mapboxgl-popup-close-button{color:currentColor!important}",""]),e.exports=t},"7faf":function(e,t,o){"use strict";var a=o("b7f3"),r=o.n(a);r.a},"8c9f":function(e,t,o){var a=o("f6f5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=o("499e").default;r("ed8a46b8",a,!0,{sourceMap:!1,shadowMode:!1})},9439:function(e,t){},b371:function(e,t,o){"use strict";var a=o("8c9f"),r=o.n(a);r.a},b635:function(e,t,o){"use strict";o.r(t),o.d(t,"VueMapbox",(function(){return M})),o.d(t,"VmSource",(function(){return L})),o.d(t,"VmMarker",(function(){return U})),o.d(t,"VmPopup",(function(){return B})),o.d(t,"VmLayer",(function(){return Se})),o.d(t,"VmLayerArc",(function(){return we})),o.d(t,"VmImage",(function(){return je})),o.d(t,"VmLayerVector",(function(){return Ne})),o.d(t,"VmMarkerDonut",(function(){return qe})),o.d(t,"LoadingComponent",(function(){return Ue})),o.d(t,"ErrorComponent",(function(){return Qe}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"vue-mapbox",style:{position:"relative",width:e.myWidth,height:e.myHeight}},[o("div",{ref:"mapabaselayer",staticClass:"map-layer mapbox-map-container",staticStyle:{position:"absolute",left:"0px",top:"0",bottom:"0",right:"0",width:"100%"},attrs:{id:"mapaBaseLayer"}},[e.mapLoaded?o("div",[e._t("default")],2):e._e(),e.showLoader&&!e.mapLoaded?o("div",{staticClass:"loader"},[e._t("loader")],2):e._e(),e.devMode?o("div",{staticStyle:{position:"absolute",bottom:"0","font-size":"9px",padding:"0.4em","z-index":"10",background:"#00000066",color:"white"}},[e._v(e._s(e.camera))]):e._e()])])},r=[],i=(o("4160"),o("caad"),o("c975"),o("d81d"),o("4ec9"),o("a9e3"),o("4fad"),o("d3b7"),o("2532"),o("3ca3"),o("5cc6"),o("9a8c"),o("a975"),o("735e"),o("c1ac"),o("d139"),o("3a7b"),o("d5d6"),o("82f8"),o("e91f"),o("60bd"),o("5f96"),o("3280"),o("3fcc"),o("ca91"),o("25a1"),o("cd26"),o("3c5d"),o("2954"),o("649e"),o("219c"),o("170b"),o("b39a"),o("72f7"),o("159b"),o("ddb0"),o("f3f3")),n=(o("96cf"),o("c964")),s=(o("b64b"),o("9b02")),l=o.n(s),c=o("3852"),u=o.n(c),p=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o=[],a=function e(o,a){if(a=a||[],Array.isArray(o))return o.forEach((function(t){e(t,a)})),a;var r;r=l()(o,"componentInstance")?l()(o,"componentInstance"):o,l()(r,"$options.name",l()(r,"componentOptions.Ctor.options.name"))===t&&a.push(r);var i=l()(r,"$children")||l()(r,"children");if(Array.isArray(i)&&i.forEach((function(t){e(t,a)})),u()(r,"$slots")){var n=Object.keys(r.$slots);n.forEach((function(t){e(r.$slots[t],a)}))}if(u()(r,"$scopedSlots")){var s=Object.keys(r.$scopedSlots);s.forEach((function(t){e(r.$scopedSlots[t](),a)}))}return a};if(o=a(e),0!==o.length)return o},d=o("93c6"),h=o.n(d),m=o("b047c"),y=o.n(m),f=o("98dc"),g=o.n(f);o("ac1f"),o("466d");function v(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(t){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=function(e){return new Promise((function(t,o){var a;e.match(/js$/g)?(a=document.createElement("script"),a.async=!0,a.src=e):e.match(/css$/g)&&(a=document.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=e),a.onload=function(){console.count("resolve -"+e),t(e)},a.onerror=function(){o(e)},document.getElementsByTagName("body")[0].appendChild(a)}))},a=t.map(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}()),e.next=4,Promise.all(a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var x,k,S=["click","dblclick","mouseenter","mouseleave","mouseout","mousedown","mouseup","contextmenu","wheel","touchstart","touchend","touchmove","touchcancel","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","pitchstart","pitch","pitchend","boxzoomstart","boxzoomend","boxzoomcancel","webglcontextlost","webglcontextrestored","load","render","idle","error","data","styledata","sourcedata","dataloading","styledataloading","sourcedataloading","styleimagemissing"],O={name:"VueMapbox",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},showLoader:{type:Boolean,default:!0},accessToken:{type:String,default:""},layersCanRaname:{type:Boolean,default:!0},mapStyle:{type:[String,Object],default:"mapbox://styles/mapbox/outdoors-v11"},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:24},zoom:{type:Number,default:4},center:{type:Array,default:function(){return[-53.048889,-14.951209500045001]}},hash:{type:[Boolean,String],default:!1},bounds:{type:Array,default:void 0},maxBounds:{type:Array,default:void 0},padding:{type:[Object,Number],default:0},otherOptions:{type:Object,default:function(){return{}}},images:{type:Object,default:function(){return{}}},devMode:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0}},provide:function(){var e=this;return{getMap:function(){return e.map},mapLoaded:this.mapLoaded,mapboxgl:function(){return e.mapboxgl},MapboxVueInstance:this}},data:function(){return{mapLoaded:!1,map:null,sources:null,layers:null,camera:""}},beforeCreate:function(){},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(window.mapboxgl){t.next=11;break}return o=["https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.js","https://api.mapbox.com/mapbox-gl-js/v2.3.0/mapbox-gl.css"],t.prev=2,t.next=5,v(o);case 5:t.next=11;break;case 7:throw t.prev=7,t.t0=t["catch"](2),console.error(t.t0),new Error("Erro loading mapbox from its CDN. Please, make sure your internet is ok, insert mapbox manually in your html ");case 11:if(window.mapboxgl){t.next=13;break}throw new Error("Erro loading mapbox from its CDN. Please, make sure your internet is ok, insert mapbox manually in your html ");case 13:e.mapboxgl=window.mapboxgl,window.mapboxgl.prewarm(),e.sources=new Map,e.layers=new Map,e.layersGroups=new Map,e.eventsOnMap=new Map,e.$nextTick((function(){e.createMap()}));case 20:case"end":return t.stop()}}),t,null,[[2,7]])})))()},computed:{myHeight:function(){var e=this.height;return"number"===typeof e&&(e+="px"),e},myWidth:function(){var e=this.width;return"number"===typeof e&&(e+="px"),e}},watch:{bounds:function(e){this.map.fitBounds(e,{padding:this.padding})},maxBounds:function(e){this.map&&this.map.setMaxBounds(e)}},beforeUpdated:function(){},mounted:function(){},updated:function(){var e=this;this.$nextTick((function(){e.updateLayerOrder()}))},beforeDestroy:function(){this.map&&this.map.remove()},methods:{createMap:function(){var e=this;window.mapboxgl.prewarm(),""!==this.accessToken?window.mapboxgl.accessToken=this.accessToken:window.mapboxgl.accessToken="pk.eyJ1IjoibGVjZWxlcyIsImEiOiJjajUyZXBzbXEwZjYxMnFwOWFxeHd5ZDY3In0.dftZ4LdgXBkdZI0_l7pcNA",this.map=new window.mapboxgl.Map(Object(i["a"])(Object(i["a"])({},this.otherOptions),{},{container:this.$refs.mapabaselayer,refreshExpiredTiles:!1,antialias:!0,style:this.mapStyle,center:this.center,zoom:this.zoom,hash:this.hash,bounds:this.bounds,maxBounds:this.maxBounds,minZoom:this.minZoom,maxZoom:this.maxZoom,interactive:this.interactive})),this.addPropsImages(),this.setupEvents(this.$listeners,this.map,S),this.map.on("load",(function(){var t=e;e.mapLoaded=!0,e.$emit("load",t,e.map)})),this.devMode&&this.map.on("moveend",(function(){e.camera=e.map.getZoom()}));var t=function t(){e.map.once("idle",(function(){e.updateLayerOrder(),setTimeout(t,500)}))};t(),this.map.on("moveend",(function(){e.updateLayerOrder()}))},getMap:function(){return this.map},setupEvents:function(e,t,o,a){var r=this;e&&Object.entries(e).forEach((function(e){var i=e[0],n=e[1],s=function(e){n(e,r.map,r)},l=!1;0===i.indexOf("~")&&(l=!0,i=i.substring(1)),o.includes(i)&&(l?a?t.once(i,a,s):t.once(i,s):a?t.on(i,a,s):t.on(i,s))}))},addSource:function(e,t,o){this.map.getSource(e)&&this.layersCanRaname&&(e=g()(e+t)),this.map.addSource(e,Object(i["a"])({type:t},o));var a=this.map.getSource(e);return this.sources.set(e,{id:e,type:t,options:o,instance:a}),this.sources.get(e)},getSource:function(e){return!!this.sources.has(e)&&this.sources.get(e)},removeSource:function(e){},updateSource:function(e,t,o){var a,r=this;this.sources.has(e)&&this.sources.delete(e);var i=null===(a=this.map.getStyle())||void 0===a?void 0:a.layers;if(i){i.forEach((function(t){t.source===e&&r.map.removeLayer(t.id)})),this.map.removeSource(e);var n=this.addSource(e,t,o);return i.forEach((function(t,o){if(t.source===e){var a=null===i||void 0===i?void 0:i[o-1];a?r.map.addLayer(t,a.id):r.map.addLayer(t)}})),n}},getNewIdForLayer:function(e){var t=e;return!this.map.getLayer(e)&&this.layersCanRaname&&(t=g()("layer"+e)),t},addLayerTemp:function(e){this.map.addLayer(e)},addLayer:function(e,t){var o=this,a=e.id;this.map.addLayer(e);this.map.getLayer(e.id);return this.layers.set(a,{id:a}),this.$nextTick((function(){return o.updateLayerOrder()})),this.map.once("idle",(function(){o.$nextTick((function(){return o.updateLayerOrder()}))})),a},updateLayerOrder:y()((function(){if(this.map){var e=this.map.getStyle();if(null===e||void 0===e?void 0:e.layers){var t=function e(t,o){if(o=o||[],Array.isArray(t))return t.forEach((function(t){e(t,o)})),o;var a;a=l()(t,"componentInstance")?l()(t,"componentInstance"):t,"VmLayer"===l()(a,"$options.name",l()(a,"componentOptions.Ctor.options.name"))&&o.push(a);var r=l()(a,"$children");return Array.isArray(r)&&r.forEach((function(t){e(t,o)})),o},o=t(this.$slots.default);if(o&&1!==o.length){var a=o.map((function(e,t){var o=e.componentInstance||e,a=l()(o,"$data.layerId"),r=l()(o,"$props.zIndex"),i=t;return r&&(i=parseInt(r)+i/10),{id:a,index:i}}));a=h()(a,["index"],["asc"]);this.map.getStyle().layers;for(var r=a.length;r>1;r--){var i=a[r-1].id;if(this.map.getLayer(i))if(r===a.length)this.map.moveLayer(i);else{var n=a[r].id;if(!this.map.getLayer(n))continue;this.map.moveLayer(i,n)}}}}}}),400),moveLayer:function(e,t){},addPropsImages:function(e){var t=this;this.map&&(e=e||this.images,Object.entries(e).forEach((function(e){var o=e[0],a=e[1];t.addImage(o,a)})))},addImage:function(e,t){var o=this;if(this.map){var a=24,r=4,i=new Uint8Array(a*a*r);this.map.hasImage(e)||this.map.addImage(e,{width:a,height:a,data:i}),this.map.loadImage(t,(function(a,r){a?(console.error(a),console.error(t)):(o.map.hasImage(e)&&o.map.removeImage(e),o.map.addImage(e,r))}))}},removeLayer:function(e){var t=this;if(this.map){var o=this.getMap();this.layers.has(e)&&this.layers.delete(e);try{o&&o.getLayer(e)&&o.removeLayer(e)}catch(a){}this.$nextTick((function(){return t.updateLayerOrder()}))}},docEvents:function(){this.$emit("click"),this.$emit("dblclick"),this.$emit("mouseenter"),this.$emit("mouseleave"),this.$emit("mouseout"),this.$emit("contextmenu"),this.$emit("wheel"),this.$emit("touchstart"),this.$emit("touchend"),this.$emit("touchmove"),this.$emit("touchcancel"),this.$emit("movestart"),this.$emit("move"),this.$emit("moveend"),this.$emit("dragstart"),this.$emit("drag"),this.$emit("dragend"),this.$emit("zoomstart"),this.$emit("zoom"),this.$emit("zoomend"),this.$emit("rotatestart"),this.$emit("rotate"),this.$emit("rotateend"),this.$emit("pitchstart"),this.$emit("pitch"),this.$emit("pitchend"),this.$emit("boxzoomstart"),this.$emit("boxzoomend"),this.$emit("boxzoomcancel"),this.$emit("webglcontextlost"),this.$emit("webglcontextrestored"),this.$emit("load"),this.$emit("render"),this.$emit("idle"),this.$emit("error"),this.$emit("data"),this.$emit("styledata"),this.$emit("sourcedata"),this.$emit("dataloading"),this.$emit("styledataloading"),this.$emit("sourcedataloading"),this.$emit("styleimagemissing")}}},P=O,$=(o("b371"),o("2877")),T=Object($["a"])(P,a,r,!1,null,"0ff32368",null),M=T.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticStyle:{display:"none"}},[e._t("default")],2)},E=[],F=(o("b0c0"),{name:"VmSource",inject:["getMap","mapboxgl","MapboxVueInstance"],provide:function(){return{getSource:this.getSource}},props:{name:{type:String,default:"",required:!0},unique:{type:Boolean,default:!1},type:{type:String,required:!0,default:"geojson",validator:function(e){return-1!==["vector","raster","raster-dem","geojson","image","video","canvas"].indexOf(e)}},options:{type:Object,required:!0}},data:function(){return{source:null}},watch:{"$props.options":function(e,t){"geojson"===this.type&&e&&e.data?this.getMap().getSource(this.source.id).setData(e.data):JSON.stringify(e)!==JSON.stringify(t)&&(this.source=this.MapboxVueInstance.updateSource(this.source.id,this.type,Object(i["a"])({},e)))}},created:function(){var e=Object(i["a"])({},this.$props.options);this.unique&&this.MapboxVueInstance.getSource(this.name)?this.source=this.MapboxVueInstance.getSource(this.name):this.source=this.MapboxVueInstance.addSource(this.name,this.type,e)},methods:{getSource:function(){return this.source}},beforeDestroy:function(){this.source&&(this.source=null)}}),C=F,j=Object($["a"])(C,w,E,!1,null,null,null),L=j.exports,I=(o("99af"),o("5319"),o("18a5"),function(e){var t=e.$props,o={};return Object.entries(t).forEach((function(t){var a=t[0],r=t[1];void 0!==r&&e.$options.props[a].mapbox&&(a=e.$options.props[a].name||a,o[a]=r)})),o}),_=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{style:{maxHeight:e.myMaxHeight,overflow:"auto"}},[e._t("default")],2)},N=[],V=["open","close"],z={name:"VmPopup",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{anchor:{type:String,default:"bottom",validator:function(e){return-1!==["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"].indexOf(e)}},open:{type:Boolean,default:!1},global:{type:Boolean,default:!1},center:{type:Array,default:function(){return[0,0]}},closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},closeOnMove:{type:Boolean,default:!1},offset:{type:[Number,Array],default:20},className:{type:String,default:""},maxWidth:{type:[Number,String],default:"240px"},maxHeight:{type:[Number,String],default:"auto"},trackPointer:{type:Boolean,default:!1},color:{type:String,default:"white"},textColor:{type:String,default:"black"},arrowColor:{type:String}},data:function(){return{popup:null}},computed:{myMaxHeight:function(){var e=this.maxHeight;return"number"===typeof e&&(e+="px"),e},myMaxWidth:function(){var e=this.maxWidth;return"number"===typeof e&&(e+="px"),e}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:e.createPopup();case 3:case"end":return t.stop()}}),t)})))()},watch:{center:function(e){this.setupPopup()},open:function(e){this.setupPopup()},trackPointer:function(e){this.setupPopup()},maxWidth:function(e){this.setupPopup()},color:function(e){this.setupPopup()}},beforeDestroy:function(){this.popup&&this.popup.remove()},methods:{createPopup:function(){var e=this,t={closeButton:this.closeButton,closeOnMove:this.closeOnMove,closeOnClick:this.closeOnClick,anchor:this.anchor,offset:this.offset,className:this.className,trackPointer:this.trackPointer,maxWidth:this.maxWidth},o=this.mapboxgl();this.popup=new o.Popup(t).setLngLat(this.center).setDOMContent(this.$el),this.popup.on("open",(function(){e.$emit("update:open",!0)})),this.popup.on("close",(function(){e.$emit("update:open",!1)})),this.popup.on("close",(function(){})),this.setupPopup(),this.MapboxVueInstance.setupEvents(this.$listeners,this.popup,V)},setupPopup:function(){if(this.popup){this.open?!1===this.popup.isOpen()&&this.popup.addTo(this.getMap()):!0===this.popup.isOpen()&&this.popup.remove(),this.popup.setLngLat(this.center),this.trackPointer&&this.popup.trackPointer(),this.popup.getMaxWidth()!==this.myMaxWidth&&this.popup.setMaxWidth(this.myMaxWidth);var e=this.popup.getElement();if(e){var t=e.querySelector(".mapboxgl-popup-content"),o=e.querySelector(".mapboxgl-popup-tip");t.style.backgroundColor=this.color,t.style.color=this.textColor,o.style.borderTopColor=this.arrowColor||this.color}}},docEvents:function(){this.$emit("open"),this.$emit("close")}}},A=z,H=(o("11ec"),Object($["a"])(A,_,N,!1,null,null,null)),B=H.exports,D=o("0f5c"),q=o.n(D),Z=["dragstart","drag","dragend"],R={name:"VmMarker",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{center:{type:Array,default:function(){return[0,0]},required:!0},anchor:{type:String,default:"bottom",validator:function(e){return-1!==["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"].indexOf(e)},mapbox:!0},color:{type:String,default:"#3FB1CE",mapbox:!0},offset:{type:Array,mapbox:!0},draggable:{type:Boolean,mapbox:!0},rotation:{type:Number,mapbox:!0},minZoom:{type:[String,Number]},maxZoom:{type:[String,Number]},pitchAlignment:{type:String,validator:function(e){return-1!==["map","viewport","auto"].indexOf(e)},mapbox:!0},rotationAlignment:{type:String,validator:function(e){return-1!==["map","viewport","auto"].indexOf(e)},mapbox:!0},popUpContent:{type:String},metadata:{type:Object},opacity:{type:Number,default:.2}},data:function(){return{marker:null,popupOpen:null,visible:!1}},computed:{},created:function(){this.popup=null,this.markerElement=null,this.eventsFunction={},this.hasPopHover=!1,this.hasPopClick=!1,this.closeTimeout=null,(this.minZoom||this.maxZoom)&&this.getMap().on("zoom",this.markerVisibility)},mounted:function(){var e=this;this.$nextTick((function(){return e.createMarker()}))},updated:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},watch:{visible:function(e,t){!1===e&&!0===t&&"hover"===this.popupOpen&&(this.popupOpen=!1)},center:function(e){this.marker&&this.marker.setLngLat(e)},draggable:function(e){this.marker&&this.marker.setDraggable(e)},color:function(e){this.marker&&this.setupMarker()},anchor:function(e){this.marker&&this.setupMarker()},offset:function(e){this.marker&&this.marker.setOffset(e)},rotation:function(e){this.marker&&this.marker.setRotation(e)},rotationAlignment:function(e){this.marker&&this.marker.setRotationAlignment(e)},pitchAlignment:function(e){this.marker&&this.marker.setPitchAlignment(e)},popUpContent:function(e){this.marker&&this.updateHtmlContent()}},beforeDestroy:function(){this.getMap().off("zoom",this.markerVisibility),this.marker&&this.marker.remove()},methods:{createMarker:function(){var e=this,t=I(this);this.marker&&this.marker.remove(),this.$slots.marker&&(t.element=this.$refs.marker);var o=this.mapboxgl();this.marker=new o.Marker(t).setLngLat(this.center),this.MapboxVueInstance.setupEvents(this.$listeners,this.marker,Z),this.setupMarkerEvents(),this.$nextTick((function(){return e.setupMarker()}))},setupMarker:function(){this.markerElement=this.marker.getElement(),this.markerVisibility(),this.setupPopupEvents(),!0===l()(this.getPopupClick(),"componentOptions.propsData.open")&&(this.popupOpen="click")},setupMarkerEvents:function(){var e=this;this.marker&&(this.markerElement=this.marker.getElement(),Object.entries(this.$listeners).forEach((function(t){var o=t[0],a=t[1],r=!1,i=!1,n=!1,s=o.substr(0,2).replace(/[^a-z]/,"");"~"===s&&(r=!0),"!"===s&&(i=!0),"&"===s&&(n=!0),"~!"===s&&(r=!0,i=!0),o=o.replace(/^[^a-z]/,"");var l=a;e.markerElement.addEventListener(o,(function(e){return l(e)}),{capture:i,once:r,passive:n})})))},setupPopupEvents:function(){this.markerElement=this.marker.getElement(),this.hasPopupHover()&&(this.markerElement.addEventListener("mousemove",this.markerEventHover,{capture:!0}),this.markerElement.addEventListener("mouseleave",this.markerEventLeave,{capture:!1})),this.hasPopupClick()&&this.markerElement.addEventListener("click",this.markerEventClick,{capture:!0})},markerEventHover:function(e){e.stopPropagation(),clearTimeout(this.closeTimeout),this.closeTimeout=null,this.popupOpen||(this.popupOpen="hover")},markerEventLeave:function(e){var t=this;"hover"===this.popupOpen&&(this.closeTimeout=setTimeout((function(){t.popupOpen=!1}),100))},markerEventClick:function(e){e.stopPropagation(),"click"===this.popupOpen?this.popupOpen=!1:this.popupOpen="click"},markerVisibility:function(){var e=this.minZoom?this.minZoom:0,t=this.maxZoom?this.maxZoom:24,o=this.getMap().getZoom();o>=e&&o<=t&&!1===this.visible?(this.marker.addTo(this.getMap()),this.visible=!0):!0===this.visible&&(o<e||o>t)&&(this.marker.remove(),this.visible=!1)},getPopupHover:function(){return u()(this.$scopedSlots,"popupHover")?this.$scopedSlots.popupHover({metadata:this.metadata}):!!u()(this.$slots,"popupHover")&&this.$slots.popupHover},getPopupClick:function(){var e=p(this.$slots.default,"VmPopup");return u()(this.$scopedSlots,"popupClick")?this.$scopedSlots.popupClick({metadata:this.metadata}):u()(this.$slots,"popupClick")?this.$slots.popupClick:e?e[0]:!!this.popUpContent&&this.popUpContent},hasPopupHover:function(){return!(!u()(this.$scopedSlots,"popupHover")&&!u()(this.$slots,"popupHover"))},hasPopupClick:function(){var e=p(this.$slots.default,"VmPopup");return!!(u()(this.$scopedSlots,"popupClick")||u()(this.$slots,"popupClick")||e)},docEvents:function(){this.$emit("dragstart"),this.$emit("drag"),this.$emit("dragend"),this.$emit("click"),this.$emit("mouseleave"),this.$emit("mousemove"),this.$emit("mouseover"),this.$emit("**alldivmouseevents**")}},render:function(e){var t,o,a,r=this,n=(this.minZoom&&this.minZoom,this.maxZoom&&this.maxZoom,this.getMap().getZoom(),[]),s={};if(this.marker&&(this.hasPopupClick()?this.marker.getElement().style.cursor="pointer":this.marker.getElement().style.cursor="hand"),"click"===this.popupOpen?(s={center:this.center,trackPointer:!1,closeOnClick:!0,closeButton:!0,open:!0},t=this.getPopupClick(),o="markerPopupClick"):"hover"===this.popupOpen&&(s={center:this.center,trackPointer:!1,closeButton:!1,closeOnClick:!1,open:!0},t=this.getPopupHover(),o="markerPopupHover"),t){var c=p(t,"VmPopup");a=c?c[0]:e(B,[t]),a&&a.$vnode&&(a=a.$vnode),a.key=o;var u,d=this.markerElement.getBoundingClientRect().height;if(this.anchor.indexOf("bottom")>-1?u=d+15:"center"===this.anchor?u=d/2:this.anchor.indexOf("top")>-1&&(u=4),s.offset=[0,-u],a.componentOptions.propsData=Object(i["a"])(Object(i["a"])({},s),a.componentOptions.propsData),"click"===this.popupOpen){var h=l()(a,"componentOptions.listeners.close");q()(a.componentOptions,"listeners.close",(function(e){!0===r.visible&&(r.popupOpen=!1,h&&h(e))}))}}return this.$slots.marker&&n.push(e("div",{slot:"marker",ref:"marker"},[this.$slots.marker])),a&&this.visible&&n.push(a),e("div",{style:{display:"none",opacity:Number(this.opacity)}},[].concat(n))}},J=R,W=Object($["a"])(J,x,k,!1,null,null,null),U=W.exports,G=(o("4de4"),o("a15b"),o("a434"),o("4d63"),o("25f0"),o("2b3d"),o("d0ff")),X=o("0122"),K=(o("77c1"),o("9380")),Y=o.n(K),Q=o("51f5"),ee=o.n(Q),te=o("375a"),oe=o.n(te),ae=(o("bba4"),o("e740")),re=o.n(ae),ie=o("bc3a"),ne=o.n(ie),se={"background-color":{paint:!0,layerType:"background"},"background-opacity":{paint:!0,layerType:"background"},"background-pattern":{paint:!0,layerType:"background"},"fill-antialias":{paint:!0,layerType:"fill"},"fill-color":{paint:!0,layerType:"fill"},"fill-opacity":{paint:!0,layerType:"fill"},"fill-outline-color":{paint:!0,layerType:"fill"},"fill-pattern":{paint:!0,layerType:"fill"},"fill-sort-key":{layout:!0,layerType:"fill"},"fill-translate":{paint:!0,layerType:"fill"},"fill-translate-anchor":{paint:!0,layerType:"fill"},"line-blur":{paint:!0,layerType:"line"},"line-cap":{layout:!0,layerType:"line"},"line-color":{paint:!0,layerType:"line"},"line-dasharray":{paint:!0,layerType:"line"},"line-gap-width":{paint:!0,layerType:"line"},"line-gradient":{paint:!0,layerType:"line"},"line-join":{layout:!0,layerType:"line"},"line-miter-limit":{layout:!0,layerType:"line"},"line-offset":{paint:!0,layerType:"line"},"line-opacity":{paint:!0,layerType:"line"},"line-pattern":{paint:!0,layerType:"line"},"line-round-limit":{layout:!0,layerType:"line"},"line-sort-key":{layout:!0,layerType:"line"},"line-translate":{paint:!0,layerType:"line"},"line-translate-anchor":{paint:!0,layerType:"line"},"line-width":{paint:!0,layerType:"line"},"icon-allow-overlap":{layout:!0,layerType:"symbol"},"icon-anchor":{layout:!0,layerType:"symbol"},"icon-color":{paint:!0,layerType:"symbol"},"icon-halo-blur":{paint:!0,layerType:"symbol"},"icon-halo-color":{paint:!0,layerType:"symbol"},"icon-halo-width":{paint:!0,layerType:"symbol"},"icon-ignore-placement":{layout:!0,layerType:"symbol"},"icon-image":{layout:!0,layerType:"symbol"},"icon-keep-upright":{layout:!0,layerType:"symbol"},"icon-offset":{layout:!0,layerType:"symbol"},"icon-opacity":{paint:!0,layerType:"symbol"},"icon-optional":{layout:!0,layerType:"symbol"},"icon-padding":{layout:!0,layerType:"symbol"},"icon-pitch-alignment":{layout:!0,layerType:"symbol"},"icon-rotate":{layout:!0,layerType:"symbol"},"icon-rotation-alignment":{layout:!0,layerType:"symbol"},"icon-size":{layout:!0,layerType:"symbol"},"icon-text-fit":{layout:!0,layerType:"symbol"},"icon-text-fit-padding":{layout:!0,layerType:"symbol"},"icon-translate":{paint:!0,layerType:"symbol"},"icon-translate-anchor":{paint:!0,layerType:"symbol"},"symbol-avoid-edges":{layout:!0,layerType:"symbol"},"symbol-placement":{layout:!0,layerType:"symbol"},"symbol-sort-key":{layout:!0,layerType:"symbol"},"symbol-spacing":{layout:!0,layerType:"symbol"},"symbol-z-order":{layout:!0,layerType:"symbol"},"text-allow-overlap":{layout:!0,layerType:"symbol"},"text-anchor":{layout:!0,layerType:"symbol"},"text-color":{paint:!0,layerType:"symbol"},"text-field":{layout:!0,layerType:"symbol"},"text-font":{layout:!0,layerType:"symbol"},"text-halo-blur":{paint:!0,layerType:"symbol"},"text-halo-color":{paint:!0,layerType:"symbol"},"text-halo-width":{paint:!0,layerType:"symbol"},"text-ignore-placement":{layout:!0,layerType:"symbol"},"text-justify":{layout:!0,layerType:"symbol"},"text-keep-upright":{layout:!0,layerType:"symbol"},"text-letter-spacing":{layout:!0,layerType:"symbol"},"text-line-height":{layout:!0,layerType:"symbol"},"text-max-angle":{layout:!0,layerType:"symbol"},"text-max-width":{layout:!0,layerType:"symbol"},"text-offset":{layout:!0,layerType:"symbol"},"text-opacity":{paint:!0,layerType:"symbol"},"text-optional":{layout:!0,layerType:"symbol"},"text-padding":{layout:!0,layerType:"symbol"},"text-pitch-alignment":{layout:!0,layerType:"symbol"},"text-radial-offset":{layout:!0,layerType:"symbol"},"text-rotate":{layout:!0,layerType:"symbol"},"text-rotation-alignment":{layout:!0,layerType:"symbol"},"text-size":{layout:!0,layerType:"symbol"},"text-transform":{layout:!0,layerType:"symbol"},"text-translate":{paint:!0,layerType:"symbol"},"text-translate-anchor":{paint:!0,layerType:"symbol"},"text-variable-anchor":{layout:!0,layerType:"symbol"},"text-writing-mode":{layout:!0,layerType:"symbol"},"raster-brightness-max":{paint:!0,layerType:"raster"},"raster-brightness-min":{paint:!0,layerType:"raster"},"raster-contrast":{paint:!0,layerType:"raster"},"raster-fade-duration":{paint:!0,layerType:"raster"},"raster-hue-rotate":{paint:!0,layerType:"raster"},"raster-opacity":{paint:!0,layerType:"raster"},"raster-resampling":{paint:!0,layerType:"raster"},"raster-saturation":{paint:!0,layerType:"raster"},"circle-blur":{paint:!0,layerType:"circle"},"circle-color":{paint:!0,layerType:"circle"},"circle-opacity":{paint:!0,layerType:"circle"},"circle-pitch-alignment":{paint:!0,layerType:"circle"},"circle-pitch-scale":{paint:!0,layerType:"circle"},"circle-radius":{paint:!0,layerType:"circle"},"circle-sort-key":{layout:!0,layerType:"circle"},"circle-stroke-color":{paint:!0,layerType:"circle"},"circle-stroke-opacity":{paint:!0,layerType:"circle"},"circle-stroke-width":{paint:!0,layerType:"circle"},"circle-translate":{paint:!0,layerType:"circle"},"circle-translate-anchor":{paint:!0,layerType:"circle"},"fill-extrusion-base":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-color":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-height":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-opacity":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-pattern":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-translate":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-translate-anchor":{paint:!0,layerType:"fill-extrusion"},"fill-extrusion-vertical-gradient":{paint:!0,layerType:"fill-extrusion"},"heatmap-color":{paint:!0,layerType:"heatmap"},"heatmap-intensity":{paint:!0,layerType:"heatmap"},"heatmap-opacity":{paint:!0,layerType:"heatmap"},"heatmap-radius":{paint:!0,layerType:"heatmap"},"heatmap-weight":{paint:!0,layerType:"heatmap"},"hillshade-accent-color":{paint:!0,layerType:"hillshade"},"hillshade-exaggeration":{paint:!0,layerType:"hillshade"},"hillshade-highlight-color":{paint:!0,layerType:"hillshade"},"hillshade-illumination-anchor":{paint:!0,layerType:"hillshade"},"hillshade-illumination-direction":{paint:!0,layerType:"hillshade"},"hillshade-shadow-color":{paint:!0,layerType:"hillshade"},visibility:{layout:!0,layerType:"all"}},le={};Object.entries(se).forEach((function(e){var t=e[0],o=e[1];le[t]=o,le[t+"-hover"]={value:o,hover:!0},le[t+"-click"]={value:o,click:!0}}));var ce,ue,pe,de,he,me,ye,fe,ge=le,ve=["mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click","dblclick","contextmenu","touchstart","touchend","touchcancel"],be={name:"VmLayer",inject:{getMap:"getMap",mapboxgl:"mapboxgl",MapboxVueInstance:"MapboxVueInstance",getSource:{from:"getSource",default:void 0}},props:Object(i["a"])({name:{type:String,default:""},type:{type:String,required:!0,validator:function(e){return-1!==["fill","line","symbol","circle","heatmap","fill-extrusion","raster","hillshade","background","custom"].indexOf(e)}},source:{type:[String,Object],mapbox:!0},customLayer:{type:Object,mapbox:!1},sourceLayer:{type:String,mapbox:!0,name:"source-layer"},images:{type:Object,default:function(){return{}}},opacity:{type:Number},color:{type:String},colorHover:{type:String},colorClick:{type:String},hideOnOpacity:{type:Boolean,default:!0},filter:{type:Array,mapbox:!0},paint:{type:Object,mapbox:!0},layout:{type:Object,default:function(){return{}},mapbox:!0},maxzoom:{type:Number,default:24,mapbox:!0},minzoom:{type:Number,default:0,mapbox:!0},metadata:{type:Object,mapbox:!0},paintHover:{type:Object},paintClick:{type:Object},layoutHover:{type:Object},layoutClick:{type:Object},zIndex:{type:[Number,String]},classes:{type:[Array]},classesValueInterpolation:{type:String,default:"match",validator:function(e){return-1!==["match","step","interpolate"].indexOf(e)}},multipleFeatureSelectionOn:{type:[String,Boolean],default:!1,validator:function(e){return-1!==["shift","control","alt",!0,!1].indexOf(e)}},dataJoin:{type:[Array,String]},dataJoinDataPath:{type:String},dataJoinKey:{type:String,default:"id"}},ge),data:function(){return{featureState:{},layerId:null,sourceId:null,selectedFeatures:[],hoverFeatures:[],hasChildPopup:null,lastClick:null,lastHover:null,hasFeatureHover:!1,hasFeatureClick:!1,myData:!1,keysExistInData:[]}},computed:{myPaintNormal:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("paint","")},myPaintHover:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("paint","hover")},myPaintClick:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("paint","click")},myLayoutNormal:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("layout","")},myLayoutHover:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("layout","hover")},myLayoutClick:function(){JSON.stringify(this.$props);return this.getPaintLayoutForState("layout","click")},myPaint:function(){var e=this.myPaintNormal,t=this.myPaintHover,o=this.myPaintClick;return(this.hasFeatureHover||this.hasFeatureClick)&&(e=this.getFinalFeatureStateForPaintOrLayout(e,t,o)),e},myLayout:function(){var e=this.myLayoutNormal,t=this.myPaintHover,o=this.myPaintClick;(this.hasFeatureHover||this.hasFeatureClick)&&(e=this.getFinalFeatureStateForPaintOrLayout(e,t,o));var a=this.opacity;return!1===this.hideOnOpacity||void 0===a||null===a||(0===a&&this.hideOnOpacity?e.visibility="none":e.visibility||(e.visibility="visible")),e},layerInstance:function(){return this.getMap().getLayer(this.id)}},watch:{source:function(e,t){if("object"===Object(X["a"])(e)&&JSON.stringify(e)!==JSON.stringify(t)){var o=this.getMap().getLayer(this.layerId).source;this.MapboxVueInstance.updateSource(o,e.type,Object(i["a"])({},e))}},minzoom:function(e){this.layerExist()&&this.getMap().setLayerZoomRange(this.layerId,this.minzoom,this.maxzoom)},maxzoom:function(e){this.layerExist()&&this.getMap().setLayerZoomRange(this.layerId,this.minzoom,this.maxzoom)},zIndex:function(e){var t=this;console.log(e),this.$nextTick((function(){return t.MapboxVueInstance.updateLayerOrder()}))},filter:function(e){this.getMap().setFilter(this.layerId,e)},myPaint:function(e,t){var o=this;Object.entries(e).forEach((function(e){var a=e[0],r=e[1];JSON.stringify(r)!==JSON.stringify(t[a])&&o.layerExist()&&o.getMap().setPaintProperty(o.layerId,a,r)}))},myLayout:function(e,t){var o=this;Object.entries(e).forEach((function(e){var a=e[0],r=e[1];JSON.stringify(r)!==JSON.stringify(t[a])&&o.layerExist()&&o.getMap().setLayoutProperty(o.layerId,a,r)}))},selectedFeatures:function(e,t){var o=this,a=this.getMap();t.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{click:!1})})),e.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{click:!0})})),this.$emit("featureselect",e)},hoverFeatures:function(e,t){var o=this,a=this.getMap();t.length>0&&t.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{hover:!1})})),e.forEach((function(e){a.setFeatureState({source:o.sourceId,sourceLayer:o.sourceLayer,id:e.id},{hover:!0})})),this.$emit("featurehover",e)},myData:function(e,t){this.keysExistInData=Object.keys(null===e||void 0===e?void 0:e[0]),t&&this.removeDataJoin(t),this.addDataJoin()},dataJoin:function(e,t){this.loadData()}},created:function(){var e,t,o=this;this.popupOpen=!1;var a=I(this);if(!a.source){var r=this.getSource&&this.getSource();r&&r.id&&(a.source=r.id)}if("Object"===(null===a||void 0===a||null===(e=a.source)||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)){var n,s,l=(null===(n=a.source)||void 0===n?void 0:n.id)||(null===(s=a.source)||void 0===s?void 0:s.name);l&&(!1===this.MapboxVueInstance.getSource(l)?this.MapboxVueInstance.addSource(l,a.source.type,Object(i["a"])({},a.source)):this.MapboxVueInstance.updateSource(l,a.source.type,Object(i["a"])({},a.source)),a.source=l)}if(this.options=a,"custom"===this.type)this.addLayer();else if("string"===typeof this.options.source)if(this.getMap().getSource(this.options.source))this.addLayer();else{var c=function e(t){console.log(t),"source"===t.dataType&&t.sourceId===o.options.source&&(o.addLayer(),o.getMap().off("sourcedata",e))};this.getMap().on("sourcedata",c)}else this.addLayer();this.images&&this.MapboxVueInstance.addPropsImages(this.images)},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$nextTick();case 2:this.setupLayerFeaturesEvents();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),destroyed:function(){this.layerId&&(console.log("destroying "+this.layerId),this.MapboxVueInstance.removeLayer(this.layerId),Object(X["a"])(this.source))},methods:{layerExist:function(){var e=this.getMap().getLayer(this.layerId);return!!e},addLayer:function(){try{if(this.customLayer){var e=this.MapboxVueInstance.addLayer(this.customLayer);this.layerId=e}else{var t=this.MapboxVueInstance.getNewIdForLayer(this.name),o=this.MapboxVueInstance.addLayer(Object(i["a"])(Object(i["a"])({},this.options),{},{id:t,type:this.type,paint:this.myPaint,layout:this.myLayout}));this.layerId=o,this.sourceId=this.getMap().getLayer(o).source,this.MapboxVueInstance.setupEvents(this.$listeners,this.getMap(),ve,this.layerId,this.created_at,this.zIndex),this.loadData()}}catch(a){console.error("========================== Error adding Layer "+this.name),console.error("Error adding Layer "+this.name),console.log(this.myPaint),console.error(a)}},removeDataJoin:function(e){var t=this;if(Array.isArray(e)){var o=this.getMap();e.forEach((function(e){var a;if("Object"===(null===e||void 0===e||null===(a=e.constructor)||void 0===a?void 0:a.name)){var r=null===e||void 0===e?void 0:e[t.dataJoinKey];void 0!==r&&o.removeFeatureState({source:t.sourceId,sourceLayer:t.sourceLayer,id:r})}}))}},addDataJoin:function(){var e=this;if(Array.isArray(this.myData)){var t=this.getMap();this.myData.forEach((function(o){var a;if("Object"===(null===o||void 0===o||null===(a=o.constructor)||void 0===a?void 0:a.name)){var r=null===o||void 0===o?void 0:o[e.dataJoinKey];void 0!==r&&t.setFeatureState({source:e.sourceId,sourceLayer:e.sourceLayer,id:r},Object(i["a"])({},o))}}))}},loadData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,o,a,r,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!1,!Array.isArray(this.dataJoin)){e.next=5;break}a=Object(G["a"])(this.dataJoin),e.next=23;break;case 5:if("String"!==(null===(t=this.dataJoin)||void 0===t||null===(o=t.constructor)||void 0===o?void 0:o.name)){e.next=23;break}return e.prev=6,r=new URL(this.dataJoin),e.next=10,ne.a.get(r);case 10:if(i=e.sent,n=this.dataJoinDataPath?"data"+this.dataJoinDataPath:"data",s=l()(i,n),!Array.isArray(s)){e.next=17;break}return e.abrupt("return",Object(G["a"])(s));case 17:console.error("dataJoin url dont return an Array in path:"+n);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](6),console.error(e.t0);case 23:return this.myData=a,e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,this,[[6,20]])})));function t(){return e.apply(this,arguments)}return t}(),setupLayerFeaturesEvents:function(){this.$listeners.featurehover||this.paintHover||this.layoutHover||u()(this.$scopedSlots,"popupHover")||u()(this.$slots,"popupHover")?this.hasFeatureHover=!0:this.hasFeatureHover=!1,this.paintClick||this.layoutClick||u()(this.$scopedSlots,"popupClick")||u()(this.$slots,"popupClick")?this.hasFeatureClick=!0:this.hasFeatureClick=!1;var e=this.getMap();(this.hasFeatureHover||this.hasFeatureClick)&&(e.off("mousemove",this.layerId,this.featureMouseMoveEvent),e.off("mouseleave",this.layerId,this.featureMouseLeaveEvent),e.on("mousemove",this.layerId,this.featureMouseMoveEvent),e.on("mouseleave",this.layerId,this.featureMouseLeaveEvent)),this.hasFeatureClick&&(e.off("click",this.layerId,this.featureMouseClickEvent),e.on("click",this.layerId,this.featureMouseClickEvent),e.off("click",this.layerMouseClickOutEvent),e.on("click",this.layerMouseClickOutEvent))},featureMouseMoveEvent:function(e){if(this.popupOpen)return!1;var t=this.getMap().queryRenderedFeatures(e.point);if(l()(t,"[0].layer.id")!==this.layerId)return this.featureMouseLeaveEvent(e),!1;if(this.lastHover=e,e.features.length>0){if(this.hoverFeatures.map((function(e){return e.id})).join("")===e.features.map((function(e){return e.id})).join(""))return!1;this.hasFeatureClick&&(this.getMap().getCanvas().style.cursor="pointer"),this.hasFeatureHover&&(this.hoverFeatures=e.features)}},featureMouseLeaveEvent:function(e){if(this.hasFeatureClick&&this.getMap().getCanvas().style.removeProperty("cursor"),this.popupOpen)return!1;this.hoverFeatures=[]},featureMouseClickEvent:function(e){var t=this,o=this.getMap().queryRenderedFeatures(e.point);if(l()(o,"[0].layer.id")===this.layerId){this.lastClick=e;var a=Object(G["a"])(this.selectedFeatures),r=[];e.features.length>0&&e.features.forEach((function(e){var o=ee()(t.selectedFeatures,{id:e.id});o>-1?a.splice(o,1):r.push(e)}));var i=!1;!0===this.multipleFeatureSelectionOn?i=!0:"string"===typeof this.multipleFeatureSelectionOn&&(!0===e.originalEvent[this.multipleFeatureSelectionOn+"Key"]&&(i=!0),"alt"===this.multipleFeatureSelectionOn&&!0===e.originalEvent.metaKey&&(i=!0)),i&&(r=r.concat(a)),this.selectedFeatures=r}else this.selectedFeatures=[]},layerMouseClickOutEvent:function(e){var t=this.getMap();if(null!==this.layerId){var o=t.queryRenderedFeatures(e.point,{layers:[this.layerId]});0===o.length&&(this.selectedFeatures=[])}},getFinalFeatureStateForPaintOrLayout:function(e,t,o){var a=this,r=Object(i["a"])({},e);return(this.hasFeatureHover||this.hasFeatureClick||this.hasChildPopup)&&Object.entries(r).forEach((function(e){var i,n,s=e[0],l=e[1],c=l;if("interpolate"===(null===l||void 0===l?void 0:l[0])&&"zoom"===(null===l||void 0===l||null===(i=l[2])||void 0===i?void 0:i[0])||"step"===(null===l||void 0===l?void 0:l[0])&&"zoom"===(null===l||void 0===l||null===(n=l[1])||void 0===n?void 0:n[0])){for(var u,p=null===l||void 0===l?void 0:l[0],d="interpolate"===p?l.splice(0,4):l.splice(0,2),h=null!==(u=a.opacity)&&void 0!==u?u:1,m=0;m<l.length;m+=2)l[m]*=h,t&&t[s]&&(l[m]=["case",["boolean",["feature-state","hover"],!1],t[s]*h,l[m]]),o&&o[s]&&(l[m]=["case",["boolean",["feature-state","click"],!1],o[s]*h,l[m]]);c=d.concat(l)}else t&&t[s]&&(c=["case",["boolean",["feature-state","hover"],!1],t[s],l]),o&&o[s]&&(c=["case",["boolean",["feature-state","click"],!1],o[s],c]);r[s]=c})),r},getPaintLayoutForState:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"paint",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.getAllPaintLayoutForKind(t),r=new RegExp("-"+o+"$","g"),n=l()(this.$props,t+re()(o),{}),s={};return Object.keys(n).forEach((function(t){var o=e.innerPaintPropConvert(t);s[o]=e.innerExpressionConverter(n[t])})),Object.entries(this.$options.propsData).forEach((function(t){var i=e.innerPaintPropConvert(oe()(t[0])),n=t[1],l=i.replace(r,"");(""!==o&&i.indexOf("-"+o)>-1&&a.includes(l)||""===o&&a.includes(l))&&(s[l]=e.innerExpressionConverter(n))})),a.forEach((function(t){var a=""!==o?t+"-"+o:t,r=Y()(e.classes,(function(e){return u()(e,a)}));if(r.length>0){var i,n=[],c=null===(i=r[0])||void 0===i?void 0:i.property;if("match"===e.classesValueInterpolation){var p="_id"===c;n=p?["match",["id"]]:["match",["get",c]],r.forEach((function(t,o){n.push(e.innerExpressionConverter(t.value)),n.push(l()(t,a))})),n.push(s[t]||n[n.length-1])}else"step"===e.classesValueInterpolation?(n=["step",["to-number",["get",c]]],r.forEach((function(t,o){n.push(l()(t,a)),t.value&&n.push(e.innerExpressionConverter(t.value))}))):"interpolate"===e.classesValueInterpolation&&(n=c.match(/color/g)?["interpolate-hcl",["linear"],["to-number",["get",c]]]:["interpolate",["linear"],["to-number",["get",c]]],r.forEach((function(t,o){n.push(e.innerExpressionConverter(t.value)),n.push(l()(t,a))})));s[e.innerPaintPropConvert(t)]=n}})),""!==o&&Object.entries(s).forEach((function(t){var o=t[0],a=t[1];e.checkForZoomExp(a)&&(console.error("ZOOM expression can not be user in hover or click state due mapbox limitations. Default will be the last value"),s[o]=a[a.length-1])})),"paint"===t&&(s=this.processPaintOpacity(s)),Object(i["a"])({},s)},processPaintOpacity:function(e){var t=this,o=this.opacity;if(void 0===o||null===o)return e;var a=this.getAllPaintLayoutForKind("paint"),r=a.filter((function(e){return-1!==e.indexOf("opacity")}));return r.forEach((function(a){var r;if(e[a]){var i=e[a];if("Number"===(null===i||void 0===i||null===(r=i.constructor)||void 0===r?void 0:r.name))e[a]=i*o;else if(Array.isArray(i))if(t.checkForZoomExp(i)){for(var n="interpolate"===i[0]?i.splice(0,4):i.splice(0,2),s=0;s<i.length;s+=2)i[s]*=o;e[a]=n.concat(i)}else e[a]=["*",Object(G["a"])(i),o]}else e[a]=o})),e},getAllPaintLayoutForKind:function(e){var t=this,o=["color"];return Object.entries(this.$options.props).forEach((function(a){var r=oe()(a[0]),i=a[1];l()(i,e)&&l()(i,"layerType")===t.type&&-1===r.indexOf("-hover")&&-1===r.indexOf("-click")&&o.push(r)})),o},innerExpressionConverter:function(e){if(Array.isArray(e)&&"z"===(null===e||void 0===e?void 0:e[0])){var t=Object(G["a"])(e);return t.shift(),t=["interpolate",["linear"],["zoom"]].concat(Object(G["a"])(t)),t}return e},innerPaintPropConvert:function(e){return["color","color-hover","color-click"].includes(e)?this.type+"-"+e:e},checkForZoomExp:function(e){var t,o;return"zoom"===(null===e||void 0===e||null===(t=e[2])||void 0===t?void 0:t[0])||"zoom"===(null===e||void 0===e||null===(o=e[1])||void 0===o?void 0:o[0])},docEvents:function(){this.$emit("mousedown"),this.$emit("mouseup"),this.$emit("mouseover"),this.$emit("mouseout"),this.$emit("mousemove"),this.$emit("mouseenter"),this.$emit("mouseleave"),this.$emit("click"),this.$emit("dblclick"),this.$emit("contextmenu"),this.$emit("touchstart"),this.$emit("touchend"),this.$emit("touchcancel")}},render:function(e){var t,o,a,r=this,n=null;if(0===this.hoverFeatures.length&&0===this.selectedFeatures.length||!u()(this.$scopedSlots,"popupHover")&&!u()(this.$scopedSlots,"popupClick")&&!u()(this.$slots,"popupHover")&&!u()(this.$slots,"popupClick"))return n;var s,c,d={};if(u()(this.$scopedSlots,"popupHover")?t=this.$scopedSlots.popupHover({features:this.hoverFeatures}):u()(this.$slots,"popupHover")&&(t=this.$slots.popupHover),u()(this.$scopedSlots,"popupClick")?o=this.$scopedSlots.popupClick({features:this.selectedFeatures}):u()(this.$slots,"popupClick")&&(o=this.$slots.popupClick),!t&&!o)return n;if(this.lastClick&&this.selectedFeatures.length>0&&o)a=o,s="layerPopupClick",d={center:[this.lastClick.lngLat.lng,this.lastClick.lngLat.lat],trackPointer:!1,closeOnClick:!0,closeButton:!0,open:!0};else{if(!(this.hoverFeatures.length>0&&t))return n;a=t,s="layerPopupOver",d={center:[this.lastHover.lngLat.lng,this.lastHover.lngLat.lat],trackPointer:!0,closeButton:!1,closeOnClick:!1,open:!0}}var h=p(a,"VmPopup");if(c=h?h[0]:e(B,[a]),c.componentOptions.propsData=Object(i["a"])(Object(i["a"])({},c.componentOptions.propsData),d),"layerPopupClick"===s){this.popupOpen=!0;var m=l()(c,"componentOptions.listeners.close");q()(c.componentOptions,"listeners.close",(function(e){r.popupOpen=!1,r.selectedFeatures=[],r.hoverFeatures=[],m&&m(e)}))}return c.key=s+this.layerId,e("div",[c])}},xe=be,ke=Object($["a"])(xe,ce,ue,!1,null,null,null),Se=ke.exports,Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.layerCreated?o("vm-layer",{attrs:{name:"arc"+this.name,customLayer:e.layer,zIndex:e.zIndex,type:"custom"}}):e._e()],1)},Pe=[],$e={name:"VmLayerArc",inject:{getMap:"getMap",mapboxgl:"mapboxgl",MapboxVueInstance:"MapboxVueInstance"},props:{name:{type:String,required:!0},zIndex:{type:[Number,String]},data:{type:Array,required:!0},witdh:{type:[Number,Function],default:10},color:{type:String,default:"blue"},sourceColor:{type:[String,Function]},targetColor:{type:[String,Function]},sourcePosition:{type:[String,Function],default:"from"},targetPosition:{type:[String,Function],default:"to"}},data:function(){return{layerCreated:!1,id:!1}},destroyed:function(){this.layer=null},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.layer=null,window.deck){t.next=12;break}return o=["https://unpkg.com/@deck.gl/core@^8.0.0/dist.min.js","https://unpkg.com/@deck.gl/layers@^8.0.0/dist.min.js","https://unpkg.com/@deck.gl/mapbox@^8.4.16/dist.min.js"],t.prev=3,t.next=6,v(o);case 6:t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](3),console.error(t.t0),new Error("Erro loading for arc layer ");case 12:if(window.deck){t.next=14;break}throw new Error("Erro loading for arc layer ");case 14:e.deck=window.deck;case 15:case"end":return t.stop()}}),t,null,[[3,8]])})))()},mounted:function(){var e=this;this.$nextTick((function(){e.addLayer()}))},watch:{"$props.data":function(e,t){this.layer&&this.layer.setProps({data:this.data})},"$props.width":function(e,t){var o=this;this.layer&&this.layer.setProps({getWidth:function(e){return o.getWidth(e)}})}},methods:{addLayer:function(){var e=this;this.id=this.MapboxVueInstance.getNewIdForLayer(this.name);var t=window.deck.MapboxLayer;this.layer=new t({id:this.id,type:ArcLayer,data:this.data,autoHighlight:!0,pickable:!0,getWidth:function(t){return e.getWidth(t)},getSourcePosition:function(t){return e.getSourcePositionFunc(t)},getTargetPosition:function(t){return e.getTargetPositionFunc(t)},getSourceColor:function(t){return e.getSourceColorFunc(t)},getTargetColor:function(t){return e.getTargetColorFunc(t)}}),this.layerCreated=!0},getWidth:function(e){return"function"===typeof this.witdh?this.witdh(e):isNaN(this.witdh)?l()(e,this.witdh,5):this.witdh},getSourcePositionFunc:function(e){var t;return t="function"===typeof this.sourcePosition?this.sourcePosition(e):l()(e,this.sourcePosition,[-45,-15]),t},getTargetPositionFunc:function(e){var t;return t="function"===typeof this.targetPosition?this.targetPosition(e):l()(e,this.targetPosition,[-45,-15]),t},getSourceColorFunc:function(e){var t;return this.sourceColor||(t=this.color),t="function"===typeof this.sourceColor?this.sourceColor(e):u()(e,this.sourceColor)?l()(e,this.sourceColor):this.sourceColor,this.convertToArray(t)},getTargetColorFunc:function(e){var t;return this.targetColor||(t=this.color),t="function"===typeof this.targetColor?this.targetColor(e):u()(e,this.targetColor)?l()(e,this.targetColor):this.targetColor,this.convertToArray(t)},convertToArray:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,o,a){return t+t+o+o+a+a}));var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:[0,0,0]}},createLayer:function(){var e=this;return[new deck.ArcLayer({id:this.id,data:this.data,autoHighlight:!0,pickable:!0,getWidth:function(t){return e.getWidth(t)},getSourcePosition:function(t){return e.getSourcePositionFunc(t)},getTargetPosition:function(t){return e.getTargetPositionFunc(t)},getSourceColor:function(t){return e.getSourceColorFunc(t)},getTargetColor:function(t){return e.getTargetColorFunc(t)}})]}},Te=$e,Me=Object($["a"])(Te,Oe,Pe,!1,null,null,null),we=Me.exports,Ee={name:"VmImage",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{url:{type:String,required:!0},name:{type:String,required:!0}},created:function(){this.MapboxVueInstance.addImage(this.name,this.url)},render:function(e){return null}},Fe=Ee,Ce=Object($["a"])(Fe,pe,de,!1,null,null,null),je=Ce.exports,Le={name:"VmLayerVector",inject:["getMap","mapboxgl","MapboxVueInstance","getSource"],props:{},created:function(){},data:function(){return{layerId:null,sourceId:null,selectedFeatures:[],hoverFeatures:[],hasChildPopup:null,lastClick:null}},render:function(e){return null}},Ie=Le,_e=Object($["a"])(Ie,he,me,!1,null,null,null),Ne=_e.exports,Ve=function(e,t){var o,a,r,i,n=1;if(2==e.length)n=e[1];else for(var s=0;s<e.length-2;s+=2){if(o=e[s],a=e[s+2],r=e[s+1],i=e[s+3],t>=o&&t<=a){n=(t-a)/(o-a)*(r-i)+i;break}if(t<=o){n=r;break}n=i}return n},ze={name:"VmMarkerDonut",inject:["getMap","mapboxgl","MapboxVueInstance"],props:{radius:{type:[Number,String]},chartWidth:{type:[Number,String],default:"25%"},fontSize:{type:[Number,String]},dataSet:{type:Array,default:function(){return[4,7,40]}},dataColor:{type:Array,default:function(){return["red","green","blue"]}},zoomScale:{type:Array},anchor:{default:"center"},opacity:{default:1},minZoom:{type:[String,Number]},maxZoom:{type:[String,Number]}},data:function(){return{currentZoom:null}},computed:{myradius:function(){return Number(this.radius)}},created:function(){this.zoomScale&&this.getMap()&&this.getMap().on("zoom",this.scaleMarker)},mounted:function(){var e=this;this.$nextTick((function(){return e.scaleMarker()}))},beforeDestroy:function(){this.zoomScale&&this.getMap()&&this.getMap().off("zoom",this.scaleMarker)},methods:{scaleMarker:function(e){if(this.zoomScale){var t=this.getMap().getZoom(),o=Ve(this.zoomScale,t);this.$refs.marker.style.transform="scale(".concat(o,")"),this.$refs.marker.style.transformOrigin="center"}},createDonutChart:function(e,t,o,a,r){for(var i=[],n=e,s=0,l=0;l<n.length;l++)i.push(s),s+=n[l];r=r||(s>=1e3?20:s>=100?18:s>=10?16:14);var c,u=o||(s>=1e3?50:s>=100?32:s>=10?24:18);c="string"===typeof a&&a.indexOf("%")>0?Math.round(u*(1-parseInt(a)/100)):parseInt(a);var p=2*u,d='<div><svg width="'+p+'" height="'+p+'" viewbox="0 0 '+p+" "+p+'" text-anchor="middle" style="font: '+r+'px sans-serif">';for(l=0;l<n.length;l++)d+=this.donutSegment(i[l]/s,(i[l]+n[l])/s,u,c,t[l]);return d+='<circle cx="'+u+'" cy="'+u+'" r="'+c+'" fill="white" /><text dominant-baseline="central" transform="translate('+u+", "+u+')">'+s.toLocaleString()+"</text></svg></div>",d},donutSegment:function(e,t,o,a,r){t-e===1&&(t-=1e-5);var i=2*Math.PI*(e-.25),n=2*Math.PI*(t-.25),s=Math.cos(i),l=Math.sin(i),c=Math.cos(n),u=Math.sin(n),p=t-e>.5?1:0;return['<path d="M',o+a*s,o+a*l,"L",o+o*s,o+o*l,"A",o,o,0,p,1,o+o*c,o+o*u,"L",o+a*c,o+a*u,"A",a,a,0,p,0,o+a*s,o+a*l,'" fill="'+r+'" />'].join(" ")}},render:function(e){var t=this.createDonutChart(this.dataSet,this.dataColor,this.myradius,this.chartWidth,parseInt(this.fontSize)),o=[],a=e("div",{style:{position:"relative",textAlign:"center"},slot:"marker",ref:"marker"},[e("div",{domProps:{innerHTML:t}}),this.$slots.marker]);return o.push(a),Object.entries(this.$slots).forEach((function(t){var a=t[0],r=t[1];"marker"!==a&&o.push(e("div",{slot:a,ref:a},r))})),e(U,{key:this.key+"marker",props:Object(i["a"])(Object(i["a"])(Object(i["a"])({},this.$attrs),this.$props),{},{opacity:this.opacity,anchor:this.anchor}),on:Object(i["a"])({},this.$listeners)},[].concat(o,[this.$slots.default]))}},Ae=ze,He=o("9439"),Be=o.n(He),De=Object($["a"])(Ae,ye,fe,!1,null,null,null);"function"===typeof Be.a&&Be()(De);var qe=De.exports,Ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("center",[e._v(" Carregando... ")])},Re=[],Je={},We=Object($["a"])(Je,Ze,Re,!1,null,null,null),Ue=We.exports,Ge=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("center",{staticClass:"alert alert-danger"},[o("b",[e._v("ERROR")])])},Xe=[],Ke={},Ye=Object($["a"])(Ke,Ge,Xe,!1,null,null,null),Qe=Ye.exports},b7f3:function(e,t,o){var a=o("e7ed");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=o("499e").default;r("3bfb87de",a,!0,{sourceMap:!1,shadowMode:!1})},e7ed:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,"#app{font-family:Avenir,Helvetica,Arial,sanssdfasdfa-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#2c3e50;margin-top:60px}",""]),e.exports=t},f6f5:function(e,t,o){var a=o("24fb");t=a(!1),t.push([e.i,".loader[data-v-0ff32368]{position:fixed;top:50%;left:50%;text-align:center}.map-layer[data-v-0ff32368]{position:absolute!important;left:0;top:0;bottom:0;right:0;width:100%;z-index:3}.map-layer .mapboxgl-canvas[data-v-0ff32368]{left:0}",""]),e.exports=t}});