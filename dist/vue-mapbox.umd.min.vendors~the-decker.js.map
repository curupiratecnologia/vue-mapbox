{"version":3,"sources":["webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/constants.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/merge-options.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack://vue-mapbox/./node_modules/core-js/internals/function-bind.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.weak-map.js","webpack://vue-mapbox/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack://vue-mapbox/./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack://vue-mapbox/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack://vue-mapbox/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.browser.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-error-message.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack://vue-mapbox/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/validate-loader-version.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/string-iterator.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/array-buffer-iterator.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/AwaitValue.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/AsyncGenerator.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/blob-iterator.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/stream-iterator.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/make-iterator/make-iterator.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/javascript-utils/memory-copy-utils.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/iterator-utils/async-iteration.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/check-errors.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-loader-context.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/worker-utils/get-worker-url.js","webpack://vue-mapbox/./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-thread.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-pool.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/worker-utils/worker-farm.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/javascript-utils/binary-utils.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/parse-with-worker.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/env/globals.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/constants.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/event-manager.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack://vue-mapbox/./node_modules/@deck.gl/mapbox/dist/esm/deck-utils.js","webpack://vue-mapbox/./node_modules/@deck.gl/mapbox/dist/esm/mapbox-layer.js","webpack://vue-mapbox/./node_modules/node-libs-browser/mock/process.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/webgl-checks.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.reflect.construct.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.map.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack://vue-mapbox/./node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/index.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.reflect.get.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack://vue-mapbox/./node_modules/@deck.gl/layers/dist/esm/arc-layer/arc-layer-vertex.glsl.js","webpack://vue-mapbox/./node_modules/@deck.gl/layers/dist/esm/arc-layer/arc-layer-fragment.glsl.js","webpack://vue-mapbox/./node_modules/@deck.gl/layers/dist/esm/arc-layer/arc-layer.js","webpack://vue-mapbox/./node_modules/core-js/internals/collection-strong.js","webpack://vue-mapbox/./node_modules/gl-matrix/esm/mat4.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/asyncIterator.js","webpack://vue-mapbox/./node_modules/gl-matrix/esm/vec2.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack://vue-mapbox/./node_modules/core-js/internals/collection.js","webpack://vue-mapbox/./node_modules/gl-matrix/esm/vec4.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/typeof.js","webpack://vue-mapbox/./node_modules/math.gl/dist/esm/index.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/globals.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/color.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/assert.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/lib/log.js","webpack://vue-mapbox/./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/utils/index.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/es5/env/globals.js","webpack://vue-mapbox/./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack://vue-mapbox/./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack://vue-mapbox/./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack://vue-mapbox/./node_modules/gl-matrix/esm/vec3.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack://vue-mapbox/./node_modules/@babel/runtime/regenerator/index.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack://vue-mapbox/./node_modules/core-js/internals/collection-weak.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack://vue-mapbox/./node_modules/core-js/modules/es.symbol.async-iterator.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack://vue-mapbox/./node_modules/core-js/internals/freezing.js","webpack://vue-mapbox/./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/assert.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-viewport.js","webpack://vue-mapbox/./node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","webpack://vue-mapbox/./node_modules/probe.gl/env.js","webpack://vue-mapbox/./node_modules/hammerjs/hammer.js","webpack://vue-mapbox/./node_modules/gl-matrix/esm/common.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack://vue-mapbox/./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack://vue-mapbox/./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/es5/env/index.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://vue-mapbox/./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack://vue-mapbox/./node_modules/path-browserify/index.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://vue-mapbox/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack://vue-mapbox/./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack://vue-mapbox/./node_modules/core-js/internals/internal-metadata.js","webpack://vue-mapbox/./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack://vue-mapbox/./node_modules/@math.gl/core/dist/esm/lib/validators.js"],"names":["NullLog","this","key","value","_","ConsoleLog","console","_this$console$log","_len","arguments","length","args","Array","_key","log","bind","apply","concat","_this$console$info","_len2","_key2","info","_this$console$warn","_len3","_key3","warn","_this$console$error","_len4","_key4","error","DEFAULT_LOADER_OPTIONS","CDN","worker","dataType","metadata","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread","target","i","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","constructor","loaders","_state","state","globalOptions","mergeOptions","loader","options","url","topOptions","undefined","validateLoaderOptions","mergeOptionsInternal","idOptions","id","loaderOptions","deprecatedOptions","defaultOptions","name","loaderDefaultOptions","mergedOptions","addUrlOptions","mergeNestedFields","baseUri","DEFAULT_HIGHLIGHT_COLOR","Uint8Array","DEFAULT_MODULE_OPTIONS","pickingSelectedColor","pickingHighlightColor","pickingActive","pickingAttribute","getUniforms","opts","uniforms","selectedColor","slice","picking_uSelectedColorValid","picking_uSelectedColor","color","from","x","Number","isFinite","picking_uHighlightColor","picking_uActive","Boolean","picking_uAttribute","vs","fs","inject","order","injection","picking","aFunction","isObject","factories","construct","C","argsLength","list","Function","join","module","exports","that","fn","partArgs","call","boundFunction","prototype","ERR_TYPE_DEDUCTION","getGLTypeFromTypedArray","arrayOrType","type","ArrayBuffer","isView","Float32Array","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","Int32Array","Error","getTypedArrayFromGLType","glType","_ref","_ref$clamped","clamped","flipRows","_ref2","data","width","height","_ref2$bytesPerPixel","bytesPerPixel","temp","bytesPerRow","y","topOffset","bottomOffset","set","subarray","copyWithin","scalePixels","_ref3","newWidth","Math","round","newHeight","newData","c","assert","condition","message","InternalWeakMap","global","redefineAll","InternalMetadataModule","collection","collectionWeak","enforceIternalState","enforce","NATIVE_WEAK_MAP","IS_IE11","ActiveXObject","isExtensible","wrapper","init","$WeakMap","getConstructor","REQUIRED","WeakMapPrototype","nativeDelete","nativeHas","has","nativeGet","get","nativeSet","frozen","createMat4","extractCameraVectors","viewMatrix","viewMatrixInverse","eye","direction","up","right","scratchArray","cameraPosition","cameraDirection","cameraUp","cameraRight","nearCenter","farCenter","a","getFrustumPlanes","aspect","near","far","fovyRadians","position","copy","nearFarScale","len","normalize","widthScale","nearHeight","tan","nearWidth","scale","add","normal","clone","negate","distance","dot","planes","subtract","cross","left","top","bottom","fp64LowPart","fround","toDoublePrecisionArray","typedArray","_ref3$size","size","_ref3$startIndex","startIndex","endIndex","count","allocate","sourceIndex","targetIndex","j","getHiResTimestamp","timestamp","window","performance","now","process","hrtime","timeParts","Date","polyfillContext","gl","luma","polyfilled","initializeExtensions","installPolyfills","installOverrides","target2","global_","extensions","EXTENSIONS","getSupportedExtensions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","extension","getExtension","err","originalFunc","polyfill","polyfills","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getOwnPropertyNames","polyfillExtension","defaults","_defaults$meta","meta","_meta$suffix","suffix","ext","_loop","_Object$keys","_i","extKey","_createForOfIteratorHelper","o","allowArrayLike","it","isArray","_unsupportedIterableToArray","F","s","n","e","_e","f","TypeError","normalCompletion","didErr","step","_e2","minLen","_arrayLikeToArray","toString","test","arr","arr2","getGlobalLoaderRegistry","loaderRegistry","registerLoaders","normalizedLoader","find","registeredLoader","unshift","getRegisteredLoaders","_interopRequireDefault","isMobile","getBrowser","_globals","_isBrowser","_isElectron","orientation","mockUserAgent","navigator_","navigator","userAgent","indexOf","isMSIE","isTrident","chrome","safari","mozInnerScreenX","globals","self","document","isBrowser","String","browser","matches","version","match","nodeVersion","parseFloat","isElectron","versions","electron","realUserAgent","LIFECYCLE","NO_STATE","MATCHED","INITIALIZED","AWAITING_GC","AWAITING_FINALIZATION","FINALIZED","PROP_SYMBOLS","COMPONENT","ASYNC_DEFAULTS","ASYNC_ORIGINAL","ASYNC_RESOLVED","isBoolean","isFunction","isIterable","isAsyncIterable","asyncIterator","isResponse","Response","arrayBuffer","text","json","isBlob","Blob","isReadableDOMStream","ReadableStream","tee","cancel","getReader","isBuffer","isReadableNodeStream","read","pipe","readable","isReadableStream","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","replace","FileReadableResponse","fileOrBlob","_fileOrBlob","bodyUsed","_arrayBuffer","mark","_callee","_this$_getFileReader","reader","promise","wrap","_context","prev","_getFileReader","readAsArrayBuffer","abrupt","stop","_text","_callee2","_this$_getFileReader2","_context2","readAsText","_json","_callee3","_context3","sent","JSON","parse","FileReader","Promise","resolve","reject","onerror","onabort","onload","result","Headers","fetchFileReadable","getErrorMessageFromResponse","_x","_getErrorMessageFromResponse","response","contentType","status","headers","includes","t0","statusText","t1","fetchFile","_fetchFile","_args","fetch","ok","VERSION","validateLoaderVersion","coreVersion","loaderVersion","parseVersion","parts","split","map","major","minor","_marked","makeStringIterator","string","_options$chunkSize","chunkSize","offset","textEncoder","chunkLength","chunk","TextEncoder","min","encode","makeArrayBufferIterator","byteOffset","chunkByteLength","sourceArray","chunkArray","byteLength","_AwaitValue","wrapped","_awaitAsyncGenerator","AwaitValue","AsyncGenerator","gen","front","back","send","arg","request","resume","wrappedAwait","then","settle","_invoke","_wrapAsyncGenerator","DEFAULT_CHUNK_SIZE","makeBlobIterator","_makeBlobIterator","file","end","readFileSlice","_x2","_readFileSlice","fileReader","onloadend","event","makeStreamIterator","stream","getIterator","makeBrowserStreamIterator","makeNodeStreamIterator","_makeBrowserStreamIterator","_yield$_awaitAsyncGen","releaseLock","_makeNodeStreamIterator","_readableState","ended","onceReadable","_x3","_onceReadable","once","makeIterator","body","concatenateArrayBuffers","source1","source2","sourceArray1","sourceArray2","concatenateChunksAsync","_concatenateChunksAsync","_value","finish","checkFetchResponseStatus","_checkFetchResponseStatus","errorMessage","ERR_DATA","getUrlFromData","getArrayBufferOrStringFromDataSync","binary","textDecoder","TextDecoder","decode","_textDecoder","buffer","getArrayBufferOrStringFromData","_getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","context","previousContext","getLoaders","candidateLoaders","contextLoaders","workerURLCache","Map","getWorkerURL","workerSource","endsWith","workerUrl","buildScript","workerURL","blob","URL","createObjectURL","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","defaultOnMessage","WorkerThread","_ref2$name","onMessage","Worker","_process","_this","onmessage","lineno","colno","betterError","transferList","postMessage","terminate","WorkerPool","_ref$name","_ref$maxConcurrency","maxConcurrency","_ref$onDebug","onDebug","jobQueue","idleQueue","isDestroyed","destroy","jobName","_startQueuedJob","_this2","_getAvailableWorker","job","shift","backlog","_onWorkerDone","toLowerCase","DEFAULT_MAX_CONCURRENCY","WorkerFarm","workerPools","props","workerPool","workerName","_getWorkerPool","toArrayBuffer","uint8Array","canParseWithWorker","isSupported","localWorkerUrl","useWorker","parseWithWorker","workerFarm","getWorkerFarm","stringify","warning","arraybuffer","_workerFarm","onWorkerMessage","setProps","_onWorkerMessage","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","dataUrl","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","urlType","stripQueryString","EXT_PATTERN","selectLoader","normalizeLoaders","_getResourceUrlAndTyp","findLoaderByUrl","findLoaderByContentType","findLoaderByExamingInitialData","nothrow","getNoValidLoaderMessage","getFirstCharacters","findLoaderByExtension","_step3","_iterator3","loaderExtension","mimeType","_step4","_iterator4","mimeTypes","_step5","_iterator5","testText","testBinary","tests","some","magic","getMagicString","dataView","DataView","fromCharCode","getUint8","_x4","_parse","autoUrl","parseWithLoader","_x5","_x6","_x7","_x8","_parseWithLoader","parseTextSync","parseSync","load","_load","_assertThisInitialized","ReferenceError","_inherits","subClass","superClass","create","writable","configurable","setPrototypeOf","glErrorShadow","msg","synthesizeGLError","opt_msg","wrapGLError","getError","parseInt","WebGLVertexArrayObjectOES","isAlive","hasBeenBound","elementArrayBuffer","attribs","maxVertexAttribs","attrib","VertexAttrib","maxAttrib","enabled","normalized","stride","cached","recache","OESVertexArrayObject","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","index","vao","max","currentArrayBuffer","indx","instrumentExtension","canvas","addEventListener","reset_","polyfillVertexArrayObject","createVertexArray","original_getSupportedExtensions","original_getExtension","__OESVertexArrayObject","contextWasLost","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","splice","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","dependencies","ShaderAttribute","dataColumn","getBuffer","accessor","getAccessor","constantValue","elementOffset","glArrayFromType","Float64Array","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","removed","vertexOffset","resolveDoublePrecisionShaderAttributes","resolvedOptions","high","low","DataColumn","logicalType","doublePrecision","defaultValue","fill","bufferType","isIndexed","ELEMENT_INDEX_UINT32","defaultType","shaderAttributes","fp64","BYTES_PER_ELEMENT","settings","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","setData","release","isBuffer64Bit","doubleShaderAttributeDefs","shaderAttributeDef","_normalizeValue","_normalizeConstant","hasChanged","_areValuesEqual","_checkExternalBuffer","reallocate","setAccessor","subData","_opts$startOffset","startOffset","endOffset","numInstances","_ref3$copy","oldValue","ArrayType","illegalArrayType","out","start","_this$settings","value1","value2","_this$settings2","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","Infinity","iterable","objectInfo","getAccessorFromBuffer","startIndices","nested","elementStride","vertexCount","floor","_sourceIndex","_j","_sourceIndex2","_j2","EMPTY","FULL","rangeList","range","newRangeList","insertPosition","range0","padArrayChunk","_ref$start","getData","sourceLength","targetLength","datum","padArray","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","DEFAULT_TRANSITION_SETTINGS","interpolation","duration","easing","t","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","assign","getSourceBufferAttribute","attribute","divisor","getAttributeTypeFromSize","cycleBuffers","buffers","getAttributeBufferLength","multiplier","noAlloc","padBuffer","fromLength","fromStartIndices","_ref$getData","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","srcByteOffset","getter","getMissingData","_DataColumn","Attribute","_opts$transition","transition","_opts$noAlloc","_opts$update","update","_opts$accessor","_opts$transform","transform","_opts$startIndices","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","needsUpdate","needsRedraw","updateRanges","seal","_validateAttributeUpdaters","_ref$clearChangedFlag","clearChangedFlags","supportsTransition","reason","dataRange","setNeedsRedraw","_dataRange$startRow","_dataRange$endRow","updated","_step$value","_startRow","_endRow","_step2$value","getVertexOffset","_checkAttributeArray","clearNeedsUpdate","needsNormalize","row","vertexIndex","shaderAttributeDefs","shaderAttributeName","_ref4","accessorFunc","_createIterable","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","objectValue","numVertices","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","item","hasUpdater","limit","valid","layout","FS100","FS_GLES","FS300","getQualifierDetails","line","qualifiers","words","_words","qualifier","definition","getPassthroughFS","_ref$version","input","inputType","output","outputValue","convertToVec4","typeToChannelSuffix","typeToChannelCount","variable","BufferTransform","currentIndex","feedbackMap","varyings","bindings","resources","_initialize","binding","_setupTransformFeedback","sourceBuffers","transformFeedback","attributes","_getNextIndex","_setupBuffers","varyingName","feedbackBuffers","bufferOrParams","_props$sourceBuffers","sourceName","feedbackName","bufferName","bufferOrRef","sourceBuffer","usage","_createNewBuffer","_props$sourceBuffers2","_getFeedbackBuffers","_updateBindings","model","program","_updateBinding","_this$_swapBuffers","_swapBuffers","nextIndex","setBuffers","srcName","dstName","getShaderVersion","v","_SRC_TEX_PARAMETER_OV","SAMPLER_UNIFORM_PREFIX","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","texAttributeNames","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","lines","processAttributeDefinition","updatedLine","getVaryingType","sizeName","uniformDeclaration","posInstructions","getSizeUniforms","textureName","_sourceTextureMap$tex","getAttributeDefinition","getSamplerDeclerations","samplerName","uniformDeclerations","varying","qualaiferDetails","textureMap","attributeData","_getSamplerDecleratio","channels","sampleInstruction","SRC_TEX_PARAMETER_OVERRIDES","FS_OUTPUT_VARIABLE","TextureTransform","_swapTexture","updatedModelProps","_processVertexShader","_this$bindings$this$c","sourceTextures","framebuffer","parameters","discard","hasSourceTextures","hasTargetTexture","sampler","transform_elementID","elementIDBuffer","_setSourceTextureParameters","sizeUniforms","viewport","_setupTextures","_ref$packed","packed","pixels","channelCount","packedPixels","packCount","currentResources","ownTexture","_targetTextureVarying","textureOrReference","refTexture","_targetRefTexName","_createNewTexture","_props$_sourceTexture","_sourceTextures","_targetTexture","_createTargetTexture","_updateElementIDBuffer","elementCount","elementIds","array","_this$_swapTextures","_swapTextures","_binding","attachments","resizeAttachments","resize","setParameters","_parameters","texture","pixelStore","_this$bindings$this$c2","_updateForTextures","combinedInject","_fs","modules","Transform","bufferTransform","textureTransform","_opts$clearRenderTarg","clearRenderTarget","updatedOpts","_updateDrawOptions","clear","swapped","resourceTransforms","resourceTransform","swap","getFramebuffer","setVertexCount","_buildResourceTransforms","_updateModelProps","drawMode","setupResources","updatedProps","updateModelProps","canCreateBufferTransform","canCreateTextureTransform","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","getDrawOptions","GPUInterpolationTransition","timeline","attributeInTransition","currentStartIndices","currentLength","getTransform","bufferOpts","transitionSettings","padBufferOpts","enter","aFrom","aTo","vCurrent","_this$transition","time","_this$transition$sett","run","pop","inProgress","attributeType","defines","ATTRIBUTE_TYPE","GPUSpringTransition","getTexture","aPrev","aCur","vNext","depthTest","blend","blendFunc","blendEquation","isTransitioning","format","border","mipmaps","dataFormat","TRANSITION_TYPES","AttributeTransitionManager","transitions","attributeName","_removeTransition","_ref2$transitions","getTransitionSetting","_updateAttribute","_attributeName","_attribute","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","TRACE_UPDATE_START","TRACE_UPDATE_END","TRACE_ATTRIBUTE_UPDATE_START","TRACE_ATTRIBUTE_ALLOCATE","TRACE_ATTRIBUTE_UPDATE_END","AttributeManager","_ref$id","stats","updateTriggers","accessors","userData","attributeTransitionManager","finalize","clearRedrawFlags","redraw","updaters","_add","instanced","attributeNameArray","triggerName","invalidatedAttributes","_invalidateTrigger","debug","setNeedsUpdate","_ref2$startIndices","_ref2$props","_ref2$buffers","_ref2$context","timeStart","accessorName","setExternalBuffer","setBinaryValue","setConstantValue","timeEnd","transitionUpdated","changedAttributes","getAttributes","hasAttribute","excludeAttributes","getShaderAttributes","extraProps","newAttributes","newAttribute","_createAttribute","_mapUpdateTriggersToAttributes","elements","triggers","getUpdateTriggers","updateBuffer","_Transition","CPUInterpolationTransition","fromValue","toValue","EPSILON","updateSpringElement","cur","dest","velocity","delta","damper","updateSpring","distanceSquare","d","sqrt","abs","CPUSpringTransition","_this$_prevValue","_prevValue","_this$_currValue","_currValue","nextValue","UniformTransitionManager","_transition","_transition$value","remove","propsInTransition","propTypes","getPropTypes","propName","propType","validate","oldProps","propsChangedReason","compareProps","newProps","ignoreProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTriggers","dataChanged","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","isTransitionable","comparePropValues","_ref$ignoreProps","_ref$propTypes","_ref$triggerName","changed","_i2","_Object$keys2","hasOwnProperty","_changed","newProp","oldProp","equal","equals","dataComparator","_dataDiff","diffReason","diffUpdateTrigger","all","triggerChanged","_diffReason","oldExtensions","newTriggers","oldTriggers","layer","LayerType","_propTypes","ERR_NOT_OBJECT","ERR_NOT_CONTAINER","container","isPlainObject","mergeShaders","findIndex","mergedInjection","lngLatZToWorldPosition","lngLatZ","offsetMode","p","projectPosition","_lngLatZ","longitude","latitude","_lngLatZ$","z","distanceScales","getDistanceScales","unitsPerMeter","normalizeParameters","normalizedParams","coordinateSystem","coordinateOrigin","fromCoordinateSystem","fromCoordinateOrigin","DEFAULT","isGeospatial","LNGLAT","CARTESIAN","getWorldPosition","modelMatrix","_position","_vec4$transformMat","vec4","_vec4$transformMat2","LNGLAT_OFFSETS","METER_OFFSETS","params","_normalizeParameters","_getOffsetOrigin","geospatialOrigin","shaderCoordinateOrigin","worldPosition","positionCommonSpace","vec3","TYPE_DEFINITIONS","number","optional","arrayEqual","valueType","getTypeOf","compare","array1","array2","parsePropTypes","propDefs","defaultProps","deprecatedProps","_Object$entries","entries","_Object$entries$_i","propDef","deprecatedFor","parsePropType","normalizePropDefinition","createProps","component","propsPrototype","getPropsPrototype","propsInstance","freeze","componentClass","getOwnProperty","createPropsPrototypeAndTypes","_mergedDefaultProps","parent","parentClass","getPrototypeOf","parentDefaultProps","componentDefaultProps","componentPropDefs","createPropsPrototype","addAsyncPropsToPropPrototype","_deprecatedProps","addDeprecatedPropsToPropPrototype","parentProps","getComponentName","newValue","nameStr","newPropName","deprecated","defaultValues","descriptors","async","getDescriptorForAsyncProp","internalState","hasAsyncProp","getAsyncProp","prop","componentName","EMPTY_PROPS","ComponentState","asyncProps","onAsyncPropUpdated","oldAsyncProps","asyncProp","resolvedValue","pendingLoadCount","resolvedLoadCount","isAsyncPropLoading","_watchPromise","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_propName","_value2","_didAsyncInputValueChange","_resolveAsyncIterable","_setPropValue","lastValue","loadCount","freezeAsyncOldProps","_postProcessValue","_setAsyncPropValue","onDataLoad","_resolveAsyncIterable2","previousValue","dataTransform","counter","Component","lifecycle","_ComponentState","LayerState","attributeManager","subLayers","TRACE_CHANGE_FLAG","TRACE_INITIALIZE","TRACE_UPDATE","TRACE_FINALIZE","TRACE_MATCHED","areViewportsEqual","memoize","oldViewport","pickingColorCache","__diff","resourceManager","loadOptions","getLoadOptions","inResourceManager","contains","resourceId","persistent","subscribe","onChange","reloadAsyncProp","consumerId","requestId","visible","pickable","opacity","onHover","onClick","onDragStart","onDrag","onDragEnd","wrapLongitude","positionFormat","colorFormat","getPolygonOffset","layerIndex","highlightedObjectIndex","autoHighlight","highlightColor","_Component","Layer","className","layerName","updateObject","setChangeFlags","stateChanged","layerManager","_getNeedsRedraw","hasUniformTransition","shouldUpdateState","_getUpdateParams","uniformTransitions","active","models","xyz","_worldToPixels","pixelProjectionMatrix","_worldToPixels2","xy","unproject","pickingEvent","_color","i1","i2","i3","shaders","getShaders","changeFlags","propsOrDataChanged","_ref5","getAttributeManager","invalidateAll","getModels","unsubscribe","draw","_ref6","mode","viewportChanged","_update","invalidate","_setModelAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","getChangedAttributes","updateAttributes","updateTransition","_ref7","cacheSize","newCacheSize","pickingColor","encodePickingColor","setAttributes","_this$getAttributeMan","pickingColors","instancePickingColors","colors","decodePickingColor","_this$getAttributeMan2","updateSubBuffer","_initState","initializeState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_updateState","stateNeedsUpdate","currentProps","currentViewport","_updateUniformTransition","updateParams","updateState","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_updateModules","isComposite","_renderLayers","_updateAttributes","setInstanceCount","clearChangeFlags","resetOldProps","finalizeState","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_ref8","_ref8$moduleParameter","moduleParameters","_ref8$uniforms","_ref8$parameters","_updateAttributeTransition","pow","setModuleParameters","offsets","polygonOffset","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","flags","somethingChanged","invalidateAttribute","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","updateModuleSettings","_ref9","isInteger","getOldProps","attributeManagerNeedsRedraw","getNeedsRedraw","_getAttributeManager","addInstanced","calculateInstancePickingColors","_onAsyncPropUpdated","setAsyncProps","oldLayer","diffProps","window_","process_","checkProps","propChecks","_propChecks$removedPr","removedProps","_propChecks$deprecate","_propChecks$replacedP","replacedProps","replacementProp","_replacementProp","_propName2","_replacementProp2","ERR_RESOURCE_METHOD_UNDEFINED","Resource","_opts$userData","_bound","_handle","handle","_createHandle","_addStats","_ref$deleteChildren","deleteChildren","children","_deleteHandle","_removeStats","child","funcOrHandle","_bindHandle","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl1","webgl2Default","webgl2","_getParameter","values","parameterKeys","_setParameter","setParameter","methodNames","incrementCount","decrementCount","bytes","addCount","subtractCount","FACES","_Texture","TextureCube","initialize","_props$mipmaps","_props$parameters","setCubeMapImageData","loaded","generateMipmap","face","_ref$x","_ref$y","_ref$mipmapLevel","mipmapLevel","_subImage","_setCubeMapImageData","_ref2$border","_ref2$format","_ref2$type","imageDataMap","resolvedFaces","_this3","facePixels","image","lodLevel","texImage2D","unbind","_this4","_options$border","_options$format","_options$type","imageData","resolvedImageData","setImageDataForFace","Texture3D","depth","unpackFlipY","_ref$level","level","_ref$dataFormat","_ref$depth","_ref$border","_ref$type","_ref$offset","_ref$parameters","_trackDeallocatedMemory","bindTexture","texImage3D","_trackAllocatedMemory","channelSize","cloneTextureFrom","overrides","TextureType","textureOptions","toFramebuffer","$","fails","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","stat","forced","sham","_MathArray","Matrix","printRowMajor","RANK","col","ELEMENTS","columnIndex","firstIndex","columnVector","IDENTITY","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","_Matrix","Matrix4","identity","check","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","q","mat4","_computeInfinitePerspectiveOffCenter","center","_eye","_ref2$near","_ref2$far","_ref3$fovy","fovy","PI","_ref3$aspect","_ref3$focalDistance","focalDistance","_ref3$near","_ref3$far","halfY","ortho","_ref4$fovy","_ref4$fov","fov","_ref4$aspect","_ref4$near","_ref4$far","scaleResult","getScale","inverseScale0","inverseScale1","inverseScale2","radians","rx","ry","rz","rotateX","rotateY","rotateZ","axis","factor","vec","vector","transformAsPoint","vec2","translate","transformAsVector","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","_arrayWithHoles","_iterableToArrayLimit","_arr","_n","_d","_s","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","isEqual","b","compute","cachedResult","cachedArgs","_UNIFORM_SETTERS","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","toTypedArray","uniformLength","Type","cache","parseUniformName","UNIFORM_NAME_REGEXP","getUniformSetter","location","setter","checkUniformValues","uniformMap","uniformName","shouldCheck","checkUniformValue","checkUniformArray","checkLength","copyUniform","uniform1i","functionName","toArray","uniformSetter","cacheLength","arrayValue","getShaderName","shader","defaultName","SHADER_NAME_REGEXP","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","getShaderTypeName","parseGLSLCompilerError","errLog","src","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","errorString","segments","isNaN","addLineNumbers","formatErrors","column","substring","trim","padLeft","delim","maxDigits","lineNumber","digits","prefix","ERR_SOURCE","_Resource","Shader","getTypeName","_compile","getShaderParameter","getShaderSource","getTranslatedShaderSource","shaderSource","compileShader","compileStatus","infoLog","getShaderInfoLog","_parseGLSLCompilerErr","deleteShader","getSource","_Shader","VertexShader","createShader","_Shader2","FragmentShader","ProgramConfiguration","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","locationOrName","attributeInfo","getAttributeInfo","getVaryingInfo","getProgramParameter","_gl$getActiveAttrib","getActiveAttrib","getAttribLocation","_addAttribute","sort","_gl$getTransformFeedb","getTransformFeedbackVarying","_addVarying","compositeType","_decomposeCompositeGL","components","_inferProperties","_decomposeCompositeGL2","LOG_PROGRAM_PERF_PRIORITY","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","Program","stubRemovedMethods","_isCached","_setId","hash","_props$bufferMode","bufferMode","_textureUniforms","_texturesRenderable","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","configuration","setUniforms","logPriority","_ref$drawMode","_ref$isIndexed","_ref$indexType","indexType","_ref$instanceCount","instanceCount","_ref$isInstanced","isInstanced","_ref$vertexArray","vertexArray","samplers","priority","fb","useProgram","_areTexturesRenderable","bindForDraw","primitiveMode","begin","_bindTextures","drawElementsInstanced","drawRangeElements","drawElements","drawArraysInstanced","drawArrays","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","createProgram","deleteProgram","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","getName","attachShader","linkProgram","validateProgram","linked","getProgramInfoLog","_uniformCount","getActiveUniform","_parseUniformName","getUniformLocation","l","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","_WEBGL_PARAMETERS","_WEBGL2_CONTEXT_POLYF","OES_element_index","WEBGL_draw_buffers","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_texture_filter_anisotropic","WEBGL_debug_renderer_info","GL_FRAGMENT_SHADER_DERIVATIVE_HINT","GL_DONT_CARE","GL_GPU_DISJOINT_EXT","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","GL_UNMASKED_VENDOR_WEBGL","GL_UNMASKED_RENDERER_WEBGL","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","getParameterPolyfill","originalGetParameter","OES_vertex_array_object","ANGLE_instanced_arrays","ERR_VAO_NOT_SUPPORTED","getExtensionData","WEBGL2_CONTEXT_POLYFILLS","deleteVertexArray","bindVertexArray","isVertexArray","vertexAttribDivisor","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","getQuery","getQueryObject","getQueryParameter","WEBGL2_CONTEXT_OVERRIDES","readBuffer","attachment","_getExtensionData","getInternalformatParameter","getTexParameter","TEXTURE_MAX_ANISOTROPY_EXT","hint","channelHandles","animationHandles","Timeline","animations","playing","lastEngineTime","_props$delay","delay","_props$duration","POSITIVE_INFINITY","_props$rate","rate","_props$repeat","repeat","channel","_setChannelTime","animationHandle","animation","detachAnimation","animationData","_channel","setTime","getTime","channelHandle","engineTime","offsetTime","totalDuration","_loadCount","_subscribers","consumer","isLoaded","_error","_content","_loader","forceUpdate","_data","subscriber","ResourceManager","protocol","_resources","_consumers","_pruneRequest","_ref2$forceUpdate","_ref2$persistent","res","prune","_ref4$requestId","_track","setTimeout","_prune","consumers","inUse","DEFAULT_MODULES","geometry","project","SHADER_HOOKS","createProgramManager","programManager","getDefaultProgramManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","TRACE_SET_LAYERS","TRACE_ACTIVATE_VIEWPORT","INITIAL_CONTEXT","deck","shaderCache","pickingFBO","mousePosition","LayerManager","lastRenderedLayers","layers","_needsRedraw","_needsUpdate","_debug","_onError","activateViewport","_finalizeLayer","layerNeedsRedraw","_ref2$layerIds","layerIds","layerId","setLayers","onError","newLayers","shouldUpdate","flatten","_updateLayers","stage","oldLayers","oldLayerMap","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","_generatedLayers","newLayer","sublayers","validateProps","_transferLayerState","_updateLayer","_initializeLayer","getSubLayers","_handleError","_transferState","_finalize","deepEqual","aValue","bValue","ViewManager","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractiveStateChange","viewId","controller","rect","containsPixel","viewMap","view","viewOrViewId","getView","getViewStateId","filterViewState","viewports","getViewports","pixel","_setViews","_setViewState","_setSize","_rebuildViewports","viewsChanged","_diffViews","viewStateChanged","Controller","_onViewStateChange","onStateChange","makeViewport","_getViewport","controllerProps","_createController","oldControllers","getViewState","_updateController","_buildViewportMap","newViews","oldViews","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","getPosition","extent","View","_props$id","_props$x","_props$y","_props$width","_props$height","_props$projectionMatr","projectionMatrix","_props$fovy","_props$near","_props$far","_props$modelMatrix","_props$viewportInstan","viewportInstance","_props$type","displayName","_parseDimensions","viewChanged","viewportDimensions","getDimensions","newViewState","_y","_width","_height","defaultOpts","ViewportType","TransitionInterpolator","extract","required","_opts","_propsToCompare","_propsToExtract","_requiredProps","nextProps","startProps","endProps","startViewStateProps","endViewStateProps","_checkRequiredProps","transitionDuration","DEFAULT_PROPS","DEFAULT_REQUIRED_PROPS","_TransitionInterpolat","LinearInterpolator","transitionProps","noop","TRANSITION_EVENTS","BREAK","SNAP_TO_END","IGNORE","transitionEasing","transitionInterpolator","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","TransitionManager","ControllerState","_onTransitionUpdate","transitionTriggered","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","_triggerTransition","interpolator","arePropsEqual","_isUpdateDueToCurrentTransition","startViewstate","shortestPathFrom","getDuration","initialProps","initializeProps","onStart","onUpdate","onInterrupt","_onTransitionEnd","onEnd","callback","_transition$settings","interpolateProps","getViewportProps","interactionState","inTransition","oldViewState","NO_TRANSITION_PROPS","ZOOM_ACCEL","EVENT_TYPES","WHEEL","PAN","PINCH","DOUBLE_TAP","KEYBOARD","controllerState","controllerStateProps","transitionManager","_events","isDragging","_customEvents","invertPan","handleEvent","eventName","off","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onDoubleTap","_onWheel","_onKeyDown","_this$controllerState","offsetCenter","pos","_this$controllerState2","handled","inside","stopPropagation","srcEvent","metaKey","altKey","ctrlKey","shiftKey","toggleEvents","processViewStateChange","_props$scrollZoom","scrollZoom","_props$dragPan","dragPan","_props$dragRotate","dragRotate","_props$doubleClickZoo","doubleClickZoom","_props$touchZoom","touchZoom","_props$touchRotate","touchRotate","_props$keyboard","keyboard","isInteractive","eventNames","on","newControllerState","getInteractiveState","getCenter","isPointInBounds","panStart","rotateStart","updateViewport","alternateMode","isFunctionKeyPressed","rightButton","_onPanMove","_onPanRotate","panEnd","rotateEnd","isPanning","isRotating","pan","deltaX","deltaY","_this$controllerState3","deltaScaleX","deltaScaleY","rotate","preventDefault","exp","zoom","isZooming","zoomStart","startPinchRotation","rotation","zoomEnd","isZoomOut","_getTransitionProps","funcKey","keyCode","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","customEvents","ViewState","_viewportProps","_applyConstraints","PITCH_MOUSE_THRESHOLD","PITCH_ACCEL","LINEAR_TRANSITION_PROPS","MAPBOX_LIMITS","minZoom","maxZoom","minPitch","maxPitch","DEFAULT_STATE","pitch","bearing","altitude","_ViewState","MapState","_ref$bearing","_ref$pitch","_ref$altitude","_ref$maxZoom","_ref$minZoom","_ref$maxPitch","_ref$minPitch","startPanLngLat","startZoomLngLat","startBearing","startPitch","startZoom","_interactiveState","_getUpdatedState","_unproject","startPos","_this$_calculateNewLn","_calculateNewLngLat","_this$_calculateNewLn2","_ref5$deltaScaleX","_ref5$deltaScaleY","_this$_interactiveSta","_this$_calculateNewPi","_calculateNewPitchAndBearing","_this$_interactiveSta2","_calculateNewZoom","zoomedViewport","_zoomedViewport$getMa","getMapCenterByLngLatPosition","lngLat","_zoomedViewport$getMa2","_zoomFromCenter","_panFromCenter","fromProps","_this$_viewportProps","_this$_viewportProps2","_this$_viewportProps3","log2","_ref10","_this$_viewportProps4","_Controller","MapController","_this$getCenter","_this$getCenter2","centerY","startY","_View","MapView","_getControllerProps","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","_props$color","_props$intensity","intensity","DEFAULT_LIGHT_DIRECTION","DirectionalLight","_props$direction","_props$_shadow","_shadow","shadow","Effect","Pass","_Pass","LayersPass","_drawLayers","onViewportActive","_props$clearCanvas","clearCanvas","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewports","subViewport","_drawLayersInViewport","_ref$pass","pass","layerFilter","effects","indexResolver","layerIndexResolver","shouldDrawLayer","_shouldDrawLayer","layerRenderIndex","layerParam","_getModuleParameters","layerParameters","getLayerParameters","glViewport","getGLViewport","clearOpts","scissorTest","scissor","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","_drawLayerParams$laye","drawLayer","isPicking","renderPass","autoWrapLongitude","devicePixelRatio","effect","getModuleParameters","layerIndices","resolvers","isDrawn","indexOverride","_offset","parentId","resolver","clientHeight","dimensions","pixelRatio","drawingBufferWidth","drawingBufferHeight","_LayersPass","ShadowPass","_attachments","shadowMap","depthBuffer","fbo","depthRange","clearColor","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","getViewportCenterPosition","getMemoizedViewProjectionMatrices","getViewProjectionMatrices","DEFAULT_SHADOW_COLOR","VECTOR_TO_POINT_MATRIX","screenToCommonSpace","pixelUnprojectionMatrix","_xyz","coord","viewProjectionMatrix","invert","shadowMatrices","projectionMatrices","farZ","corners","shadowMatrix","positions","corner","multiplyRight","createShadowUniforms","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadowMaps","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","project_uCenter","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","project_uCoordinateSystem","project_uProjectionMode","WEB_MERCATOR","dummyShadowMap","shadowUniforms","_opts$shadowEnabled","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","_Effect","LightingEffect","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","shadowPass","render","lightSources","directionalLight","getProjectedLight","pointLight","removeDefaultModule","lightMatrices","lookAt","DEFAULT_LIGHTING_EFFECT","EffectManager","_internalEffects","setEffects","cleanup","_createInternalEffects","_effect","DrawLayersPass","PICKING_PARAMETERS","PickLayersPass","_drawPickingBuffer","_ref$deviceRect","deviceRect","redrawReason","pickZ","depthMask","colorMask","pickParameters","blendColor","TRACE_RENDER_LAYERS","DeckRenderer","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","layerPass","getDefaultFramebuffer","_preRender","outputBuffer","_postRender","preRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","pickedColor","pickedLayer","pickedObjectIndex","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy","dy2","pickedLayerIndex","dx","d2","_pickedLayerIndex","_dy","_dx","pickedX","pickedY","getUniqueObjects","uniqueColors","colorKey","processPickInfo","pickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","getViewportFromCoordinates","coordinate","targetZ","baseInfo","picked","devicePixel","infos","getLayerPickingInfo","pickingModuleParameters","sourceLayer","getPickingInfo","DeckPicker","depthFBO","_pickClosestObject","_pickVisibleObjects","colorBufferFloat","attach","pickableLayers","isPickable","_ref2$radius","radius","_ref2$depth","_ref2$mode","unproject3D","_getPickable","_resizeBuffer","devicePixelRange","_this$pickingFBO","_getPickingRect","deviceWidth","deviceHeight","_drawAndSample","zValues","metersPerUnit","clearPickingColor","_layerId","restorePickingColors","emptyInfo","_ref3$width","_ref3$height","_ref3$mode","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueInfos","sourceX","sourceY","sourceWidth","sourceHeight","defaultStyle","zIndex","pointerEvents","backgroundColor","padding","display","Tooltip","canvasParent","parentElement","el","createElement","style","appendChild","displayInfo","innerText","innerHTML","html","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","isImageTypeSupported","getDefaultImageType","getImageType","getImageTypeOrNull","getImageData","getContext","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","btoa","getBlob","parseToImage","_parseToImage","blobOrDataUrl","objectUrl","webkitURL","loadToImage","revokeObjectURL","_loadToImage","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","_safeCreateImageBitmap","_args2","isEmptyObject","createImageBitmap","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getJpegMetadata","getGifMetadata","getBmpMetadata","isPng","getUint32","isGif","getUint16","isBmp","isJpeg","_getJpegMarkers","getJpegMarkers","tableMarkers","sofMarkers","marker","parseToNodeImage","parseImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","MIME_TYPES","ImageLoader","isJSON","firstChar","lastChar","existingVersion","_registerLoggers","GL_QUERY_RESULT","GL_QUERY_RESULT_AVAILABLE","GL_TIME_ELAPSED_EXT","GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","GL_ANY_SAMPLES_PASSED","GL_ANY_SAMPLES_PASSED_CONSERVATIVE","Query","_queryPending","_pollingPromise","hasTimerQuery","TIMER_QUERY","supported","_ref$conservative","conservative","resultAvailable","getResult","poll","isResultAvailable","requestAnimationFrame","cancelAnimationFrame","timerId","clearTimeout","isPage","statIdCounter","AnimationLoop","_props$onCreateContex","onCreateContext","_props$onAddHTML","onAddHTML","_props$onInitialize","onInitialize","_props$onRender","onRender","_props$onFinalize","onFinalize","_props$gl","_props$glOptions","glOptions","_props$debug","_props$createFramebuf","createFramebuffer","_props$autoResizeView","autoResizeViewport","_props$autoResizeDraw","autoResizeDrawingBuffer","_props$stats","_props$useDevicePixel","useDevicePixels","useDevicePixelRatio","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","startPromise","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","animationProps","appContext","_addCallbackData","_startLoop","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","_toDataURL","waitForRender","toDataURL","_this$props","_this$props2","_this$props3","_this$props4","element","getElementById","renderFrame","_requestAnimationFrame","readyState","animationLoop","renderFrameCallback","_this$display","_onSetupFrame","_resizeFramebuffer","startTime","tick","tock","_timeline","_animationLoop","_mousePosition","_this$_getSizeAndAspe","_getSizeAndAspect","_offScreen","_createInfoDiv","wrapperDiv","div","background","clientWidth","isTimerDisjoint","addTime","getTimerMilliseconds","beginTimeElapsedQuery","offsetX","offsetY","INPUT_START","INPUT_MOVE","INPUT_END","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","predict","enhancePointerEventInput","PointerEventInput","oldHandler","handler","ev","store","button","pointerId","enhanceMouseInput","MouseInput","eventType","pressed","which","manager","pointers","changedPointers","pointerType","Manager","RECOGNIZERS","Rotate","enable","Pinch","Swipe","Pan","threshold","Press","Tap","taps","RECOGNIZER_COMPATIBLE_MAP","pinch","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","pointerdown","pointermove","pointerup","touchstart","touchmove","touchend","INPUT_EVENT_TYPES","KEY_EVENTS","MOUSE_EVENTS","WHEEL_EVENTS","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","panstart","panmove","panup","pandown","panleft","panright","panend","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","click","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","WheelInput","events","passive","removeEventListener","WheelEvent","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelPosition","clientX","clientY","MOVE_EVENT_TYPE","OVER_EVENT_TYPE","OUT_EVENT_TYPE","LEAVE_EVENT_TYPE","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","DOWN_EVENT_TYPE","UP_EVENT_TYPE","KeyInput","enableDownEvent","enableUpEvent","tabIndex","outline","targetElement","srcElement","tagName","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","whichButtons","_event$srcEvent","buttons","leftButton","middleButton","getOffsetPosition","rootElement","getBoundingClientRect","scaleX","offsetWidth","scaleY","offsetHeight","clientLeft","clientTop","DEFAULT_OPTIONS","EventRegistrar","handlers","handlersByElement","_active","entry","isEmpty","mjolnirEvent","_normalizeEvent","_emit","parentNode","immediatePropagationStopped","stopImmediatePropagation","entriesToRemove","_entries$i","_entriesToRemove$_i","recognizers","recognizerOptions","touchAction","EventManager","_onBasicInput","_onOtherEvent","setElement","ManagerClass","recognizerName","recognizer","otherName","recognizeWith","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","_removeEventHandler","fallbackRecognizers","otherRecognizer","requireFailure","dropRequireFailure","enableEventType","isRecognizerUsed","eh","emit","getCursor","PropTypes","oneOfType","func","arrayOf","instanceOf","bool","pickingRadius","onWebGLInitialized","onResize","onBeforeRender","onAfterRender","onLoad","_framebuffer","_animate","_onMetrics","Deck","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","_onEvent","_onPointerDown","_onPointerMove","_pickAndCallback","_onRendererInitialized","_onRenderFrame","_onInteractiveStateChange","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","force","_customRender","_pick","resourceIds","method","statKey","getLayers","_checkForCanvasSizeChange","_this$_pick","pickedInfo","getTooltip","setTooltip","cursor","copyState","polygonOffsetFill","depthFunc","play","attachTimeline","pointerleave","_updateCanvasSize","renderOptions","renderLayers","getViews","getEffects","_setGLContext","_getFrameStats","_getMetrics","reset","table","_updateCursor","updateLayers","updateViewStates","_ref3$isDragging","eventOptions","getLastPickedObject","layerHandler","rootHandler","pickObject","animationLoopStats","lastTiming","getHz","getAverageTime","memoryStats","getDeckInstance","__deck","customRender","deckProps","triggerRepaint","isExternal","mapboxLayers","onMapMove","mapboxVersion","getMapboxVersion","afterRender","addLayer","removeLayer","updateLayer","getViewport","deckLayer","_map$getCenter","lng","lat","getZoom","getBearing","getPitch","_map$version$split$sl","_map$version$split$sl2","useMapboxProjection","nearZMultiplier","_deck$props$userData","mapboxLayerIds","layerInstance","MapboxLayer","renderingMode","matrix","nextTick","platform","arch","execPath","title","pid","env","argv","path","cwd","chdir","dir","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","_isNativeReflectConstruct","Reflect","Proxy","_construct","Parent","Class","isNativeReflectConstruct","Constructor","instance","_superPropBase","property","_get","receiver","base","superPropBase","desc","ERR_CONTEXT","ERR_WEBGL2","assertWebGLContext","assertWebGL2Context","getBuiltIn","anObject","nativeConstruct","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","proto","obj","__esModule","collectionStrong","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","Accessor","_assign","getBytesPerElement","getBytesPerVertex","passiveSupported","uidCounters","uid","isPowerOfTwo","isObjectEmpty","mathgl","config","COORDINATE_SYSTEM","PROJECTION_MODE","GLOBE","WEB_MERCATOR_AUTO_OFFSET","EVENTS","ZERO_VECTOR","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","calculateViewportUniforms","getOffsetOrigin","projectionMode","unprojectPosition","calculateMatrixAndOffset","viewMatrixUncentered","projectionCenter","cameraPosCommon","getUniformsFromViewport","_ref$devicePixelRatio","_ref$modelMatrix","_ref$coordinateSystem","_ref$autoWrapLongitud","positionOrigin","project_uWrapLongitude","project_uModelMatrix","_calculateMatrixAndOf","viewportSize","project_uCoordinateOrigin","project_uAntimeridian","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","unitsPerMeter2","unitsPerDegree","unitsPerDegree2","getOwnPropertyDescriptorModule","propertyKey","descriptor","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","Geometry","_props$drawMode","_props$attributes","_props$indices","indices","_props$vertexCount","_setAttributes","_calculateVertexCount","_print","DEFAULT_COLOR","getSourcePosition","sourcePosition","getTargetPosition","targetPosition","getSourceColor","getTargetColor","getWidth","getHeight","getTilt","greatCircle","widthUnits","widthMinPixels","widthMaxPixels","MAX_SAFE_INTEGER","_Layer","ArcLayer","project32","instanceSourcePositions","use64bitPositions","instanceTargetPositions","instanceSourceColors","instanceTargetColors","instanceWidths","instanceHeights","instanceTilts","setState","_getModel","widthMultiplier","metersPerPixel","NUM_SEGMENTS","numSegments","anInstance","iterate","defineIterator","setSpecies","DESCRIPTORS","fastKey","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","CONSTRUCTOR_NAME","IS_MAP","ADDER","first","last","getInternalState","define","previous","getEntry","callbackfn","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","iterated","kind","transpose","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","multiply","b0","b1","b2","b3","rad","b12","b20","b21","b22","hypot","sin","cos","fromQuat","w","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","rl","tb","nf","perspective","lr","bt","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","flattenArray","fillArray","_ref$count","total","copied","_asyncIterator","lerp","ax","ay","transformMat4","m","sub","formatValue","_ref$precision","precision","toPrecision","duplicateArray","clamp","ai","epsilon","oldEpsilon","printTypes","printDegrees","isForced","redefine","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","exported","fixMethod","KEY","nativeMethod","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","TransformFeedback","unused","bindOnUse","_unbindBuffers","setBuffer","_getVaryingIndex","_this$_getBufferParam","_getBufferParams","byteSize","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","bufferIndex","_this$_getBufferParam2","bindBufferRange","bindBufferBase","createTransformFeedback","deleteTransformFeedback","TypedArrayManager","_ref$overAlloc","overAlloc","_ref$poolSize","poolSize","_pool","_ref2$size","_ref2$padding","_ref2$copy","_ref2$initialize","newSize","newArray","_allocate","_release","ceil","pool","_typeof","LOG_UNSUPPORTED_FEATURE","hasFeature","feature","hasFeatures","every","isFeatureSupported","getFeatures","cap","caps","queryFeature","featureDefinition","__VERSION__","getStorage","storage","setItem","removeItem","LocalStorage","defaultSettings","_loadConfiguration","updateConfiguration","serialized","serializedConfiguration","getItem","formatTime","ms","formatted","toFixed","leftPad","padLength","formatImage","maxWidth","imageUrl","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","toUpperCase","addColor","autobind","predefined","propNames","originalConsole","DEFAULT_SETTINGS","ONCE","getTableHeader","Log","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","timeStamp","_getLogFunction","oldUsage","newUsage","logLevel","_table","columns","tag","_image","_ref2$message","_ref2$scale","_shouldLog","logImageInBrowser","logImageInNode","setting","collapsed","normalizeArguments","groupCollapsed","group","groupEnd","trace","isEnabled","getLevel","normalizeLogLevel","_method","getTotal","getDelta","decorateMessage","newLevel","setLevel","newPriority","resolvedLevel","messageType","_ref3$scale","asciify","fit","_ref4$message","_ref4$scale","img","_console","_console2","nodeName","_img","_console3","DEGREES_TO_RADIANS","DEFAULT_ZOOM","DEFAULT_DISTANCE_SCALES","Viewport","_opts$id","_opts$x","_opts$y","_opts$width","_opts$height","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","_ref$topLeft","topLeft","_coord","_ref2$topLeft","targetZWorld","_this$unprojectPositi","_this$unprojectPositi2","X","Y","Z","_this$projectFlat","_this$projectFlat2","_this$unprojectFlat","_this$unprojectFlat2","unprojectOption","topRight","bottomLeft","bottomRight","highPrecision","_this$projectionProps","projectionProps","orthographic","_opts$viewMatrix","_opts$longitude","_opts$latitude","_opts$zoom","_opts$position","_opts$modelMatrix","_opts$focalDistance","_opts$distanceScales","meterOffset","transformVector","_getCenterInWorld","commonPosition","_opts$projectionMatri","_opts$orthographic","_opts$fovy","_opts$near","_opts$far","_opts$focalDistance2","_createProjectionMatrix","vpm","_extractCameraVectors","viewportMatrix","_getPrototypeOf","__proto__","loadImage","crossOrigin","Texture2D","compositeSetters","glConstant","compositeSetter","getParameters","_getter","resetParameters","withParameters","_parameters$nocatch","nocatch","deepArrayEqual","isArrayX","isArrayY","cssToDeviceRatio","canvasSizeInfo","cssToDevicePixels","cssPixel","yInvert","ratio","getDevicePixelRatio","windowRatio","yHigh","xHigh","r","isWebGL","_version","isWebGL2","fp32shader","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","INITIAL_MODULE_OPTIONS","fp32","loggers","register","_loggers$eventType","VERTEX_SHADER","FRAGMENT_SHADER","ShaderModule","_ref$dependencies","_ref$deprecations","deprecations","_ref$defines","_ref$inject","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","normalizeInjections","moduleSource","_defaultGetUniforms","def","regex","old","RegExp","hook","resolveModules","getShaderDependencies","instantiateModules","moduleMap","moduleDepth","getDependencyGraph","_module","seen","isOldIE","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_SHADING_LANGUAGE_VERSION","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","FEATURES","getContextInfo","vendor","renderer","gpuVendor","identifyGPUVendor","gpuInfo","shadingLanguageVersion","compiledGlslExtensions","canCompileGLGSExtension","extensionName","behavior","canCompile","getFeature","getPlatformShaderDefines","debugInfo","getVersionDefines","glslVersion","isFragment","versionDefines","transpileShader","targetGLSLVersion","isVertex","convertVertexShaderTo300","convertFragmentShaderTo300","convertVertexShaderTo100","convertFragmentShaderTo100","_SHADER_TYPE","FS_OUTPUT_REGEX","outputMatch","outputName","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","FRAGMENT_SHADER_PROLOGUE","assembleShaders","assembleShader","assembleGetUniforms","_ref$hookFunctions","hookFunctions","_ref$transpileToGLSL","transpileToGLSL100","_ref$prologue","prologue","sourceLines","versionLine","coreSource","allDefines","getDefines","assembledSource","getShaderType","getApplicationDefines","normalizeHookFunctions","hookInjections","declInjections","mainInjections","checkDeprecations","getModuleSource","_match","_name","injectionType","getHookFunctions","moduleUniforms","injectShaderName","sourceText","hookName","hookFunction","signature","header","footer","_hook$split","_hook$split2","ProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","defaultProgramManager","moduleName","_props$vs","_props$fs","_props$defines","_props$inject","_props$varyings","_props$transpileToGLS","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","CONTEXT_DEFAULTS","throwOnError","manageState","createGLContext","_options","_options2","targetCanvas","getCanvas","createBrowserContext","instrumentGLContext","logInfo","_instrumented","getVersion","_options3","makeDebugContext","getContextDebugInfo","vendorMasked","rendererMasked","vendorUnmasked","rendererUnmasked","resizeGLContext","setDevicePixelRatio","onCreateError","statusMessage","_options$webgl","_options$webgl2","_ref$width","_ref$height","isPageLoaded","insertBefore","firstChild","webGL","driver","WebGL2RenderingContext","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","_typeof2","self_","document_","console_","isLoaderObject","hasParser","parseStream","parseInBatches","normalizeLoader","Stat","sampleSize","samples","_count","_samples","_checkSampling","_time","_startTime","_timerPending","lastSampleCount","lastSampleTime","Stats","_initializeStats","_getOrCreate","average","hz","NPOT_MIN_FILTERS","WebGLBuffer","Texture","textureUnit","linearFiltering","_props$pixels","_props$format","_props$border","_props$recreate","recreate","_props$pixelStore","_props$textureUnit","_props$depth","_this$_deduceParamete","_deduceParameters","compressed","activeTexture","_isNPOT","_updateForNPOT","setImageData","_ref2$mipmaps","_options$target","_options$pixels","_options$level","_options$offset","_options$parameters","_options$data","_options$width","_options$height","_options$dataFormat","_options$compressed","_this$_deduceParamete2","_this$_getDataType","_getDataType","compressedTexImage2D","_ref3$target","_ref3$pixels","_ref3$data","_ref3$x","_ref3$y","_ref3$level","_ref3$format","_ref3$type","_ref3$dataFormat","_ref3$compressed","_ref3$offset","_ref3$border","_ref3$parameters","_this$_deduceParamete3","ndarray","shape","compressedTexSubImage2D","texSubImage2D","_ref4$compressed","textureFormat","types","_this$_deduceImageSiz","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","HTMLVideoElement","videoWidth","videoHeight","createTexture","deleteTexture","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","_possibleConstructorReturn","assertThisInitialized","_$33190$36012$","EXT_FLOAT_WEBGL2","bpp","gl2","isFormatSupported","formats","gl1","Renderbuffer","_ref3$samples","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","Transition","_inProgress","removeChannel","addChannel","_onUpdate","isFinished","az","bx","by","bz","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag1","mag2","mag","cosine","acos","_COMPOSITE_GL_TYPES","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_POINTS","GL_LINES","GL_LINE_LOOP","GL_LINE_STRIP","GL_TRIANGLES","GL_TRIANGLE_STRIP","GL_TRIANGLE_FAN","GL_FLOAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_UNSIGNED_INT","GL_UNSIGNED_INT_VEC2","GL_UNSIGNED_INT_VEC3","GL_UNSIGNED_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_FLOAT_MAT2x3","GL_FLOAT_MAT2x4","GL_FLOAT_MAT3x2","GL_FLOAT_MAT3x4","GL_FLOAT_MAT4x2","GL_FLOAT_MAT4x3","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","_typeAndSize","getCompositeGLType","_COMPOSITE_GL_TYPES$g","compType","compComponents","require","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_COLOR","GL_DEPTH","GL_STENCIL","GL_DEPTH_STENCIL","ERR_ARGUMENTS","_ref$framebuffer","_ref$color","_ref$stencil","stencil","clearFlags","clearDepth","clearStencil","clearBuffer","_ref2$framebuffer","_ref2$buffer","_ref2$drawBuffer","drawBuffer","_ref2$value","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","readPixelsToArray","_ref$sourceX","_ref$sourceY","_ref$sourceFormat","sourceFormat","_ref$sourceAttachment","sourceAttachment","_ref$target","sourceType","_getFramebuffer","deleteFramebuffer","getPixelArray","prevHandle","bindFramebuffer","readPixels","copyToDataUrl","_ref3$sourceAttachmen","_ref3$targetMaxHeight","targetMaxHeight","_scalePixels","createImageData","putImageData","pixelArray","getWeakData","ArrayIterationModule","$has","uncaughtFrozenStore","UncaughtFrozenStore","findUncaughtFrozen","getKeyValue","getKey","_MODULE_INJECTORS","MODULE_INJECTORS_VS","MODULE_INJECTORS_FS","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","fragmentData","fragmentString","combineInjects","injects","_GL_PARAMETER_DEFAULT","_GL_PARAMETER_SETTERS","_GL_PARAMETER_GETTERS","GL_PARAMETER_DEFAULTS","disable","pixelStorei","drawFramebuffer","readFramebuffer","GL_PARAMETER_SETTERS","cullFace","frontFace","lineWidth","stencilMaskSeparate","blendEquationSeparate","blendFuncSeparate","sampleCoverage","mask","backMask","ref","backFunc","backRef","stencilFuncSeparate","_args3","_args4","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","getValue","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","capability","_hint","_update5","g","_update9","modeRGB","modeAlpha","_update10","dst","_update11","srcRGB","dstRGB","srcAlpha","dstAlpha","_update12","zNear","zFar","units","_update23","_update24","stencilMask","_update26","stencilFunc","_update28","_update29","stencilOp","fail","zfail","zpass","_update30","_update31","GL_PARAMETER_GETTERS","STARTUP_MESSAGE","StatsManager","lumaStats","nodeIO","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","DEBUG_DATA_LENGTH","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","Buffer","debugData","_setData","_setByteLength","bytesUsed","_props","_props$offset","_props$srcOffset","srcOffset","bufferSubData","_inferType","_ref$readOffset","readOffset","_ref$writeOffset","writeOffset","copyBufferSubData","_ref2$dstData","dstData","_ref2$srcByteOffset","_ref2$dstOffset","dstOffset","_ref2$length","dstAvailableElementCount","dstElementCount","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","copyElementCount","getBufferSubData","_ref3$index","_ref4$target","_ref4$index","isIndexedBuffer","_getTarget","bufferData","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","upgradeMessage","methodName","_setPrototypeOf","_FEATURES$WEBGL2$FEAT","WEBGL2","VERTEX_ARRAY_OBJECT","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","checkFloat32ColorAttachment","testTexture","testFb","getStatus","defineWellKnownSymbol","isBrowserMainThread","isNode","_TEXTURE_FORMATS","_DATA_FORMAT_CHANNELS","_TYPE_SIZES","TEXTURE_FORMATS","DATA_FORMAT_CHANNELS","TYPE_SIZES","isLinearFilteringSupported","preventExtensions","_defineProperties","_createClass","protoProps","staticProps","mod","modulus","PI_4","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","DEFAULT_ALTITUDE","zoomToScale","scaleToZoom","lngLatToWorld","lambda2","phi2","worldToLngLat","atan","getMeterZoom","latCosine","_ref6$highPrecision","worldSize","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","addMetersToLngLat","_getDistanceScales","worldspace","newLngLat","newZ","getViewMatrix","_ref7$center","vm","getProjectionParameters","_ref8$altitude","_ref8$pitch","_ref8$nearZMultiplier","_ref8$farZMultiplier","farZMultiplier","pitchRadians","halfFov","topHalfSurfaceDistance","getProjectionMatrix","_getProjectionParamet","worldToPixels","_xyz2","_xyz2$","pixelsToWorld","_xyz3","coord0","coord1","bounds","_ref$minExtent","minExtent","_ref$padding","_bounds","_bounds$","west","south","_bounds$2","east","north","nw","se","targetSize","centerLngLat","unprojectOps","angleToGround","unprojectOnFarPlane","WebMercatorViewport","_ref$latitude","_ref$longitude","_ref$zoom","_ref$nearZMultiplier","_ref$farZMultiplier","_initMatrices","mInverse","_ref3$topLeft","_ref3$targetZ","_lngLatToWorld","_lngLatToWorld2","_worldToLngLat","_worldToLngLat2","fromLocation","toLocation","newCenter","_fitBounds2","getBoundingRegion","MAX_LATITUDE","MIN_LATITUDE","normalizeViewportProps","flatViewport","topY","bottomY","shiftY","exportName","VENDOR_PREFIXES","TEST_ELEMENT","TYPE_FUNCTION","setTimeoutContext","timeout","bindFn","invokeArrayArg","each","deprecate","deprecationMessage","stack","nextKey","extend","merge","inherit","properties","childP","baseP","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","splitStr","removeEventListeners","hasParent","node","inStr","str","inArray","findByKey","uniqueArray","results","prefixed","camelProp","_uniqueId","uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","inputTarget","domHandler","createInputInstance","inputClass","TouchInput","TouchMouseInput","inputHandler","pointersLen","changedPointersLen","isFirst","isFinal","session","computeInputData","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","deltaTime","getAngle","getDistance","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","getRotation","maxPointers","computeIntervalInputData","offsetDelta","prevDelta","velocityX","velocityY","lastInterval","p1","p2","atan2","evEl","evTarget","evWin","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","POINTER_INPUT_MAP","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","SINGLE_TOUCH_INPUT_MAP","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","touches","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","isSyntheticEvent","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","getTouchActionProps","TouchAction","cleanTouchActions","actions","hasPanX","hasPanY","touchMap","cssSupports","CSS","supports","getTouchAction","preventDefaults","prevented","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","preset","dropRecognizeWith","hasRequireFailures","canRecognizeWith","additionalEvent","tryEmit","canEmit","inputDataClone","attrTest","optionPointers","isRecognized","isValid","directionTest","hasMoved","inOut","validPointers","validMovement","validTime","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","domEvents","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","oldCssProps","toggleCssProps","triggerDomEvent","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","stopped","curRecognizer","existing","freeGlobal","ARRAY_TYPE","RANDOM","random","getScratchArrayBuffer","getScratchArray","scratchArrayBuffer","ERR_ELEMENTS","VertexArrayObject","bufferValue","isDefaultArray","constantAttributeZero","defaultVertexArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","elementBuffer","setElementBuffer","vertexAttribIPointer","_enable","disablingAttributeZero","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","v1","v2","getVertexAttribOffset","getMaxAttributes","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","ERR_ATTRIBUTE_TYPE","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","VertexArray","elementsAccessor","drawParams","vertexArrayObject","_updateDrawParams","_setAttribute","clearDrawParams","appAccessor","_this$_resolveLocatio","_resolveLocationAndAccessor","_this$_resolveLocatio2","_setConstantAttributes","valueAccessor","_this5","_this$_getAttributeIn","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","multiLocation","exec","locationOffset","getAttributeLocation","setConstant","_accessor","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","indexCount","_updateDrawParamsForLocation","indexOffset","getVertexCount","formatArrayValue","_opts$maxElts","maxElts","_opts$size","terminator","_opts$isInteger","decimal","getDebugTableForVertexArray","_ref$header","ELEMENT_ARRAY_BUFFER","getDebugTableRow","attributeLocation","rowHeader","getGLSLDeclaration","verts","_buffer$getDebugData","getDebugData","modified","typeAndName","getDebugTableForUniforms","_ref$undefinedOnly","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","_uniformName","addUniformToTable","_uniformName2","_uniformName3","unusedCount","unusedTable","_table$uniformName","isDefined","isUniformDefined","getDebugTableForProgramConfiguration","glslDeclaration","varyingInfo","_glslDeclaration","_attributeInfo$access","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","getBuffersFromGeometry","remappedName","mapAttributeName","inferAttributeAccessor","_ref$attributeMap","attributeMap","category","LOG_DRAW_PRIORITY","LOG_DRAW_TIMEOUT","ERR_MODEL_PARAMS","NOOP","DRAW_PARAMS","Model","lastLogTime","_programManagerState","_managedProgram","_props$program","programProps","_programDirty","_attributes","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","_deleteGeometryBuffers","normalizedAttributes","_opts$moduleSettings","_opts$uniforms","_opts$attributes","_opts$transformFeedba","_opts$parameters","_opts$vertexArray","_logDrawCallStart","getDrawParams","_this$props$isIndexed","_this$props$indexType","_this$props$indexOffs","_this$props$vertexArr","vertexArrayInstanced","_this$props2$onBefore","_this$props2$onAfterR","didDraw","getDrawMode","_logDrawCallEnd","_opts$discard","_opts$unbindModels","unbindModels","_setFeedbackBuffers","unbindBuffers","bindBuffers","setGeometry","_feedbackBuffers","_this$programProps","animated","animatedUniforms","_evaluateAnimateUniforms","logDrawTimeout","attributeTable","_getDebugTableForUnif","uniformTable","_getDebugTableForUnif2","missingTable","missingCount","configTable","_Viewport","_opts$pitch","_opts$bearing","_opts$nearZMultiplier","_opts$farZMultiplier","_opts$repeat","_opts$worldOffset","worldOffset","_opts$altitude","viewOffset","multiplyLeft","viewportOpts","_subViewports","getBounds","minOffset","maxOffset","offsetViewport","Vector","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","vectors","_vectors","_vectors2","multiplyScalar","ORIGIN","_Vector","Vector3","_ref$origin","origin","_ref2$origin","_ref3$origin","matrix4","matrix3","matrix2","quaternion","_interopRequireWildcard","_getBrowser","_classCallCheck","ERR_MULTIPLE_RENDERTARGETS","Framebuffer","ownResources","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","colorBufferHalfFloat","defaultFramebuffer","_ref2$width","_ref2$height","_ref2$attachments","_ref2$color","_ref2$stencil","_ref2$check","_createDefaultAttachments","clearAttachments","checkStatus","_ref3$attachments","_ref3$clearAttachment","_ref3$resizeAttachmen","_setReadBuffer","_setDrawBuffers","attachmentPoint","_ref5$clearAttachment","_ref5$resizeAttachmen","newAttachments","_attachRenderbuffer","renderbuffer","_descriptor","_descriptor$","_descriptor$2","_attachTexture","_unattach","_getFrameBufferStatus","checkFramebufferStatus","_ref6$drawBuffers","_ref7$attachments","_ref7$x","_ref7$y","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","attachmentName","getAttachmentParameters","open","maxHeight","_ref8$target","_ref9$target","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","_ref10$attachment","_ref11","_ref11$attachment","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","EXT_sRGB","STATUS","FRAMEBUFFER_ATTACHMENT_PARAMETERS","_getRequireWildcardCache","WeakMap","newObj","hasPropertyDescriptor","normalizeArray","allowAboveRoot","basename","matchedSlash","charCodeAt","xs","resolvedPath","resolvedAbsolute","charAt","isAbsolute","trailingSlash","substr","paths","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","code","hasRoot","extname","startDot","startPart","preDotState","_isNativeFunction","_wrapNativeSuper","_cache","isNativeFunction","Wrapper","_Array","MathArray","arrayOrObject","fromObject","formatString","minVector","maxVector","_scale","addScalar","scalar","hiddenKeys","FREEZING","METADATA","setMetadata","objectID","weakData","onFreeze","installGetterOverride","originalGetterFunc","installSetterSpy","originalSetterFunc","_setter","_updateCache","valueChanged","installProgramSpy","originalUseProgram","GLState","_ref$copyState","_ref$log","stateStack","oldValues","trackContextState","_ref2$enable","pushContextState","popContextState","validateVector","checkNumber","checkVector","callerName"],"mappings":"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","file":"vue-mapbox.umd.min.vendors~the-decker.js","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var NullLog = function () {\n  function NullLog() {\n    _classCallCheck(this, NullLog);\n  }\n\n  _createClass(NullLog, [{\n    key: \"log\",\n    value: function log() {\n      return function (_) {};\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      return function (_) {};\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      return function (_) {};\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      return function (_) {};\n    }\n  }]);\n\n  return NullLog;\n}();\nexport var ConsoleLog = function () {\n  function ConsoleLog() {\n    _classCallCheck(this, ConsoleLog);\n\n    this.console = console;\n  }\n\n  _createClass(ConsoleLog, [{\n    key: \"log\",\n    value: function log() {\n      var _this$console$log;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_this$console$log = this.console.log).bind.apply(_this$console$log, [this.console].concat(args));\n    }\n  }, {\n    key: \"info\",\n    value: function info() {\n      var _this$console$info;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return (_this$console$info = this.console.info).bind.apply(_this$console$info, [this.console].concat(args));\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var _this$console$warn;\n\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return (_this$console$warn = this.console.warn).bind.apply(_this$console$warn, [this.console].concat(args));\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      var _this$console$error;\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return (_this$console$error = this.console.error).bind.apply(_this$console$error, [this.console].concat(args));\n    }\n  }]);\n\n  return ConsoleLog;\n}();\n//# sourceMappingURL=loggers.js.map","import { ConsoleLog } from './loader-utils/loggers';\nexport var DEFAULT_LOADER_OPTIONS = {\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  log: new ConsoleLog(),\n  dataType: 'arraybuffer',\n  metadata: false\n};\n//# sourceMappingURL=constants.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { global } from '@loaders.gl/loader-utils';\nimport { DEFAULT_LOADER_OPTIONS } from '../constants';\nimport { NullLog } from './loggers';\n\nvar isPureObject = function isPureObject(value) {\n  return value && _typeof(value) === 'object' && value.constructor === {}.constructor;\n};\n\nexport var getGlobalLoaderState = function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  var loaders = global.loaders;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n};\n\nvar getGlobalLoaderOptions = function getGlobalLoaderOptions() {\n  var state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || _objectSpread({}, DEFAULT_LOADER_OPTIONS);\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  var state = getGlobalLoaderState();\n  var globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = mergeOptionsInternal(globalOptions, options);\n}\nexport function mergeOptions(loader, options, url) {\n  var topOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  validateLoaderOptions(loader, options, topOptions);\n  return mergeOptionsInternal(loader, options, url);\n}\n\nfunction validateLoaderOptions(loader, options) {\n  var topOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_LOADER_OPTIONS;\n  var log = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : console;\n\n  if (topOptions) {\n    for (var key in options) {\n      if (_typeof(options[key]) !== 'object' && !topOptions[key]) {\n        log.warn(\"Top-level loader option \".concat(key, \" not recognized\"));\n      }\n    }\n  }\n\n  var idOptions = options && options[loader.id] || {};\n  var loaderOptions = loader.options && loader.options[loader.id] || {};\n  var deprecatedOptions = loader.defaultOptions && loader.defaultOptions[loader.id] || {};\n\n  for (var _key in idOptions) {\n    if (!(_key in loaderOptions)) {\n      if (_key in deprecatedOptions) {\n        log.warn(\"\".concat(loader.name, \" loader option \").concat(loader.id, \".\").concat(_key, \" deprecated, use \").concat(deprecatedOptions[_key]));\n      } else {\n        log.warn(\"\".concat(loader.name, \" loader option \").concat(loader.id, \".\").concat(_key, \" not recognized\"));\n      }\n    }\n  }\n}\n\nfunction mergeOptionsInternal(loader, options, url) {\n  var loaderDefaultOptions = loader.options || {};\n\n  var mergedOptions = _objectSpread({}, loaderDefaultOptions);\n\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (var key in options) {\n    if (key in options) {\n      var value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = _objectSpread(_objectSpread({}, mergedOptions[key]), options[key]);\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=merge-options.js.map","var DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nvar DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_MODULE_OPTIONS;\n  var uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      var selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    var color = Array.from(opts.pickingHighlightColor, function (x) {\n      return x / 255;\n    });\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nvar vs = \"uniform bool picking_uActive;\\nuniform bool picking_uAttribute;\\nuniform vec3 picking_uSelectedColor;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Avalid;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool picking_isColorValid(vec3 color) {\\n  return dot(color, vec3(1.0)) > 0.001;\\n}\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  if (picking_uActive) {\\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\\n\\n    if (!picking_uAttribute) {\\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\\n    }\\n  } else {\\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\\n  }\\n}\\n\\nvoid picking_setPickingAttribute(float value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.r = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec2 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rg = value;\\n  }\\n}\\nvoid picking_setPickingAttribute(vec3 value) {\\n  if (picking_uAttribute) {\\n    picking_vRGBcolor_Avalid.rgb = value;\\n  }\\n}\\n\";\nvar fs = \"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Avalid;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  if (picking_uActive) {\\n    return color;\\n  }\\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\\n\\n  if (selected) {\\n    float highLightAlpha = picking_uHighlightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  if (picking_uActive) {\\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\\n      discard;\\n    }\\n    return picking_vRGBcolor_Avalid;\\n  }\\n  return color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\";\nexport default {\n  name: 'picking',\n  vs: vs,\n  fs: fs,\n  getUniforms: getUniforms\n};\n//# sourceMappingURL=picking.js.map","import { picking } from '@luma.gl/core';\nexport default Object.assign({\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n    picking_setPickingColor(geometry.pickingColor);\\n    // for picking depth values\\n    picking_setPickingAttribute(geometry.position.z);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n    // use highlight color if this fragment belongs to the selected object.\\n    color = picking_filterHighlightColor(color);\\n\\n    // use picking color if rendering to picking FBO.\\n    color = picking_filterPickingColor(color);\\n      \"\n    }\n  }\n}, picking);\n//# sourceMappingURL=picking.js.map","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.github.io/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","var ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  var type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$clamped = _ref.clamped,\n      clamped = _ref$clamped === void 0 ? true : _ref$clamped;\n\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows(_ref2) {\n  var data = _ref2.data,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$bytesPerPixel = _ref2.bytesPerPixel,\n      bytesPerPixel = _ref2$bytesPerPixel === void 0 ? 4 : _ref2$bytesPerPixel,\n      temp = _ref2.temp;\n  var bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (var y = 0; y < height / 2; ++y) {\n    var topOffset = y * bytesPerRow;\n    var bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels(_ref3) {\n  var data = _ref3.data,\n      width = _ref3.width,\n      height = _ref3.height;\n  var newWidth = Math.round(width / 2);\n  var newHeight = Math.round(height / 2);\n  var newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (var y = 0; y < newHeight; y++) {\n    for (var x = 0; x < newWidth; x++) {\n      for (var c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","'use strict';\nvar global = require('../internals/global');\nvar redefineAll = require('../internals/redefine-all');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar enforceIternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar isExtensible = Object.isExtensible;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.github.io/ecma262/#sec-weakmap-constructor\nvar $WeakMap = module.exports = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.REQUIRED = true;\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = WeakMapPrototype['delete'];\n  var nativeHas = WeakMapPrototype.has;\n  var nativeGet = WeakMapPrototype.get;\n  var nativeSet = WeakMapPrototype.set;\n  redefineAll(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete.call(this, key) || state.frozen['delete'](key);\n      } return nativeDelete.call(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas.call(this, key) || state.frozen.has(key);\n      } return nativeHas.call(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas.call(this, key) ? nativeGet.call(this, key) : state.frozen.get(key);\n      } return nativeGet.call(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceIternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas.call(this, key) ? nativeSet.call(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet.call(this, key, value);\n      return this;\n    }\n  });\n}\n","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function extractCameraVectors(_ref) {\n  var viewMatrix = _ref.viewMatrix,\n      viewMatrixInverse = _ref.viewMatrixInverse;\n  return {\n    eye: [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]],\n    direction: [-viewMatrix[2], -viewMatrix[6], -viewMatrix[10]],\n    up: [viewMatrix[1], viewMatrix[5], viewMatrix[9]],\n    right: [viewMatrix[0], viewMatrix[4], viewMatrix[8]]\n  };\n}\nvar cameraPosition = new Vector3();\nvar cameraDirection = new Vector3();\nvar cameraUp = new Vector3();\nvar cameraRight = new Vector3();\nvar nearCenter = new Vector3();\nvar farCenter = new Vector3();\nvar a = new Vector3();\nexport function getFrustumPlanes(_ref2) {\n  var aspect = _ref2.aspect,\n      near = _ref2.near,\n      far = _ref2.far,\n      fovyRadians = _ref2.fovyRadians,\n      position = _ref2.position,\n      direction = _ref2.direction,\n      up = _ref2.up,\n      right = _ref2.right;\n  cameraDirection.copy(direction);\n  var nearFarScale = 1 / cameraDirection.len();\n  cameraDirection.normalize();\n  cameraPosition.copy(position);\n  cameraUp.copy(up);\n  var widthScale = 1 / cameraUp.len();\n  cameraUp.normalize();\n  cameraRight.copy(right).normalize();\n  var nearHeight = 2 * Math.tan(fovyRadians / 2) * near * widthScale;\n  var nearWidth = nearHeight * aspect;\n  nearCenter.copy(cameraDirection).scale(near * nearFarScale).add(cameraPosition);\n  farCenter.copy(cameraDirection).scale(far * nearFarScale).add(cameraPosition);\n  var normal = cameraDirection.clone().negate();\n  var distance = normal.dot(nearCenter);\n  var planes = {\n    near: {\n      distance: distance,\n      normal: normal\n    },\n    far: {\n      distance: cameraDirection.dot(farCenter),\n      normal: cameraDirection.clone()\n    }\n  };\n  a.copy(cameraRight).scale(nearWidth * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(a).cross(cameraUp);\n  distance = cameraPosition.dot(normal);\n  planes.right = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraRight).scale(-nearWidth * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(cameraUp).cross(a);\n  distance = cameraPosition.dot(normal);\n  planes.left = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraUp).scale(nearHeight * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(cameraRight).cross(a);\n  distance = cameraPosition.dot(normal);\n  planes.top = {\n    normal: normal,\n    distance: distance\n  };\n  a.copy(cameraUp).scale(-nearHeight * 0.5).add(nearCenter).subtract(cameraPosition).normalize();\n  normal = new Vector3(a).cross(cameraRight);\n  distance = cameraPosition.dot(normal);\n  planes.bottom = {\n    normal: normal,\n    distance: distance\n  };\n  return planes;\n}\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nvar scratchArray;\nexport function toDoublePrecisionArray(typedArray, _ref3) {\n  var _ref3$size = _ref3.size,\n      size = _ref3$size === void 0 ? 1 : _ref3$size,\n      _ref3$startIndex = _ref3.startIndex,\n      startIndex = _ref3$startIndex === void 0 ? 0 : _ref3$startIndex,\n      endIndex = _ref3.endIndex;\n\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  var count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  var sourceIndex = startIndex;\n  var targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (var j = 0; j < size; j++) {\n      var value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","export default function getHiResTimestamp() {\n  var timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport default function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n\n  if (!gl.luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: gl.luma,\n      target2: gl\n    });\n    gl.luma.polyfilled = true;\n  }\n\n  return gl;\n}\nvar global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  var EXTENSIONS = gl.getSupportedExtensions() || [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = EXTENSIONS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var extension = _step.value;\n      gl.luma[extension] = gl.getExtension(extension);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction installOverrides(gl, _ref) {\n  var target = _ref.target,\n      target2 = _ref.target2;\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(function (key) {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      var originalFunc = gl[key] ? gl[key].bind(gl) : function () {};\n      var polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = Object.getOwnPropertyNames(polyfills)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var extension = _step2.value;\n\n      if (extension !== 'overrides') {\n        polyfillExtension(gl, {\n          extension: extension,\n          target: gl.luma,\n          target2: gl\n        });\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction polyfillExtension(gl, _ref2) {\n  var extension = _ref2.extension,\n      target = _ref2.target,\n      target2 = _ref2.target2;\n  var defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  var _defaults$meta = defaults.meta,\n      meta = _defaults$meta === void 0 ? {} : _defaults$meta;\n  var _meta$suffix = meta.suffix,\n      suffix = _meta$suffix === void 0 ? '' : _meta$suffix;\n  var ext = gl.getExtension(extension);\n\n  var _loop = function _loop() {\n    var key = _Object$keys[_i];\n    var extKey = \"\".concat(key).concat(suffix);\n    var polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = function polyfill() {\n        return ext[extKey].apply(ext, arguments);\n      };\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  };\n\n  for (var _i = 0, _Object$keys = Object.keys(defaults); _i < _Object$keys.length; _i++) {\n    _loop();\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/merge-options';\n\nvar getGlobalLoaderRegistry = function getGlobalLoaderRegistry() {\n  var state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  var loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var loader = _step.value;\n      var normalizedLoader = normalizeLoader(loader);\n\n      if (!loaderRegistry.find(function (registeredLoader) {\n        return normalizedLoader === registeredLoader;\n      })) {\n        loaderRegistry.unshift(normalizedLoader);\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  var state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports[\"default\"] = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser[\"default\"])()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron[\"default\"])(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","export var LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport var PROP_SYMBOLS = {\n  COMPONENT: Symbol[\"for\"]('component'),\n  ASYNC_DEFAULTS: Symbol[\"for\"]('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol[\"for\"]('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol[\"for\"]('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nvar isBoolean = function isBoolean(x) {\n  return typeof x === 'boolean';\n};\n\nvar isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nexport var isObject = function isObject(x) {\n  return x !== null && _typeof(x) === 'object';\n};\nexport var isPromise = function isPromise(x) {\n  return isObject(x) && isFunction(x.then);\n};\nexport var isIterable = function isIterable(x) {\n  return x && typeof x[Symbol.iterator] === 'function';\n};\nexport var isAsyncIterable = function isAsyncIterable(x) {\n  return x && typeof x[Symbol.asyncIterator] === 'function';\n};\nexport var isIterator = function isIterator(x) {\n  return x && isFunction(x.next);\n};\nexport var isResponse = function isResponse(x) {\n  return typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\n};\nexport var isFile = function isFile(x) {\n  return typeof File !== 'undefined' && x instanceof File;\n};\nexport var isBlob = function isBlob(x) {\n  return typeof Blob !== 'undefined' && x instanceof Blob;\n};\nexport var isWritableDOMStream = function isWritableDOMStream(x) {\n  return isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\n};\nexport var isReadableDOMStream = function isReadableDOMStream(x) {\n  return typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\n};\nexport var isBuffer = function isBuffer(x) {\n  return x && _typeof(x) === 'object' && x.isBuffer;\n};\nexport var isWritableNodeStream = function isWritableNodeStream(x) {\n  return isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\n};\nexport var isReadableNodeStream = function isReadableNodeStream(x) {\n  return isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\n};\nexport var isReadableStream = function isReadableStream(x) {\n  return isReadableDOMStream(x) || isReadableNodeStream(x);\n};\nexport var isWritableStream = function isWritableStream(x) {\n  return isWritableDOMStream(x) || isWritableNodeStream(x);\n};\n//# sourceMappingURL=is-type.js.map","var pathPrefix = '';\nvar fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (var alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      var replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = \"\".concat(pathPrefix).concat(filename);\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar FileReadableResponse = function () {\n  function FileReadableResponse(fileOrBlob, options) {\n    _classCallCheck(this, FileReadableResponse);\n\n    this._fileOrBlob = fileOrBlob;\n    this.bodyUsed = false;\n  }\n\n  _createClass(FileReadableResponse, [{\n    key: \"arrayBuffer\",\n    value: function () {\n      var _arrayBuffer = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var _this$_getFileReader, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$_getFileReader = this._getFileReader(), reader = _this$_getFileReader.reader, promise = _this$_getFileReader.promise;\n                reader.readAsArrayBuffer(this._fileOrBlob);\n                return _context.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function arrayBuffer() {\n        return _arrayBuffer.apply(this, arguments);\n      }\n\n      return arrayBuffer;\n    }()\n  }, {\n    key: \"text\",\n    value: function () {\n      var _text = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2() {\n        var _this$_getFileReader2, reader, promise;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$_getFileReader2 = this._getFileReader(), reader = _this$_getFileReader2.reader, promise = _this$_getFileReader2.promise;\n                reader.readAsText(this._fileOrBlob);\n                return _context2.abrupt(\"return\", promise);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function text() {\n        return _text.apply(this, arguments);\n      }\n\n      return text;\n    }()\n  }, {\n    key: \"json\",\n    value: function () {\n      var _json = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3() {\n        var text;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.text();\n\n              case 2:\n                text = _context3.sent;\n                return _context3.abrupt(\"return\", JSON.parse(text));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function json() {\n        return _json.apply(this, arguments);\n      }\n\n      return json;\n    }()\n  }, {\n    key: \"_getFileReader\",\n    value: function _getFileReader() {\n      assert(!this.bodyUsed);\n      this.bodyUsed = true;\n      var reader = new FileReader();\n      var promise = new Promise(function (resolve, reject) {\n        try {\n          reader.onerror = function (_) {\n            return reject(new Error('Read error'));\n          };\n\n          reader.onabort = function () {\n            return reject(new Error('Read aborted.'));\n          };\n\n          reader.onload = function () {\n            return resolve(reader.result);\n          };\n        } catch (error) {\n          reject(error);\n        }\n      });\n      return {\n        reader: reader,\n        promise: promise\n      };\n    }\n  }, {\n    key: \"headers\",\n    get: function get() {\n      return new Headers({\n        'Content-Length': this._fileOrBlob.size,\n        'Content-Type': this._fileOrBlob.type\n      });\n    }\n  }, {\n    key: \"ok\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"status\",\n    get: function get() {\n      return 200;\n    }\n  }, {\n    key: \"url\",\n    get: function get() {\n      return this._fileOrBlob.name || '';\n    }\n  }]);\n\n  return FileReadableResponse;\n}();\n\nexport default function fetchFileReadable(fileOrBlob, options) {\n  return Promise.resolve(new FileReadableResponse(fileOrBlob, options));\n}\n//# sourceMappingURL=fetch-file.browser.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function getErrorMessageFromResponseSync(response) {\n  return \"Failed to fetch resource \".concat(response.url, \"(\").concat(response.status, \"): \").concat(response.statusText, \" \");\n}\nexport function getErrorMessageFromResponse(_x) {\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n\nfunction _getErrorMessageFromResponse() {\n  _getErrorMessageFromResponse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var message, contentType;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            message = \"Failed to fetch resource \".concat(response.url, \" (\").concat(response.status, \"): \");\n            _context.prev = 1;\n            contentType = response.headers.get('Content-Type');\n\n            if (!contentType.includes('application/json')) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.t0 = message;\n            _context.next = 7;\n            return response.text();\n\n          case 7:\n            message = _context.t0 += _context.sent;\n            _context.next = 11;\n            break;\n\n          case 10:\n            message += response.statusText;\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", message);\n\n          case 16:\n            return _context.abrupt(\"return\", message);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 13]]);\n  }));\n  return _getErrorMessageFromResponse.apply(this, arguments);\n}\n//# sourceMappingURL=fetch-error-message.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { isBlob } from '../../javascript-utils/is-type';\nimport fetchFileReadable from './fetch-file.browser';\nimport { getErrorMessageFromResponse } from './fetch-error-message';\nexport function fetchFile(_x) {\n  return _fetchFile.apply(this, arguments);\n}\n\nfunction _fetchFile() {\n  _fetchFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url) {\n    var options,\n        response,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (!isBlob(url)) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetchFileReadable(url, options));\n\n          case 3:\n            url = resolvePath(url);\n            _context.next = 6;\n            return fetch(url, options);\n\n          case 6:\n            response = _context.sent;\n\n            if (!(!response.ok && options[\"throws\"])) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.t0 = Error;\n            _context.next = 11;\n            return getErrorMessageFromResponse(response);\n\n          case 11:\n            _context.t1 = _context.sent;\n            throw new _context.t0(_context.t1);\n\n          case 13:\n            return _context.abrupt(\"return\", response);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchFile.apply(this, arguments);\n}\n//# sourceMappingURL=fetch-file.js.map","import assert from './env-utils/assert';\nvar VERSION = typeof \"2.2.7\" !== 'undefined' ? \"2.2.7\" : '';\nexport function validateLoaderVersion(loader) {\n  var coreVersion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERSION;\n  assert(loader, 'no loader provided');\n  var loaderVersion = loader.version;\n\n  if (!coreVersion || !loaderVersion) {\n    return;\n  }\n\n  coreVersion = parseVersion(coreVersion);\n  loaderVersion = parseVersion(loaderVersion);\n}\n\nfunction parseVersion(version) {\n  var parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-loader-version.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeStringIterator);\n\nexport function makeStringIterator(string) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      offset,\n      textEncoder,\n      chunkLength,\n      chunk,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeStringIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          offset = 0;\n          textEncoder = new TextEncoder();\n\n        case 4:\n          if (!(offset < string.length)) {\n            _context.next = 12;\n            break;\n          }\n\n          chunkLength = Math.min(string.length - offset, chunkSize);\n          chunk = string.slice(offset, offset + chunkLength);\n          offset += chunkLength;\n          _context.next = 10;\n          return textEncoder.encode(chunk);\n\n        case 10:\n          _context.next = 4;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n//# sourceMappingURL=string-iterator.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeArrayBufferIterator);\n\nexport function makeArrayBufferIterator(arrayBuffer) {\n  var options,\n      _options$chunkSize,\n      chunkSize,\n      byteOffset,\n      chunkByteLength,\n      chunk,\n      sourceArray,\n      chunkArray,\n      _args = arguments;\n\n  return _regeneratorRuntime.wrap(function makeArrayBufferIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          _options$chunkSize = options.chunkSize, chunkSize = _options$chunkSize === void 0 ? 256 * 1024 : _options$chunkSize;\n          byteOffset = 0;\n\n        case 3:\n          if (!(byteOffset < arrayBuffer.byteLength)) {\n            _context.next = 14;\n            break;\n          }\n\n          chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n          chunk = new ArrayBuffer(chunkByteLength);\n          sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n          chunkArray = new Uint8Array(chunk);\n          chunkArray.set(sourceArray);\n          byteOffset += chunkByteLength;\n          _context.next = 12;\n          return chunk;\n\n        case 12:\n          _context.next = 3;\n          break;\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n//# sourceMappingURL=array-buffer-iterator.js.map","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}","import AwaitValue from \"./AwaitValue\";\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}","import AwaitValue from \"./AwaitValue\";\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(key === \"return\" ? \"return\" : \"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen[\"return\"] !== \"function\") {\n    this[\"return\"] = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype[\"throw\"] = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype[\"return\"] = function (arg) {\n  return this._invoke(\"return\", arg);\n};","import AsyncGenerator from \"./AsyncGenerator\";\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}","import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nvar DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport function makeBlobIterator(_x) {\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nfunction _makeBlobIterator() {\n  _makeBlobIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(file) {\n    var options,\n        chunkSize,\n        offset,\n        end,\n        slice,\n        chunk,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            chunkSize = options.chunkSize || DEFAULT_CHUNK_SIZE;\n            offset = 0;\n\n          case 3:\n            if (!(offset < file.size)) {\n              _context.next = 14;\n              break;\n            }\n\n            end = offset + chunkSize;\n            slice = file.slice(offset, end);\n            _context.next = 8;\n            return _awaitAsyncGenerator(readFileSlice(slice));\n\n          case 8:\n            chunk = _context.sent;\n            offset = end;\n            _context.next = 12;\n            return chunk;\n\n          case 12:\n            _context.next = 3;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _makeBlobIterator.apply(this, arguments);\n}\n\nfunction readFileSlice(_x2) {\n  return _readFileSlice.apply(this, arguments);\n}\n\nfunction _readFileSlice() {\n  _readFileSlice = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(slice) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return new Promise(function (resolve, reject) {\n              var fileReader = new FileReader();\n\n              fileReader.onloadend = function (event) {\n                return resolve(event.target.result);\n              };\n\n              fileReader.onerror = function (error) {\n                return reject(error);\n              };\n\n              fileReader.readAsArrayBuffer(slice);\n            });\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _readFileSlice.apply(this, arguments);\n}\n//# sourceMappingURL=blob-iterator.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _awaitAsyncGenerator from \"@babel/runtime/helpers/esm/awaitAsyncGenerator\";\nimport _wrapAsyncGenerator from \"@babel/runtime/helpers/esm/wrapAsyncGenerator\";\nimport { isBrowser, nodeVersion } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream) {\n  if (isBrowser || nodeVersion >= 10) {\n    if (typeof stream[Symbol.asyncIterator] === 'function') {\n      return stream;\n    }\n\n    if (typeof stream.getIterator === 'function') {\n      return stream.getIterator();\n    }\n  }\n\n  return isBrowser ? makeBrowserStreamIterator(stream) : makeNodeStreamIterator(stream);\n}\n\nfunction makeBrowserStreamIterator(_x) {\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction _makeBrowserStreamIterator() {\n  _makeBrowserStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee(stream) {\n    var reader, _yield$_awaitAsyncGen, done, value;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            reader = stream.getReader();\n            _context.prev = 1;\n\n          case 2:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 5;\n            return _awaitAsyncGenerator(reader.read());\n\n          case 5:\n            _yield$_awaitAsyncGen = _context.sent;\n            done = _yield$_awaitAsyncGen.done;\n            value = _yield$_awaitAsyncGen.value;\n\n            if (!done) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 10:\n            _context.next = 12;\n            return value;\n\n          case 12:\n            _context.next = 2;\n            break;\n\n          case 14:\n            _context.next = 19;\n            break;\n\n          case 16:\n            _context.prev = 16;\n            _context.t0 = _context[\"catch\"](1);\n            reader.releaseLock();\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 16]]);\n  }));\n  return _makeBrowserStreamIterator.apply(this, arguments);\n}\n\nfunction makeNodeStreamIterator(_x2) {\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction _makeNodeStreamIterator() {\n  _makeNodeStreamIterator = _wrapAsyncGenerator(_regeneratorRuntime.mark(function _callee2(stream) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _awaitAsyncGenerator(stream);\n\n          case 2:\n            stream = _context2.sent;\n\n          case 3:\n            if (!true) {\n              _context2.next = 15;\n              break;\n            }\n\n            data = stream.read();\n\n            if (!(data !== null)) {\n              _context2.next = 9;\n              break;\n            }\n\n            _context2.next = 8;\n            return data;\n\n          case 8:\n            return _context2.abrupt(\"continue\", 3);\n\n          case 9:\n            if (!stream._readableState.ended) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 11:\n            _context2.next = 13;\n            return _awaitAsyncGenerator(onceReadable(stream));\n\n          case 13:\n            _context2.next = 3;\n            break;\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _makeNodeStreamIterator.apply(this, arguments);\n}\n\nfunction onceReadable(_x3) {\n  return _onceReadable.apply(this, arguments);\n}\n\nfunction _onceReadable() {\n  _onceReadable = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(stream) {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              stream.once('readable', resolve);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _onceReadable.apply(this, arguments);\n}\n//# sourceMappingURL=stream-iterator.js.map","import { makeStringIterator } from './string-iterator';\nimport { makeArrayBufferIterator } from './array-buffer-iterator';\nimport { makeBlobIterator } from './blob-iterator';\nimport { assert } from '@loaders.gl/loader-utils';\nimport { makeStreamIterator } from './stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data);\n  }\n\n  if (isResponse(data)) {\n    return makeStreamIterator(data.body);\n  }\n\n  return assert(false);\n}\n//# sourceMappingURL=make-iterator.js.map","export function concatenateArrayBuffers(source1, source2) {\n  var sourceArray1 = source1 instanceof ArrayBuffer ? new Uint8Array(source1) : source1;\n  var sourceArray2 = source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2;\n  var temp = new Uint8Array(sourceArray1.byteLength + sourceArray2.byteLength);\n  temp.set(sourceArray1, 0);\n  temp.set(sourceArray2, sourceArray1.byteLength);\n  return temp;\n}\n//# sourceMappingURL=memory-copy-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport { concatenateArrayBuffers } from '../javascript-utils/memory-copy-utils';\nexport function forEach(_x, _x2) {\n  return _forEach.apply(this, arguments);\n}\n\nfunction _forEach() {\n  _forEach = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(iterator, visitor) {\n    var _yield$iterator$next, done, value, cancel;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!true) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 3;\n            return iterator.next();\n\n          case 3:\n            _yield$iterator$next = _context.sent;\n            done = _yield$iterator$next.done;\n            value = _yield$iterator$next.value;\n\n            if (!done) {\n              _context.next = 9;\n              break;\n            }\n\n            iterator[\"return\"]();\n            return _context.abrupt(\"return\");\n\n          case 9:\n            cancel = visitor(value);\n\n            if (!cancel) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 12:\n            _context.next = 0;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _forEach.apply(this, arguments);\n}\n\nexport function concatenateChunksAsync(_x3) {\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n\nfunction _concatenateChunksAsync() {\n  _concatenateChunksAsync = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(asyncIterator) {\n    var arrayBuffer, string, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            arrayBuffer = new ArrayBuffer(0);\n            string = '';\n            _iteratorNormalCompletion = true;\n            _didIteratorError = false;\n            _context2.prev = 4;\n            _iterator = _asyncIterator(asyncIterator);\n\n          case 6:\n            _context2.next = 8;\n            return _iterator.next();\n\n          case 8:\n            _step = _context2.sent;\n            _iteratorNormalCompletion = _step.done;\n            _context2.next = 12;\n            return _step.value;\n\n          case 12:\n            _value = _context2.sent;\n\n            if (_iteratorNormalCompletion) {\n              _context2.next = 19;\n              break;\n            }\n\n            chunk = _value;\n\n            if (typeof chunk === 'string') {\n              string += chunk;\n            } else {\n              arrayBuffer = concatenateArrayBuffers(arrayBuffer, chunk);\n            }\n\n          case 16:\n            _iteratorNormalCompletion = true;\n            _context2.next = 6;\n            break;\n\n          case 19:\n            _context2.next = 25;\n            break;\n\n          case 21:\n            _context2.prev = 21;\n            _context2.t0 = _context2[\"catch\"](4);\n            _didIteratorError = true;\n            _iteratorError = _context2.t0;\n\n          case 25:\n            _context2.prev = 25;\n            _context2.prev = 26;\n\n            if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n              _context2.next = 30;\n              break;\n            }\n\n            _context2.next = 30;\n            return _iterator[\"return\"]();\n\n          case 30:\n            _context2.prev = 30;\n\n            if (!_didIteratorError) {\n              _context2.next = 33;\n              break;\n            }\n\n            throw _iteratorError;\n\n          case 33:\n            return _context2.finish(30);\n\n          case 34:\n            return _context2.finish(25);\n\n          case 35:\n            return _context2.abrupt(\"return\", string || arrayBuffer);\n\n          case 36:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 21, 25, 35], [26,, 30, 34]]);\n  }));\n  return _concatenateChunksAsync.apply(this, arguments);\n}\n//# sourceMappingURL=async-iteration.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function checkFetchResponseStatus(_x) {\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nfunction _checkFetchResponseStatus() {\n  _checkFetchResponseStatus = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(response) {\n    var errorMessage, text;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (response.ok) {\n              _context.next = 12;\n              break;\n            }\n\n            errorMessage = \"fetch failed \".concat(response.status, \" \").concat(response.statusText);\n            _context.prev = 2;\n            _context.next = 5;\n            return response.text().slice(10);\n\n          case 5:\n            text = _context.sent;\n            errorMessage += text;\n            _context.next = 11;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 11:\n            throw new Error(errorMessage);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _checkFetchResponseStatus.apply(this, arguments);\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(\"fetch failed \".concat(response.status));\n  }\n}\n//# sourceMappingURL=check-errors.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterator-utils/make-iterator/make-iterator';\nimport { concatenateChunksAsync } from '../../iterator-utils/async-iteration';\nimport fetchFileReadable from '../fetch/fetch-file.browser';\nimport { checkFetchResponseStatus } from './check-errors';\nvar ERR_DATA = 'Cannot convert supplied data type';\nexport function getUrlFromData(data, url) {\n  if (isResponse(data)) {\n    url = url || data.url;\n  } else if (isBlob(url)) {\n    url = url.name;\n  }\n\n  return typeof url === 'string' ? url.replace(/\\?.*/, '') : url;\n}\nexport function getArrayBufferOrStringFromDataSync(data, loader) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    var arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      var textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data) || isBuffer(data)) {\n    if (loader.text && !loader.binary) {\n      var _textDecoder = new TextDecoder('utf8');\n\n      return _textDecoder.decode(data);\n    }\n\n    var _arrayBuffer = data.buffer;\n    var byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== _arrayBuffer.byteLength) {\n      _arrayBuffer = _arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return _arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport function getArrayBufferOrStringFromData(_x, _x2) {\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nfunction _getArrayBufferOrStringFromData() {\n  _getArrayBufferOrStringFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loader) {\n    var isArrayBuffer, response;\n    return _regeneratorRuntime.wrap(function _callee$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return data;\n\n          case 2:\n            data = _context3.sent;\n            isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n            if (!(typeof data === 'string' || isArrayBuffer)) {\n              _context3.next = 6;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", getArrayBufferOrStringFromDataSync(data, loader));\n\n          case 6:\n            if (!isBlob(data)) {\n              _context3.next = 10;\n              break;\n            }\n\n            _context3.next = 9;\n            return fetchFileReadable(data);\n\n          case 9:\n            data = _context3.sent;\n\n          case 10:\n            if (!isResponse(data)) {\n              _context3.next = 24;\n              break;\n            }\n\n            response = data;\n            _context3.next = 14;\n            return checkFetchResponseStatus(response);\n\n          case 14:\n            if (!loader.binary) {\n              _context3.next = 20;\n              break;\n            }\n\n            _context3.next = 17;\n            return response.arrayBuffer();\n\n          case 17:\n            _context3.t0 = _context3.sent;\n            _context3.next = 23;\n            break;\n\n          case 20:\n            _context3.next = 22;\n            return response.text();\n\n          case 22:\n            _context3.t0 = _context3.sent;\n\n          case 23:\n            return _context3.abrupt(\"return\", _context3.t0);\n\n          case 24:\n            if (isReadableStream(data)) {\n              data = makeIterator(data);\n            }\n\n            if (!(isIterable(data) || isAsyncIterable(data))) {\n              _context3.next = 27;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", concatenateChunksAsync(data));\n\n          case 27:\n            throw new Error(ERR_DATA);\n\n          case 28:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getArrayBufferOrStringFromData.apply(this, arguments);\n}\n\nexport function getAsyncIteratorFromData(_x3) {\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nfunction _getAsyncIteratorFromData() {\n  _getAsyncIteratorFromData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(data) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!isIterator(data)) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data);\n\n          case 2:\n            if (!isResponse(data)) {\n              _context4.next = 6;\n              break;\n            }\n\n            _context4.next = 5;\n            return checkFetchResponseStatus(data);\n\n          case 5:\n            return _context4.abrupt(\"return\", makeIterator(data.body));\n\n          case 6:\n            if (!(isBlob(data) || isReadableStream(data))) {\n              _context4.next = 8;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", makeIterator(data));\n\n          case 8:\n            if (!isAsyncIterable(data)) {\n              _context4.next = 10;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", data[Symbol.asyncIterator]());\n\n          case 10:\n            return _context4.abrupt(\"return\", getIteratorFromData(data));\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getAsyncIteratorFromData.apply(this, arguments);\n}\n\nexport function getIteratorFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return data.buffer;\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return _regeneratorRuntime.mark(function oneChunk() {\n      return _regeneratorRuntime.wrap(function oneChunk$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return data;\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, oneChunk);\n    })();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { fetchFile } from '../fetch/fetch-file';\nexport function getLoaderContext(context, options) {\n  var previousContext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  if (previousContext) {\n    return previousContext;\n  }\n\n  context = _objectSpread({\n    fetch: context.fetch || fetchFile\n  }, context);\n\n  if (!Array.isArray(context.loaders)) {\n    context.loaders = null;\n  }\n\n  return context;\n}\nexport function getLoaders(loaders, context) {\n  if (!context && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  var candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    var contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [].concat(_toConsumableArray(candidateLoaders), _toConsumableArray(contextLoaders)) : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=get-loader-context.js.map","import { assert } from '@loaders.gl/loader-utils';\nvar workerURLCache = new Map();\nexport function getWorkerURL(workerSource) {\n  var workerName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Worker';\n  assert(typeof workerSource === 'string', 'worker source');\n\n  if (workerSource.startsWith('url(') && workerSource.endsWith(')')) {\n    var workerUrl = workerSource.match(/^url\\((.*)\\)$/)[1];\n\n    if (workerUrl && !workerUrl.startsWith('http')) {\n      return workerUrl;\n    }\n\n    workerSource = buildScript(workerUrl);\n  }\n\n  var workerURL = workerURLCache.get(workerSource);\n\n  if (!workerURL) {\n    var blob = new Blob([workerSource], {\n      type: 'application/javascript'\n    });\n    workerURL = URL.createObjectURL(blob);\n    workerURLCache.set(workerSource, workerURL);\n  }\n\n  return workerURL;\n}\n\nfunction buildScript(workerUrl) {\n  return \"try {\\n  importScripts('\".concat(workerUrl, \"');\\n} catch (error) {\\n  console.error(error);\\n}\");\n}\n//# sourceMappingURL=get-worker-url.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function getTransferList(object) {\n  var recursive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var transfers = arguments.length > 2 ? arguments[2] : undefined;\n  var transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (recursive && _typeof(object) === 'object') {\n    for (var key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : null;\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getWorkerURL } from './get-worker-url';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nvar count = 0;\n\nfunction defaultOnMessage(_ref) {\n  var data = _ref.data,\n      resolve = _ref.resolve;\n  resolve(data);\n}\n\nvar WorkerThread = function () {\n  function WorkerThread(_ref2) {\n    var source = _ref2.source,\n        _ref2$name = _ref2.name,\n        name = _ref2$name === void 0 ? \"web-worker-\".concat(count++) : _ref2$name,\n        onMessage = _ref2.onMessage;\n\n    _classCallCheck(this, WorkerThread);\n\n    var url = getWorkerURL(source, name);\n    this.worker = new Worker(url, {\n      name: name\n    });\n    this.name = name;\n    this.onMessage = onMessage || defaultOnMessage;\n  }\n\n  _createClass(WorkerThread, [{\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.worker.onmessage = function (event) {\n                    return _this.onMessage({\n                      worker: _this.worker,\n                      data: event.data,\n                      resolve: resolve,\n                      reject: reject\n                    });\n                  };\n\n                  _this.worker.onerror = function (error) {\n                    var message = \"\".concat(_this.name, \": WorkerThread.process() failed\");\n\n                    if (error.message) {\n                      message += \" \".concat(error.message, \" \").concat(error.filename, \":\").concat(error.lineno, \":\").concat(error.colno);\n                    }\n\n                    var betterError = new Error(message);\n                    console.error(error);\n                    reject(betterError);\n                  };\n\n                  var transferList = getTransferList(data);\n\n                  _this.worker.postMessage(data, transferList);\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.worker.terminate();\n      this.worker = null;\n    }\n  }]);\n\n  return WorkerThread;\n}();\n\nexport { WorkerThread as default };\n//# sourceMappingURL=worker-thread.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerThread from './worker-thread';\n\nvar WorkerPool = function () {\n  function WorkerPool(_ref) {\n    var source = _ref.source,\n        _ref$name = _ref.name,\n        name = _ref$name === void 0 ? 'unnamed' : _ref$name,\n        _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? 1 : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerPool);\n\n    this.source = source;\n    this.name = name;\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.jobQueue = [];\n    this.idleQueue = [];\n    this.count = 0;\n    this.isDestroyed = false;\n  }\n\n  _createClass(WorkerPool, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.idleQueue.forEach(function (worker) {\n        return worker.destroy();\n      });\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, jobName) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this.jobQueue.push({\n                    data: data,\n                    jobName: jobName,\n                    resolve: resolve,\n                    reject: reject\n                  });\n\n                  _this._startQueuedJob();\n                }));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function process(_x, _x2) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_startQueuedJob\",\n    value: function _startQueuedJob() {\n      var _this2 = this;\n\n      if (!this.jobQueue.length) {\n        return;\n      }\n\n      var worker = this._getAvailableWorker();\n\n      if (!worker) {\n        return;\n      }\n\n      var job = this.jobQueue.shift();\n      this.onDebug({\n        message: 'processing',\n        worker: worker.name,\n        job: job.jobName,\n        backlog: this.jobQueue.length\n      });\n      worker.process(job.data).then(function (result) {\n        return job.resolve(result);\n      })[\"catch\"](function (error) {\n        return job.reject(error);\n      }).then(function () {\n        return _this2._onWorkerDone(worker);\n      });\n    }\n  }, {\n    key: \"_onWorkerDone\",\n    value: function _onWorkerDone(worker) {\n      if (this.isDestroyed) {\n        worker.destroy();\n      } else {\n        this.idleQueue.push(worker);\n\n        this._startQueuedJob();\n      }\n    }\n  }, {\n    key: \"_getAvailableWorker\",\n    value: function _getAvailableWorker() {\n      if (this.idleQueue.length > 0) {\n        return this.idleQueue.shift();\n      }\n\n      if (this.count < this.maxConcurrency) {\n        this.count++;\n        var name = \"\".concat(this.name.toLowerCase(), \" (#\").concat(this.count, \" of \").concat(this.maxConcurrency, \")\");\n        return new WorkerThread({\n          source: this.source,\n          onMessage: this.onMessage,\n          name: name\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return WorkerPool;\n}();\n\nexport { WorkerPool as default };\n//# sourceMappingURL=worker-pool.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport WorkerPool from './worker-pool';\nvar DEFAULT_MAX_CONCURRENCY = 5;\n\nvar WorkerFarm = function () {\n  _createClass(WorkerFarm, null, [{\n    key: \"isSupported\",\n    value: function isSupported() {\n      return typeof Worker !== 'undefined';\n    }\n  }]);\n\n  function WorkerFarm(_ref) {\n    var _ref$maxConcurrency = _ref.maxConcurrency,\n        maxConcurrency = _ref$maxConcurrency === void 0 ? DEFAULT_MAX_CONCURRENCY : _ref$maxConcurrency,\n        onMessage = _ref.onMessage,\n        _ref$onDebug = _ref.onDebug,\n        onDebug = _ref$onDebug === void 0 ? function () {} : _ref$onDebug;\n\n    _classCallCheck(this, WorkerFarm);\n\n    this.maxConcurrency = maxConcurrency;\n    this.onMessage = onMessage;\n    this.onDebug = onDebug;\n    this.workerPools = new Map();\n  }\n\n  _createClass(WorkerFarm, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('maxConcurrency' in props) {\n        this.maxConcurrency = props.maxConcurrency;\n      }\n\n      if ('onDebug' in props) {\n        this.onDebug = props.onDebug;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.workerPools.forEach(function (workerPool) {\n        return workerPool.destroy();\n      });\n    }\n  }, {\n    key: \"process\",\n    value: function () {\n      var _process = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(workerSource, workerName, data) {\n        var workerPool;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                workerPool = this._getWorkerPool(workerSource, workerName);\n                return _context.abrupt(\"return\", workerPool.process(data));\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function process(_x, _x2, _x3) {\n        return _process.apply(this, arguments);\n      }\n\n      return process;\n    }()\n  }, {\n    key: \"_getWorkerPool\",\n    value: function _getWorkerPool(workerSource, workerName) {\n      var workerPool = this.workerPools.get(workerName);\n\n      if (!workerPool) {\n        workerPool = new WorkerPool({\n          source: workerSource,\n          name: workerName,\n          onMessage: this.onMessage,\n          maxConcurrency: this.maxConcurrency,\n          onDebug: this.onDebug\n        });\n        this.workerPools.set(workerName, workerPool);\n      }\n\n      return workerPool;\n    }\n  }]);\n\n  return WorkerFarm;\n}();\n\nexport { WorkerFarm as default };\n//# sourceMappingURL=worker-farm.js.map","import { assert } from '@loaders.gl/loader-utils';\nimport { toArrayBuffer as bufferToArrayBuffer } from '../node/utils/to-array-buffer.node';\nexport function toArrayBuffer(data) {\n  if (bufferToArrayBuffer) {\n    data = bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return data.buffer;\n  }\n\n  if (typeof data === 'string') {\n    var text = data;\n    var uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  return assert(false);\n}\n//# sourceMappingURL=binary-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport WorkerFarm from '../../worker-utils/worker-farm';\nimport { toArrayBuffer } from '../../javascript-utils/binary-utils';\nimport { getTransferList } from '@loaders.gl/loader-utils';\nimport { parse } from '../api/parse';\nvar VERSION = typeof \"2.2.7\" !== 'undefined' ? \"2.2.7\" : 'latest';\nexport function canParseWithWorker(loader, data, options, context) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  var loaderOptions = options && options[loader.id];\n\n  if (options.worker === 'local' && loaderOptions && loaderOptions.localWorkerUrl || options.worker && loaderOptions && loaderOptions.workerUrl) {\n    return loader.useWorker ? loader.useWorker(options) : true;\n  }\n\n  return false;\n}\nexport default function parseWithWorker(loader, data, options, context) {\n  var _ref = options || {},\n      worker = _ref.worker;\n\n  var loaderOptions = options && options[loader.id] || {};\n  var workerUrl = worker === 'local' ? loaderOptions.localWorkerUrl : loaderOptions.workerUrl;\n  var workerSource = \"url(\".concat(workerUrl, \")\");\n  var workerName = loader.name;\n  var workerFarm = getWorkerFarm(options);\n  options = JSON.parse(JSON.stringify(options));\n  var warning = loader.version !== VERSION ? \"(core version \".concat(VERSION, \")\") : '';\n  return workerFarm.process(workerSource, \"\".concat(workerName, \"-worker@\").concat(loader.version).concat(warning), {\n    arraybuffer: toArrayBuffer(data),\n    options: options,\n    source: \"loaders.gl@\".concat(VERSION),\n    type: 'parse'\n  });\n}\nvar _workerFarm = null;\n\nfunction getWorkerFarm() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var props = {};\n\n  if (options.maxConcurrency) {\n    props.maxConcurrency = options.maxConcurrency;\n  }\n\n  if (options.onDebug) {\n    props.onDebug = options.onDebug;\n  }\n\n  if (!_workerFarm) {\n    _workerFarm = new WorkerFarm({\n      onMessage: onWorkerMessage\n    });\n  }\n\n  _workerFarm.setProps(props);\n\n  return _workerFarm;\n}\n\nfunction onWorkerMessage(_x) {\n  return _onWorkerMessage.apply(this, arguments);\n}\n\nfunction _onWorkerMessage() {\n  _onWorkerMessage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n    var worker, data, resolve, reject, result;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            worker = _ref2.worker, data = _ref2.data, resolve = _ref2.resolve, reject = _ref2.reject;\n            _context.t0 = data.type;\n            _context.next = _context.t0 === 'done' ? 4 : _context.t0 === 'parse' ? 6 : _context.t0 === 'error' ? 17 : 19;\n            break;\n\n          case 4:\n            resolve(data.result);\n            return _context.abrupt(\"break\", 19);\n\n          case 6:\n            _context.prev = 6;\n            _context.next = 9;\n            return parse(data.arraybuffer, data.options, data.url);\n\n          case 9:\n            result = _context.sent;\n            worker.postMessage({\n              type: 'parse-done',\n              id: data.id,\n              result: result\n            }, getTransferList(result));\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t1 = _context[\"catch\"](6);\n            worker.postMessage({\n              type: 'parse-error',\n              id: data.id,\n              message: _context.t1.message\n            });\n\n          case 16:\n            return _context.abrupt(\"break\", 19);\n\n          case 17:\n            reject(data.message);\n            return _context.abrupt(\"break\", 19);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n  return _onWorkerMessage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-with-worker.js.map","var DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nvar MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  if (typeof mimeString !== 'string') {\n    return '';\n  }\n\n  var matches = mimeString.match(MIME_TYPE_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(dataUrl) {\n  if (typeof dataUrl !== 'string') {\n    return '';\n  }\n\n  var matches = dataUrl.match(DATA_URL_PATTERN);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nvar QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    var contentType = parseMIMEType(resource.headers.get('content-type'));\n    var urlType = parseMIMETypeFromURL(resource.url);\n    return {\n      url: stripQueryString(resource.url || ''),\n      type: contentType || urlType || null\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.url || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nvar EXT_PATTERN = /\\.([^.]+)$/;\nexport function selectLoader(data) {\n  var loaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var context = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  loaders = [].concat(_toConsumableArray(loaders || []), _toConsumableArray(getRegisteredLoaders()));\n  normalizeLoaders(loaders);\n\n  var _getResourceUrlAndTyp = getResourceUrlAndType(data),\n      url = _getResourceUrlAndTyp.url,\n      type = _getResourceUrlAndTyp.type;\n\n  var loader = findLoaderByUrl(loaders, url || context.url);\n  loader = loader || findLoaderByContentType(loaders, type);\n  loader = loader || findLoaderByExamingInitialData(loaders, data);\n\n  if (!loader && !options.nothrow) {\n    throw new Error(getNoValidLoaderMessage(data, url, type));\n  }\n\n  return loader;\n}\n\nfunction getNoValidLoaderMessage(data, url, contentType) {\n  var message = 'No valid loader found';\n\n  if (data) {\n    message += \" data: \\\"\".concat(getFirstCharacters(data), \"\\\"\");\n  }\n\n  if (url) {\n    message += \" for \".concat(url);\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  var _iterator = _createForOfIteratorHelper(loaders),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var loader = _step.value;\n      normalizeLoader(loader);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  var match = url && url.match(EXT_PATTERN);\n  var extension = match && match[1];\n  return extension && findLoaderByExtension(loaders, extension);\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  var _iterator2 = _createForOfIteratorHelper(loaders),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var loader = _step2.value;\n\n      var _iterator3 = _createForOfIteratorHelper(loader.extensions),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var loaderExtension = _step3.value;\n\n          if (loaderExtension.toLowerCase() === extension) {\n            return loader;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByContentType(loaders, mimeType) {\n  var _iterator4 = _createForOfIteratorHelper(loaders),\n      _step4;\n\n  try {\n    for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n      var loader = _step4.value;\n\n      if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n        return loader;\n      }\n\n      if (mimeType === \"application/x.\".concat(loader.id)) {\n        return loader;\n      }\n    }\n  } catch (err) {\n    _iterator4.e(err);\n  } finally {\n    _iterator4.f();\n  }\n\n  return null;\n}\n\nfunction findLoaderByExamingInitialData(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  var _iterator5 = _createForOfIteratorHelper(loaders),\n      _step5;\n\n  try {\n    for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n      var loader = _step5.value;\n\n      if (typeof data === 'string') {\n        if (testText(data, loader)) {\n          return loader;\n        }\n      } else if (ArrayBuffer.isView(data)) {\n        if (testBinary(data.buffer, data.byteOffset, loader)) {\n          return loader;\n        }\n      } else if (data instanceof ArrayBuffer) {\n        var byteOffset = 0;\n\n        if (testBinary(data, byteOffset, loader)) {\n          return loader;\n        }\n      }\n    }\n  } catch (err) {\n    _iterator5.e(err);\n  } finally {\n    _iterator5.f();\n  }\n\n  return null;\n}\n\nfunction testText(data, loader) {\n  return loader.testText && loader.testText(data);\n}\n\nfunction testBinary(data, byteOffset, loader) {\n  var type = Array.isArray(loader.test) ? 'array' : _typeof(loader.test);\n\n  switch (type) {\n    case 'function':\n      return loader.test(data, loader);\n\n    case 'string':\n    case 'array':\n      var tests = Array.isArray(loader.test) ? loader.test : [loader.test];\n      return tests.some(function (test) {\n        var magic = getMagicString(data, byteOffset, test.length);\n        return test === magic;\n      });\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { assert, validateLoaderVersion } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { mergeOptions } from '../loader-utils/merge-options';\nimport { getUrlFromData } from '../loader-utils/get-data';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaders, getLoaderContext } from '../loader-utils/get-loader-context';\nimport parseWithWorker, { canParseWithWorker } from '../loader-utils/parse-with-worker';\nimport { selectLoader } from './select-loader';\nexport function parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, loaders, options, context) {\n    var url, autoUrl, candidateLoaders, loader;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              context = options;\n              options = loaders;\n              loaders = null;\n            }\n\n            url = '';\n\n            if (typeof context === 'string') {\n              url = context;\n              context = null;\n            }\n\n            options = options || {};\n            autoUrl = getUrlFromData(data, url);\n            candidateLoaders = getLoaders(loaders, context);\n            loader = selectLoader(data, candidateLoaders, options, {\n              url: autoUrl\n            });\n\n            if (loader) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 9:\n            options = mergeOptions(loader, options, autoUrl);\n            context = getLoaderContext({\n              url: autoUrl,\n              parse: parse,\n              loaders: candidateLoaders\n            }, options, context);\n            _context.next = 13;\n            return parseWithLoader(loader, data, options, context);\n\n          case 13:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction parseWithLoader(_x5, _x6, _x7, _x8) {\n  return _parseWithLoader.apply(this, arguments);\n}\n\nfunction _parseWithLoader() {\n  _parseWithLoader = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(loader, data, options, context) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            validateLoaderVersion(loader);\n            _context2.next = 3;\n            return getArrayBufferOrStringFromData(data, loader);\n\n          case 3:\n            data = _context2.sent;\n\n            if (!(loader.parseTextSync && typeof data === 'string')) {\n              _context2.next = 7;\n              break;\n            }\n\n            options.dataType = 'text';\n            return _context2.abrupt(\"return\", loader.parseTextSync(data, options, context, loader));\n\n          case 7:\n            if (!canParseWithWorker(loader, data, options, context)) {\n              _context2.next = 11;\n              break;\n            }\n\n            _context2.next = 10;\n            return parseWithWorker(loader, data, options, context);\n\n          case 10:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 11:\n            if (!loader.parse) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 14;\n            return loader.parse(data, options, context, loader);\n\n          case 14:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 15:\n            assert(!loader.parseSync);\n            return _context2.abrupt(\"return\", assert(false));\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseWithLoader.apply(this, arguments);\n}\n//# sourceMappingURL=parse.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isBlob } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { parse } from './parse';\nexport function load(_x, _x2, _x3) {\n  return _load.apply(this, arguments);\n}\n\nfunction _load() {\n  _load = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(url, loaders, options) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n              options = loaders;\n              loaders = null;\n            }\n\n            data = url;\n\n            if (!(typeof url === 'string')) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.next = 5;\n            return fetchFile(url, options);\n\n          case 5:\n            data = _context.sent;\n            _context.next = 9;\n            break;\n\n          case 8:\n            url = null;\n\n          case 9:\n            if (!isBlob(url)) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 12;\n            return fetchFile(url, options);\n\n          case 12:\n            data = _context.sent;\n            url = null;\n\n          case 14:\n            _context.next = 16;\n            return parse(data, loaders, options, url);\n\n          case 16:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _load.apply(this, arguments);\n}\n//# sourceMappingURL=load.js.map","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import { global } from 'probe.gl/env';\nvar glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  var f = gl.getError;\n\n  gl.getError = function getError() {\n    var err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nvar WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  var gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (var n = 0; n < this.attribs.length; n++) {\n    var attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nvar OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  var self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  var original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    var attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    var vao = self.currentVertexArrayObject;\n    var attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    var vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    var attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', function () {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  var contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (var ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  var gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  var arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  var gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  var original = this.original;\n  var oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  var newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  var currentBinding = this.currentArrayBuffer;\n  var maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (var n = 0; n <= maxAttrib; n++) {\n    var attrib = newVAO.attribs[n];\n    var oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      var bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  var original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    var list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  var original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    var ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","import project from '../project/project';\nvar vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs: vs\n};\n//# sourceMappingURL=project32.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar ShaderAttribute = function () {\n  function ShaderAttribute(dataColumn, opts) {\n    _classCallCheck(this, ShaderAttribute);\n\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  _createClass(ShaderAttribute, [{\n    key: \"getValue\",\n    value: function getValue() {\n      var buffer = this.source.getBuffer();\n      var accessor = this.getAccessor();\n\n      if (buffer) {\n        return [buffer, accessor];\n      }\n\n      var value = this.source.value;\n      var size = accessor.size;\n      var constantValue = value;\n\n      if (value && value.length !== size) {\n        constantValue = new Float32Array(size);\n        var index = accessor.elementOffset || 0;\n\n        for (var i = 0; i < size; ++i) {\n          constantValue[i] = value[index + i];\n        }\n      }\n\n      return constantValue;\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return _objectSpread({}, this.source.getAccessor(), {}, this.opts);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this.source.value;\n    }\n  }]);\n\n  return ShaderAttribute;\n}();\n\nexport { ShaderAttribute as default };\n//# sourceMappingURL=shader-attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  var stride = getStride(baseAccessor);\n  var vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  var elementOffset = shaderAttributeOptions.elementOffset || 0;\n  var offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return _objectSpread({}, shaderAttributeOptions, {\n    offset: offset,\n    stride: stride\n  });\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  var resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: _objectSpread({}, resolvedOptions, {\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    })\n  };\n}\n\nvar DataColumn = function () {\n  function DataColumn(gl, opts) {\n    _classCallCheck(this, DataColumn);\n\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    var logicalType = opts.logicalType || opts.type;\n    var doublePrecision = logicalType === 5130;\n    var defaultValue = opts.defaultValue;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    var bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    var defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  _createClass(DataColumn, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this._buffer) {\n        this._buffer[\"delete\"]();\n\n        this._buffer = null;\n      }\n\n      typedArrayManager.release(this.state.allocatedValue);\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(id, options) {\n      if (this.doublePrecision) {\n        var shaderAttributes = {};\n        var isBuffer64Bit = this.value instanceof Float64Array;\n        var doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n        shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n        shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n        return shaderAttributes;\n      }\n\n      if (options) {\n        var shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n        return _defineProperty({}, id, new ShaderAttribute(this, shaderAttributeDef));\n      }\n\n      return _defineProperty({}, id, this);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      if (this.state.constant) {\n        return null;\n      }\n\n      return this.state.externalBuffer || this._buffer;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      if (this.state.constant) {\n        return this.value;\n      }\n\n      return [this.getBuffer(), this.getAccessor()];\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor() {\n      return this.state.bufferAccessor;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(opts) {\n      var state = this.state;\n\n      if (ArrayBuffer.isView(opts)) {\n        opts = {\n          value: opts\n        };\n      } else if (opts instanceof Buffer) {\n        opts = {\n          buffer: opts\n        };\n      }\n\n      var accessor = _objectSpread({}, this.settings, {}, opts);\n\n      state.bufferAccessor = accessor;\n\n      if (opts.constant) {\n        var value = opts.value;\n        value = this._normalizeValue(value, [], 0);\n\n        if (this.settings.normalized) {\n          value = this._normalizeConstant(value);\n        }\n\n        var hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n        if (!hasChanged) {\n          return false;\n        }\n\n        state.externalBuffer = null;\n        state.constant = true;\n        this.value = value;\n      } else if (opts.buffer) {\n        var buffer = opts.buffer;\n        state.externalBuffer = buffer;\n        state.constant = false;\n        this.value = opts.value;\n        var isBuffer64Bit = opts.value instanceof Float64Array;\n        accessor.type = opts.type || buffer.accessor.type;\n        accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n        accessor.stride = getStride(accessor);\n      } else if (opts.value) {\n        this._checkExternalBuffer(opts);\n\n        var _value = opts.value;\n        state.externalBuffer = null;\n        state.constant = false;\n        this.value = _value;\n        accessor.bytesPerElement = _value.BYTES_PER_ELEMENT;\n        accessor.stride = getStride(accessor);\n        var _buffer = this.buffer,\n            byteOffset = this.byteOffset;\n\n        if (this.doublePrecision && _value instanceof Float64Array) {\n          _value = toDoublePrecisionArray(_value, accessor);\n        }\n\n        if (_buffer.byteLength < _value.byteLength + byteOffset) {\n          _buffer.reallocate((_value.byteLength + byteOffset) * 2);\n        }\n\n        _buffer.setAccessor(null);\n\n        _buffer.subData({\n          data: _value,\n          offset: byteOffset\n        });\n\n        accessor.type = opts.type || _buffer.accessor.type;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"updateSubBuffer\",\n    value: function updateSubBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var value = this.value;\n      var _opts$startOffset = opts.startOffset,\n          startOffset = _opts$startOffset === void 0 ? 0 : _opts$startOffset,\n          endOffset = opts.endOffset;\n      this.buffer.subData({\n        data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n          size: this.size,\n          startIndex: startOffset,\n          endIndex: endOffset\n        }) : value.subarray(startOffset, endOffset),\n        offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n      });\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(_ref3) {\n      var numInstances = _ref3.numInstances,\n          _ref3$copy = _ref3.copy,\n          copy = _ref3$copy === void 0 ? false : _ref3$copy;\n      var state = this.state;\n      var oldValue = state.allocatedValue;\n      var value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n        size: this.size,\n        type: this.defaultType,\n        copy: copy\n      });\n      this.value = value;\n      var buffer = this.buffer,\n          byteOffset = this.byteOffset;\n\n      if (buffer.byteLength < value.byteLength + byteOffset) {\n        buffer.reallocate(value.byteLength + byteOffset);\n\n        if (copy && oldValue) {\n          buffer.subData({\n            data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n            offset: byteOffset\n          });\n        }\n      }\n\n      state.allocatedValue = value;\n      state.constant = false;\n      state.externalBuffer = null;\n      state.bufferAccessor = this.settings;\n      return true;\n    }\n  }, {\n    key: \"_checkExternalBuffer\",\n    value: function _checkExternalBuffer(opts) {\n      var value = opts.value;\n\n      if (!opts.constant && value) {\n        var ArrayType = this.defaultType;\n        var illegalArrayType = false;\n\n        if (this.doublePrecision) {\n          illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n        }\n\n        if (illegalArrayType) {\n          throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n        }\n\n        if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n          log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeConstant\",\n    value: function _normalizeConstant(value) {\n      switch (this.settings.type) {\n        case 5120:\n          return new Float32Array(value).map(function (x) {\n            return (x + 128) / 255 * 2 - 1;\n          });\n\n        case 5122:\n          return new Float32Array(value).map(function (x) {\n            return (x + 32768) / 65535 * 2 - 1;\n          });\n\n        case 5121:\n          return new Float32Array(value).map(function (x) {\n            return x / 255;\n          });\n\n        case 5123:\n          return new Float32Array(value).map(function (x) {\n            return x / 65535;\n          });\n\n        default:\n          return value;\n      }\n    }\n  }, {\n    key: \"_normalizeValue\",\n    value: function _normalizeValue(value, out, start) {\n      var _this$settings = this.settings,\n          defaultValue = _this$settings.defaultValue,\n          size = _this$settings.size;\n\n      if (Number.isFinite(value)) {\n        out[start] = value;\n        return out;\n      }\n\n      if (!value) {\n        out[start] = defaultValue[0];\n        return out;\n      }\n\n      switch (size) {\n        case 4:\n          out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n        case 3:\n          out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n        case 2:\n          out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n        case 1:\n          out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n          break;\n\n        default:\n          var i = size;\n\n          while (--i >= 0) {\n            out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n          }\n\n      }\n\n      return out;\n    }\n  }, {\n    key: \"_areValuesEqual\",\n    value: function _areValuesEqual(value1, value2) {\n      if (!value1 || !value2) {\n        return false;\n      }\n\n      var size = this.size;\n\n      for (var i = 0; i < size; i++) {\n        if (value1[i] !== value2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"buffer\",\n    get: function get() {\n      if (!this._buffer) {\n        var _this$settings2 = this.settings,\n            isIndexed = _this$settings2.isIndexed,\n            type = _this$settings2.type;\n        this._buffer = new Buffer(this.gl, {\n          id: this.id,\n          target: isIndexed ? 34963 : 34962,\n          accessor: {\n            type: type\n          }\n        });\n      }\n\n      return this._buffer;\n    }\n  }, {\n    key: \"byteOffset\",\n    get: function get() {\n      var accessor = this.getAccessor();\n\n      if (accessor.vertexOffset) {\n        return accessor.vertexOffset * getStride(accessor);\n      }\n\n      return 0;\n    }\n  }]);\n\n  return DataColumn;\n}();\n\nexport { DataColumn as default };\n//# sourceMappingURL=data-column.js.map","var EMPTY_ARRAY = [];\nvar placeholderArray = [];\nexport function createIterable(data) {\n  var startRow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var endRow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n  var iterable = EMPTY_ARRAY;\n  var objectInfo = {\n    index: -1,\n    data: data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable: iterable,\n    objectInfo: objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, _ref) {\n  var size = _ref.size,\n      stride = _ref.stride,\n      offset = _ref.offset,\n      startIndices = _ref.startIndices,\n      nested = _ref.nested;\n  var bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  var elementStride = stride ? stride / bytesPerElement : size;\n  var elementOffset = offset ? offset / bytesPerElement : 0;\n  var vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return function (_, _ref2) {\n    var index = _ref2.index,\n        target = _ref2.target;\n\n    if (!startIndices) {\n      var sourceIndex = index * elementStride + elementOffset;\n\n      for (var j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    var startIndex = startIndices[index];\n    var endIndex = startIndices[index + 1] || vertexCount;\n    var result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (var i = startIndex; i < endIndex; i++) {\n        var _sourceIndex = i * elementStride + elementOffset;\n\n        target = new Array(size);\n\n        for (var _j = 0; _j < size; _j++) {\n          target[_j] = typedArray[_sourceIndex + _j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      var targetIndex = 0;\n\n      for (var _i = startIndex; _i < endIndex; _i++) {\n        var _sourceIndex2 = _i * elementStride + elementOffset;\n\n        for (var _j2 = 0; _j2 < size; _j2++) {\n          result[targetIndex++] = typedArray[_sourceIndex2 + _j2];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export var EMPTY = [];\nexport var FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  var newRangeList = [];\n  var len = rangeList.length;\n  var insertPosition = 0;\n\n  for (var i = 0; i < len; i++) {\n    var range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk(_ref) {\n  var source = _ref.source,\n      target = _ref.target,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      getData = _ref.getData;\n  end = end || target.length;\n  var sourceLength = source.length;\n  var targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  var i = sourceLength;\n\n  while (i < targetLength) {\n    var datum = getData(i, source);\n\n    for (var j = 0; j < datum.length; j++) {\n      target[start + i] = datum[j];\n      i++;\n    }\n  }\n}\n\nexport function padArray(_ref2) {\n  var source = _ref2.source,\n      target = _ref2.target,\n      size = _ref2.size,\n      getData = _ref2.getData,\n      sourceStartIndices = _ref2.sourceStartIndices,\n      targetStartIndices = _ref2.targetStartIndices;\n\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source: source,\n      target: target,\n      getData: getData\n    });\n    return target;\n  }\n\n  var sourceIndex = 0;\n  var targetIndex = 0;\n\n  var getChunkData = getData && function (i, chunk) {\n    return getData(i + targetIndex, chunk);\n  };\n\n  var n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (var i = 1; i < n; i++) {\n    var nextSourceIndex = sourceStartIndices[i] * size;\n    var nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target: target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target: target,\n      start: targetIndex,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nvar DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: function easing(t) {\n      return t;\n    }\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return Object.assign({}, DEFAULT_TRANSITION_SETTINGS[userSettings.type], layerSettings, userSettings);\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  var buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  var doublePrecision = attribute.doublePrecision,\n      settings = attribute.settings,\n      value = attribute.value,\n      size = attribute.size;\n  var multiplier = doublePrecision ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer(_ref) {\n  var buffer = _ref.buffer,\n      numInstances = _ref.numInstances,\n      attribute = _ref.attribute,\n      fromLength = _ref.fromLength,\n      fromStartIndices = _ref.fromStartIndices,\n      _ref$getData = _ref.getData,\n      getData = _ref$getData === void 0 ? function (x) {\n    return x;\n  } : _ref$getData;\n  var precisionMultiplier = attribute.doublePrecision ? 2 : 1;\n  var size = attribute.size * precisionMultiplier;\n  var byteOffset = attribute.byteOffset;\n  var toStartIndices = attribute.startIndices;\n  var hasStartIndices = fromStartIndices && toStartIndices;\n  var toLength = getAttributeBufferLength(attribute, numInstances);\n  var isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  var toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    var getter = getData;\n\n    getData = function getData(value, chunk) {\n      return attribute._normalizeConstant(getter(value, chunk));\n    };\n  }\n\n  var getMissingData = isConstant ? function (i, chunk) {\n    return getData(toData, chunk);\n  } : function (i, chunk) {\n    return getData(toData.subarray(i, i + size), chunk);\n  };\n  var source = buffer.getData({\n    length: fromLength\n  });\n  var data = new Float32Array(toLength);\n  padArray({\n    source: source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size: size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data: data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\n\nvar Attribute = function (_DataColumn) {\n  _inherits(Attribute, _DataColumn);\n\n  function Attribute(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Attribute);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Attribute).call(this, gl, opts));\n    var _opts$transition = opts.transition,\n        transition = _opts$transition === void 0 ? false : _opts$transition,\n        _opts$noAlloc = opts.noAlloc,\n        noAlloc = _opts$noAlloc === void 0 ? false : _opts$noAlloc,\n        _opts$update = opts.update,\n        update = _opts$update === void 0 ? null : _opts$update,\n        _opts$accessor = opts.accessor,\n        accessor = _opts$accessor === void 0 ? null : _opts$accessor,\n        _opts$transform = opts.transform,\n        transform = _opts$transform === void 0 ? null : _opts$transform,\n        _opts$startIndices = opts.startIndices,\n        startIndices = _opts$startIndices === void 0 ? null : _opts$startIndices;\n    Object.assign(_this.settings, {\n      transition: transition,\n      noAlloc: noAlloc,\n      update: update || accessor && _this._autoUpdater,\n      accessor: accessor,\n      transform: transform\n    });\n    Object.assign(_this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices: startIndices\n    });\n    Object.seal(_this.settings);\n    Object.seal(_this.state);\n\n    _this._validateAttributeUpdaters();\n\n    return _this;\n  }\n\n  _createClass(Attribute, [{\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.state.needsUpdate;\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$clearChangedFlag = _ref.clearChangedFlags,\n          clearChangedFlags = _ref$clearChangedFlag === void 0 ? false : _ref$clearChangedFlag;\n\n      var needsRedraw = this.state.needsRedraw;\n      this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n      return needsRedraw;\n    }\n  }, {\n    key: \"getUpdateTriggers\",\n    value: function getUpdateTriggers() {\n      var accessor = this.settings.accessor;\n      return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n    }\n  }, {\n    key: \"supportsTransition\",\n    value: function supportsTransition() {\n      return Boolean(this.settings.transition);\n    }\n  }, {\n    key: \"getTransitionSetting\",\n    value: function getTransitionSetting(opts) {\n      var accessor = this.settings.accessor;\n      var layerSettings = this.settings.transition;\n\n      if (!this.supportsTransition()) {\n        return null;\n      }\n\n      var userSettings = Array.isArray(accessor) ? opts[accessor.find(function (a) {\n        return opts[a];\n      })] : opts[accessor];\n      return normalizeTransitionSettings(userSettings, layerSettings);\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      var dataRange = arguments.length > 1 ? arguments[1] : undefined;\n      this.state.needsUpdate = this.state.needsUpdate || reason;\n      this.setNeedsRedraw(reason);\n\n      if (dataRange) {\n        var _dataRange$startRow = dataRange.startRow,\n            startRow = _dataRange$startRow === void 0 ? 0 : _dataRange$startRow,\n            _dataRange$endRow = dataRange.endRow,\n            endRow = _dataRange$endRow === void 0 ? Infinity : _dataRange$endRow;\n        this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n      } else {\n        this.state.updateRanges = range.FULL;\n      }\n    }\n  }, {\n    key: \"clearNeedsUpdate\",\n    value: function clearNeedsUpdate() {\n      this.state.needsUpdate = false;\n      this.state.updateRanges = range.EMPTY;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var reason = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.id;\n      this.state.needsRedraw = this.state.needsRedraw || reason;\n    }\n  }, {\n    key: \"update\",\n    value: function update(opts) {\n      this.setData(opts);\n    }\n  }, {\n    key: \"allocate\",\n    value: function allocate(numInstances) {\n      var state = this.state,\n          settings = this.settings;\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (settings.update) {\n        assert(Number.isFinite(numInstances));\n\n        _get(_getPrototypeOf(Attribute.prototype), \"allocate\", this).call(this, {\n          numInstances: numInstances,\n          copy: state.updateRanges !== range.FULL\n        });\n\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"updateBuffer\",\n    value: function updateBuffer(_ref2) {\n      var numInstances = _ref2.numInstances,\n          data = _ref2.data,\n          props = _ref2.props,\n          context = _ref2.context;\n\n      if (!this.needsUpdate()) {\n        return false;\n      }\n\n      var updateRanges = this.state.updateRanges,\n          _this$settings = this.settings,\n          update = _this$settings.update,\n          noAlloc = _this$settings.noAlloc;\n      var updated = true;\n\n      if (update) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = updateRanges[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var _step$value = _slicedToArray(_step.value, 2),\n                _startRow = _step$value[0],\n                _endRow = _step$value[1];\n\n            update.call(context, this, {\n              data: data,\n              startRow: _startRow,\n              endRow: _endRow,\n              props: props,\n              numInstances: numInstances\n            });\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n          this.setData({\n            value: this.value,\n            constant: this.constant\n          });\n        } else {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = updateRanges[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var _step2$value = _slicedToArray(_step2.value, 2),\n                  startRow = _step2$value[0],\n                  endRow = _step2$value[1];\n\n              var startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n              var endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n\n              _get(_getPrototypeOf(Attribute.prototype), \"updateSubBuffer\", this).call(this, {\n                startOffset: startOffset,\n                endOffset: endOffset\n              });\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n\n        this._checkAttributeArray();\n      } else {\n        updated = false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setNeedsRedraw();\n      return updated;\n    }\n  }, {\n    key: \"setConstantValue\",\n    value: function setConstantValue(value) {\n      if (value === undefined || typeof value === 'function') {\n        return false;\n      }\n\n      var hasChanged = this.setData({\n        constant: true,\n        value: value\n      });\n\n      if (hasChanged) {\n        this.setNeedsRedraw();\n      }\n\n      this.clearNeedsUpdate();\n      return true;\n    }\n  }, {\n    key: \"setExternalBuffer\",\n    value: function setExternalBuffer(buffer) {\n      var state = this.state;\n\n      if (!buffer) {\n        state.lastExternalBuffer = null;\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n\n      if (state.lastExternalBuffer === buffer) {\n        return true;\n      }\n\n      state.lastExternalBuffer = buffer;\n      this.setNeedsRedraw();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"setBinaryValue\",\n    value: function setBinaryValue(buffer) {\n      var startIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var state = this.state,\n          settings = this.settings;\n\n      if (!buffer) {\n        state.binaryValue = null;\n        state.binaryAccessor = null;\n        return false;\n      }\n\n      if (settings.noAlloc) {\n        return false;\n      }\n\n      if (state.binaryValue === buffer) {\n        this.clearNeedsUpdate();\n        return true;\n      }\n\n      state.binaryValue = buffer;\n      this.setNeedsRedraw();\n\n      if (ArrayBuffer.isView(buffer)) {\n        buffer = {\n          value: buffer\n        };\n      }\n\n      var needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n      if (needsUpdate) {\n        assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n        var needsNormalize = buffer.size && buffer.size !== this.size;\n        state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n          size: buffer.size || this.size,\n          stride: buffer.stride,\n          offset: buffer.offset,\n          startIndices: startIndices,\n          nested: needsNormalize\n        });\n        return false;\n      }\n\n      this.clearNeedsUpdate();\n      this.setData(buffer);\n      return true;\n    }\n  }, {\n    key: \"getVertexOffset\",\n    value: function getVertexOffset(row) {\n      var startIndices = this.startIndices;\n      var vertexIndex = startIndices ? startIndices[row] : row;\n      return vertexIndex * this.size;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes() {\n      var shaderAttributeDefs = this.settings.shaderAttributes || _defineProperty({}, this.id, null);\n\n      var shaderAttributes = {};\n\n      for (var shaderAttributeName in shaderAttributeDefs) {\n        Object.assign(shaderAttributes, _get(_getPrototypeOf(Attribute.prototype), \"getShaderAttributes\", this).call(this, shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"_autoUpdater\",\n    value: function _autoUpdater(attribute, _ref4) {\n      var data = _ref4.data,\n          startRow = _ref4.startRow,\n          endRow = _ref4.endRow,\n          props = _ref4.props,\n          numInstances = _ref4.numInstances;\n      var settings = attribute.settings,\n          state = attribute.state,\n          value = attribute.value,\n          size = attribute.size,\n          startIndices = attribute.startIndices;\n      var accessor = settings.accessor,\n          transform = settings.transform;\n      var accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n      assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n      var i = attribute.getVertexOffset(startRow);\n\n      var _createIterable = createIterable(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = iterable[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var object = _step3.value;\n          objectInfo.index++;\n          var objectValue = accessorFunc(object, objectInfo);\n\n          if (transform) {\n            objectValue = transform.call(this, objectValue);\n          }\n\n          if (startIndices) {\n            var numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n            if (objectValue && Array.isArray(objectValue[0])) {\n              var startIndex = i;\n              var _iteratorNormalCompletion4 = true;\n              var _didIteratorError4 = false;\n              var _iteratorError4 = undefined;\n\n              try {\n                for (var _iterator4 = objectValue[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                  var item = _step4.value;\n\n                  attribute._normalizeValue(item, value, startIndex);\n\n                  startIndex += size;\n                }\n              } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n              } finally {\n                try {\n                  if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n                    _iterator4[\"return\"]();\n                  }\n                } finally {\n                  if (_didIteratorError4) {\n                    throw _iteratorError4;\n                  }\n                }\n              }\n            } else if (objectValue && objectValue.length > size) {\n              value.set(objectValue, i);\n            } else {\n              attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n              fillArray({\n                target: value,\n                source: objectInfo.target,\n                start: i,\n                count: numVertices\n              });\n            }\n\n            i += numVertices * size;\n          } else {\n            attribute._normalizeValue(objectValue, value, i);\n\n            i += size;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      attribute.constant = false;\n    }\n  }, {\n    key: \"_validateAttributeUpdaters\",\n    value: function _validateAttributeUpdaters() {\n      var settings = this.settings;\n      var hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n      if (!hasUpdater) {\n        throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n      }\n    }\n  }, {\n    key: \"_checkAttributeArray\",\n    value: function _checkAttributeArray() {\n      var value = this.value;\n      var limit = Math.min(4, this.size);\n\n      if (value && value.length >= limit) {\n        var valid = true;\n\n        switch (limit) {\n          case 4:\n            valid = valid && Number.isFinite(value[3]);\n\n          case 3:\n            valid = valid && Number.isFinite(value[2]);\n\n          case 2:\n            valid = valid && Number.isFinite(value[1]);\n\n          case 1:\n            valid = valid && Number.isFinite(value[0]);\n            break;\n\n          default:\n            valid = false;\n        }\n\n        if (!valid) {\n          throw new Error(\"Illegal attribute generated for \".concat(this.id));\n        }\n      }\n    }\n  }, {\n    key: \"startIndices\",\n    get: function get() {\n      return this.state.startIndices;\n    },\n    set: function set(layout) {\n      this.state.startIndices = layout;\n    }\n  }]);\n\n  return Attribute;\n}(DataColumn);\n\nexport { Attribute as default };\n//# sourceMappingURL=attribute.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { assert } from '../utils';\nvar FS100 = \"void main() {gl_FragColor = vec4(0);}\";\nvar FS_GLES = \"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\";\nvar FS300 = \"#version 300 es\\n\".concat(FS_GLES);\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  var words = line.replace(/^\\s+/, '').split(/\\s+/);\n\n  var _words = _slicedToArray(words, 3),\n      qualifier = _words[0],\n      type = _words[1],\n      definition = _words[2];\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  var name = definition.split(';')[0];\n  return {\n    qualifier: qualifier,\n    type: type,\n    name: name\n  };\n}\nexport function getPassthroughFS() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$version = _ref.version,\n      version = _ref$version === void 0 ? 100 : _ref$version,\n      input = _ref.input,\n      inputType = _ref.inputType,\n      output = _ref.output;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return \"#version \".concat(version, \"\\n\").concat(FS_GLES);\n    }\n\n    return FS100;\n  }\n\n  var outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return \"#version \".concat(version, \" \").concat(version === 300 ? 'es' : '', \"\\nin \").concat(inputType, \" \").concat(input, \";\\nout vec4 \").concat(output, \";\\nvoid main() {\\n  \").concat(output, \" = \").concat(outputValue, \";\\n}\");\n  }\n\n  return \"varying \".concat(inputType, \" \").concat(input, \";\\nvoid main() {\\n  gl_FragColor = \").concat(outputValue, \";\\n}\");\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return \"vec4(\".concat(variable, \", 0.0, 0.0, 1.0)\");\n\n    case 'vec2':\n      return \"vec4(\".concat(variable, \", 0.0, 1.0)\");\n\n    case 'vec3':\n      return \"vec4(\".concat(variable, \", 1.0)\");\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\n\nvar BufferTransform = function () {\n  function BufferTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, BufferTransform);\n\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(BufferTransform, [{\n    key: \"setupResources\",\n    value: function setupResources(opts) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.bindings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var binding = _step.value;\n\n          this._setupTransformFeedback(binding, opts);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var varyings = this.varyings;\n\n      if (varyings.length > 0) {\n        props = Object.assign({}, props, {\n          varyings: varyings\n        });\n      }\n\n      return props;\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var binding = this.bindings[this.currentIndex];\n      var sourceBuffers = binding.sourceBuffers,\n          transformFeedback = binding.transformFeedback;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      return {\n        attributes: attributes,\n        transformFeedback: transformFeedback\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this.feedbackMap) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(opts);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(varyingName) {\n      var feedbackBuffers = this.bindings[this.currentIndex].feedbackBuffers;\n      var bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n      if (!bufferOrParams) {\n        return null;\n      }\n\n      return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          varyingName = _ref.varyingName;\n\n      var buffer = this.getBuffer(varyingName);\n\n      if (buffer) {\n        return buffer.getData();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var name in this.resources) {\n        this.resources[name][\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupBuffers(props);\n\n      this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n      if (this.varyings.length > 0) {\n        assert(isWebGL2(this.gl));\n      }\n    }\n  }, {\n    key: \"_getFeedbackBuffers\",\n    value: function _getFeedbackBuffers(props) {\n      var _props$sourceBuffers = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers === void 0 ? {} : _props$sourceBuffers;\n      var feedbackBuffers = {};\n\n      if (this.bindings[this.currentIndex]) {\n        Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n      }\n\n      if (this.feedbackMap) {\n        for (var sourceName in this.feedbackMap) {\n          var feedbackName = this.feedbackMap[sourceName];\n\n          if (sourceName in sourceBuffers) {\n            feedbackBuffers[feedbackName] = sourceName;\n          }\n        }\n      }\n\n      Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n      for (var bufferName in feedbackBuffers) {\n        var bufferOrRef = feedbackBuffers[bufferName];\n\n        if (typeof bufferOrRef === 'string') {\n          var sourceBuffer = sourceBuffers[bufferOrRef];\n          var byteLength = sourceBuffer.byteLength,\n              usage = sourceBuffer.usage,\n              accessor = sourceBuffer.accessor;\n          feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n            byteLength: byteLength,\n            usage: usage,\n            accessor: accessor\n          });\n        }\n      }\n\n      return feedbackBuffers;\n    }\n  }, {\n    key: \"_setupBuffers\",\n    value: function _setupBuffers() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$sourceBuffers2 = props.sourceBuffers,\n          sourceBuffers = _props$sourceBuffers2 === void 0 ? null : _props$sourceBuffers2;\n      Object.assign(this.feedbackMap, props.feedbackMap);\n\n      var feedbackBuffers = this._getFeedbackBuffers(props);\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_setupTransformFeedback\",\n    value: function _setupTransformFeedback(binding, _ref2) {\n      var model = _ref2.model;\n      var program = model.program;\n      binding.transformFeedback = new TransformFeedback(this.gl, {\n        program: program,\n        buffers: binding.feedbackBuffers\n      });\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this.feedbackMap) {\n        var _this$_swapBuffers = this._swapBuffers(this.bindings[this.currentIndex]),\n            sourceBuffers = _this$_swapBuffers.sourceBuffers,\n            feedbackBuffers = _this$_swapBuffers.feedbackBuffers;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceBuffers: sourceBuffers,\n          feedbackBuffers: feedbackBuffers\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      if (!binding) {\n        return {\n          sourceBuffers: Object.assign({}, opts.sourceBuffers),\n          feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n        };\n      }\n\n      Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n      Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n      if (binding.transformFeedback) {\n        binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_swapBuffers\",\n    value: function _swapBuffers(opts) {\n      if (!this.feedbackMap) {\n        return null;\n      }\n\n      var sourceBuffers = Object.assign({}, opts.sourceBuffers);\n      var feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n      for (var srcName in this.feedbackMap) {\n        var dstName = this.feedbackMap[srcName];\n        sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n        feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n        assert(feedbackBuffers[dstName] instanceof Buffer);\n      }\n\n      return {\n        sourceBuffers: sourceBuffers,\n        feedbackBuffers: feedbackBuffers\n      };\n    }\n  }, {\n    key: \"_createNewBuffer\",\n    value: function _createNewBuffer(name, opts) {\n      var buffer = new Buffer(this.gl, opts);\n\n      if (this.resources[name]) {\n        this.resources[name][\"delete\"]();\n      }\n\n      this.resources[name] = buffer;\n      return buffer;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }]);\n\n  return BufferTransform;\n}();\n\nexport { BufferTransform as default };\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  var version = 100;\n  var words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    var v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SRC_TEX_PARAMETER_OV;\n\nimport { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nvar SRC_TEX_PARAMETER_OVERRIDES = (_SRC_TEX_PARAMETER_OV = {}, _defineProperty(_SRC_TEX_PARAMETER_OV, 10241, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10240, 9728), _defineProperty(_SRC_TEX_PARAMETER_OV, 10242, 33071), _defineProperty(_SRC_TEX_PARAMETER_OV, 10243, 33071), _SRC_TEX_PARAMETER_OV);\nvar FS_OUTPUT_VARIABLE = 'transform_output';\n\nvar TextureTransform = function () {\n  function TextureTransform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureTransform);\n\n    this.gl = gl;\n    this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(TextureTransform, [{\n    key: \"updateModelProps\",\n    value: function updateModelProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var updatedModelProps = this._processVertexShader(props);\n\n      return Object.assign({}, props, updatedModelProps);\n    }\n  }, {\n    key: \"getDrawOptions\",\n    value: function getDrawOptions() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c = this.bindings[this.currentIndex],\n          sourceBuffers = _this$bindings$this$c.sourceBuffers,\n          sourceTextures = _this$bindings$this$c.sourceTextures,\n          framebuffer = _this$bindings$this$c.framebuffer,\n          targetTexture = _this$bindings$this$c.targetTexture;\n      var attributes = Object.assign({}, sourceBuffers, opts.attributes);\n      var uniforms = Object.assign({}, opts.uniforms);\n      var parameters = Object.assign({}, opts.parameters);\n      var discard = opts.discard;\n\n      if (this.hasSourceTextures || this.hasTargetTexture) {\n        attributes.transform_elementID = this.elementIDBuffer;\n\n        for (var sampler in this.samplerTextureMap) {\n          var textureName = this.samplerTextureMap[sampler];\n          uniforms[sampler] = sourceTextures[textureName];\n        }\n\n        this._setSourceTextureParameters();\n\n        var sizeUniforms = getSizeUniforms({\n          sourceTextureMap: sourceTextures,\n          targetTextureVarying: this.targetTextureVarying,\n          targetTexture: targetTexture\n        });\n        Object.assign(uniforms, sizeUniforms);\n      }\n\n      if (this.hasTargetTexture) {\n        discard = false;\n        parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n      }\n\n      return {\n        attributes: attributes,\n        framebuffer: framebuffer,\n        uniforms: uniforms,\n        discard: discard,\n        parameters: parameters\n      };\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      if (this._swapTexture) {\n        this.currentIndex = this._getNextIndex();\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._setupTextures(opts);\n    }\n  }, {\n    key: \"getTargetTexture\",\n    value: function getTargetTexture() {\n      var targetTexture = this.bindings[this.currentIndex].targetTexture;\n      return targetTexture;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$packed = _ref.packed,\n          packed = _ref$packed === void 0 ? false : _ref$packed;\n\n      var framebuffer = this.bindings[this.currentIndex].framebuffer;\n      var pixels = readPixelsToArray(framebuffer);\n\n      if (!packed) {\n        return pixels;\n      }\n\n      var ArrayType = pixels.constructor;\n      var channelCount = typeToChannelCount(this.targetTextureType);\n      var packedPixels = new ArrayType(pixels.length * channelCount / 4);\n      var packCount = 0;\n\n      for (var i = 0; i < pixels.length; i += 4) {\n        for (var j = 0; j < channelCount; j++) {\n          packedPixels[packCount++] = pixels[i + j];\n        }\n      }\n\n      return packedPixels;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      var currentResources = this.bindings[this.currentIndex];\n      return currentResources.framebuffer;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      if (this.elementIDBuffer) {\n        this.elementIDBuffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _targetTextureVarying = props._targetTextureVarying,\n          _swapTexture = props._swapTexture;\n      this._swapTexture = _swapTexture;\n      this.targetTextureVarying = _targetTextureVarying;\n      this.hasTargetTexture = _targetTextureVarying;\n\n      this._setupTextures(props);\n    }\n  }, {\n    key: \"_createTargetTexture\",\n    value: function _createTargetTexture(props) {\n      var sourceTextures = props.sourceTextures,\n          textureOrReference = props.textureOrReference;\n\n      if (textureOrReference instanceof Texture2D) {\n        return textureOrReference;\n      }\n\n      var refTexture = sourceTextures[textureOrReference];\n\n      if (!refTexture) {\n        return null;\n      }\n\n      this._targetRefTexName = textureOrReference;\n      return this._createNewTexture(refTexture);\n    }\n  }, {\n    key: \"_setupTextures\",\n    value: function _setupTextures() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var sourceBuffers = props.sourceBuffers,\n          _props$_sourceTexture = props._sourceTextures,\n          _sourceTextures = _props$_sourceTexture === void 0 ? {} : _props$_sourceTexture,\n          _targetTexture = props._targetTexture;\n\n      var targetTexture = this._createTargetTexture({\n        sourceTextures: _sourceTextures,\n        textureOrReference: _targetTexture\n      });\n\n      this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n      this._updateBindings({\n        sourceBuffers: sourceBuffers,\n        sourceTextures: _sourceTextures,\n        targetTexture: targetTexture\n      });\n\n      if ('elementCount' in props) {\n        this._updateElementIDBuffer(props.elementCount);\n      }\n    }\n  }, {\n    key: \"_updateElementIDBuffer\",\n    value: function _updateElementIDBuffer(elementCount) {\n      if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n        return;\n      }\n\n      var elementIds = new Float32Array(elementCount);\n      elementIds.forEach(function (_, index, array) {\n        array[index] = index;\n      });\n\n      if (!this.elementIDBuffer) {\n        this.elementIDBuffer = new Buffer(this.gl, {\n          data: elementIds,\n          accessor: {\n            size: 1\n          }\n        });\n      } else {\n        this.elementIDBuffer.setData({\n          data: elementIds\n        });\n      }\n\n      this.elementCount = elementCount;\n    }\n  }, {\n    key: \"_updateBindings\",\n    value: function _updateBindings(opts) {\n      this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n      if (this._swapTexture) {\n        var _this$_swapTextures = this._swapTextures(this.bindings[this.currentIndex]),\n            sourceTextures = _this$_swapTextures.sourceTextures,\n            targetTexture = _this$_swapTextures.targetTexture;\n\n        var nextIndex = this._getNextIndex();\n\n        this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n          sourceTextures: sourceTextures,\n          targetTexture: targetTexture\n        });\n      }\n    }\n  }, {\n    key: \"_updateBinding\",\n    value: function _updateBinding(binding, opts) {\n      var sourceBuffers = opts.sourceBuffers,\n          sourceTextures = opts.sourceTextures,\n          targetTexture = opts.targetTexture;\n\n      if (!binding) {\n        binding = {\n          sourceBuffers: {},\n          sourceTextures: {},\n          targetTexture: null\n        };\n      }\n\n      Object.assign(binding.sourceTextures, sourceTextures);\n      Object.assign(binding.sourceBuffers, sourceBuffers);\n\n      if (targetTexture) {\n        binding.targetTexture = targetTexture;\n        var width = targetTexture.width,\n            height = targetTexture.height;\n        var _binding = binding,\n            framebuffer = _binding.framebuffer;\n\n        if (framebuffer) {\n          framebuffer.update({\n            attachments: _defineProperty({}, 36064, targetTexture),\n            resizeAttachments: false\n          });\n          framebuffer.resize({\n            width: width,\n            height: height\n          });\n        } else {\n          binding.framebuffer = new Framebuffer(this.gl, {\n            id: \"\".concat(this.id || 'transform', \"-framebuffer\"),\n            width: width,\n            height: height,\n            attachments: _defineProperty({}, 36064, targetTexture)\n          });\n        }\n      }\n\n      return binding;\n    }\n  }, {\n    key: \"_setSourceTextureParameters\",\n    value: function _setSourceTextureParameters() {\n      var index = this.currentIndex;\n      var sourceTextures = this.bindings[index].sourceTextures;\n\n      for (var name in sourceTextures) {\n        sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n      }\n    }\n  }, {\n    key: \"_swapTextures\",\n    value: function _swapTextures(opts) {\n      if (!this._swapTexture) {\n        return null;\n      }\n\n      var sourceTextures = Object.assign({}, opts.sourceTextures);\n      sourceTextures[this._swapTexture] = opts.targetTexture;\n      var targetTexture = opts.sourceTextures[this._swapTexture];\n      return {\n        sourceTextures: sourceTextures,\n        targetTexture: targetTexture\n      };\n    }\n  }, {\n    key: \"_createNewTexture\",\n    value: function _createNewTexture(refTexture) {\n      var _parameters;\n\n      var texture = cloneTextureFrom(refTexture, {\n        parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9728), _defineProperty(_parameters, 10240, 9728), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters),\n        pixelStore: _defineProperty({}, 37440, false)\n      });\n\n      if (this.ownTexture) {\n        this.ownTexture[\"delete\"]();\n      }\n\n      this.ownTexture = texture;\n      return texture;\n    }\n  }, {\n    key: \"_getNextIndex\",\n    value: function _getNextIndex() {\n      return (this.currentIndex + 1) % 2;\n    }\n  }, {\n    key: \"_processVertexShader\",\n    value: function _processVertexShader() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$bindings$this$c2 = this.bindings[this.currentIndex],\n          sourceTextures = _this$bindings$this$c2.sourceTextures,\n          targetTexture = _this$bindings$this$c2.targetTexture;\n\n      var _updateForTextures = updateForTextures({\n        vs: props.vs,\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture: targetTexture\n      }),\n          vs = _updateForTextures.vs,\n          uniforms = _updateForTextures.uniforms,\n          targetTextureType = _updateForTextures.targetTextureType,\n          inject = _updateForTextures.inject,\n          samplerTextureMap = _updateForTextures.samplerTextureMap;\n\n      var combinedInject = combineInjects([props.inject || {}, inject]);\n      this.targetTextureType = targetTextureType;\n      this.samplerTextureMap = samplerTextureMap;\n      var fs = props._fs || getPassthroughFS({\n        version: getShaderVersion(vs),\n        input: this.targetTextureVarying,\n        inputType: targetTextureType,\n        output: FS_OUTPUT_VARIABLE\n      });\n      var modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n      return {\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        uniforms: uniforms,\n        inject: combinedInject\n      };\n    }\n  }]);\n\n  return TextureTransform;\n}();\n\nexport { TextureTransform as default };\n//# sourceMappingURL=texture-transform.js.map","var vs = \"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\";\nexport default {\n  name: 'transform',\n  vs: vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nvar SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nvar SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nvar VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures(_ref) {\n  var vs = _ref.vs,\n      sourceTextureMap = _ref.sourceTextureMap,\n      targetTextureVarying = _ref.targetTextureVarying,\n      targetTexture = _ref.targetTexture;\n  var texAttributeNames = Object.keys(sourceTextureMap);\n  var sourceCount = texAttributeNames.length;\n  var targetTextureType = null;\n  var samplerTextureMap = {};\n  var updatedVs = vs;\n  var finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    var vsLines = updatedVs.split('\\n');\n    var updateVsLines = vsLines.slice();\n    vsLines.forEach(function (line, index, lines) {\n      if (sourceCount > 0) {\n        var updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          var updatedLine = updated.updatedLine,\n              inject = updated.inject;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying);\n      var uniformDeclaration = \"uniform vec2 \".concat(sizeName, \";\\n\");\n      var posInstructions = \"     vec2 \".concat(VS_POS_VARIABLE, \" = transform_getPos(\").concat(sizeName, \");\\n     gl_Position = vec4(\").concat(VS_POS_VARIABLE, \", 0, 1.);\\n\");\n      var inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType: targetTextureType,\n    inject: finalInject,\n    samplerTextureMap: samplerTextureMap\n  };\n}\nexport function getSizeUniforms(_ref2) {\n  var sourceTextureMap = _ref2.sourceTextureMap,\n      targetTextureVarying = _ref2.targetTextureVarying,\n      targetTexture = _ref2.targetTexture;\n  var uniforms = {};\n  var width;\n  var height;\n\n  if (targetTextureVarying) {\n    width = targetTexture.width;\n    height = targetTexture.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)] = [width, height];\n  }\n\n  for (var textureName in sourceTextureMap) {\n    var _sourceTextureMap$tex = sourceTextureMap[textureName];\n    width = _sourceTextureMap$tex.width;\n    height = _sourceTextureMap$tex.height;\n    uniforms[\"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName)] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  var samplerName = \"\".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName);\n  var sizeName = \"\".concat(SIZE_UNIFORM_PREFIX).concat(textureName);\n  var uniformDeclerations = \"  uniform sampler2D \".concat(samplerName, \";\\n  uniform vec2 \").concat(sizeName, \";\");\n  return {\n    samplerName: samplerName,\n    sizeName: sizeName,\n    uniformDeclerations: uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  var qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  var samplerTextureMap = {};\n  var attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  var type = attributeData.type,\n      name = attributeData.name;\n\n  if (name && textureMap[name]) {\n    var updatedLine = \"// \".concat(line, \" => Replaced by Transform with a sampler\");\n\n    var _getSamplerDecleratio = getSamplerDeclerations(name),\n        samplerName = _getSamplerDecleratio.samplerName,\n        sizeName = _getSamplerDecleratio.sizeName,\n        uniformDeclerations = _getSamplerDecleratio.uniformDeclerations;\n\n    var channels = typeToChannelSuffix(type);\n    var sampleInstruction = \"  \".concat(type, \" \").concat(name, \" = transform_getInput(\").concat(samplerName, \", \").concat(sizeName, \").\").concat(channels, \";\\n\");\n    samplerTextureMap[samplerName] = name;\n    var inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine: updatedLine,\n      inject: inject,\n      samplerTextureMap: samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\n\nvar Transform = function () {\n  _createClass(Transform, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Transform(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Transform);\n\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  _createClass(Transform, [{\n    key: \"delete\",\n    value: function _delete() {\n      var model = this.model,\n          bufferTransform = this.bufferTransform,\n          textureTransform = this.textureTransform;\n\n      if (model) {\n        model[\"delete\"]();\n      }\n\n      if (bufferTransform) {\n        bufferTransform[\"delete\"]();\n      }\n\n      if (textureTransform) {\n        textureTransform[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$clearRenderTarg = opts.clearRenderTarget,\n          clearRenderTarget = _opts$clearRenderTarg === void 0 ? true : _opts$clearRenderTarg;\n\n      var updatedOpts = this._updateDrawOptions(opts);\n\n      if (clearRenderTarget && updatedOpts.framebuffer) {\n        updatedOpts.framebuffer.clear({\n          color: true\n        });\n      }\n\n      this.model.transform(updatedOpts);\n    }\n  }, {\n    key: \"swap\",\n    value: function swap() {\n      var swapped = false;\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = resourceTransforms[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resourceTransform = _step.value;\n          swapped = swapped || resourceTransform.swap();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      assert(swapped, 'Nothing to swap');\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer() {\n      var varyingName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = resourceTransforms[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var resourceTransform = _step2.value;\n          var data = resourceTransform.getData(opts);\n\n          if (data) {\n            return data;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getFramebuffer\",\n    value: function getFramebuffer() {\n      return this.textureTransform && this.textureTransform.getFramebuffer();\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if ('elementCount' in opts) {\n        this.model.setVertexCount(opts.elementCount);\n      }\n\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = resourceTransforms[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var resourceTransform = _step3.value;\n          resourceTransform.update(opts);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var gl = this.gl;\n\n      this._buildResourceTransforms(gl, props);\n\n      props = this._updateModelProps(props);\n      this.model = new Model(gl, Object.assign({}, props, {\n        fs: props.fs || getPassthroughFS({\n          version: getShaderVersion(props.vs)\n        }),\n        id: props.id || 'transform-model',\n        drawMode: props.drawMode || 0,\n        vertexCount: props.elementCount\n      }));\n      this.bufferTransform && this.bufferTransform.setupResources({\n        model: this.model\n      });\n    }\n  }, {\n    key: \"_updateModelProps\",\n    value: function _updateModelProps(props) {\n      var updatedProps = Object.assign({}, props);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = resourceTransforms[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var resourceTransform = _step4.value;\n          updatedProps = resourceTransform.updateModelProps(updatedProps);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return updatedProps;\n    }\n  }, {\n    key: \"_buildResourceTransforms\",\n    value: function _buildResourceTransforms(gl, props) {\n      if (canCreateBufferTransform(props)) {\n        this.bufferTransform = new BufferTransform(gl, props);\n      }\n\n      if (canCreateTextureTransform(props)) {\n        this.textureTransform = new TextureTransform(gl, props);\n      }\n\n      assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n    }\n  }, {\n    key: \"_updateDrawOptions\",\n    value: function _updateDrawOptions(opts) {\n      var updatedOpts = Object.assign({}, opts);\n      var resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = resourceTransforms[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var resourceTransform = _step5.value;\n          updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return updatedOpts;\n    }\n  }]);\n\n  return Transform;\n}();\n\nexport { Transform as default };\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\n\nvar GPUInterpolationTransition = function () {\n  function GPUInterpolationTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUInterpolationTransition);\n\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUInterpolationTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      if (transitionSettings.duration <= 0) {\n        this.transition.cancel();\n        return;\n      }\n\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      cycleBuffers(buffers);\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = buffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aFrom: buffers[0],\n          aTo: getSourceBufferAttribute(gl, attribute)\n        },\n        feedbackBuffers: {\n          vCurrent: buffers[1]\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var updated = this.transition.update();\n\n      if (updated) {\n        var _this$transition = this.transition,\n            time = _this$transition.time,\n            _this$transition$sett = _this$transition.settings,\n            duration = _this$transition$sett.duration,\n            easing = _this$transition$sett.easing;\n        var t = easing(time / duration);\n        this.transform.run({\n          uniforms: {\n            time: t\n          }\n        });\n      }\n\n      return updated;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUInterpolationTransition;\n}();\n\nexport { GPUInterpolationTransition as default };\nvar vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs: vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\n\nvar GPUSpringTransition = function () {\n  function GPUSpringTransition(_ref) {\n    var gl = _ref.gl,\n        attribute = _ref.attribute,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, GPUSpringTransition);\n\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, Object.assign({}, attribute.settings, {\n      normalized: false\n    }));\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    var bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  _createClass(GPUSpringTransition, [{\n    key: \"start\",\n    value: function start(transitionSettings, numInstances) {\n      var gl = this.gl,\n          buffers = this.buffers,\n          attribute = this.attribute;\n      var padBufferOpts = {\n        numInstances: numInstances,\n        attribute: attribute,\n        fromLength: this.currentLength,\n        fromStartIndices: this.currentStartIndices,\n        getData: transitionSettings.enter\n      };\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = buffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          padBuffer(_objectSpread({\n            buffer: buffer\n          }, padBufferOpts));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.currentStartIndices = attribute.startIndices;\n      this.currentLength = getAttributeBufferLength(attribute, numInstances);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: attribute.value\n      });\n      this.transition.start(transitionSettings);\n      this.transform.update({\n        elementCount: Math.floor(this.currentLength / attribute.size),\n        sourceBuffers: {\n          aTo: getSourceBufferAttribute(gl, attribute)\n        }\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var buffers = this.buffers,\n          transform = this.transform,\n          framebuffer = this.framebuffer,\n          transition = this.transition;\n      var updated = transition.update();\n\n      if (!updated) {\n        return false;\n      }\n\n      transform.update({\n        sourceBuffers: {\n          aPrev: buffers[0],\n          aCur: buffers[1]\n        },\n        feedbackBuffers: {\n          vNext: buffers[2]\n        }\n      });\n      transform.run({\n        framebuffer: framebuffer,\n        discard: false,\n        clearRenderTarget: true,\n        uniforms: {\n          stiffness: transition.settings.stiffness,\n          damping: transition.settings.damping\n        },\n        parameters: {\n          depthTest: false,\n          blend: true,\n          viewport: [0, 0, 1, 1],\n          blendFunc: [1, 1],\n          blendEquation: [32776, 32776]\n        }\n      });\n      cycleBuffers(buffers);\n      this.attributeInTransition.update({\n        buffer: buffers[1],\n        value: this.attribute.value\n      });\n      var isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n      if (!isTransitioning) {\n        transition.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.transition.cancel();\n      this.transform[\"delete\"]();\n\n      while (this.buffers.length) {\n        this.buffers.pop()[\"delete\"]();\n      }\n\n      this.texture[\"delete\"]();\n      this.texture = null;\n      this.framebuffer[\"delete\"]();\n      this.framebuffer = null;\n    }\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this.transition.inProgress;\n    }\n  }]);\n\n  return GPUSpringTransition;\n}();\n\nexport { GPUSpringTransition as default };\n\nfunction getTransform(gl, attribute, framebuffer) {\n  var attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer: framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: _defineProperty({}, 36064, texture)\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\n\nvar AttributeTransitionManager = function () {\n  function AttributeTransitionManager(gl, _ref) {\n    var id = _ref.id,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeTransitionManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n\n    if (Transform.isSupported(gl)) {\n      this.isSupported = true;\n    } else if (gl) {\n      log.warn('WebGL2 not supported by this browser. Transition animation is disabled.')();\n    }\n  }\n\n  _createClass(AttributeTransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.transitions) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref2) {\n      var attributes = _ref2.attributes,\n          _ref2$transitions = _ref2.transitions,\n          transitions = _ref2$transitions === void 0 ? {} : _ref2$transitions,\n          numInstances = _ref2.numInstances;\n      this.numInstances = numInstances || 1;\n\n      if (!this.isSupported) {\n        return;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var settings = attribute.getTransitionSetting(transitions);\n        if (!settings) continue;\n\n        this._updateAttribute(attributeName, attribute, settings);\n      }\n\n      for (var _attributeName in this.transitions) {\n        var _attribute = attributes[_attributeName];\n\n        if (!_attribute || !_attribute.getTransitionSetting(transitions)) {\n          this._removeTransition(_attributeName);\n        }\n      }\n    }\n  }, {\n    key: \"hasAttribute\",\n    value: function hasAttribute(attributeName) {\n      var transition = this.transitions[attributeName];\n      return transition && transition.inProgress;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      var animatedAttributes = {};\n\n      for (var attributeName in this.transitions) {\n        var transition = this.transitions[attributeName];\n\n        if (transition.inProgress) {\n          animatedAttributes[attributeName] = transition.attributeInTransition;\n        }\n      }\n\n      return animatedAttributes;\n    }\n  }, {\n    key: \"run\",\n    value: function run() {\n      if (!this.isSupported || this.numInstances === 0) {\n        return false;\n      }\n\n      for (var attributeName in this.transitions) {\n        var updated = this.transitions[attributeName].update();\n\n        if (updated) {\n          this.needsRedraw = true;\n        }\n      }\n\n      var needsRedraw = this.needsRedraw;\n      this.needsRedraw = false;\n      return needsRedraw;\n    }\n  }, {\n    key: \"_removeTransition\",\n    value: function _removeTransition(attributeName) {\n      this.transitions[attributeName].cancel();\n      delete this.transitions[attributeName];\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(attributeName, attribute, settings) {\n      var transition = this.transitions[attributeName];\n      var isNew = !transition || transition.type !== settings.type;\n\n      if (isNew) {\n        if (transition) {\n          this._removeTransition(attributeName);\n        }\n\n        var TransitionType = TRANSITION_TYPES[settings.type];\n\n        if (TransitionType) {\n          this.transitions[attributeName] = new TransitionType({\n            attribute: attribute,\n            timeline: this.timeline,\n            gl: this.gl\n          });\n        } else {\n          log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n          isNew = false;\n        }\n      }\n\n      if (isNew || attribute.needsRedraw()) {\n        this.needsRedraw = true;\n        this.transitions[attributeName].start(settings, this.numInstances);\n      }\n    }\n  }]);\n\n  return AttributeTransitionManager;\n}();\n\nexport { AttributeTransitionManager as default };\n//# sourceMappingURL=attribute-transition-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nvar TRACE_INVALIDATE = 'attributeManager.invalidate';\nvar TRACE_UPDATE_START = 'attributeManager.updateStart';\nvar TRACE_UPDATE_END = 'attributeManager.updateEnd';\nvar TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nvar TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nvar TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\n\nvar AttributeManager = function () {\n  function AttributeManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$id = _ref.id,\n        id = _ref$id === void 0 ? 'attribute-manager' : _ref$id,\n        stats = _ref.stats,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, AttributeManager);\n\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline: timeline\n    });\n    Object.seal(this);\n  }\n\n  _createClass(AttributeManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName][\"delete\"]();\n      }\n\n      this.attributeTransitionManager.finalize();\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this.needsRedraw;\n      this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n      return redraw && this.id;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.needsRedraw = true;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(attributes, updaters) {\n      this._add(attributes, updaters);\n    }\n  }, {\n    key: \"addInstanced\",\n    value: function addInstanced(attributes, updaters) {\n      this._add(attributes, updaters, {\n        instanced: 1\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(attributeNameArray) {\n      for (var i = 0; i < attributeNameArray.length; i++) {\n        var name = attributeNameArray[i];\n\n        if (this.attributes[name] !== undefined) {\n          this.attributes[name][\"delete\"]();\n          delete this.attributes[name];\n        }\n      }\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(triggerName, dataRange) {\n      var invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n      debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n    }\n  }, {\n    key: \"invalidateAll\",\n    value: function invalidateAll(dataRange) {\n      for (var attributeName in this.attributes) {\n        this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n      }\n\n      debug(TRACE_INVALIDATE, this, 'all');\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          data = _ref2.data,\n          numInstances = _ref2.numInstances,\n          _ref2$startIndices = _ref2.startIndices,\n          startIndices = _ref2$startIndices === void 0 ? null : _ref2$startIndices,\n          transitions = _ref2.transitions,\n          _ref2$props = _ref2.props,\n          props = _ref2$props === void 0 ? {} : _ref2$props,\n          _ref2$buffers = _ref2.buffers,\n          buffers = _ref2$buffers === void 0 ? {} : _ref2$buffers,\n          _ref2$context = _ref2.context,\n          context = _ref2$context === void 0 ? {} : _ref2$context;\n\n      var updated = false;\n      debug(TRACE_UPDATE_START, this);\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeStart();\n      }\n\n      for (var attributeName in this.attributes) {\n        var attribute = this.attributes[attributeName];\n        var accessorName = attribute.settings.accessor;\n        attribute.startIndices = startIndices;\n\n        if (props[attributeName]) {\n          log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n        }\n\n        if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n          updated = true;\n\n          this._updateAttribute({\n            attribute: attribute,\n            numInstances: numInstances,\n            data: data,\n            props: props,\n            context: context\n          });\n        }\n\n        this.needsRedraw |= attribute.needsRedraw();\n      }\n\n      if (updated) {\n        debug(TRACE_UPDATE_END, this, numInstances);\n      }\n\n      if (this.stats) {\n        this.stats.get('Update Attributes').timeEnd();\n      }\n\n      this.attributeTransitionManager.update({\n        attributes: this.attributes,\n        numInstances: numInstances,\n        transitions: transitions\n      });\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      var attributeTransitionManager = this.attributeTransitionManager;\n      var transitionUpdated = attributeTransitionManager.run();\n      this.needsRedraw = this.needsRedraw || transitionUpdated;\n      return transitionUpdated;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getChangedAttributes\",\n    value: function getChangedAttributes() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearChangedFlags: false\n      };\n      var attributes = this.attributes,\n          attributeTransitionManager = this.attributeTransitionManager;\n      var changedAttributes = Object.assign({}, attributeTransitionManager.getAttributes());\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n          changedAttributes[attributeName] = attribute;\n        }\n      }\n\n      return changedAttributes;\n    }\n  }, {\n    key: \"getShaderAttributes\",\n    value: function getShaderAttributes(attributes) {\n      var excludeAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!attributes) {\n        attributes = this.getAttributes();\n      }\n\n      var shaderAttributes = {};\n\n      for (var attributeName in attributes) {\n        if (!excludeAttributes[attributeName]) {\n          Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n        }\n      }\n\n      return shaderAttributes;\n    }\n  }, {\n    key: \"getAccessors\",\n    value: function getAccessors() {\n      return this.updateTriggers;\n    }\n  }, {\n    key: \"_add\",\n    value: function _add(attributes, updaters) {\n      var extraProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (updaters) {\n        log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n      }\n\n      var newAttributes = {};\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n\n        var newAttribute = this._createAttribute(attributeName, attribute, extraProps);\n\n        newAttributes[attributeName] = newAttribute;\n      }\n\n      Object.assign(this.attributes, newAttributes);\n\n      this._mapUpdateTriggersToAttributes();\n    }\n  }, {\n    key: \"_createAttribute\",\n    value: function _createAttribute(name, attribute, extraProps) {\n      var props = {\n        id: name,\n        constant: attribute.constant || false,\n        isIndexed: attribute.isIndexed || attribute.elements,\n        size: attribute.elements && 1 || attribute.size,\n        value: attribute.value || null,\n        divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor\n      };\n      return new Attribute(this.gl, Object.assign({}, attribute, props));\n    }\n  }, {\n    key: \"_mapUpdateTriggersToAttributes\",\n    value: function _mapUpdateTriggersToAttributes() {\n      var _this = this;\n\n      var triggers = {};\n\n      var _loop = function _loop(attributeName) {\n        var attribute = _this.attributes[attributeName];\n        attribute.getUpdateTriggers().forEach(function (triggerName) {\n          if (!triggers[triggerName]) {\n            triggers[triggerName] = [];\n          }\n\n          triggers[triggerName].push(attributeName);\n        });\n      };\n\n      for (var attributeName in this.attributes) {\n        _loop(attributeName);\n      }\n\n      this.updateTriggers = triggers;\n    }\n  }, {\n    key: \"_invalidateTrigger\",\n    value: function _invalidateTrigger(triggerName, dataRange) {\n      var attributes = this.attributes,\n          updateTriggers = this.updateTriggers;\n      var invalidatedAttributes = updateTriggers[triggerName];\n\n      if (invalidatedAttributes) {\n        invalidatedAttributes.forEach(function (name) {\n          var attribute = attributes[name];\n\n          if (attribute) {\n            attribute.setNeedsUpdate(attribute.id, dataRange);\n          }\n        });\n      }\n\n      return invalidatedAttributes;\n    }\n  }, {\n    key: \"_updateAttribute\",\n    value: function _updateAttribute(opts) {\n      var attribute = opts.attribute,\n          numInstances = opts.numInstances;\n      debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n      if (attribute.allocate(numInstances)) {\n        debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n      }\n\n      var updated = attribute.updateBuffer(opts);\n\n      if (updated) {\n        this.needsRedraw = true;\n        debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n      }\n    }\n  }]);\n\n  return AttributeManager;\n}();\n\nexport { AttributeManager as default };\n//# sourceMappingURL=attribute-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { lerp } from 'math.gl';\nimport Transition from './transition';\n\nvar CPUInterpolationTransition = function (_Transition) {\n  _inherits(CPUInterpolationTransition, _Transition);\n\n  function CPUInterpolationTransition() {\n    _classCallCheck(this, CPUInterpolationTransition);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CPUInterpolationTransition).apply(this, arguments));\n  }\n\n  _createClass(CPUInterpolationTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var time = this.time,\n          _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          duration = _this$settings.duration,\n          easing = _this$settings.easing;\n      var t = easing(time / duration);\n      this._value = lerp(fromValue, toValue, t);\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._value;\n    }\n  }]);\n\n  return CPUInterpolationTransition;\n}(Transition);\n\nexport { CPUInterpolationTransition as default };\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Transition from './transition';\nvar EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  var velocity = cur - prev;\n  var delta = dest - cur;\n  var spring = delta * stiffness;\n  var damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    var next = [];\n\n    for (var i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    var distanceSquare = 0;\n\n    for (var i = 0; i < value1.length; i++) {\n      var d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nvar CPUSpringTransition = function (_Transition) {\n  _inherits(CPUSpringTransition, _Transition);\n\n  function CPUSpringTransition() {\n    _classCallCheck(this, CPUSpringTransition);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CPUSpringTransition).apply(this, arguments));\n  }\n\n  _createClass(CPUSpringTransition, [{\n    key: \"_onUpdate\",\n    value: function _onUpdate() {\n      var _this$settings = this.settings,\n          fromValue = _this$settings.fromValue,\n          toValue = _this$settings.toValue,\n          damping = _this$settings.damping,\n          stiffness = _this$settings.stiffness;\n\n      var _this$_prevValue = this._prevValue,\n          _prevValue = _this$_prevValue === void 0 ? fromValue : _this$_prevValue,\n          _this$_currValue = this._currValue,\n          _currValue = _this$_currValue === void 0 ? fromValue : _this$_currValue;\n\n      var nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n      var delta = distance(nextValue, toValue);\n      var velocity = distance(nextValue, _currValue);\n\n      if (delta < EPSILON && velocity < EPSILON) {\n        nextValue = toValue;\n        this.end();\n      }\n\n      this._prevValue = _currValue;\n      this._currValue = nextValue;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return this._currValue;\n    }\n  }]);\n\n  return CPUSpringTransition;\n}(Transition);\n\nexport { CPUSpringTransition as default };\n//# sourceMappingURL=cpu-spring-transition.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nvar TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\n\nvar UniformTransitionManager = function () {\n  function UniformTransitionManager(timeline) {\n    _classCallCheck(this, UniformTransitionManager);\n\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  _createClass(UniformTransitionManager, [{\n    key: \"add\",\n    value: function add(key, fromValue, toValue, settings) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        var _transition = transitions.get(key);\n\n        var _transition$value = _transition.value,\n            value = _transition$value === void 0 ? _transition.settings.fromValue : _transition$value;\n        fromValue = value;\n        this.remove(key);\n      }\n\n      settings = normalizeTransitionSettings(settings);\n\n      if (!settings) {\n        return;\n      }\n\n      var TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (!TransitionType) {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        return;\n      }\n\n      var transition = new TransitionType(this.timeline);\n      transition.start(_objectSpread({}, settings, {\n        fromValue: fromValue,\n        toValue: toValue\n      }));\n      transitions.set(key, transition);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var transitions = this.transitions;\n\n      if (transitions.has(key)) {\n        transitions.get(key).cancel();\n        transitions[\"delete\"](key);\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var propsInTransition = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.transitions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              transition = _step$value[1];\n\n          transition.update();\n          propsInTransition[key] = transition.value;\n\n          if (!transition.inProgress) {\n            this.remove(key);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return propsInTransition;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.transitions.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n          this.remove(key);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"active\",\n    get: function get() {\n      return this.transitions.size > 0;\n    }\n  }]);\n\n  return UniformTransitionManager;\n}();\n\nexport { UniformTransitionManager as default };\n//# sourceMappingURL=uniform-transition-manager.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT;\nexport function validateProps(props) {\n  var propTypes = getPropTypes(props);\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var validate = propType.validate;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  var propsChangedReason = compareProps({\n    newProps: props,\n    oldProps: oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  var dataChangedReason = diffDataProps(props, oldProps);\n  var updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  var result = {};\n  var propTypes = getPropTypes(props);\n\n  for (var key in props.transitions) {\n    var propType = propTypes[key];\n    var type = propType && propType.type;\n    var isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      newProps = _ref.newProps,\n      oldProps = _ref.oldProps,\n      _ref$ignoreProps = _ref.ignoreProps,\n      ignoreProps = _ref$ignoreProps === void 0 ? {} : _ref$ignoreProps,\n      _ref$propTypes = _ref.propTypes,\n      propTypes = _ref$propTypes === void 0 ? {} : _ref$propTypes,\n      _ref$triggerName = _ref.triggerName,\n      triggerName = _ref$triggerName === void 0 ? 'props' : _ref$triggerName;\n\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (_typeof(newProps) !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (_typeof(oldProps) !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (var _i = 0, _Object$keys = Object.keys(newProps); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      var changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (var _i2 = 0, _Object$keys2 = Object.keys(oldProps); _i2 < _Object$keys2.length; _i2++) {\n    var _key = _Object$keys2[_i2];\n\n    if (!(_key in ignoreProps)) {\n      if (!(_key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(_key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, _key)) {\n        var _changed = comparePropValues(newProps[_key], oldProps[_key], propTypes[_key]);\n\n        if (_changed) {\n          return \"\".concat(triggerName, \".\").concat(_key, \" \").concat(_changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  var equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var dataChanged = null;\n  var dataComparator = props.dataComparator,\n      _dataDiff = props._dataDiff;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    var diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  var triggerChanged = {};\n  var reason = false;\n\n  for (var triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      var _diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (_diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  var oldExtensions = oldProps.extensions;\n  var extensions = props.extensions;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (var i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  var newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  var oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  var diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName: triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  var layer = props[COMPONENT];\n  var LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar ERR_NOT_OBJECT = 'count(): argument not an object';\nvar ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && _typeof(value) === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && _typeof(value) === 'object';\n}\n//# sourceMappingURL=count.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  var result = Object.assign({}, target, source);\n\n  if ('defines' in source) {\n    result.defines = Object.assign({}, target.defines, source.defines);\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(function (module) {\n      return module.name === 'project64';\n    })) {\n      var index = result.modules.findIndex(function (module) {\n        return module.name === 'project32';\n      });\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      var mergedInjection = _objectSpread({}, target.inject);\n\n      for (var key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport) {\n  var offsetMode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    var _lngLatZ = _slicedToArray(lngLatZ, 3),\n        longitude = _lngLatZ[0],\n        latitude = _lngLatZ[1],\n        _lngLatZ$ = _lngLatZ[2],\n        z = _lngLatZ$ === void 0 ? 0 : _lngLatZ$;\n\n    var distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  var normalizedParams = Object.assign({}, opts);\n  var coordinateSystem = opts.coordinateSystem;\n  var viewport = opts.viewport,\n      coordinateOrigin = opts.coordinateOrigin,\n      fromCoordinateSystem = opts.fromCoordinateSystem,\n      fromCoordinateOrigin = opts.fromCoordinateOrigin;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, _ref) {\n  var viewport = _ref.viewport,\n      modelMatrix = _ref.modelMatrix,\n      coordinateSystem = _ref.coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      offsetMode = _ref.offsetMode;\n\n  var _position = _slicedToArray(position, 3),\n      x = _position[0],\n      y = _position[1],\n      z = _position[2];\n\n  if (modelMatrix) {\n    var _vec4$transformMat = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n\n    var _vec4$transformMat2 = _slicedToArray(_vec4$transformMat, 3);\n\n    x = _vec4$transformMat2[0];\n    y = _vec4$transformMat2[1];\n    z = _vec4$transformMat2[2];\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  var _normalizeParameters = normalizeParameters(params),\n      viewport = _normalizeParameters.viewport,\n      coordinateSystem = _normalizeParameters.coordinateSystem,\n      coordinateOrigin = _normalizeParameters.coordinateOrigin,\n      modelMatrix = _normalizeParameters.modelMatrix,\n      fromCoordinateSystem = _normalizeParameters.fromCoordinateSystem,\n      fromCoordinateOrigin = _normalizeParameters.fromCoordinateOrigin;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  var worldPosition = getWorldPosition(position, {\n    viewport: viewport,\n    modelMatrix: modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode: offsetMode\n  });\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar TYPE_DEFINITIONS = {\n  \"boolean\": {\n    validate: function validate(value, propType) {\n      return true;\n    },\n    equal: function equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n  },\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  color: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n    equal: function equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n  },\n  accessor: {\n    validate: function validate(value, propType) {\n      var valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n    equal: function equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n    equal: function equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n  },\n  \"function\": {\n    validate: function validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n    equal: function equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  var len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n  var defaultProps = {};\n  var deprecatedProps = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(propDefs); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        propName = _Object$entries$_i[0],\n        propDef = _Object$entries$_i[1];\n\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      var propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes: propTypes,\n    defaultProps: defaultProps,\n    deprecatedProps: deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name: name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name: name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return Object.assign({\n      name: name,\n      type: getTypeOf(propDef.value)\n    }, propDef);\n  }\n\n  return Object.assign({\n    name: name\n  }, TYPE_DEFINITIONS[propDef.type], propDef);\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return _typeof(value);\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nvar COMPONENT = PROP_SYMBOLS.COMPONENT,\n    ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nexport function createProps() {\n  var component = this;\n  var propsPrototype = getPropsPrototype(component.constructor);\n  var propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (var i = 0; i < arguments.length; ++i) {\n    var props = arguments[i];\n\n    for (var key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  var defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  var parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  var parentClass = Object.getPrototypeOf(componentClass);\n  var parentDefaultProps = getPropsPrototype(parentClass);\n  var componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  var componentPropDefs = parsePropTypes(componentDefaultProps);\n  var defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  var propTypes = Object.assign({}, parentClass._propTypes, componentPropDefs.propTypes);\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  var deprecatedProps = Object.assign({}, parentClass._deprecatedProps, componentPropDefs.deprecatedProps);\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  var defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  var id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  var _loop = function _loop(propName) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n      set: function set(newValue) {\n        var nameStr = \"\".concat(this.id, \": \").concat(propName);\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = deprecatedProps[propName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var newPropName = _step.value;\n\n            if (!hasOwnProperty(this, newPropName)) {\n              this[newPropName] = newValue;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n    });\n  };\n\n  for (var propName in deprecatedProps) {\n    _loop(propName);\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  var defaultValues = {};\n  var descriptors = {};\n\n  for (var propName in propTypes) {\n    var propType = propTypes[propName];\n    var name = propType.name,\n        value = propType.value;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n    set: function set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n    get: function get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          var value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          var state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  var componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _asyncIterator from \"@babel/runtime/helpers/esm/asyncIterator\";\nimport log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nvar EMPTY_PROPS = Object.freeze({});\n\nvar ComponentState = function () {\n  function ComponentState() {\n    var component = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    _classCallCheck(this, ComponentState);\n\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = function () {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  _createClass(ComponentState, [{\n    key: \"getOldProps\",\n    value: function getOldProps() {\n      return this.oldAsyncProps || this.oldProps;\n    }\n  }, {\n    key: \"resetOldProps\",\n    value: function resetOldProps() {\n      this.oldAsyncProps = null;\n      this.oldProps = this.component.props;\n    }\n  }, {\n    key: \"freezeAsyncOldProps\",\n    value: function freezeAsyncOldProps() {\n      if (!this.oldAsyncProps) {\n        this.oldProps = this.oldProps || this.component.props;\n        this.oldAsyncProps = Object.create(this.oldProps);\n\n        for (var propName in this.asyncProps) {\n          Object.defineProperty(this.oldAsyncProps, propName, {\n            enumerable: true,\n            value: this.oldProps[propName]\n          });\n        }\n      }\n    }\n  }, {\n    key: \"hasAsyncProp\",\n    value: function hasAsyncProp(propName) {\n      return propName in this.asyncProps;\n    }\n  }, {\n    key: \"getAsyncProp\",\n    value: function getAsyncProp(propName) {\n      var asyncProp = this.asyncProps[propName];\n      return asyncProp && asyncProp.resolvedValue;\n    }\n  }, {\n    key: \"isAsyncPropLoading\",\n    value: function isAsyncPropLoading(propName) {\n      if (propName) {\n        var asyncProp = this.asyncProps[propName];\n        return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n      }\n\n      for (var key in this.asyncProps) {\n        if (this.isAsyncPropLoading(key)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"reloadAsyncProp\",\n    value: function reloadAsyncProp(propName, value) {\n      this._watchPromise(propName, Promise.resolve(value));\n    }\n  }, {\n    key: \"setAsyncProps\",\n    value: function setAsyncProps(props) {\n      var resolvedValues = props[ASYNC_RESOLVED] || {};\n      var originalValues = props[ASYNC_ORIGINAL] || props;\n      var defaultValues = props[ASYNC_DEFAULTS] || {};\n\n      for (var propName in resolvedValues) {\n        var value = resolvedValues[propName];\n\n        this._createAsyncPropData(propName, value, defaultValues[propName]);\n\n        this._updateAsyncProp(propName, value);\n      }\n\n      for (var _propName in originalValues) {\n        var _value2 = originalValues[_propName];\n\n        this._createAsyncPropData(_propName, _value2, defaultValues[_propName]);\n\n        this._updateAsyncProp(_propName, _value2);\n      }\n    }\n  }, {\n    key: \"_updateAsyncProp\",\n    value: function _updateAsyncProp(propName, value) {\n      if (!this._didAsyncInputValueChange(propName, value)) {\n        return;\n      }\n\n      if (typeof value === 'string') {\n        var fetch = this.layer && this.layer.props.fetch;\n        var url = value;\n\n        if (fetch) {\n          value = fetch(url, {\n            propName: propName,\n            layer: this.layer\n          });\n        }\n      }\n\n      if (value instanceof Promise) {\n        this._watchPromise(propName, value);\n\n        return;\n      }\n\n      if (isAsyncIterable(value)) {\n        this._resolveAsyncIterable(propName, value);\n\n        return;\n      }\n\n      this._setPropValue(propName, value);\n    }\n  }, {\n    key: \"_didAsyncInputValueChange\",\n    value: function _didAsyncInputValueChange(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (value === asyncProp.lastValue) {\n        return false;\n      }\n\n      asyncProp.lastValue = value;\n      return true;\n    }\n  }, {\n    key: \"_setPropValue\",\n    value: function _setPropValue(propName, value) {\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.value = value;\n      asyncProp.resolvedValue = value;\n      asyncProp.pendingLoadCount++;\n      asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n    }\n  }, {\n    key: \"_setAsyncPropValue\",\n    value: function _setAsyncPropValue(propName, value, loadCount) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n        this.freezeAsyncOldProps();\n        asyncProp.resolvedValue = value;\n        asyncProp.resolvedLoadCount = loadCount;\n        this.onAsyncPropUpdated(propName, value);\n      }\n    }\n  }, {\n    key: \"_watchPromise\",\n    value: function _watchPromise(propName, promise) {\n      var _this = this;\n\n      var asyncProp = this.asyncProps[propName];\n      asyncProp.pendingLoadCount++;\n      var loadCount = asyncProp.pendingLoadCount;\n      promise.then(function (data) {\n        data = _this._postProcessValue(propName, data);\n\n        _this._setAsyncPropValue(propName, data, loadCount);\n\n        var onDataLoad = _this.layer && _this.layer.props.onDataLoad;\n\n        if (propName === 'data' && onDataLoad) {\n          onDataLoad(data, {\n            propName: propName,\n            layer: _this.layer\n          });\n        }\n      })[\"catch\"](function (error) {\n        return log.error(error)();\n      });\n    }\n  }, {\n    key: \"_resolveAsyncIterable\",\n    value: function () {\n      var _resolveAsyncIterable2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(propName, iterable) {\n        var asyncProp, loadCount, data, count, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, chunk, onDataLoad;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (propName !== 'data') {\n                  this._setPropValue(propName, iterable);\n                }\n\n                asyncProp = this.asyncProps[propName];\n                asyncProp.pendingLoadCount++;\n                loadCount = asyncProp.pendingLoadCount;\n                data = [];\n                count = 0;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context.prev = 8;\n                _iterator = _asyncIterator(iterable);\n\n              case 10:\n                _context.next = 12;\n                return _iterator.next();\n\n              case 12:\n                _step = _context.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context.next = 16;\n                return _step.value;\n\n              case 16:\n                _value = _context.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context.next = 26;\n                  break;\n                }\n\n                chunk = _value;\n                data = this._postProcessValue(propName, chunk, data);\n                Object.defineProperty(data, '__diff', {\n                  enumerable: false,\n                  value: [{\n                    startRow: count,\n                    endRow: data.length\n                  }]\n                });\n                count = data.length;\n\n                this._setAsyncPropValue(propName, data, loadCount);\n\n              case 23:\n                _iteratorNormalCompletion = true;\n                _context.next = 10;\n                break;\n\n              case 26:\n                _context.next = 32;\n                break;\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](8);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 32:\n                _context.prev = 32;\n                _context.prev = 33;\n\n                if (!(!_iteratorNormalCompletion && _iterator[\"return\"] != null)) {\n                  _context.next = 37;\n                  break;\n                }\n\n                _context.next = 37;\n                return _iterator[\"return\"]();\n\n              case 37:\n                _context.prev = 37;\n\n                if (!_didIteratorError) {\n                  _context.next = 40;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 40:\n                return _context.finish(37);\n\n              case 41:\n                return _context.finish(32);\n\n              case 42:\n                onDataLoad = this.layer && this.layer.props.onDataLoad;\n\n                if (onDataLoad) {\n                  onDataLoad(data, {\n                    propName: propName,\n                    layer: this.layer\n                  });\n                }\n\n              case 44:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 28, 32, 42], [33,, 37, 41]]);\n      }));\n\n      function _resolveAsyncIterable(_x, _x2) {\n        return _resolveAsyncIterable2.apply(this, arguments);\n      }\n\n      return _resolveAsyncIterable;\n    }()\n  }, {\n    key: \"_postProcessValue\",\n    value: function _postProcessValue(propName, value, previousValue) {\n      var _ref = this.component ? this.component.props : {},\n          dataTransform = _ref.dataTransform;\n\n      if (propName !== 'data') {\n        return value;\n      }\n\n      if (dataTransform) {\n        return dataTransform(value, previousValue);\n      }\n\n      return previousValue ? previousValue.concat(value) : value;\n    }\n  }, {\n    key: \"_createAsyncPropData\",\n    value: function _createAsyncPropData(propName, value, defaultValue) {\n      var asyncProp = this.asyncProps[propName];\n\n      if (!asyncProp) {\n        this.asyncProps[propName] = {\n          lastValue: null,\n          resolvedValue: defaultValue,\n          pendingLoadCount: 0,\n          resolvedLoadCount: 0\n        };\n      }\n    }\n  }]);\n\n  return ComponentState;\n}();\n\nexport { ComponentState as default };\n//# sourceMappingURL=component-state.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nvar ASYNC_ORIGINAL = PROP_SYMBOLS.ASYNC_ORIGINAL,\n    ASYNC_RESOLVED = PROP_SYMBOLS.ASYNC_RESOLVED,\n    ASYNC_DEFAULTS = PROP_SYMBOLS.ASYNC_DEFAULTS;\nimport ComponentState from './component-state';\nvar defaultProps = {};\nvar counter = 0;\n\nvar Component = function () {\n  function Component() {\n    _classCallCheck(this, Component);\n\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  _createClass(Component, [{\n    key: \"clone\",\n    value: function clone(newProps) {\n      var props = this.props;\n      var asyncProps = {};\n\n      for (var key in props[ASYNC_DEFAULTS]) {\n        if (key in props[ASYNC_RESOLVED]) {\n          asyncProps[key] = props[ASYNC_RESOLVED][key];\n        } else if (key in props[ASYNC_ORIGINAL]) {\n          asyncProps[key] = props[ASYNC_ORIGINAL][key];\n        }\n      }\n\n      return new this.constructor(Object.assign({}, props, asyncProps, newProps));\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      this.internalState = new ComponentState({});\n    }\n  }, {\n    key: \"stats\",\n    get: function get() {\n      return this.internalState.stats;\n    }\n  }]);\n\n  return Component;\n}();\n\nexport { Component as default };\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport ComponentState from '../lifecycle/component-state';\n\nvar LayerState = function (_ComponentState) {\n  _inherits(LayerState, _ComponentState);\n\n  function LayerState(_ref) {\n    var _this;\n\n    var attributeManager = _ref.attributeManager,\n        layer = _ref.layer;\n\n    _classCallCheck(this, LayerState);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LayerState).call(this, layer));\n    _this.attributeManager = attributeManager;\n    _this.model = null;\n    _this.needsRedraw = true;\n    _this.subLayers = null;\n    return _this;\n  }\n\n  _createClass(LayerState, [{\n    key: \"layer\",\n    get: function get() {\n      return this.component;\n    },\n    set: function set(layer) {\n      this.component = layer;\n    }\n  }]);\n\n  return LayerState;\n}(ComponentState);\n\nexport { LayerState as default };\n//# sourceMappingURL=layer-state.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps as _diffProps, validateProps as _validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition as _projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nvar TRACE_CHANGE_FLAG = 'layer.changeFlag';\nvar TRACE_INITIALIZE = 'layer.initialize';\nvar TRACE_UPDATE = 'layer.update';\nvar TRACE_FINALIZE = 'layer.finalize';\nvar TRACE_MATCHED = 'layer.matched';\nvar EMPTY_ARRAY = Object.freeze([]);\nvar areViewportsEqual = memoize(function (_ref) {\n  var oldViewport = _ref.oldViewport,\n      viewport = _ref.viewport;\n  return oldViewport.equals(viewport);\n});\nvar pickingColorCache = new Uint8ClampedArray(0);\nvar defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: function value(data) {\n      return data && data.__diff;\n    },\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: function value(url, _ref2) {\n      var propName = _ref2.propName,\n          layer = _ref2.layer;\n      var resourceManager = layer.context.resourceManager;\n      var loadOptions = layer.getLoadOptions();\n      var inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: url,\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: function onChange(data) {\n            return layer.internalState.reloadAsyncProp(propName, data);\n          },\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  uniforms: {},\n  extensions: [],\n  getPolygonOffset: {\n    type: 'function',\n    value: function value(_ref3) {\n      var layerIndex = _ref3.layerIndex;\n      return [0, -layerIndex * 100];\n    },\n    compare: false\n  },\n  highlightedObjectIndex: null,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\n\nvar Layer = function (_Component) {\n  _inherits(Layer, _Component);\n\n  function Layer() {\n    _classCallCheck(this, Layer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Layer).apply(this, arguments));\n  }\n\n  _createClass(Layer, [{\n    key: \"toString\",\n    value: function toString() {\n      var className = this.constructor.layerName || this.constructor.name;\n      return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      this.setChangeFlags({\n        stateChanged: true\n      });\n      Object.assign(this.state, updateObject);\n      this.setNeedsRedraw();\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw() {\n      var redraw = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (this.internalState) {\n        this.internalState.needsRedraw = redraw;\n      }\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate() {\n      this.context.layerManager.setNeedsUpdate(String(this));\n      this.internalState.needsUpdate = true;\n    }\n  }, {\n    key: \"getNeedsRedraw\",\n    value: function getNeedsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      return this._getNeedsRedraw(opts);\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n    }\n  }, {\n    key: \"hasUniformTransition\",\n    value: function hasUniformTransition() {\n      return this.internalState.uniformTransitions.active;\n    }\n  }, {\n    key: \"isPickable\",\n    value: function isPickable() {\n      return this.props.pickable && this.props.visible;\n    }\n  }, {\n    key: \"getModels\",\n    value: function getModels() {\n      return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n    }\n  }, {\n    key: \"getAttributeManager\",\n    value: function getAttributeManager() {\n      return this.internalState && this.internalState.attributeManager;\n    }\n  }, {\n    key: \"getCurrentLayer\",\n    value: function getCurrentLayer() {\n      return this.internalState && this.internalState.layer;\n    }\n  }, {\n    key: \"getLoadOptions\",\n    value: function getLoadOptions() {\n      return this.props.loadOptions;\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var viewport = this.context.viewport;\n      var worldPosition = getWorldPosition(xyz, {\n        viewport: viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n\n      var _worldToPixels = worldToPixels(worldPosition, viewport.pixelProjectionMatrix),\n          _worldToPixels2 = _slicedToArray(_worldToPixels, 3),\n          x = _worldToPixels2[0],\n          y = _worldToPixels2[1],\n          z = _worldToPixels2[2];\n\n      return xyz.length === 2 ? [x, y] : [x, y, z];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xy) {\n      var viewport = this.context.viewport;\n      return viewport.unproject(xy);\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      return _projectPosition(xyz, {\n        viewport: this.context.viewport,\n        modelMatrix: this.props.modelMatrix,\n        coordinateOrigin: this.props.coordinateOrigin,\n        coordinateSystem: this.props.coordinateSystem\n      });\n    }\n  }, {\n    key: \"use64bitPositions\",\n    value: function use64bitPositions() {\n      var coordinateSystem = this.props.coordinateSystem;\n      return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(info, pickingEvent) {\n      if (this.props.onHover) {\n        return this.props.onHover(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(info, pickingEvent) {\n      if (this.props.onClick) {\n        return this.props.onClick(info, pickingEvent);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"nullPickingColor\",\n    value: function nullPickingColor() {\n      return [0, 0, 0];\n    }\n  }, {\n    key: \"encodePickingColor\",\n    value: function encodePickingColor(i) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      target[0] = i + 1 & 255;\n      target[1] = i + 1 >> 8 & 255;\n      target[2] = i + 1 >> 8 >> 8 & 255;\n      return target;\n    }\n  }, {\n    key: \"decodePickingColor\",\n    value: function decodePickingColor(color) {\n      assert(color instanceof Uint8Array);\n\n      var _color = _slicedToArray(color, 3),\n          i1 = _color[0],\n          i2 = _color[1],\n          i3 = _color[2];\n\n      var index = i1 + i2 * 256 + i3 * 65536 - 1;\n      return index;\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n    }\n  }, {\n    key: \"getShaders\",\n    value: function getShaders(shaders) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.props.extensions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var extension = _step.value;\n          shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return shaders;\n    }\n  }, {\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref4) {\n      var oldProps = _ref4.oldProps,\n          props = _ref4.props,\n          context = _ref4.context,\n          changeFlags = _ref4.changeFlags;\n      return changeFlags.propsOrDataChanged;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref5) {\n      var oldProps = _ref5.oldProps,\n          props = _ref5.props,\n          context = _ref5.context,\n          changeFlags = _ref5.changeFlags;\n      var attributeManager = this.getAttributeManager();\n\n      if (changeFlags.dataChanged && attributeManager) {\n        var dataChanged = changeFlags.dataChanged;\n\n        if (Array.isArray(dataChanged)) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = dataChanged[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var dataRange = _step2.value;\n              attributeManager.invalidateAll(dataRange);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        } else {\n          attributeManager.invalidateAll();\n        }\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.getModels()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var model = _step3.value;\n          model[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.finalize();\n      }\n\n      this.context.resourceManager.unsubscribe({\n        consumerId: this.id\n      });\n      this.internalState.uniformTransitions.clear();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(opts) {\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.getModels()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var model = _step4.value;\n          model.draw(opts);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref6) {\n      var info = _ref6.info,\n          mode = _ref6.mode;\n      var index = info.index;\n\n      if (index >= 0) {\n        if (Array.isArray(this.props.data)) {\n          info.object = this.props.data[index];\n        }\n      }\n\n      return info;\n    }\n  }, {\n    key: \"activateViewport\",\n    value: function activateViewport(viewport) {\n      var oldViewport = this.internalState.viewport;\n      this.internalState.viewport = viewport;\n\n      if (!oldViewport || !areViewportsEqual({\n        oldViewport: oldViewport,\n        viewport: viewport\n      })) {\n        this.setChangeFlags({\n          viewportChanged: true\n        });\n\n        this._update();\n      }\n    }\n  }, {\n    key: \"invalidateAttribute\",\n    value: function invalidateAttribute() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n      var diffReason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      if (name === 'all') {\n        attributeManager.invalidateAll();\n      } else {\n        attributeManager.invalidate(name);\n      }\n    }\n  }, {\n    key: \"updateAttributes\",\n    value: function updateAttributes(changedAttributes) {\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.getModels()[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var model = _step5.value;\n\n          this._setModelAttributes(model, changedAttributes);\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_updateAttributes\",\n    value: function _updateAttributes(props) {\n      var attributeManager = this.getAttributeManager();\n\n      if (!attributeManager) {\n        return;\n      }\n\n      var numInstances = this.getNumInstances(props);\n      var startIndices = this.getStartIndices(props);\n      attributeManager.update({\n        data: props.data,\n        numInstances: numInstances,\n        startIndices: startIndices,\n        props: props,\n        transitions: props.transitions,\n        buffers: props.data.attributes,\n        context: this,\n        ignoreUnknownAttributes: true\n      });\n      var changedAttributes = attributeManager.getChangedAttributes({\n        clearChangedFlags: true\n      });\n      this.updateAttributes(changedAttributes);\n    }\n  }, {\n    key: \"_updateAttributeTransition\",\n    value: function _updateAttributeTransition() {\n      var attributeManager = this.getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.updateTransition();\n      }\n    }\n  }, {\n    key: \"_updateUniformTransition\",\n    value: function _updateUniformTransition() {\n      var uniformTransitions = this.internalState.uniformTransitions;\n\n      if (uniformTransitions.active) {\n        var propsInTransition = uniformTransitions.update();\n        var props = Object.create(this.props);\n\n        for (var key in propsInTransition) {\n          Object.defineProperty(props, key, {\n            value: propsInTransition[key]\n          });\n        }\n\n        return props;\n      }\n\n      return this.props;\n    }\n  }, {\n    key: \"calculateInstancePickingColors\",\n    value: function calculateInstancePickingColors(attribute, _ref7) {\n      var numInstances = _ref7.numInstances;\n      var cacheSize = pickingColorCache.length / 3;\n\n      if (cacheSize < numInstances) {\n        pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n          size: 3,\n          copy: true\n        });\n        var newCacheSize = pickingColorCache.length / 3;\n        var pickingColor = [];\n        assert(newCacheSize < 16777215, 'index out of picking color range');\n\n        for (var i = cacheSize; i < newCacheSize; i++) {\n          this.encodePickingColor(i, pickingColor);\n          pickingColorCache[i * 3 + 0] = pickingColor[0];\n          pickingColorCache[i * 3 + 1] = pickingColor[1];\n          pickingColorCache[i * 3 + 2] = pickingColor[2];\n        }\n      }\n\n      attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n    }\n  }, {\n    key: \"_setModelAttributes\",\n    value: function _setModelAttributes(model, changedAttributes) {\n      var attributeManager = this.getAttributeManager();\n      var excludeAttributes = model.userData.excludeAttributes || {};\n      var shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n      model.setAttributes(shaderAttributes);\n    }\n  }, {\n    key: \"clearPickingColor\",\n    value: function clearPickingColor(color) {\n      var _this$getAttributeMan = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan.pickingColors,\n          instancePickingColors = _this$getAttributeMan.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n      var i = this.decodePickingColor(color);\n      var start = colors.getVertexOffset(i);\n      var end = colors.getVertexOffset(i + 1);\n      colors.buffer.subData({\n        data: new Uint8Array(end - start),\n        offset: start\n      });\n    }\n  }, {\n    key: \"restorePickingColors\",\n    value: function restorePickingColors() {\n      var _this$getAttributeMan2 = this.getAttributeManager().attributes,\n          pickingColors = _this$getAttributeMan2.pickingColors,\n          instancePickingColors = _this$getAttributeMan2.instancePickingColors;\n      var colors = pickingColors || instancePickingColors;\n      colors.updateSubBuffer({\n        startOffset: 0\n      });\n    }\n  }, {\n    key: \"getNumInstances\",\n    value: function getNumInstances(props) {\n      props = props || this.props;\n\n      if (props.numInstances !== undefined) {\n        return props.numInstances;\n      }\n\n      if (this.state && this.state.numInstances !== undefined) {\n        return this.state.numInstances;\n      }\n\n      return count(props.data);\n    }\n  }, {\n    key: \"getStartIndices\",\n    value: function getStartIndices(props) {\n      props = props || this.props;\n\n      if (props.startIndices !== undefined) {\n        return props.startIndices;\n      }\n\n      if (this.state && this.state.startIndices) {\n        return this.state.startIndices;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      debug(TRACE_INITIALIZE, this);\n\n      this._initState();\n\n      this.initializeState(this.context);\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = this.props.extensions[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var extension = _step6.value;\n          extension.initializeState.call(this, this.context, extension);\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6[\"return\"] != null) {\n            _iterator6[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      this.setChangeFlags({\n        dataChanged: true,\n        propsChanged: true,\n        viewportChanged: true,\n        extensionsChanged: true\n      });\n\n      this._updateState();\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      var stateNeedsUpdate = this.needsUpdate();\n      debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n      if (stateNeedsUpdate) {\n        this._updateState();\n      }\n    }\n  }, {\n    key: \"_updateState\",\n    value: function _updateState() {\n      var currentProps = this.props;\n      var currentViewport = this.context.viewport;\n\n      var propsInTransition = this._updateUniformTransition();\n\n      this.internalState.propsInTransition = propsInTransition;\n      this.context.viewport = this.internalState.viewport || currentViewport;\n      this.props = propsInTransition;\n\n      var updateParams = this._getUpdateParams();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      var _iteratorNormalCompletion7 = true;\n      var _didIteratorError7 = false;\n      var _iteratorError7 = undefined;\n\n      try {\n        for (var _iterator7 = this.props.extensions[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n          var extension = _step7.value;\n          extension.updateState.call(this, updateParams, extension);\n        }\n      } catch (err) {\n        _didIteratorError7 = true;\n        _iteratorError7 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion7 && _iterator7[\"return\"] != null) {\n            _iterator7[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError7) {\n            throw _iteratorError7;\n          }\n        }\n      }\n\n      this._updateModules(updateParams);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n\n      this.context.viewport = currentViewport;\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }, {\n    key: \"_finalize\",\n    value: function _finalize() {\n      debug(TRACE_FINALIZE, this);\n      assert(this.internalState && this.state);\n      this.finalizeState(this.context);\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = this.props.extensions[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var extension = _step8.value;\n          extension.finalizeState.call(this, extension);\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8[\"return\"] != null) {\n            _iterator8[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"drawLayer\",\n    value: function drawLayer(_ref8) {\n      var _this = this;\n\n      var _ref8$moduleParameter = _ref8.moduleParameters,\n          moduleParameters = _ref8$moduleParameter === void 0 ? null : _ref8$moduleParameter,\n          _ref8$uniforms = _ref8.uniforms,\n          uniforms = _ref8$uniforms === void 0 ? {} : _ref8$uniforms,\n          _ref8$parameters = _ref8.parameters,\n          parameters = _ref8$parameters === void 0 ? {} : _ref8$parameters;\n\n      this._updateAttributeTransition();\n\n      var currentProps = this.props;\n      this.props = this.internalState.propsInTransition || currentProps;\n      var opacity = this.props.opacity;\n      uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      var getPolygonOffset = this.props.getPolygonOffset;\n      var offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, function () {\n        var opts = {\n          moduleParameters: moduleParameters,\n          uniforms: uniforms,\n          parameters: parameters,\n          context: _this.context\n        };\n        var _iteratorNormalCompletion9 = true;\n        var _didIteratorError9 = false;\n        var _iteratorError9 = undefined;\n\n        try {\n          for (var _iterator9 = _this.props.extensions[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n            var extension = _step9.value;\n            extension.draw.call(_this, opts, extension);\n          }\n        } catch (err) {\n          _didIteratorError9 = true;\n          _iteratorError9 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion9 && _iterator9[\"return\"] != null) {\n              _iterator9[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError9) {\n              throw _iteratorError9;\n            }\n          }\n        }\n\n        _this.draw(opts);\n      });\n      this.props = currentProps;\n    }\n  }, {\n    key: \"getChangeFlags\",\n    value: function getChangeFlags() {\n      return this.internalState.changeFlags;\n    }\n  }, {\n    key: \"setChangeFlags\",\n    value: function setChangeFlags(flags) {\n      var changeFlags = this.internalState.changeFlags;\n\n      for (var key in changeFlags) {\n        if (flags[key] && !changeFlags[key]) {\n          changeFlags[key] = flags[key];\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n\n      var propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n      changeFlags.propsOrDataChanged = propsOrDataChanged;\n      changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n    }\n  }, {\n    key: \"clearChangeFlags\",\n    value: function clearChangeFlags() {\n      this.internalState.changeFlags = {\n        dataChanged: false,\n        propsChanged: false,\n        updateTriggersChanged: false,\n        viewportChanged: false,\n        stateChanged: false,\n        extensionsChanged: false,\n        propsOrDataChanged: false,\n        somethingChanged: false\n      };\n    }\n  }, {\n    key: \"diffProps\",\n    value: function diffProps(newProps, oldProps) {\n      var changeFlags = _diffProps(newProps, oldProps);\n\n      if (changeFlags.updateTriggersChanged) {\n        for (var key in changeFlags.updateTriggersChanged) {\n          if (changeFlags.updateTriggersChanged[key]) {\n            this.invalidateAttribute(key);\n          }\n        }\n      }\n\n      if (changeFlags.transitionsChanged) {\n        for (var _key in changeFlags.transitionsChanged) {\n          this.internalState.uniformTransitions.add(_key, oldProps[_key], newProps[_key], newProps.transitions[_key]);\n        }\n      }\n\n      return this.setChangeFlags(changeFlags);\n    }\n  }, {\n    key: \"validateProps\",\n    value: function validateProps() {\n      _validateProps(this.props);\n    }\n  }, {\n    key: \"setModuleParameters\",\n    value: function setModuleParameters(moduleParameters) {\n      var _iteratorNormalCompletion10 = true;\n      var _didIteratorError10 = false;\n      var _iteratorError10 = undefined;\n\n      try {\n        for (var _iterator10 = this.getModels()[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n          var model = _step10.value;\n          model.updateModuleSettings(moduleParameters);\n        }\n      } catch (err) {\n        _didIteratorError10 = true;\n        _iteratorError10 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion10 && _iterator10[\"return\"] != null) {\n            _iterator10[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError10) {\n            throw _iteratorError10;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_updateModules\",\n    value: function _updateModules(_ref9) {\n      var props = _ref9.props,\n          oldProps = _ref9.oldProps;\n      var autoHighlight = props.autoHighlight,\n          highlightedObjectIndex = props.highlightedObjectIndex,\n          highlightColor = props.highlightColor;\n\n      if (oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n        var parameters = {};\n\n        if (!autoHighlight) {\n          parameters.pickingSelectedColor = null;\n        }\n\n        if (Array.isArray(highlightColor)) {\n          parameters.pickingHighlightColor = highlightColor;\n        }\n\n        if (Number.isInteger(highlightedObjectIndex)) {\n          parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n        }\n\n        this.setModuleParameters(parameters);\n      }\n    }\n  }, {\n    key: \"_getUpdateParams\",\n    value: function _getUpdateParams() {\n      return {\n        props: this.props,\n        oldProps: this.internalState.getOldProps(),\n        context: this.context,\n        changeFlags: this.internalState.changeFlags\n      };\n    }\n  }, {\n    key: \"_getNeedsRedraw\",\n    value: function _getNeedsRedraw(opts) {\n      if (!this.internalState) {\n        return false;\n      }\n\n      var redraw = false;\n      redraw = redraw || this.internalState.needsRedraw && this.id;\n      this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n      var attributeManager = this.getAttributeManager();\n      var attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n      redraw = redraw || attributeManagerNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return new AttributeManager(this.context.gl, {\n        id: this.props.id,\n        stats: this.context.stats,\n        timeline: this.context.timeline\n      });\n    }\n  }, {\n    key: \"_initState\",\n    value: function _initState() {\n      assert(!this.internalState && !this.state);\n      assert(isFinite(this.props.coordinateSystem), \"\".concat(this.id, \": invalid coordinateSystem\"));\n\n      var attributeManager = this._getAttributeManager();\n\n      if (attributeManager) {\n        attributeManager.addInstanced({\n          instancePickingColors: {\n            type: 5121,\n            size: 3,\n            noAlloc: true,\n            update: this.calculateInstancePickingColors\n          }\n        });\n      }\n\n      this.internalState = new LayerState({\n        attributeManager: attributeManager,\n        layer: this\n      });\n      this.clearChangeFlags();\n      this.state = {};\n      Object.defineProperty(this.state, 'attributeManager', {\n        get: function get() {\n          log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n          return attributeManager;\n        }\n      });\n      this.internalState.layer = this;\n      this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n      this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n      this.internalState.setAsyncProps(this.props);\n    }\n  }, {\n    key: \"_transferState\",\n    value: function _transferState(oldLayer) {\n      debug(TRACE_MATCHED, this, this === oldLayer);\n      var state = oldLayer.state,\n          internalState = oldLayer.internalState;\n      assert(state && internalState);\n\n      if (this === oldLayer) {\n        return;\n      }\n\n      this.internalState = internalState;\n      this.internalState.layer = this;\n      this.state = state;\n      this.internalState.setAsyncProps(this.props);\n      this.diffProps(this.props, this.internalState.getOldProps());\n    }\n  }, {\n    key: \"_onAsyncPropUpdated\",\n    value: function _onAsyncPropUpdated() {\n      this.diffProps(this.props, this.internalState.getOldProps());\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"isLoaded\",\n    get: function get() {\n      return this.internalState && !this.internalState.isAsyncPropLoading();\n    }\n  }, {\n    key: \"wrapLongitude\",\n    get: function get() {\n      return this.props.wrapLongitude;\n    }\n  }]);\n\n  return Layer;\n}(Component);\n\nexport { Layer as default };\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nvar process_ = globals.process || {};\nvar console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  var _propChecks$removedPr = propChecks.removedProps,\n      removedProps = _propChecks$removedPr === void 0 ? {} : _propChecks$removedPr,\n      _propChecks$deprecate = propChecks.deprecatedProps,\n      deprecatedProps = _propChecks$deprecate === void 0 ? {} : _propChecks$deprecate,\n      _propChecks$replacedP = propChecks.replacedProps,\n      replacedProps = _propChecks$replacedP === void 0 ? {} : _propChecks$replacedP;\n\n  for (var propName in removedProps) {\n    if (propName in props) {\n      var replacementProp = removedProps[propName];\n      var replacement = replacementProp ? \"\".concat(className, \".\").concat(removedProps[propName]) : 'N/A';\n      log.removed(\"\".concat(className, \".\").concat(propName), replacement)();\n    }\n  }\n\n  for (var _propName in deprecatedProps) {\n    if (_propName in props) {\n      var _replacementProp = deprecatedProps[_propName];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName), \"\".concat(className, \".\").concat(_replacementProp))();\n    }\n  }\n\n  var newProps = null;\n\n  for (var _propName2 in replacedProps) {\n    if (_propName2 in props) {\n      var _replacementProp2 = replacedProps[_propName2];\n      log.deprecated(\"\".concat(className, \".\").concat(_propName2), \"\".concat(className, \".\").concat(_replacementProp2))();\n      newProps = newProps || Object.assign({}, props);\n      newProps[_replacementProp2] = props[_propName2];\n      delete newProps[_propName2];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { assertWebGLContext, getKey, getKeyValue } from '../webgl-utils';\nimport { uid, assert, stubRemovedMethods as _stubRemovedMethods } from '../utils';\nvar ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\n\nvar Resource = function () {\n  function Resource(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Resource);\n\n    assertWebGLContext(gl);\n    var id = opts.id,\n        _opts$userData = opts.userData,\n        userData = _opts$userData === void 0 ? {} : _opts$userData;\n    this.gl = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  _createClass(Resource, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.constructor.name, \"(\").concat(this.id, \")\");\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$deleteChildren = _ref.deleteChildren,\n          deleteChildren = _ref$deleteChildren === void 0 ? false : _ref$deleteChildren;\n\n      var children = this._handle && this._deleteHandle(this._handle);\n\n      if (this._handle) {\n        this._removeStats();\n      }\n\n      this._handle = null;\n\n      if (children && deleteChildren) {\n        children.filter(Boolean).forEach(function (child) {\n          child[\"delete\"]();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var funcOrHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.handle;\n\n      if (typeof funcOrHandle !== 'function') {\n        this._bindHandle(funcOrHandle);\n\n        return this;\n      }\n\n      var value;\n\n      if (!this._bound) {\n        this._bindHandle(this.handle);\n\n        this._bound = true;\n        value = funcOrHandle();\n        this._bound = false;\n\n        this._bindHandle(null);\n      } else {\n        value = funcOrHandle();\n      }\n\n      return value;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      this.bind(null);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          var webgl1Default = parameter.webgl1;\n          var webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n          var defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n          return defaultValue;\n        }\n      }\n\n      return this._getParameter(pname, opts);\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _ref2 = {},\n          parameters = _ref2.parameters,\n          keys = _ref2.keys;\n      var PARAMETERS = this.constructor.PARAMETERS || {};\n      var isWebgl2 = isWebGL2(this.gl);\n      var values = {};\n      var parameterKeys = parameters || Object.keys(PARAMETERS);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var pname = _step.value;\n          var parameter = PARAMETERS[pname];\n          var parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n          if (parameterAvailable) {\n            var key = keys ? getKey(this.gl, pname) : pname;\n            values[key] = this.getParameter(pname, opts);\n\n            if (keys && parameter.type === 'GLenum') {\n              values[key] = getKey(this.gl, values[key]);\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"setParameter\",\n    value: function setParameter(pname, value) {\n      pname = getKeyValue(this.gl, pname);\n      assert(pname);\n      var parameters = this.constructor.PARAMETERS || {};\n      var parameter = parameters[pname];\n\n      if (parameter) {\n        var isWebgl2 = isWebGL2(this.gl);\n        var parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n        if (!parameterAvailable) {\n          throw new Error('Parameter not available on this platform');\n        }\n\n        if (parameter.type === 'GLenum') {\n          value = getKeyValue(value);\n        }\n      }\n\n      this._setParameter(pname, value);\n\n      return this;\n    }\n  }, {\n    key: \"setParameters\",\n    value: function setParameters(parameters) {\n      for (var pname in parameters) {\n        this.setParameter(pname, parameters[pname]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stubRemovedMethods\",\n    value: function stubRemovedMethods(className, version, methodNames) {\n      return _stubRemovedMethods(this, className, version, methodNames);\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(opts) {}\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, opts) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, value) {\n      throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n    }\n  }, {\n    key: \"_context\",\n    value: function _context() {\n      this.gl.luma = this.gl.luma || {};\n      return this.gl.luma;\n    }\n  }, {\n    key: \"_addStats\",\n    value: function _addStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get('Resources Created').incrementCount();\n      stats.get(\"\".concat(name, \"s Created\")).incrementCount();\n      stats.get(\"\".concat(name, \"s Active\")).incrementCount();\n    }\n  }, {\n    key: \"_removeStats\",\n    value: function _removeStats() {\n      var name = this.constructor.name;\n      var stats = lumaStats.get('Resource Counts');\n      stats.get(\"\".concat(name, \"s Active\")).decrementCount();\n    }\n  }, {\n    key: \"_trackAllocatedMemory\",\n    value: function _trackAllocatedMemory(bytes) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').addCount(bytes);\n      stats.get(\"\".concat(name, \" Memory\")).addCount(bytes);\n      this.byteLength = bytes;\n    }\n  }, {\n    key: \"_trackDeallocatedMemory\",\n    value: function _trackDeallocatedMemory() {\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.constructor.name;\n      var stats = lumaStats.get('Memory Usage');\n      stats.get('GPU Memory').subtractCount(this.byteLength);\n      stats.get(\"\".concat(name, \" Memory\")).subtractCount(this.byteLength);\n      this.byteLength = 0;\n    }\n  }, {\n    key: \"handle\",\n    get: function get() {\n      return this._handle;\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };\n//# sourceMappingURL=resource.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { log } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { assertWebGLContext } from '../webgl-utils';\nvar FACES = [34069, 34070, 34071, 34072, 34073, 34074];\n\nvar TextureCube = function (_Texture) {\n  _inherits(TextureCube, _Texture);\n\n  function TextureCube(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TextureCube);\n\n    assertWebGLContext(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TextureCube).call(this, gl, Object.assign({}, props, {\n      target: 34067\n    })));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TextureCube, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters;\n      this.opts = props;\n      this.setCubeMapImageData(props).then(function () {\n        _this2.loaded = true;\n\n        if (mipmaps) {\n          _this2.generateMipmap(props);\n        }\n\n        _this2.setParameters(parameters);\n      });\n    }\n  }, {\n    key: \"subImage\",\n    value: function subImage(_ref) {\n      var face = _ref.face,\n          data = _ref.data,\n          _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$mipmapLevel = _ref.mipmapLevel,\n          mipmapLevel = _ref$mipmapLevel === void 0 ? 0 : _ref$mipmapLevel;\n      return this._subImage({\n        target: face,\n        data: data,\n        x: x,\n        y: y,\n        mipmapLevel: mipmapLevel\n      });\n    }\n  }, {\n    key: \"setCubeMapImageData\",\n    value: function () {\n      var _setCubeMapImageData = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2) {\n        var _this3 = this;\n\n        var width, height, pixels, data, _ref2$border, border, _ref2$format, format, _ref2$type, type, gl, imageDataMap, resolvedFaces;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                width = _ref2.width, height = _ref2.height, pixels = _ref2.pixels, data = _ref2.data, _ref2$border = _ref2.border, border = _ref2$border === void 0 ? 0 : _ref2$border, _ref2$format = _ref2.format, format = _ref2$format === void 0 ? 6408 : _ref2$format, _ref2$type = _ref2.type, type = _ref2$type === void 0 ? 5121 : _ref2$type;\n                gl = this.gl;\n                imageDataMap = pixels || data;\n                _context.next = 5;\n                return Promise.all(FACES.map(function (face) {\n                  var facePixels = imageDataMap[face];\n                  return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n                }));\n\n              case 5:\n                resolvedFaces = _context.sent;\n                this.bind();\n                FACES.forEach(function (face, index) {\n                  if (resolvedFaces[index].length > 1 && _this3.opts.mipmaps !== false) {\n                    log.warn(\"\".concat(_this3.id, \" has mipmap and multiple LODs.\"))();\n                  }\n\n                  resolvedFaces[index].forEach(function (image, lodLevel) {\n                    if (width && height) {\n                      gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n                    } else {\n                      gl.texImage2D(face, lodLevel, format, format, type, image);\n                    }\n                  });\n                });\n                this.unbind();\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setCubeMapImageData(_x) {\n        return _setCubeMapImageData.apply(this, arguments);\n      }\n\n      return setCubeMapImageData;\n    }()\n  }, {\n    key: \"setImageDataForFace\",\n    value: function setImageDataForFace(options) {\n      var _this4 = this;\n\n      var face = options.face,\n          width = options.width,\n          height = options.height,\n          pixels = options.pixels,\n          data = options.data,\n          _options$border = options.border,\n          border = _options$border === void 0 ? 0 : _options$border,\n          _options$format = options.format,\n          format = _options$format === void 0 ? 6408 : _options$format,\n          _options$type = options.type,\n          type = _options$type === void 0 ? 5121 : _options$type;\n      var gl = this.gl;\n      var imageData = pixels || data;\n      this.bind();\n\n      if (imageData instanceof Promise) {\n        imageData.then(function (resolvedImageData) {\n          return _this4.setImageDataForFace(Object.assign({}, options, {\n            face: face,\n            data: resolvedImageData,\n            pixels: resolvedImageData\n          }));\n        });\n      } else if (this.width || this.height) {\n        gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n      } else {\n        gl.texImage2D(face, 0, format, format, type, imageData);\n      }\n\n      return this;\n    }\n  }]);\n\n  return TextureCube;\n}(Texture);\n\nexport { TextureCube as default };\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, withParameters } from '@luma.gl/gltools';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\n\nvar Texture3D = function (_Texture) {\n  _inherits(Texture3D, _Texture);\n\n  _createClass(Texture3D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function Texture3D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture3D);\n\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture3D).call(this, gl, props));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Texture3D, [{\n    key: \"setImageData\",\n    value: function setImageData(_ref) {\n      var _this2 = this;\n\n      var _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 0 : _ref$level,\n          _ref$dataFormat = _ref.dataFormat,\n          dataFormat = _ref$dataFormat === void 0 ? 6408 : _ref$dataFormat,\n          width = _ref.width,\n          height = _ref.height,\n          _ref$depth = _ref.depth,\n          depth = _ref$depth === void 0 ? 1 : _ref$depth,\n          _ref$border = _ref.border,\n          border = _ref$border === void 0 ? 0 : _ref$border,\n          format = _ref.format,\n          _ref$type = _ref.type,\n          type = _ref$type === void 0 ? 5121 : _ref$type,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          data = _ref.data,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters;\n\n      this._trackDeallocatedMemory('Texture');\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (ArrayBuffer.isView(data)) {\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, data);\n        }\n\n        if (data instanceof Buffer) {\n          _this2.gl.bindBuffer(35052, data.handle);\n\n          _this2.gl.texImage3D(_this2.target, level, dataFormat, width, height, depth, border, format, type, offset);\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }]);\n\n  return Texture3D;\n}(Texture);\n\nexport { Texture3D as default };\n//# sourceMappingURL=texture-3d.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  var TextureType = refTexture.constructor;\n  var gl = refTexture.gl,\n      width = refTexture.width,\n      height = refTexture.height,\n      format = refTexture.format,\n      type = refTexture.type,\n      dataFormat = refTexture.dataFormat,\n      border = refTexture.border,\n      mipmaps = refTexture.mipmaps;\n  var textureOptions = Object.assign({\n    width: width,\n    height: height,\n    format: format,\n    type: type,\n    dataFormat: dataFormat,\n    border: border,\n    mipmaps: mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  var gl = texture.gl,\n      width = texture.width,\n      height = texture.height,\n      id = texture.id;\n  var framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: \"framebuffer-for-\".concat(id),\n    width: width,\n    height: height,\n    attachments: _defineProperty({}, 36064, texture)\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.github.io/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\n\nvar Matrix = function (_MathArray) {\n  _inherits(Matrix, _MathArray);\n\n  function Matrix() {\n    _classCallCheck(this, Matrix);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Matrix).apply(this, arguments));\n  }\n\n  _createClass(Matrix, [{\n    key: \"toString\",\n    value: function toString() {\n      var string = '[';\n\n      if (config.printRowMajor) {\n        string += 'row-major:';\n\n        for (var row = 0; row < this.RANK; ++row) {\n          for (var col = 0; col < this.RANK; ++col) {\n            string += \" \".concat(this[col * this.RANK + row]);\n          }\n        }\n      } else {\n        string += 'column-major:';\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          string += \" \".concat(this[i]);\n        }\n      }\n\n      string += ']';\n      return string;\n    }\n  }, {\n    key: \"getElementIndex\",\n    value: function getElementIndex(row, col) {\n      return col * this.RANK + row;\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(row, col) {\n      return this[col * this.RANK + row];\n    }\n  }, {\n    key: \"setElement\",\n    value: function setElement(row, col, value) {\n      this[col * this.RANK + row] = checkNumber(value);\n      return this;\n    }\n  }, {\n    key: \"getColumn\",\n    value: function getColumn(columnIndex) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Array(this.RANK).fill(-0);\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        result[i] = this[firstIndex + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setColumn\",\n    value: function setColumn(columnIndex, columnVector) {\n      var firstIndex = columnIndex * this.RANK;\n\n      for (var i = 0; i < this.RANK; ++i) {\n        this[firstIndex + i] = columnVector[i];\n      }\n\n      return this;\n    }\n  }]);\n\n  return Matrix;\n}(MathArray);\n\nexport { Matrix as default };\n//# sourceMappingURL=matrix.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nvar IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nvar ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nvar INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nvar constants = {};\n\nvar Matrix4 = function (_Matrix) {\n  _inherits(Matrix4, _Matrix);\n\n  _createClass(Matrix4, [{\n    key: \"INDICES\",\n    get: function get() {\n      return INDICES;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 16;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      return 4;\n    }\n  }], [{\n    key: \"IDENTITY\",\n    get: function get() {\n      constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n      return constants.IDENTITY;\n    }\n  }, {\n    key: \"ZERO\",\n    get: function get() {\n      constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n      return constants.ZERO;\n    }\n  }]);\n\n  function Matrix4(array) {\n    var _this;\n\n    _classCallCheck(this, Matrix4);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Matrix4).call(this, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0));\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      _this.copy(array);\n    } else {\n      _this.identity();\n    }\n\n    return _this;\n  }\n\n  _createClass(Matrix4, [{\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      this[3] = array[3];\n      this[4] = array[4];\n      this[5] = array[5];\n      this[6] = array[6];\n      this[7] = array[7];\n      this[8] = array[8];\n      this[9] = array[9];\n      this[10] = array[10];\n      this[11] = array[11];\n      this[12] = array[12];\n      this[13] = array[13];\n      this[14] = array[14];\n      this[15] = array[15];\n      return this.check();\n    }\n  }, {\n    key: \"set\",\n    value: function set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"setRowMajor\",\n    value: function setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n      this[0] = m00;\n      this[1] = m10;\n      this[2] = m20;\n      this[3] = m30;\n      this[4] = m01;\n      this[5] = m11;\n      this[6] = m21;\n      this[7] = m31;\n      this[8] = m02;\n      this[9] = m12;\n      this[10] = m22;\n      this[11] = m32;\n      this[12] = m03;\n      this[13] = m13;\n      this[14] = m23;\n      this[15] = m33;\n      return this.check();\n    }\n  }, {\n    key: \"toRowMajor\",\n    value: function toRowMajor(result) {\n      result[0] = this[0];\n      result[1] = this[4];\n      result[2] = this[8];\n      result[3] = this[12];\n      result[4] = this[1];\n      result[5] = this[5];\n      result[6] = this[9];\n      result[7] = this[13];\n      result[8] = this[2];\n      result[9] = this[6];\n      result[10] = this[10];\n      result[11] = this[14];\n      result[12] = this[3];\n      result[13] = this[7];\n      result[14] = this[11];\n      result[15] = this[15];\n      return result;\n    }\n  }, {\n    key: \"identity\",\n    value: function identity() {\n      return this.copy(IDENTITY);\n    }\n  }, {\n    key: \"fromQuaternion\",\n    value: function fromQuaternion(q) {\n      mat4.fromQuat(this, q);\n      return this.check();\n    }\n  }, {\n    key: \"frustum\",\n    value: function frustum(_ref) {\n      var left = _ref.left,\n          right = _ref.right,\n          bottom = _ref.bottom,\n          top = _ref.top,\n          near = _ref.near,\n          far = _ref.far;\n\n      if (far === Infinity) {\n        Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n      } else {\n        mat4.frustum(this, left, right, bottom, top, near, far);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lookAt\",\n    value: function lookAt(eye, center, up) {\n      if (arguments.length === 1) {\n        var _eye = eye;\n        eye = _eye.eye;\n        center = _eye.center;\n        up = _eye.up;\n      }\n\n      center = center || [0, 0, 0];\n      up = up || [0, 1, 0];\n      mat4.lookAt(this, eye, center, up);\n      return this.check();\n    }\n  }, {\n    key: \"ortho\",\n    value: function ortho(_ref2) {\n      var left = _ref2.left,\n          right = _ref2.right,\n          bottom = _ref2.bottom,\n          top = _ref2.top,\n          _ref2$near = _ref2.near,\n          near = _ref2$near === void 0 ? 0.1 : _ref2$near,\n          _ref2$far = _ref2.far,\n          far = _ref2$far === void 0 ? 500 : _ref2$far;\n      mat4.ortho(this, left, right, bottom, top, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"orthographic\",\n    value: function orthographic(_ref3) {\n      var _ref3$fovy = _ref3.fovy,\n          fovy = _ref3$fovy === void 0 ? 45 * Math.PI / 180 : _ref3$fovy,\n          _ref3$aspect = _ref3.aspect,\n          aspect = _ref3$aspect === void 0 ? 1 : _ref3$aspect,\n          _ref3$focalDistance = _ref3.focalDistance,\n          focalDistance = _ref3$focalDistance === void 0 ? 1 : _ref3$focalDistance,\n          _ref3$near = _ref3.near,\n          near = _ref3$near === void 0 ? 0.1 : _ref3$near,\n          _ref3$far = _ref3.far,\n          far = _ref3$far === void 0 ? 500 : _ref3$far;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      var halfY = fovy / 2;\n      var top = focalDistance * Math.tan(halfY);\n      var right = top * aspect;\n      return new Matrix4().ortho({\n        left: -right,\n        right: right,\n        bottom: -top,\n        top: top,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"perspective\",\n    value: function perspective() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$fovy = _ref4.fovy,\n          fovy = _ref4$fovy === void 0 ? undefined : _ref4$fovy,\n          _ref4$fov = _ref4.fov,\n          fov = _ref4$fov === void 0 ? 45 * Math.PI / 180 : _ref4$fov,\n          _ref4$aspect = _ref4.aspect,\n          aspect = _ref4$aspect === void 0 ? 1 : _ref4$aspect,\n          _ref4$near = _ref4.near,\n          near = _ref4$near === void 0 ? 0.1 : _ref4$near,\n          _ref4$far = _ref4.far,\n          far = _ref4$far === void 0 ? 500 : _ref4$far;\n\n      fovy = fovy || fov;\n\n      if (fovy > Math.PI * 2) {\n        throw Error('radians');\n      }\n\n      mat4.perspective(this, fovy, aspect, near, far);\n      return this.check();\n    }\n  }, {\n    key: \"determinant\",\n    value: function determinant() {\n      return mat4.determinant(this);\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n      result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n      result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n      return result;\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0];\n      result[0] = this[12];\n      result[1] = this[13];\n      result[2] = this[14];\n      return result;\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = 0;\n      result[4] = this[4] * inverseScale0;\n      result[5] = this[5] * inverseScale1;\n      result[6] = this[6] * inverseScale2;\n      result[7] = 0;\n      result[8] = this[8] * inverseScale0;\n      result[9] = this[9] * inverseScale1;\n      result[10] = this[10] * inverseScale2;\n      result[11] = 0;\n      result[12] = 0;\n      result[13] = 0;\n      result[14] = 0;\n      result[15] = 1;\n      return result;\n    }\n  }, {\n    key: \"getRotationMatrix3\",\n    value: function getRotationMatrix3() {\n      var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n      var scaleResult = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var scale = this.getScale(scaleResult || [-0, -0, -0]);\n      var inverseScale0 = 1 / scale[0];\n      var inverseScale1 = 1 / scale[1];\n      var inverseScale2 = 1 / scale[2];\n      result[0] = this[0] * inverseScale0;\n      result[1] = this[1] * inverseScale1;\n      result[2] = this[2] * inverseScale2;\n      result[3] = this[4] * inverseScale0;\n      result[4] = this[5] * inverseScale1;\n      result[5] = this[6] * inverseScale2;\n      result[6] = this[8] * inverseScale0;\n      result[7] = this[9] * inverseScale1;\n      result[8] = this[10] * inverseScale2;\n      return result;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() {\n      mat4.transpose(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      mat4.invert(this, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyLeft\",\n    value: function multiplyLeft(a) {\n      mat4.multiply(this, a, this);\n      return this.check();\n    }\n  }, {\n    key: \"multiplyRight\",\n    value: function multiplyRight(a) {\n      mat4.multiply(this, this, a);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(radians) {\n      mat4.rotateX(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(radians) {\n      mat4.rotateY(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(radians) {\n      mat4.rotateZ(this, this, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateXYZ\",\n    value: function rotateXYZ(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 3),\n          rx = _ref6[0],\n          ry = _ref6[1],\n          rz = _ref6[2];\n\n      return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n    }\n  }, {\n    key: \"rotateAxis\",\n    value: function rotateAxis(radians, axis) {\n      mat4.rotate(this, this, radians, axis);\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(factor) {\n      if (Array.isArray(factor)) {\n        mat4.scale(this, this, factor);\n      } else {\n        mat4.scale(this, this, [factor, factor, factor]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(vec) {\n      mat4.translate(this, this, vec);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(vector, result) {\n      if (vector.length === 4) {\n        result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n        checkVector(result, 4);\n        return result;\n      }\n\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(vector, result) {\n      var length = vector.length;\n\n      switch (length) {\n        case 2:\n          result = vec2.transformMat4(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(vector, result) {\n      switch (vector.length) {\n        case 2:\n          result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n          break;\n\n        case 3:\n          result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n          break;\n\n        default:\n          throw new Error('Illegal vector');\n      }\n\n      checkVector(result, vector.length);\n      return result;\n    }\n  }, {\n    key: \"makeRotationX\",\n    value: function makeRotationX(radians) {\n      return this.identity().rotateX(radians);\n    }\n  }, {\n    key: \"makeTranslation\",\n    value: function makeTranslation(x, y, z) {\n      return this.identity().translate([x, y, z]);\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(vector, result) {\n      deprecated('Matrix4.transformPoint', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformVector\",\n    value: function transformVector(vector, result) {\n      deprecated('Matrix4.transformVector', '3.0');\n      return this.transformAsPoint(vector, result);\n    }\n  }, {\n    key: \"transformDirection\",\n    value: function transformDirection(vector, result) {\n      deprecated('Matrix4.transformDirection', '3.0');\n      return this.transformAsVector(vector, result);\n    }\n  }], [{\n    key: \"_computeInfinitePerspectiveOffCenter\",\n    value: function _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n      var column0Row0 = 2.0 * near / (right - left);\n      var column1Row1 = 2.0 * near / (top - bottom);\n      var column2Row0 = (right + left) / (right - left);\n      var column2Row1 = (top + bottom) / (top - bottom);\n      var column2Row2 = -1.0;\n      var column2Row3 = -1.0;\n      var column3Row2 = -2.0 * near;\n      result[0] = column0Row0;\n      result[1] = 0.0;\n      result[2] = 0.0;\n      result[3] = 0.0;\n      result[4] = 0.0;\n      result[5] = column1Row1;\n      result[6] = 0.0;\n      result[7] = 0.0;\n      result[8] = column2Row0;\n      result[9] = column2Row1;\n      result[10] = column2Row2;\n      result[11] = column2Row3;\n      result[12] = 0.0;\n      result[13] = 0.0;\n      result[14] = column3Row2;\n      result[15] = 0.0;\n      return result;\n    }\n  }]);\n\n  return Matrix4;\n}(Matrix);\n\nexport { Matrix4 as default };\n//# sourceMappingURL=matrix4.js.map","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    var len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (var i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  var cachedArgs = {};\n  var cachedResult;\n  return function (args) {\n    for (var key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _UNIFORM_SETTERS;\n\nimport { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils';\nvar UNIFORM_SETTERS = (_UNIFORM_SETTERS = {}, _defineProperty(_UNIFORM_SETTERS, 5126, getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35664, getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35665, getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35666, getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 5124, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35667, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35668, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35669, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35670, getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35671, getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35672, getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35673, getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35674, getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35675, getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35676, getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35678, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35680, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 5125, getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36294, getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36295, getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 36296, getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform)), _defineProperty(_UNIFORM_SETTERS, 35685, getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35686, getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35687, getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35688, getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35689, getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35690, getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform)), _defineProperty(_UNIFORM_SETTERS, 35679, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 35682, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36289, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36292, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36293, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36298, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36299, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36300, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36303, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36306, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36307, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36308, getSamplerSetter), _defineProperty(_UNIFORM_SETTERS, 36311, getSamplerSetter), _UNIFORM_SETTERS);\nvar FLOAT_ARRAY = {};\nvar INT_ARRAY = {};\nvar UINT_ARRAY = {};\nvar array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  var length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(\"Uniform size should be multiples of \".concat(uniformLength), value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  var result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (var i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name: name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  var UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  var matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(\"Failed to parse GLSL uniform name \".concat(name));\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function getUniformSetter(gl, location, info) {\n  var setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(\"Unknown GLSL uniform type \".concat(info.type));\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (var uniformName in uniforms) {\n    var value = uniforms[uniformName];\n    var shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? \"\".concat(source, \" \") : '';\n      console.error(\"\".concat(source, \" Bad uniform \").concat(uniformName), value);\n      throw new Error(\"\".concat(source, \" Bad uniform \").concat(uniformName));\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  var checkLength = Math.min(value.length, 16);\n\n  for (var i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      var dest = uniforms[key];\n\n      for (var i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction getSamplerSetter() {\n  var cache = null;\n  return function (gl, location, value) {\n    var update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  var cache = null;\n  var cacheLength = null;\n  return function (gl, location, value) {\n    var arrayValue = toArray(value, size);\n    var length = arrayValue.length;\n    var update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (var i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","export default function getShaderName(shader) {\n  var defaultName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'unnamed';\n  var SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  var match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","var GL_FRAGMENT_SHADER = 0x8b30;\nvar GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  var _parseGLSLCompilerErr = parseGLSLCompilerError(errLog, src, shaderType),\n      shaderName = _parseGLSLCompilerErr.shaderName,\n      errors = _parseGLSLCompilerErr.errors,\n      warnings = _parseGLSLCompilerErr.warnings;\n\n  return \"GLSL compilation error in \".concat(shaderName, \"\\n\\n\").concat(errors, \"\\n\").concat(warnings);\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  var errorStrings = errLog.split(/\\r?\\n/);\n  var errors = {};\n  var warnings = {};\n  var name = shaderName || getShaderName(src) || '(unnamed)';\n  var shaderDescription = \"\".concat(getShaderTypeName(shaderType), \" shader \").concat(name);\n\n  for (var i = 0; i < errorStrings.length; i++) {\n    var errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    var segments = errorString.split(':');\n    var type = segments[0];\n    var line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(\"GLSL compilation error in \".concat(shaderDescription, \": \").concat(errLog));\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  var lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  var message = '';\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += \"\".concat(line, \"\\n\");\n\n    if (errors[i + 1]) {\n      var error = errors[i + 1];\n      var segments = error.split(':', 3);\n      var type = segments[0];\n      var column = parseInt(segments[1], 10) || 0;\n      var err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(\"^^^ \".concat(type, \": \").concat(err, \"\\n\\n\"), column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string) {\n  var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var delim = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ': ';\n  var lines = string.split(/\\r?\\n/);\n  var maxDigits = String(lines.length + start - 1).length;\n  return lines.map(function (line, i) {\n    var lineNumber = i + start;\n    var digits = String(lineNumber).length;\n    var prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  var result = '';\n\n  for (var i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return \"\".concat(result).concat(string);\n}\n//# sourceMappingURL=format-glsl-error.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assertWebGLContext } from '../webgl-utils';\nimport { uid, assert } from '../utils';\nimport Resource from './resource';\nvar ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport var Shader = function (_Resource) {\n  _inherits(Shader, _Resource);\n\n  _createClass(Shader, null, [{\n    key: \"getTypeName\",\n    value: function getTypeName(shaderType) {\n      switch (shaderType) {\n        case 35633:\n          return 'vertex-shader';\n\n        case 35632:\n          return 'fragment-shader';\n\n        default:\n          assert(false);\n          return 'unknown';\n      }\n    }\n  }]);\n\n  function Shader(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Shader);\n\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    var id = getShaderName(props.source, null) || props.id || uid(\"unnamed \".concat(Shader.getTypeName(props.shaderType)));\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Shader).call(this, gl, {\n      id: id\n    }));\n    _this.shaderType = props.shaderType;\n    _this.source = props.source;\n\n    _this.initialize(props);\n\n    return _this;\n  }\n\n  _createClass(Shader, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var source = _ref.source;\n      var shaderName = getShaderName(source, null);\n\n      if (shaderName) {\n        this.id = uid(shaderName);\n      }\n\n      this._compile(source);\n    }\n  }, {\n    key: \"getParameter\",\n    value: function getParameter(pname) {\n      return this.gl.getShaderParameter(this.handle, pname);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(Shader.getTypeName(this.shaderType), \":\").concat(this.id);\n    }\n  }, {\n    key: \"getName\",\n    value: function getName() {\n      return getShaderName(this.source) || 'unnamed-shader';\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.gl.getShaderSource(this.handle);\n    }\n  }, {\n    key: \"getTranslatedSource\",\n    value: function getTranslatedSource() {\n      var extension = this.gl.getExtension('WEBGL.debug_shaders');\n      return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL.debug_shaders not implemented';\n    }\n  }, {\n    key: \"_compile\",\n    value: function _compile() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.source;\n\n      if (!source.startsWith('#version ')) {\n        source = \"#version 100\\n\".concat(source);\n      }\n\n      this.source = source;\n      this.gl.shaderSource(this.handle, this.source);\n      this.gl.compileShader(this.handle);\n      var compileStatus = this.getParameter(35713);\n\n      if (!compileStatus) {\n        var infoLog = this.gl.getShaderInfoLog(this.handle);\n\n        var _parseGLSLCompilerErr = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id),\n            shaderName = _parseGLSLCompilerErr.shaderName,\n            errors = _parseGLSLCompilerErr.errors,\n            warnings = _parseGLSLCompilerErr.warnings;\n\n        log.error(\"GLSL compilation errors in \".concat(shaderName, \"\\n\").concat(errors))();\n        log.warn(\"GLSL compilation warnings in \".concat(shaderName, \"\\n\").concat(warnings))();\n        throw new Error(\"GLSL compilation errors in \".concat(shaderName));\n      }\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteShader(this.handle);\n    }\n  }, {\n    key: \"_getOptsFromHandle\",\n    value: function _getOptsFromHandle() {\n      return {\n        type: this.getParameter(35663),\n        source: this.getSource()\n      };\n    }\n  }]);\n\n  return Shader;\n}(Resource);\nexport var VertexShader = function (_Shader) {\n  _inherits(VertexShader, _Shader);\n\n  function VertexShader(gl, props) {\n    _classCallCheck(this, VertexShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(VertexShader).call(this, gl, Object.assign({}, props, {\n      shaderType: 35633\n    })));\n  }\n\n  _createClass(VertexShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35633);\n    }\n  }]);\n\n  return VertexShader;\n}(Shader);\nexport var FragmentShader = function (_Shader2) {\n  _inherits(FragmentShader, _Shader2);\n\n  function FragmentShader(gl, props) {\n    _classCallCheck(this, FragmentShader);\n\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FragmentShader).call(this, gl, Object.assign({}, props, {\n      shaderType: 35632\n    })));\n  }\n\n  _createClass(FragmentShader, [{\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createShader(35632);\n    }\n  }]);\n\n  return FragmentShader;\n}(Shader);\n//# sourceMappingURL=shader.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\n\nvar ProgramConfiguration = function () {\n  function ProgramConfiguration(program) {\n    _classCallCheck(this, ProgramConfiguration);\n\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  _createClass(ProgramConfiguration, [{\n    key: \"getAttributeInfo\",\n    value: function getAttributeInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.attributeInfosByLocation[location];\n      }\n\n      return this.attributeInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getAttributeLocation\",\n    value: function getAttributeLocation(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.location : -1;\n    }\n  }, {\n    key: \"getAttributeAccessor\",\n    value: function getAttributeAccessor(locationOrName) {\n      var attributeInfo = this.getAttributeInfo(locationOrName);\n      return attributeInfo ? attributeInfo.accessor : null;\n    }\n  }, {\n    key: \"getVaryingInfo\",\n    value: function getVaryingInfo(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return this.varyingInfos[location];\n      }\n\n      return this.varyingInfosByName[locationOrName] || null;\n    }\n  }, {\n    key: \"getVaryingIndex\",\n    value: function getVaryingIndex(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.location : -1;\n    }\n  }, {\n    key: \"getVaryingAccessor\",\n    value: function getVaryingAccessor(locationOrName) {\n      var varying = this.getVaryingInfo();\n      return varying ? varying.accessor : null;\n    }\n  }, {\n    key: \"_readAttributesFromProgram\",\n    value: function _readAttributesFromProgram(program) {\n      var gl = program.gl;\n      var count = gl.getProgramParameter(program.handle, 35721);\n\n      for (var index = 0; index < count; index++) {\n        var _gl$getActiveAttrib = gl.getActiveAttrib(program.handle, index),\n            name = _gl$getActiveAttrib.name,\n            type = _gl$getActiveAttrib.type,\n            size = _gl$getActiveAttrib.size;\n\n        var location = gl.getAttribLocation(program.handle, name);\n\n        if (location >= 0) {\n          this._addAttribute(location, name, type, size);\n        }\n      }\n\n      this.attributeInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_readVaryingsFromProgram\",\n    value: function _readVaryingsFromProgram(program) {\n      var gl = program.gl;\n\n      if (!isWebGL2(gl)) {\n        return;\n      }\n\n      var count = gl.getProgramParameter(program.handle, 35971);\n\n      for (var location = 0; location < count; location++) {\n        var _gl$getTransformFeedb = gl.getTransformFeedbackVarying(program.handle, location),\n            name = _gl$getTransformFeedb.name,\n            type = _gl$getTransformFeedb.type,\n            size = _gl$getTransformFeedb.size;\n\n        this._addVarying(location, name, type, size);\n      }\n\n      this.varyingInfos.sort(function (a, b) {\n        return a.location - b.location;\n      });\n    }\n  }, {\n    key: \"_addAttribute\",\n    value: function _addAttribute(location, name, compositeType, size) {\n      var _decomposeCompositeGL = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL.type,\n          components = _decomposeCompositeGL.components;\n\n      var accessor = {\n        type: type,\n        size: size * components\n      };\n\n      this._inferProperties(location, name, accessor);\n\n      var attributeInfo = {\n        location: location,\n        name: name,\n        accessor: new Accessor(accessor)\n      };\n      this.attributeInfos.push(attributeInfo);\n      this.attributeInfosByLocation[location] = attributeInfo;\n      this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n    }\n  }, {\n    key: \"_inferProperties\",\n    value: function _inferProperties(location, name, accessor) {\n      if (/instance/i.test(name)) {\n        accessor.divisor = 1;\n      }\n    }\n  }, {\n    key: \"_addVarying\",\n    value: function _addVarying(location, name, compositeType, size) {\n      var _decomposeCompositeGL2 = decomposeCompositeGLType(compositeType),\n          type = _decomposeCompositeGL2.type,\n          components = _decomposeCompositeGL2.components;\n\n      var accessor = new Accessor({\n        type: type,\n        size: size * components\n      });\n      var varying = {\n        location: location,\n        name: name,\n        accessor: accessor\n      };\n      this.varyingInfos.push(varying);\n      this.varyingInfosByName[varying.name] = varying;\n    }\n  }]);\n\n  return ProgramConfiguration;\n}();\n\nexport { ProgramConfiguration as default };\n//# sourceMappingURL=program-configuration.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, withParameters, log } from '@luma.gl/gltools';\nimport { assertWebGL2Context, getKey } from '../webgl-utils';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { uid, assert } from '../utils';\nvar LOG_PROGRAM_PERF_PRIORITY = 4;\nvar GL_SEPARATE_ATTRIBS = 0x8c8d;\nvar V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\n\nvar Program = function (_Resource) {\n  _inherits(Program, _Resource);\n\n  function Program(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Program);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Program).call(this, gl, props));\n\n    _this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n\n    _this._isCached = false;\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n\n    _this._setId(props.id);\n\n    return _this;\n  }\n\n  _createClass(Program, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var hash = props.hash,\n          vs = props.vs,\n          fs = props.fs,\n          varyings = props.varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? GL_SEPARATE_ATTRIBS : _props$bufferMode;\n      this.hash = hash || '';\n      this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n        id: \"\".concat(props.id, \"-vs\"),\n        source: vs\n      }) : vs;\n      this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n        id: \"\".concat(props.id, \"-fs\"),\n        source: fs\n      }) : fs;\n      assert(this.vs instanceof VertexShader);\n      assert(this.fs instanceof FragmentShader);\n      this.uniforms = {};\n      this._textureUniforms = {};\n      this._texturesRenderable = true;\n\n      if (varyings && varyings.length > 0) {\n        assertWebGL2Context(this.gl);\n        this.varyings = varyings;\n        this.gl.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n      }\n\n      this._compileAndLink();\n\n      this._readUniformLocationsFromLinkedProgram();\n\n      this.configuration = new ProgramConfiguration(this);\n      return this.setProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isCached) {\n        return this;\n      }\n\n      return _get(_getPrototypeOf(Program.prototype), \"delete\", this).call(this, options);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref) {\n      var _this2 = this;\n\n      var logPriority = _ref.logPriority,\n          _ref$drawMode = _ref.drawMode,\n          drawMode = _ref$drawMode === void 0 ? 4 : _ref$drawMode,\n          vertexCount = _ref.vertexCount,\n          _ref$offset = _ref.offset,\n          offset = _ref$offset === void 0 ? 0 : _ref$offset,\n          start = _ref.start,\n          end = _ref.end,\n          _ref$isIndexed = _ref.isIndexed,\n          isIndexed = _ref$isIndexed === void 0 ? false : _ref$isIndexed,\n          _ref$indexType = _ref.indexType,\n          indexType = _ref$indexType === void 0 ? 5123 : _ref$indexType,\n          _ref$instanceCount = _ref.instanceCount,\n          instanceCount = _ref$instanceCount === void 0 ? 0 : _ref$instanceCount,\n          _ref$isInstanced = _ref.isInstanced,\n          isInstanced = _ref$isInstanced === void 0 ? instanceCount > 0 : _ref$isInstanced,\n          _ref$vertexArray = _ref.vertexArray,\n          vertexArray = _ref$vertexArray === void 0 ? null : _ref$vertexArray,\n          transformFeedback = _ref.transformFeedback,\n          framebuffer = _ref.framebuffer,\n          _ref$parameters = _ref.parameters,\n          parameters = _ref$parameters === void 0 ? {} : _ref$parameters,\n          uniforms = _ref.uniforms,\n          samplers = _ref.samplers;\n\n      if (uniforms || samplers) {\n        log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n        this.setUniforms(uniforms || {});\n      }\n\n      if (log.priority >= logPriority) {\n        var fb = framebuffer ? framebuffer.id : 'default';\n        var message = \"mode=\".concat(getKey(this.gl, drawMode), \" verts=\").concat(vertexCount, \" \") + \"instances=\".concat(instanceCount, \" indexType=\").concat(getKey(this.gl, indexType), \" \") + \"isInstanced=\".concat(isInstanced, \" isIndexed=\").concat(isIndexed, \" \") + \"Framebuffer=\".concat(fb);\n        log.log(logPriority, message)();\n      }\n\n      assert(vertexArray);\n      this.gl.useProgram(this.handle);\n\n      if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n        return false;\n      }\n\n      vertexArray.bindForDraw(vertexCount, instanceCount, function () {\n        if (framebuffer !== undefined) {\n          parameters = Object.assign({}, parameters, {\n            framebuffer: framebuffer\n          });\n        }\n\n        if (transformFeedback) {\n          var primitiveMode = getPrimitiveDrawMode(drawMode);\n          transformFeedback.begin(primitiveMode);\n        }\n\n        _this2._bindTextures();\n\n        withParameters(_this2.gl, parameters, function () {\n          if (isIndexed && isInstanced) {\n            _this2.gl.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n          } else if (isIndexed && isWebGL2(_this2.gl) && !isNaN(start) && !isNaN(end)) {\n            _this2.gl.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n          } else if (isIndexed) {\n            _this2.gl.drawElements(drawMode, vertexCount, indexType, offset);\n          } else if (isInstanced) {\n            _this2.gl.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n          } else {\n            _this2.gl.drawArrays(drawMode, offset, vertexCount);\n          }\n        });\n\n        if (transformFeedback) {\n          transformFeedback.end();\n        }\n      });\n      return true;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (log.priority >= 2) {\n        checkUniformValues(uniforms, this.id, this._uniformSetters);\n      }\n\n      this.gl.useProgram(this.handle);\n\n      for (var uniformName in uniforms) {\n        var uniform = uniforms[uniformName];\n        var uniformSetter = this._uniformSetters[uniformName];\n\n        if (uniformSetter) {\n          var value = uniform;\n          var textureUpdate = false;\n\n          if (value instanceof Framebuffer) {\n            value = value.texture;\n          }\n\n          if (value instanceof Texture) {\n            textureUpdate = this.uniforms[uniformName] !== uniform;\n\n            if (textureUpdate) {\n              if (uniformSetter.textureIndex === undefined) {\n                uniformSetter.textureIndex = this._textureIndexCounter++;\n              }\n\n              var texture = value;\n              var textureIndex = uniformSetter.textureIndex;\n              texture.bind(textureIndex);\n              value = textureIndex;\n\n              if (!texture.loaded) {\n                this._texturesRenderable = false;\n              }\n\n              this._textureUniforms[uniformName] = texture;\n            } else {\n              value = uniformSetter.textureIndex;\n            }\n          } else if (this._textureUniforms[uniformName]) {\n            delete this._textureUniforms[uniformName];\n          }\n\n          if (uniformSetter(value) || textureUpdate) {\n            copyUniform(this.uniforms, uniformName, uniform);\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_areTexturesRenderable\",\n    value: function _areTexturesRenderable() {\n      if (this._texturesRenderable) {\n        return true;\n      }\n\n      this._texturesRenderable = true;\n\n      for (var uniformName in this._textureUniforms) {\n        var texture = this._textureUniforms[uniformName];\n        this._texturesRenderable = this._texturesRenderable && texture.loaded;\n      }\n\n      return this._texturesRenderable;\n    }\n  }, {\n    key: \"_bindTextures\",\n    value: function _bindTextures() {\n      for (var uniformName in this._textureUniforms) {\n        var textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n        this._textureUniforms[uniformName].bind(textureIndex);\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createProgram();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteProgram(this.handle);\n    }\n  }, {\n    key: \"_getOptionsFromHandle\",\n    value: function _getOptionsFromHandle(handle) {\n      var shaderHandles = this.gl.getAttachedShaders(handle);\n      var opts = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = shaderHandles[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shaderHandle = _step.value;\n          var type = this.gl.getShaderParameter(this.handle, 35663);\n\n          switch (type) {\n            case 35633:\n              opts.vs = new VertexShader({\n                handle: shaderHandle\n              });\n              break;\n\n            case 35632:\n              opts.fs = new FragmentShader({\n                handle: shaderHandle\n              });\n              break;\n\n            default:\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return opts;\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      return this.gl.getProgramParameter(this.handle, pname);\n    }\n  }, {\n    key: \"_setId\",\n    value: function _setId(id) {\n      if (!id) {\n        var programName = this._getName();\n\n        this.id = uid(programName);\n      }\n    }\n  }, {\n    key: \"_getName\",\n    value: function _getName() {\n      var programName = this.vs.getName() || this.fs.getName();\n      programName = programName.replace(/shader/i, '');\n      programName = programName ? \"\".concat(programName, \"-program\") : 'program';\n      return programName;\n    }\n  }, {\n    key: \"_compileAndLink\",\n    value: function _compileAndLink() {\n      var gl = this.gl;\n      gl.attachShader(this.handle, this.vs.handle);\n      gl.attachShader(this.handle, this.fs.handle);\n      log.time(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n      gl.linkProgram(this.handle);\n      log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, \"linkProgram for \".concat(this._getName()))();\n\n      if (gl.debug || log.level > 0) {\n        gl.validateProgram(this.handle);\n        var linked = gl.getProgramParameter(this.handle, 35714);\n\n        if (!linked) {\n          throw new Error(\"Error linking: \".concat(gl.getProgramInfoLog(this.handle)));\n        }\n      }\n    }\n  }, {\n    key: \"_readUniformLocationsFromLinkedProgram\",\n    value: function _readUniformLocationsFromLinkedProgram() {\n      var gl = this.gl;\n      this._uniformSetters = {};\n      this._uniformCount = this._getParameter(35718);\n\n      for (var i = 0; i < this._uniformCount; i++) {\n        var info = this.gl.getActiveUniform(this.handle, i);\n\n        var _parseUniformName = parseUniformName(info.name),\n            name = _parseUniformName.name,\n            isArray = _parseUniformName.isArray;\n\n        var location = gl.getUniformLocation(this.handle, name);\n        this._uniformSetters[name] = getUniformSetter(gl, location, info, isArray);\n\n        if (info.size > 1) {\n          for (var l = 0; l < info.size; l++) {\n            location = gl.getUniformLocation(this.handle, \"\".concat(name, \"[\").concat(l, \"]\"));\n            this._uniformSetters[\"\".concat(name, \"[\").concat(l, \"]\")] = getUniformSetter(gl, location, info, isArray);\n          }\n        }\n      }\n\n      this._textureIndexCounter = 0;\n    }\n  }, {\n    key: \"getActiveUniforms\",\n    value: function getActiveUniforms(uniformIndices, pname) {\n      return this.gl.getActiveUniforms(this.handle, uniformIndices, pname);\n    }\n  }, {\n    key: \"getUniformBlockIndex\",\n    value: function getUniformBlockIndex(blockName) {\n      return this.gl.getUniformBlockIndex(this.handle, blockName);\n    }\n  }, {\n    key: \"getActiveUniformBlockParameter\",\n    value: function getActiveUniformBlockParameter(blockIndex, pname) {\n      return this.gl.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n    }\n  }, {\n    key: \"uniformBlockBinding\",\n    value: function uniformBlockBinding(blockIndex, blockBinding) {\n      this.gl.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n    }\n  }]);\n\n  return Program;\n}(Resource);\n\nexport { Program as default };\n//# sourceMappingURL=program.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL_PARAMETERS;\n\nimport { isWebGL2 } from '../utils';\nvar OES_element_index = 'OES_element_index';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nvar GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nvar GL_DONT_CARE = 0x1100;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nvar GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nvar GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nvar getWebGL2ValueOrZero = function getWebGL2ValueOrZero(gl) {\n  return !isWebGL2(gl) ? 0 : undefined;\n};\n\nvar WEBGL_PARAMETERS = (_WEBGL_PARAMETERS = {}, _defineProperty(_WEBGL_PARAMETERS, 3074, function (gl) {\n  return !isWebGL2(gl) ? 36064 : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_FRAGMENT_SHADER_DERIVATIVE_HINT, function (gl) {\n  return !isWebGL2(gl) ? GL_DONT_CARE : undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35977, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 32937, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, GL_GPU_DISJOINT_EXT, function (gl, getParameter) {\n  var ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n  return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_VENDOR_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_UNMASKED_RENDERER_WEBGL, function (gl, getParameter) {\n  var ext = gl.getExtension(WEBGL_debug_renderer_info);\n  return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n}), _defineProperty(_WEBGL_PARAMETERS, GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, function (gl, getParameter) {\n  var ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n  return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n}), _defineProperty(_WEBGL_PARAMETERS, 32883, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35071, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37447, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36063, function (gl, getParameter) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 35379, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35374, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35377, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34852, function (gl) {\n  if (!isWebGL2(gl)) {\n    var ext = gl.getExtension(WEBGL_draw_buffers);\n    return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n  }\n\n  return undefined;\n}), _defineProperty(_WEBGL_PARAMETERS, 36203, function (gl) {\n  return gl.getExtension(OES_element_index) ? 2147483647 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33001, function (gl) {\n  return gl.getExtension(OES_element_index) ? 16777216 : 65535;\n}), _defineProperty(_WEBGL_PARAMETERS, 33000, function (gl) {\n  return 16777216;\n}), _defineProperty(_WEBGL_PARAMETERS, 37157, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35373, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35657, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 36183, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37137, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 34045, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35978, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35979, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35968, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35376, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35375, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35659, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 37154, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35371, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35658, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35076, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35077, getWebGL2ValueOrZero), _defineProperty(_WEBGL_PARAMETERS, 35380, getWebGL2ValueOrZero), _WEBGL_PARAMETERS);\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  var limit = WEBGL_PARAMETERS[pname];\n  var value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  var result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _WEBGL2_CONTEXT_POLYF;\n\nimport { assert, isWebGL2 } from '../utils';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nvar OES_vertex_array_object = 'OES_vertex_array_object';\nvar ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nvar WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nvar EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nvar EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nvar ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport var WEBGL2_CONTEXT_POLYFILLS = (_WEBGL2_CONTEXT_POLYF = {}, _defineProperty(_WEBGL2_CONTEXT_POLYF, OES_vertex_array_object, {\n  meta: {\n    suffix: 'OES'\n  },\n  createVertexArray: function createVertexArray() {\n    assert(false, ERR_VAO_NOT_SUPPORTED);\n  },\n  deleteVertexArray: function deleteVertexArray() {},\n  bindVertexArray: function bindVertexArray() {},\n  isVertexArray: function isVertexArray() {\n    return false;\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, ANGLE_instanced_arrays, {\n  meta: {\n    suffix: 'ANGLE'\n  },\n  vertexAttribDivisor: function vertexAttribDivisor(location, divisor) {\n    assert(divisor === 0, 'WebGL instanced rendering not supported');\n  },\n  drawElementsInstanced: function drawElementsInstanced() {},\n  drawArraysInstanced: function drawArraysInstanced() {}\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, WEBGL_draw_buffers, {\n  meta: {\n    suffix: 'WEBGL'\n  },\n  drawBuffers: function drawBuffers() {\n    assert(false);\n  }\n}), _defineProperty(_WEBGL2_CONTEXT_POLYF, EXT_disjoint_timer_query, {\n  meta: {\n    suffix: 'EXT'\n  },\n  createQuery: function createQuery() {\n    assert(false);\n  },\n  deleteQuery: function deleteQuery() {\n    assert(false);\n  },\n  beginQuery: function beginQuery() {\n    assert(false);\n  },\n  endQuery: function endQuery() {},\n  getQuery: function getQuery(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryParameter: function getQueryParameter(handle, pname) {\n    return this.getQueryObject(handle, pname);\n  },\n  getQueryObject: function getQueryObject() {}\n}), _WEBGL2_CONTEXT_POLYF);\nexport var WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: function readBuffer(gl, originalFunc, attachment) {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: function getVertexAttrib(gl, originalFunc, location, pname) {\n    var _getExtensionData = getExtensionData(gl, ANGLE_instanced_arrays),\n        webgl2 = _getExtensionData.webgl2,\n        ext = _getExtensionData.ext;\n\n    var result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: function getProgramParameter(gl, originalFunc, program, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: function getInternalformatParameter(gl, originalFunc, target, format, pname) {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n  getTexParameter: function getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        var extensions = gl.luma.extensions;\n        var ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n  getParameter: getParameterPolyfill,\n  hint: function hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n};\n//# sourceMappingURL=polyfill-table.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar channelHandles = 1;\nvar animationHandles = 1;\nexport var Timeline = function () {\n  function Timeline() {\n    _classCallCheck(this, Timeline);\n\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  _createClass(Timeline, [{\n    key: \"addChannel\",\n    value: function addChannel(props) {\n      var _props$delay = props.delay,\n          delay = _props$delay === void 0 ? 0 : _props$delay,\n          _props$duration = props.duration,\n          duration = _props$duration === void 0 ? Number.POSITIVE_INFINITY : _props$duration,\n          _props$rate = props.rate,\n          rate = _props$rate === void 0 ? 1 : _props$rate,\n          _props$repeat = props.repeat,\n          repeat = _props$repeat === void 0 ? 1 : _props$repeat;\n      var handle = channelHandles++;\n      var channel = {\n        time: 0,\n        delay: delay,\n        duration: duration,\n        rate: rate,\n        repeat: repeat\n      };\n\n      this._setChannelTime(channel, this.time);\n\n      this.channels.set(handle, channel);\n      return handle;\n    }\n  }, {\n    key: \"removeChannel\",\n    value: function removeChannel(handle) {\n      this.channels[\"delete\"](handle);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.animations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              animationHandle = _step$value[0],\n              animation = _step$value[1];\n\n          if (animation.channel === handle) {\n            this.detachAnimation(animationHandle);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isFinished\",\n    value: function isFinished(handle) {\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return false;\n      }\n\n      return this.time >= channel.delay + channel.duration * channel.repeat;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime(handle) {\n      if (handle === undefined) {\n        return this.time;\n      }\n\n      var channel = this.channels.get(handle);\n\n      if (channel === undefined) {\n        return -1;\n      }\n\n      return channel.time;\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.time = Math.max(0, time);\n      var channels = this.channels.values();\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = channels[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var channel = _step2.value;\n\n          this._setChannelTime(channel, this.time);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var animations = this.animations.values();\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = animations[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var animationData = _step3.value;\n          var animation = animationData.animation,\n              _channel = animationData.channel;\n          animation.setTime(this.getTime(_channel));\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.playing = true;\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.playing = false;\n      this.lastEngineTime = -1;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setTime(0);\n    }\n  }, {\n    key: \"attachAnimation\",\n    value: function attachAnimation(animation, channelHandle) {\n      var animationHandle = animationHandles++;\n      this.animations.set(animationHandle, {\n        animation: animation,\n        channel: channelHandle\n      });\n      animation.setTime(this.getTime(channelHandle));\n      return animationHandle;\n    }\n  }, {\n    key: \"detachAnimation\",\n    value: function detachAnimation(handle) {\n      this.animations[\"delete\"](handle);\n    }\n  }, {\n    key: \"update\",\n    value: function update(engineTime) {\n      if (this.playing) {\n        if (this.lastEngineTime === -1) {\n          this.lastEngineTime = engineTime;\n        }\n\n        this.setTime(this.time + (engineTime - this.lastEngineTime));\n        this.lastEngineTime = engineTime;\n      }\n    }\n  }, {\n    key: \"_setChannelTime\",\n    value: function _setChannelTime(channel, time) {\n      var offsetTime = time - channel.delay;\n      var totalDuration = channel.duration * channel.repeat;\n\n      if (offsetTime >= totalDuration) {\n        channel.time = channel.duration * channel.rate;\n      } else {\n        channel.time = Math.max(0, offsetTime) % channel.duration;\n        channel.time *= channel.rate;\n      }\n    }\n  }]);\n\n  return Timeline;\n}();\n//# sourceMappingURL=timeline.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { load } from '@loaders.gl/core';\n\nvar Resource = function () {\n  function Resource(id, data, context) {\n    _classCallCheck(this, Resource);\n\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  _createClass(Resource, [{\n    key: \"subscribe\",\n    value: function subscribe(consumer) {\n      this._subscribers.add(consumer);\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(consumer) {\n      this._subscribers[\"delete\"](consumer);\n    }\n  }, {\n    key: \"inUse\",\n    value: function inUse() {\n      return this._subscribers.size > 0;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {}\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this = this;\n\n      return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(function () {\n        return _this.getData();\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, forceUpdate) {\n      var _this2 = this;\n\n      if (data === this._data && !forceUpdate) {\n        return;\n      }\n\n      this._data = data;\n      var loadCount = ++this._loadCount;\n      var loader = data;\n\n      if (typeof data === 'string') {\n        loader = load(data);\n      }\n\n      if (loader instanceof Promise) {\n        this.isLoaded = false;\n        this._loader = loader.then(function (result) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = null;\n            _this2._content = result;\n          }\n        })[\"catch\"](function (error) {\n          if (_this2._loadCount === loadCount) {\n            _this2.isLoaded = true;\n            _this2._error = error || true;\n          }\n        });\n      } else {\n        this.isLoaded = true;\n        this._error = null;\n        this._content = data;\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this._subscribers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var subscriber = _step.value;\n          subscriber.onChange(this.getData());\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Resource;\n}();\n\nexport { Resource as default };\n//# sourceMappingURL=resource.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Resource from './resource';\n\nvar ResourceManager = function () {\n  function ResourceManager(_ref) {\n    var gl = _ref.gl,\n        protocol = _ref.protocol;\n\n    _classCallCheck(this, ResourceManager);\n\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl: gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  _createClass(ResourceManager, [{\n    key: \"contains\",\n    value: function contains(resourceId) {\n      if (resourceId.startsWith(this.protocol)) {\n        return true;\n      }\n\n      return resourceId in this._resources;\n    }\n  }, {\n    key: \"add\",\n    value: function add(_ref2) {\n      var resourceId = _ref2.resourceId,\n          data = _ref2.data,\n          _ref2$forceUpdate = _ref2.forceUpdate,\n          forceUpdate = _ref2$forceUpdate === void 0 ? false : _ref2$forceUpdate,\n          _ref2$persistent = _ref2.persistent,\n          persistent = _ref2$persistent === void 0 ? true : _ref2$persistent;\n      var res = this._resources[resourceId];\n\n      if (res) {\n        res.setData(data, forceUpdate);\n      } else {\n        res = new Resource(resourceId, data, this._context);\n        this._resources[resourceId] = res;\n      }\n\n      res.persistent = persistent;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(resourceId) {\n      var res = this._resources[resourceId];\n\n      if (res) {\n        res[\"delete\"]();\n        delete this._resources[resourceId];\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(_ref3) {\n      var consumerId = _ref3.consumerId;\n      var consumer = this._consumers[consumerId];\n\n      if (consumer) {\n        for (var requestId in consumer) {\n          var request = consumer[requestId];\n\n          if (request.resource) {\n            request.resource.unsubscribe(request);\n          }\n        }\n\n        delete this._consumers[consumerId];\n        this.prune();\n      }\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(_ref4) {\n      var resourceId = _ref4.resourceId,\n          onChange = _ref4.onChange,\n          consumerId = _ref4.consumerId,\n          _ref4$requestId = _ref4.requestId,\n          requestId = _ref4$requestId === void 0 ? 'default' : _ref4$requestId;\n      var resources = this._resources,\n          protocol = this.protocol;\n\n      if (resourceId.startsWith(protocol)) {\n        resourceId = resourceId.replace(protocol, '');\n\n        if (!resources[resourceId]) {\n          this.add({\n            resourceId: resourceId,\n            data: null,\n            persistent: false\n          });\n        }\n      }\n\n      var res = resources[resourceId];\n\n      this._track(consumerId, requestId, res, onChange);\n\n      if (res) {\n        return res.getData();\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"prune\",\n    value: function prune() {\n      var _this = this;\n\n      if (!this._pruneRequest) {\n        this._pruneRequest = setTimeout(function () {\n          return _this._prune();\n        }, 0);\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this._resources) {\n        this._resources[key][\"delete\"]();\n      }\n    }\n  }, {\n    key: \"_track\",\n    value: function _track(consumerId, requestId, resource, onChange) {\n      var consumers = this._consumers;\n      var consumer = consumers[consumerId] = consumers[consumerId] || {};\n      var request = consumer[requestId] || {};\n\n      if (request.resource) {\n        request.resource.unsubscribe(request);\n        request.resource = null;\n        this.prune();\n      }\n\n      if (resource) {\n        consumer[requestId] = request;\n        request.onChange = onChange;\n        request.resource = resource;\n        resource.subscribe(request);\n      }\n    }\n  }, {\n    key: \"_prune\",\n    value: function _prune() {\n      this._pruneRequest = null;\n\n      for (var _i = 0, _Object$keys = Object.keys(this._resources); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n        var res = this._resources[key];\n\n        if (!res.persistent && !res.inUse()) {\n          res[\"delete\"]();\n          delete this._resources[key];\n        }\n      }\n    }\n  }]);\n\n  return ResourceManager;\n}();\n\nexport { ResourceManager as default };\n//# sourceMappingURL=resource-manager.js.map","var vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry;\\n\";\nvar fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs: vs,\n  fs: fs\n};\n//# sourceMappingURL=geometry.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport geometry from './misc/geometry';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nvar DEFAULT_MODULES = [geometry, project];\nvar SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  var programManager = ProgramManager.getDefaultProgramManager(gl);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = DEFAULT_MODULES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var shaderModule = _step.value;\n      programManager.addDefaultModule(shaderModule);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = SHADER_HOOKS[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var shaderHook = _step2.value;\n      programManager.addShaderHook(shaderHook);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Timeline } from '@luma.gl/core';\nimport Layer from './layer';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nvar TRACE_SET_LAYERS = 'layerManager.setLayers';\nvar TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nvar INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\n\nvar layerName = function layerName(layer) {\n  return layer instanceof Layer ? \"\".concat(layer) : !layer ? 'null' : 'invalid';\n};\n\nvar LayerManager = function () {\n  function LayerManager(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        deck = _ref.deck,\n        stats = _ref.stats,\n        viewport = _ref.viewport,\n        timeline = _ref.timeline;\n\n    _classCallCheck(this, LayerManager);\n\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl: gl,\n      protocol: 'deck://'\n    });\n    this.context = Object.assign({}, INITIAL_CONTEXT, {\n      layerManager: this,\n      gl: gl,\n      deck: deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    });\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this._onError = null;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(LayerManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.resourceManager.finalize();\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var layer = _step.value;\n\n          this._finalizeLayer(layer);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.layers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var layer = _step2.value;\n          var layerNeedsRedraw = layer.getNeedsRedraw(opts);\n          redraw = redraw || layerNeedsRedraw;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"needsUpdate\",\n    value: function needsUpdate() {\n      return this._needsUpdate;\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$layerIds = _ref2.layerIds,\n          layerIds = _ref2$layerIds === void 0 ? null : _ref2$layerIds;\n\n      return layerIds ? this.layers.filter(function (layer) {\n        return layerIds.find(function (layerId) {\n          return layer.id.indexOf(layerId) === 0;\n        });\n      }) : this.layers;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('debug' in props) {\n        this._debug = props.debug;\n      }\n\n      if ('userData' in props) {\n        this.context.userData = props.userData;\n      }\n\n      if ('layers' in props) {\n        this.setLayers(props.layers);\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"setLayers\",\n    value: function setLayers(newLayers) {\n      var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var shouldUpdate = forceUpdate || newLayers !== this.lastRenderedLayers;\n      debug(TRACE_SET_LAYERS, this, shouldUpdate, newLayers);\n\n      if (!shouldUpdate) {\n        return this;\n      }\n\n      this.lastRenderedLayers = newLayers;\n      newLayers = flatten(newLayers, Boolean);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = newLayers[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var layer = _step3.value;\n          layer.context = this.context;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      this._updateLayers(this.layers, newLayers);\n\n      return this;\n    }\n  }, {\n    key: \"updateLayers\",\n    value: function updateLayers() {\n      var reason = this.needsUpdate();\n\n      if (reason) {\n        this.setNeedsRedraw(\"updating layers: \".concat(reason));\n        var forceUpdate = true;\n        this.setLayers(this.lastRenderedLayers, forceUpdate);\n      }\n    }\n  }, {\n    key: \"activateViewport\",\n    value: function activateViewport(viewport) {\n      debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n      if (viewport) {\n        this.context.viewport = viewport;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_handleError\",\n    value: function _handleError(stage, error, layer) {\n      if (this._onError) {\n        this._onError(error, layer);\n      } else {\n        log.error(\"error during \".concat(stage, \" of \").concat(layerName(layer)), error)();\n      }\n    }\n  }, {\n    key: \"_updateLayers\",\n    value: function _updateLayers(oldLayers, newLayers) {\n      var oldLayerMap = {};\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = oldLayers[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var oldLayer = _step4.value;\n\n          if (oldLayerMap[oldLayer.id]) {\n            log.warn(\"Multiple old layers with same id \".concat(layerName(oldLayer)))();\n          } else {\n            oldLayerMap[oldLayer.id] = oldLayer;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      var generatedLayers = [];\n\n      this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n      this._finalizeOldLayers(oldLayerMap);\n\n      var needsUpdate = false;\n\n      for (var _i = 0, _generatedLayers = generatedLayers; _i < _generatedLayers.length; _i++) {\n        var layer = _generatedLayers[_i];\n\n        if (layer.hasUniformTransition()) {\n          needsUpdate = true;\n          break;\n        }\n      }\n\n      this._needsUpdate = needsUpdate;\n      this.layers = generatedLayers;\n    }\n  }, {\n    key: \"_updateSublayersRecursively\",\n    value: function _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = newLayers[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var newLayer = _step5.value;\n          newLayer.context = this.context;\n          var oldLayer = oldLayerMap[newLayer.id];\n\n          if (oldLayer === null) {\n            log.warn(\"Multiple new layers with same id \".concat(layerName(newLayer)))();\n          }\n\n          oldLayerMap[newLayer.id] = null;\n          var sublayers = null;\n\n          try {\n            if (this._debug && oldLayer !== newLayer) {\n              newLayer.validateProps();\n            }\n\n            if (!oldLayer) {\n              this._initializeLayer(newLayer);\n            } else {\n              this._transferLayerState(oldLayer, newLayer);\n\n              this._updateLayer(newLayer);\n            }\n\n            generatedLayers.push(newLayer);\n            sublayers = newLayer.isComposite && newLayer.getSubLayers();\n          } catch (err) {\n            this._handleError('matching', err, newLayer);\n          }\n\n          if (sublayers) {\n            this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5[\"return\"] != null) {\n            _iterator5[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_finalizeOldLayers\",\n    value: function _finalizeOldLayers(oldLayerMap) {\n      for (var layerId in oldLayerMap) {\n        var layer = oldLayerMap[layerId];\n\n        if (layer) {\n          this._finalizeLayer(layer);\n        }\n      }\n    }\n  }, {\n    key: \"_initializeLayer\",\n    value: function _initializeLayer(layer) {\n      try {\n        layer._initialize();\n\n        layer.lifecycle = LIFECYCLE.INITIALIZED;\n      } catch (err) {\n        this._handleError('initialization', err, layer);\n      }\n    }\n  }, {\n    key: \"_transferLayerState\",\n    value: function _transferLayerState(oldLayer, newLayer) {\n      newLayer._transferState(oldLayer);\n\n      newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n      if (newLayer !== oldLayer) {\n        oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n      }\n    }\n  }, {\n    key: \"_updateLayer\",\n    value: function _updateLayer(layer) {\n      try {\n        layer._update();\n      } catch (err) {\n        this._handleError('update', err, layer);\n      }\n    }\n  }, {\n    key: \"_finalizeLayer\",\n    value: function _finalizeLayer(layer) {\n      this._needsRedraw = this._needsRedraw || \"finalized \".concat(layerName(layer));\n      layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n      try {\n        layer._finalize();\n\n        layer.lifecycle = LIFECYCLE.FINALIZED;\n      } catch (err) {\n        this._handleError('finalization', err, layer);\n      }\n    }\n  }]);\n\n  return LayerManager;\n}();\n\nexport { LayerManager as default };\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (var key in a) {\n    var aValue = a[key];\n    var bValue = b[key];\n    var equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport assert from '../utils/assert';\nimport { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\n\nvar ViewManager = function () {\n  function ViewManager() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ViewManager);\n\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractiveStateChange: props.onInteractiveStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  _createClass(ViewManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var key in this.controllers) {\n        if (this.controllers[key]) {\n          this.controllers[key].finalize();\n        }\n      }\n\n      this.controllers = {};\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"setNeedsUpdate\",\n    value: function setNeedsUpdate(reason) {\n      this._needsUpdate = this._needsUpdate || reason;\n      this._needsRedraw = this._needsRedraw || reason;\n    }\n  }, {\n    key: \"updateViewStates\",\n    value: function updateViewStates() {\n      for (var viewId in this.controllers) {\n        var controller = this.controllers[viewId];\n\n        if (controller) {\n          controller.updateTransition();\n        }\n      }\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      if (rect) {\n        return this._viewports.filter(function (viewport) {\n          return viewport.containsPixel(rect);\n        });\n      }\n\n      return this._viewports;\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      var viewMap = {};\n      this.views.forEach(function (view) {\n        viewMap[view.id] = view;\n      });\n      return viewMap;\n    }\n  }, {\n    key: \"getView\",\n    value: function getView(viewOrViewId) {\n      return typeof viewOrViewId === 'string' ? this.views.find(function (view) {\n        return view.id === viewOrViewId;\n      }) : viewOrViewId;\n    }\n  }, {\n    key: \"getViewState\",\n    value: function getViewState(viewId) {\n      var view = this.getView(viewId);\n      var viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n      return view ? view.filterViewState(viewState) : viewState;\n    }\n  }, {\n    key: \"getViewport\",\n    value: function getViewport(viewId) {\n      return this._viewportMap[viewId];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz, opts) {\n      var viewports = this.getViewports();\n      var pixel = {\n        x: xyz[0],\n        y: xyz[1]\n      };\n\n      for (var i = viewports.length - 1; i >= 0; --i) {\n        var viewport = viewports[i];\n\n        if (viewport.containsPixel(pixel)) {\n          var p = xyz.slice();\n          p[0] -= viewport.x;\n          p[1] -= viewport.y;\n          return viewport.unproject(p, opts);\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('views' in props) {\n        this._setViews(props.views);\n      }\n\n      if ('viewState' in props) {\n        this._setViewState(props.viewState);\n      }\n\n      if ('width' in props || 'height' in props) {\n        this._setSize(props.width, props.height);\n      }\n\n      if (!this._isUpdating) {\n        this._update();\n      }\n    }\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this._isUpdating = true;\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      if (this._needsUpdate) {\n        this._needsUpdate = false;\n\n        this._rebuildViewports();\n      }\n\n      this._isUpdating = false;\n    }\n  }, {\n    key: \"_setSize\",\n    value: function _setSize(width, height) {\n      assert(Number.isFinite(width) && Number.isFinite(height));\n\n      if (width !== this.width || height !== this.height) {\n        this.width = width;\n        this.height = height;\n        this.setNeedsUpdate('Size changed');\n      }\n    }\n  }, {\n    key: \"_setViews\",\n    value: function _setViews(views) {\n      views = flatten(views, Boolean);\n\n      var viewsChanged = this._diffViews(views, this.views);\n\n      if (viewsChanged) {\n        this.setNeedsUpdate('views changed');\n      }\n\n      this.views = views;\n    }\n  }, {\n    key: \"_setViewState\",\n    value: function _setViewState(viewState) {\n      if (viewState) {\n        var viewStateChanged = !deepEqual(viewState, this.viewState);\n\n        if (viewStateChanged) {\n          this.setNeedsUpdate('viewState changed');\n        }\n\n        this.viewState = viewState;\n      } else {\n        log.warn('missing `viewState` or `initialViewState`')();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(viewId, event) {\n      event.viewId = viewId;\n\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }, {\n    key: \"_createController\",\n    value: function _createController(view, props) {\n      var Controller = props.type;\n      var controller = new Controller(_objectSpread({\n        timeline: this.timeline,\n        eventManager: this._eventManager,\n        onViewStateChange: this._onViewStateChange.bind(this, props.id),\n        onStateChange: this._eventCallbacks.onInteractiveStateChange,\n        makeViewport: view._getViewport.bind(view)\n      }, props));\n      return controller;\n    }\n  }, {\n    key: \"_updateController\",\n    value: function _updateController(view, viewState, viewport, controller) {\n      var controllerProps = view.controller;\n\n      if (controllerProps) {\n        controllerProps = _objectSpread({}, viewState, {}, view.props, {}, controllerProps, {\n          id: view.id,\n          x: viewport.x,\n          y: viewport.y,\n          width: viewport.width,\n          height: viewport.height\n        });\n\n        if (controller) {\n          controller.setProps(controllerProps);\n        } else {\n          controller = this._createController(view, controllerProps);\n        }\n\n        return controller;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_rebuildViewports\",\n    value: function _rebuildViewports() {\n      var width = this.width,\n          height = this.height,\n          views = this.views;\n      var oldControllers = this.controllers;\n      this._viewports = [];\n      this.controllers = {};\n\n      for (var i = views.length; i--;) {\n        var view = views[i];\n        var viewState = this.getViewState(view);\n        var viewport = view.makeViewport({\n          width: width,\n          height: height,\n          viewState: viewState\n        });\n        this.controllers[view.id] = this._updateController(view, viewState, viewport, oldControllers[view.id]);\n\n        this._viewports.unshift(viewport);\n      }\n\n      for (var id in oldControllers) {\n        if (oldControllers[id] && !this.controllers[id]) {\n          oldControllers[id].finalize();\n        }\n      }\n\n      this._buildViewportMap();\n    }\n  }, {\n    key: \"_buildViewportMap\",\n    value: function _buildViewportMap() {\n      var _this = this;\n\n      this._viewportMap = {};\n\n      this._viewports.forEach(function (viewport) {\n        if (viewport.id) {\n          _this._viewportMap[viewport.id] = _this._viewportMap[viewport.id] || viewport;\n        }\n      });\n    }\n  }, {\n    key: \"_diffViews\",\n    value: function _diffViews(newViews, oldViews) {\n      if (newViews.length !== oldViews.length) {\n        return true;\n      }\n\n      return newViews.some(function (_, i) {\n        return !newViews[i].equals(oldViews[i]);\n      });\n    }\n  }]);\n\n  return ViewManager;\n}();\n\nexport { ViewManager as default };\n//# sourceMappingURL=view-manager.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (_typeof(value)) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      var match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        var relative = match[2] === '%';\n        var position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative: relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\n\nvar View = function () {\n  function View() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, View);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? null : _props$id,\n        _props$x = props.x,\n        x = _props$x === void 0 ? 0 : _props$x,\n        _props$y = props.y,\n        y = _props$y === void 0 ? 0 : _props$y,\n        _props$width = props.width,\n        width = _props$width === void 0 ? '100%' : _props$width,\n        _props$height = props.height,\n        height = _props$height === void 0 ? '100%' : _props$height,\n        _props$projectionMatr = props.projectionMatrix,\n        projectionMatrix = _props$projectionMatr === void 0 ? null : _props$projectionMatr,\n        _props$fovy = props.fovy,\n        fovy = _props$fovy === void 0 ? 50 : _props$fovy,\n        _props$near = props.near,\n        near = _props$near === void 0 ? 0.1 : _props$near,\n        _props$far = props.far,\n        far = _props$far === void 0 ? 1000 : _props$far,\n        _props$modelMatrix = props.modelMatrix,\n        modelMatrix = _props$modelMatrix === void 0 ? null : _props$modelMatrix,\n        _props$viewportInstan = props.viewportInstance,\n        viewportInstance = _props$viewportInstan === void 0 ? null : _props$viewportInstan,\n        _props$type = props.type,\n        type = _props$type === void 0 ? Viewport : _props$type;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = Object.assign({}, props, {\n      id: this.id,\n      projectionMatrix: projectionMatrix,\n      fovy: fovy,\n      near: near,\n      far: far,\n      modelMatrix: modelMatrix\n    });\n\n    this._parseDimensions({\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(View, [{\n    key: \"equals\",\n    value: function equals(view) {\n      if (this === view) {\n        return true;\n      }\n\n      if (this.viewportInstance) {\n        return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n      }\n\n      var viewChanged = deepEqual(this.props, view.props);\n      return viewChanged;\n    }\n  }, {\n    key: \"makeViewport\",\n    value: function makeViewport(_ref) {\n      var width = _ref.width,\n          height = _ref.height,\n          viewState = _ref.viewState;\n\n      if (this.viewportInstance) {\n        return this.viewportInstance;\n      }\n\n      viewState = this.filterViewState(viewState);\n      var viewportDimensions = this.getDimensions({\n        width: width,\n        height: height\n      });\n\n      var props = _objectSpread({}, viewState, {}, this.props, {}, viewportDimensions);\n\n      return this._getViewport(props);\n    }\n  }, {\n    key: \"getViewStateId\",\n    value: function getViewStateId() {\n      switch (_typeof(this.props.viewState)) {\n        case 'string':\n          return this.props.viewState;\n\n        case 'object':\n          return this.props.viewState && this.props.viewState.id;\n\n        default:\n          return this.id;\n      }\n    }\n  }, {\n    key: \"filterViewState\",\n    value: function filterViewState(viewState) {\n      if (this.props.viewState && _typeof(this.props.viewState) === 'object') {\n        if (!this.props.viewState.id) {\n          return this.props.viewState;\n        }\n\n        var newViewState = Object.assign({}, viewState);\n\n        for (var key in this.props.viewState) {\n          if (key !== 'id') {\n            newViewState[key] = this.props.viewState[key];\n          }\n        }\n\n        return newViewState;\n      }\n\n      return viewState;\n    }\n  }, {\n    key: \"getDimensions\",\n    value: function getDimensions(_ref2) {\n      var width = _ref2.width,\n          height = _ref2.height;\n      return {\n        x: getPosition(this._x, width),\n        y: getPosition(this._y, height),\n        width: getPosition(this._width, width),\n        height: getPosition(this._height, height)\n      };\n    }\n  }, {\n    key: \"_getControllerProps\",\n    value: function _getControllerProps(defaultOpts) {\n      var opts = this.props.controller;\n\n      if (!opts) {\n        return null;\n      }\n\n      if (opts === true) {\n        return defaultOpts;\n      }\n\n      if (typeof opts === 'function') {\n        opts = {\n          type: opts\n        };\n      }\n\n      return Object.assign({}, defaultOpts, opts);\n    }\n  }, {\n    key: \"_getViewport\",\n    value: function _getViewport(props) {\n      var ViewportType = this.type;\n      return new ViewportType(props);\n    }\n  }, {\n    key: \"_parseDimensions\",\n    value: function _parseDimensions(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          width = _ref3.width,\n          height = _ref3.height;\n      this._x = parsePosition(x);\n      this._y = parsePosition(y);\n      this._width = parsePosition(width);\n      this._height = parsePosition(height);\n    }\n  }]);\n\n  return View;\n}();\n\nexport { View as default };\n//# sourceMappingURL=view.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { equals } from 'math.gl';\nimport assert from '../utils/assert';\n\nvar TransitionInterpolator = function () {\n  function TransitionInterpolator() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TransitionInterpolator);\n\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    var _opts = opts,\n        compare = _opts.compare,\n        extract = _opts.extract,\n        required = _opts.required;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  _createClass(TransitionInterpolator, [{\n    key: \"arePropsEqual\",\n    value: function arePropsEqual(currentProps, nextProps) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = (this._propsToCompare || Object.keys(nextProps))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"initializeProps\",\n    value: function initializeProps(startProps, endProps) {\n      var result;\n\n      if (this._propsToExtract) {\n        var startViewStateProps = {};\n        var endViewStateProps = {};\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this._propsToExtract[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var key = _step2.value;\n            startViewStateProps[key] = startProps[key];\n            endViewStateProps[key] = endProps[key];\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        result = {\n          start: startViewStateProps,\n          end: endViewStateProps\n        };\n      } else {\n        result = {\n          start: startProps,\n          end: endProps\n        };\n      }\n\n      this._checkRequiredProps(result.start);\n\n      this._checkRequiredProps(result.end);\n\n      return result;\n    }\n  }, {\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      return endProps;\n    }\n  }, {\n    key: \"getDuration\",\n    value: function getDuration(startProps, endProps) {\n      return endProps.transitionDuration;\n    }\n  }, {\n    key: \"_checkRequiredProps\",\n    value: function _checkRequiredProps(props) {\n      if (!this._requiredProps) {\n        return;\n      }\n\n      this._requiredProps.forEach(function (propName) {\n        var value = props[propName];\n        assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n      });\n    }\n  }]);\n\n  return TransitionInterpolator;\n}();\n\nexport { TransitionInterpolator as default };\n//# sourceMappingURL=transition-interpolator.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nvar DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nvar DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\n\nvar LinearInterpolator = function (_TransitionInterpolat) {\n  _inherits(LinearInterpolator, _TransitionInterpolat);\n\n  function LinearInterpolator(transitionProps) {\n    _classCallCheck(this, LinearInterpolator);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LinearInterpolator).call(this, transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    }));\n  }\n\n  _createClass(LinearInterpolator, [{\n    key: \"interpolateProps\",\n    value: function interpolateProps(startProps, endProps, t) {\n      var viewport = {};\n\n      for (var key in endProps) {\n        viewport[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n      }\n\n      return viewport;\n    }\n  }]);\n\n  return LinearInterpolator;\n}(TransitionInterpolator);\n\nexport { LinearInterpolator as default };\n//# sourceMappingURL=linear-interpolator.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport Transition from '../transitions/transition';\n\nvar noop = function noop() {};\n\nexport var TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nvar DEFAULT_PROPS = {\n  transitionDuration: 0,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\n\nvar TransitionManager = function () {\n  function TransitionManager(ControllerState) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransitionManager);\n\n    this.ControllerState = ControllerState;\n    this.props = Object.assign({}, DEFAULT_PROPS, props);\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  _createClass(TransitionManager, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.transition.cancel();\n    }\n  }, {\n    key: \"getViewportInTransition\",\n    value: function getViewportInTransition() {\n      return this.propsInTransition;\n    }\n  }, {\n    key: \"processViewStateChange\",\n    value: function processViewStateChange(nextProps) {\n      var transitionTriggered = false;\n      var currentProps = this.props;\n      nextProps = Object.assign({}, DEFAULT_PROPS, nextProps);\n      this.props = nextProps;\n\n      if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n        return transitionTriggered;\n      }\n\n      if (this._isTransitionEnabled(nextProps)) {\n        var _this$transition$sett = this.transition.settings,\n            interruption = _this$transition$sett.interruption,\n            endProps = _this$transition$sett.endProps;\n        var startProps = Object.assign({}, currentProps, interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps);\n\n        this._triggerTransition(startProps, nextProps);\n\n        transitionTriggered = true;\n      } else {\n        this.transition.cancel();\n      }\n\n      return transitionTriggered;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transition.update();\n    }\n  }, {\n    key: \"_isTransitionEnabled\",\n    value: function _isTransitionEnabled(props) {\n      var transitionDuration = props.transitionDuration,\n          transitionInterpolator = props.transitionInterpolator;\n      return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n    }\n  }, {\n    key: \"_isUpdateDueToCurrentTransition\",\n    value: function _isUpdateDueToCurrentTransition(props) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_shouldIgnoreViewportChange\",\n    value: function _shouldIgnoreViewportChange(currentProps, nextProps) {\n      if (this.transition.inProgress) {\n        return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n      } else if (this._isTransitionEnabled(nextProps)) {\n        return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_triggerTransition\",\n    value: function _triggerTransition(startProps, endProps) {\n      var startViewstate = new this.ControllerState(startProps);\n      var endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n      var transitionInterpolator = endProps.transitionInterpolator;\n      var duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n      if (duration === 0) {\n        return;\n      }\n\n      var initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n      this.propsInTransition = {};\n      this.duration = duration;\n      this.transition.start({\n        duration: duration,\n        easing: endProps.transitionEasing,\n        interpolator: endProps.transitionInterpolator,\n        interruption: endProps.transitionInterruption,\n        startProps: initialProps.start,\n        endProps: initialProps.end,\n        onStart: endProps.onTransitionStart,\n        onUpdate: this._onTransitionUpdate,\n        onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n        onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n      });\n      this.updateTransition();\n    }\n  }, {\n    key: \"_onTransitionEnd\",\n    value: function _onTransitionEnd(callback) {\n      var _this = this;\n\n      return function (transition) {\n        _this.propsInTransition = null;\n        callback(transition);\n      };\n    }\n  }, {\n    key: \"_onTransitionUpdate\",\n    value: function _onTransitionUpdate(transition) {\n      var time = transition.time,\n          _transition$settings = transition.settings,\n          interpolator = _transition$settings.interpolator,\n          startProps = _transition$settings.startProps,\n          endProps = _transition$settings.endProps,\n          duration = _transition$settings.duration,\n          easing = _transition$settings.easing;\n      var t = easing(time / duration);\n      var viewport = interpolator.interpolateProps(startProps, endProps, t);\n      this.propsInTransition = new this.ControllerState(Object.assign({}, this.props, viewport)).getViewportProps();\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState: this.propsInTransition,\n          interactionState: {\n            inTransition: true\n          },\n          oldViewState: this.props\n        });\n      }\n    }\n  }]);\n\n  return TransitionManager;\n}();\n\nexport { TransitionManager as default };\nTransitionManager.defaultProps = DEFAULT_PROPS;\n//# sourceMappingURL=transition-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport TransitionManager from './transition-manager';\nimport assert from '../utils/assert';\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nvar ZOOM_ACCEL = 0.01;\nvar EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\n\nvar Controller = function () {\n  function Controller(ControllerState) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Controller);\n\n    assert(ControllerState);\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, options);\n    this._events = null;\n    this._state = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.invertPan = false;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  _createClass(Controller, [{\n    key: \"finalize\",\n    value: function finalize() {\n      for (var eventName in this._events) {\n        if (this._events[eventName]) {\n          this.eventManager.off(eventName, this.handleEvent);\n        }\n      }\n\n      this.transitionManager.finalize();\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var ControllerState = this.ControllerState;\n      this.controllerState = new ControllerState(_objectSpread({\n        makeViewport: this.makeViewport\n      }, this.controllerStateProps, {}, this._state));\n\n      switch (event.type) {\n        case 'panstart':\n          return this._onPanStart(event);\n\n        case 'panmove':\n          return this._onPan(event);\n\n        case 'panend':\n          return this._onPanEnd(event);\n\n        case 'pinchstart':\n          return this._onPinchStart(event);\n\n        case 'pinchmove':\n          return this._onPinch(event);\n\n        case 'pinchend':\n          return this._onPinchEnd(event);\n\n        case 'doubletap':\n          return this._onDoubleTap(event);\n\n        case 'wheel':\n          return this._onWheel(event);\n\n        case 'keydown':\n          return this._onKeyDown(event);\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(event) {\n      var _this$controllerState = this.controllerStateProps,\n          x = _this$controllerState.x,\n          y = _this$controllerState.y;\n      var offsetCenter = event.offsetCenter;\n      return [offsetCenter.x - x, offsetCenter.y - y];\n    }\n  }, {\n    key: \"isPointInBounds\",\n    value: function isPointInBounds(pos, event) {\n      var _this$controllerState2 = this.controllerStateProps,\n          width = _this$controllerState2.width,\n          height = _this$controllerState2.height;\n\n      if (event && event.handled) {\n        return false;\n      }\n\n      var inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n      if (inside && event) {\n        event.stopPropagation();\n      }\n\n      return inside;\n    }\n  }, {\n    key: \"isFunctionKeyPressed\",\n    value: function isFunctionKeyPressed(event) {\n      var srcEvent = event.srcEvent;\n      return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return this._state.isDragging;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('onViewStateChange' in props) {\n        this.onViewStateChange = props.onViewStateChange;\n      }\n\n      if ('onStateChange' in props) {\n        this.onStateChange = props.onStateChange;\n      }\n\n      if ('makeViewport' in props) {\n        this.makeViewport = props.makeViewport;\n      }\n\n      this.controllerStateProps = props;\n\n      if ('eventManager' in props && this.eventManager !== props.eventManager) {\n        this.eventManager = props.eventManager;\n        this._events = {};\n        this.toggleEvents(this._customEvents, true);\n      }\n\n      this.transitionManager.processViewStateChange(this.controllerStateProps);\n      var _props$scrollZoom = props.scrollZoom,\n          scrollZoom = _props$scrollZoom === void 0 ? true : _props$scrollZoom,\n          _props$dragPan = props.dragPan,\n          dragPan = _props$dragPan === void 0 ? true : _props$dragPan,\n          _props$dragRotate = props.dragRotate,\n          dragRotate = _props$dragRotate === void 0 ? true : _props$dragRotate,\n          _props$doubleClickZoo = props.doubleClickZoom,\n          doubleClickZoom = _props$doubleClickZoo === void 0 ? true : _props$doubleClickZoo,\n          _props$touchZoom = props.touchZoom,\n          touchZoom = _props$touchZoom === void 0 ? true : _props$touchZoom,\n          _props$touchRotate = props.touchRotate,\n          touchRotate = _props$touchRotate === void 0 ? false : _props$touchRotate,\n          _props$keyboard = props.keyboard,\n          keyboard = _props$keyboard === void 0 ? true : _props$keyboard;\n      var isInteractive = Boolean(this.onViewStateChange);\n      this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n      this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n      this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n      this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n      this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n      this.scrollZoom = scrollZoom;\n      this.dragPan = dragPan;\n      this.dragRotate = dragRotate;\n      this.doubleClickZoom = doubleClickZoom;\n      this.touchZoom = touchZoom;\n      this.touchRotate = touchRotate;\n      this.keyboard = keyboard;\n    }\n  }, {\n    key: \"updateTransition\",\n    value: function updateTransition() {\n      this.transitionManager.updateTransition();\n    }\n  }, {\n    key: \"toggleEvents\",\n    value: function toggleEvents(eventNames, enabled) {\n      var _this = this;\n\n      if (this.eventManager) {\n        eventNames.forEach(function (eventName) {\n          if (_this._events[eventName] !== enabled) {\n            _this._events[eventName] = enabled;\n\n            if (enabled) {\n              _this.eventManager.on(eventName, _this.handleEvent);\n            } else {\n              _this.eventManager.off(eventName, _this.handleEvent);\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"updateViewport\",\n    value: function updateViewport(newControllerState) {\n      var extraProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var interactionState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var viewState = Object.assign({}, newControllerState.getViewportProps(), extraProps);\n      var changed = this.controllerState !== newControllerState;\n\n      if (changed) {\n        var oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n        if (this.onViewStateChange) {\n          this.onViewStateChange({\n            viewState: viewState,\n            interactionState: interactionState,\n            oldViewState: oldViewState\n          });\n        }\n      }\n\n      Object.assign(this._state, newControllerState.getInteractiveState(), interactionState);\n\n      if (this.onStateChange) {\n        this.onStateChange(this._state);\n      }\n    }\n  }, {\n    key: \"_onPanStart\",\n    value: function _onPanStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.panStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPan\",\n    value: function _onPan(event) {\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n      alternateMode = this.invertPan ? !alternateMode : alternateMode;\n      return alternateMode ? this._onPanMove(event) : this._onPanRotate(event);\n    }\n  }, {\n    key: \"_onPanEnd\",\n    value: function _onPanEnd(event) {\n      var newControllerState = this.controllerState.panEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanMove\",\n    value: function _onPanMove(event) {\n      if (!this.dragPan) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n      var newControllerState = this.controllerState.pan({\n        pos: pos\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var deltaX = event.deltaX,\n          deltaY = event.deltaY;\n\n      var _this$controllerState3 = this.controllerState.getViewportProps(),\n          width = _this$controllerState3.width,\n          height = _this$controllerState3.height;\n\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = deltaY / height;\n      var newControllerState = this.controllerState.rotate({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(event) {\n      if (!this.scrollZoom) {\n        return false;\n      }\n\n      event.preventDefault();\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var delta = event.delta;\n      var scale = 2 / (1 + Math.exp(-Math.abs(delta * ZOOM_ACCEL)));\n\n      if (delta < 0 && scale !== 0) {\n        scale = 1 / scale;\n      }\n\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: scale\n      });\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isZooming: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinchStart\",\n    value: function _onPinchStart(event) {\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState.zoomStart({\n        pos: pos\n      }).rotateStart({\n        pos: pos\n      });\n      this._state.startPinchRotation = event.rotation;\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinch\",\n    value: function _onPinch(event) {\n      if (!this.touchZoom && !this.touchRotate) {\n        return false;\n      }\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var newControllerState = this.controllerState;\n\n      if (this.touchZoom) {\n        var scale = event.scale;\n        var pos = this.getCenter(event);\n        newControllerState = newControllerState.zoom({\n          pos: pos,\n          scale: scale\n        });\n      }\n\n      if (this.touchRotate) {\n        var rotation = event.rotation;\n        var startPinchRotation = this._state.startPinchRotation;\n        newControllerState = newControllerState.rotate({\n          deltaScaleX: -(rotation - startPinchRotation) / 180\n        });\n      }\n\n      this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: this.touchRotate\n      });\n      return true;\n    }\n  }, {\n    key: \"_onPinchEnd\",\n    value: function _onPinchEnd(event) {\n      var newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this._state.startPinchRotation = 0;\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n      return true;\n    }\n  }, {\n    key: \"_onDoubleTap\",\n    value: function _onDoubleTap(event) {\n      if (!this.doubleClickZoom) {\n        return false;\n      }\n\n      var pos = this.getCenter(event);\n\n      if (!this.isPointInBounds(pos, event)) {\n        return false;\n      }\n\n      var isZoomOut = this.isFunctionKeyPressed(event);\n      var newControllerState = this.controllerState.zoom({\n        pos: pos,\n        scale: isZoomOut ? 0.5 : 2\n      });\n      this.updateViewport(newControllerState, this._getTransitionProps(), {\n        isZooming: true,\n        isPanning: true\n      });\n      return true;\n    }\n  }, {\n    key: \"_onKeyDown\",\n    value: function _onKeyDown(event) {\n      if (!this.keyboard) {\n        return false;\n      }\n\n      var funcKey = this.isFunctionKeyPressed(event);\n      var controllerState = this.controllerState;\n      var newControllerState;\n      var interactionState = {};\n\n      switch (event.srcEvent.keyCode) {\n        case 189:\n          newControllerState = funcKey ? controllerState.zoomOut().zoomOut() : controllerState.zoomOut();\n          interactionState.isZooming = true;\n          break;\n\n        case 187:\n          newControllerState = funcKey ? controllerState.zoomIn().zoomIn() : controllerState.zoomIn();\n          interactionState.isZooming = true;\n          break;\n\n        case 37:\n          if (funcKey) {\n            newControllerState = controllerState.rotateLeft();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveLeft();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 39:\n          if (funcKey) {\n            newControllerState = controllerState.rotateRight();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveRight();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 38:\n          if (funcKey) {\n            newControllerState = controllerState.rotateUp();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveUp();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        case 40:\n          if (funcKey) {\n            newControllerState = controllerState.rotateDown();\n            interactionState.isRotating = true;\n          } else {\n            newControllerState = controllerState.moveDown();\n            interactionState.isPanning = true;\n          }\n\n          break;\n\n        default:\n          return false;\n      }\n\n      this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n      return true;\n    }\n  }, {\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return NO_TRANSITION_PROPS;\n    }\n  }, {\n    key: \"events\",\n    set: function set(customEvents) {\n      this.toggleEvents(this._customEvents, false);\n      this.toggleEvents(customEvents, true);\n      this._customEvents = customEvents;\n      this.setProps(this.controllerStateProps);\n    }\n  }]);\n\n  return Controller;\n}();\n\nexport { Controller as default };\n//# sourceMappingURL=controller.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport assert from '../utils/assert';\n\nvar ViewState = function () {\n  function ViewState(opts) {\n    _classCallCheck(this, ViewState);\n\n    assert(Number.isFinite(opts.width), '`width` must be supplied');\n    assert(Number.isFinite(opts.height), '`height` must be supplied');\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  _createClass(ViewState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      return props;\n    }\n  }]);\n\n  return ViewState;\n}();\n\nexport { ViewState as default };\n//# sourceMappingURL=view-state.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nimport { TRANSITION_EVENTS } from './transition-manager';\nvar PITCH_MOUSE_THRESHOLD = 5;\nvar PITCH_ACCEL = 1.2;\nvar LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: function transitionEasing(t) {\n    return t;\n  },\n  transitionInterpolator: new LinearInterpolator(),\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nvar NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nexport var MAPBOX_LIMITS = {\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nvar DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5\n};\nexport var MapState = function (_ViewState) {\n  _inherits(MapState, _ViewState);\n\n  function MapState() {\n    var _this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        makeViewport = _ref.makeViewport,\n        width = _ref.width,\n        height = _ref.height,\n        latitude = _ref.latitude,\n        longitude = _ref.longitude,\n        zoom = _ref.zoom,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? DEFAULT_STATE.bearing : _ref$bearing,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? DEFAULT_STATE.pitch : _ref$pitch,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? DEFAULT_STATE.altitude : _ref$altitude,\n        _ref$maxZoom = _ref.maxZoom,\n        maxZoom = _ref$maxZoom === void 0 ? MAPBOX_LIMITS.maxZoom : _ref$maxZoom,\n        _ref$minZoom = _ref.minZoom,\n        minZoom = _ref$minZoom === void 0 ? MAPBOX_LIMITS.minZoom : _ref$minZoom,\n        _ref$maxPitch = _ref.maxPitch,\n        maxPitch = _ref$maxPitch === void 0 ? MAPBOX_LIMITS.maxPitch : _ref$maxPitch,\n        _ref$minPitch = _ref.minPitch,\n        minPitch = _ref$minPitch === void 0 ? MAPBOX_LIMITS.minPitch : _ref$minPitch,\n        startPanLngLat = _ref.startPanLngLat,\n        startZoomLngLat = _ref.startZoomLngLat,\n        startBearing = _ref.startBearing,\n        startPitch = _ref.startPitch,\n        startZoom = _ref.startZoom;\n\n    _classCallCheck(this, MapState);\n\n    assert(Number.isFinite(longitude), '`longitude` must be supplied');\n    assert(Number.isFinite(latitude), '`latitude` must be supplied');\n    assert(Number.isFinite(zoom), '`zoom` must be supplied');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MapState).call(this, {\n      width: width,\n      height: height,\n      latitude: latitude,\n      longitude: longitude,\n      zoom: zoom,\n      bearing: bearing,\n      pitch: pitch,\n      altitude: altitude,\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      maxPitch: maxPitch,\n      minPitch: minPitch\n    }));\n    _this._interactiveState = {\n      startPanLngLat: startPanLngLat,\n      startZoomLngLat: startZoomLngLat,\n      startBearing: startBearing,\n      startPitch: startPitch,\n      startZoom: startZoom\n    };\n    _this.makeViewport = makeViewport;\n    return _this;\n  }\n\n  _createClass(MapState, [{\n    key: \"getViewportProps\",\n    value: function getViewportProps() {\n      return this._viewportProps;\n    }\n  }, {\n    key: \"getInteractiveState\",\n    value: function getInteractiveState() {\n      return this._interactiveState;\n    }\n  }, {\n    key: \"panStart\",\n    value: function panStart(_ref2) {\n      var pos = _ref2.pos;\n      return this._getUpdatedState({\n        startPanLngLat: this._unproject(pos)\n      });\n    }\n  }, {\n    key: \"pan\",\n    value: function pan(_ref3) {\n      var pos = _ref3.pos,\n          startPos = _ref3.startPos;\n\n      var startPanLngLat = this._interactiveState.startPanLngLat || this._unproject(startPos);\n\n      if (!startPanLngLat) {\n        return this;\n      }\n\n      var _this$_calculateNewLn = this._calculateNewLngLat({\n        startPanLngLat: startPanLngLat,\n        pos: pos\n      }),\n          _this$_calculateNewLn2 = _slicedToArray(_this$_calculateNewLn, 2),\n          longitude = _this$_calculateNewLn2[0],\n          latitude = _this$_calculateNewLn2[1];\n\n      return this._getUpdatedState({\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"panEnd\",\n    value: function panEnd() {\n      return this._getUpdatedState({\n        startPanLngLat: null\n      });\n    }\n  }, {\n    key: \"rotateStart\",\n    value: function rotateStart(_ref4) {\n      var pos = _ref4.pos;\n      return this._getUpdatedState({\n        startBearing: this._viewportProps.bearing,\n        startPitch: this._viewportProps.pitch\n      });\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(_ref5) {\n      var _ref5$deltaScaleX = _ref5.deltaScaleX,\n          deltaScaleX = _ref5$deltaScaleX === void 0 ? 0 : _ref5$deltaScaleX,\n          _ref5$deltaScaleY = _ref5.deltaScaleY,\n          deltaScaleY = _ref5$deltaScaleY === void 0 ? 0 : _ref5$deltaScaleY;\n      var _this$_interactiveSta = this._interactiveState,\n          startBearing = _this$_interactiveSta.startBearing,\n          startPitch = _this$_interactiveSta.startPitch;\n\n      if (!Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n        return this;\n      }\n\n      var _this$_calculateNewPi = this._calculateNewPitchAndBearing({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY,\n        startBearing: startBearing,\n        startPitch: startPitch\n      }),\n          pitch = _this$_calculateNewPi.pitch,\n          bearing = _this$_calculateNewPi.bearing;\n\n      return this._getUpdatedState({\n        bearing: bearing,\n        pitch: pitch\n      });\n    }\n  }, {\n    key: \"rotateEnd\",\n    value: function rotateEnd() {\n      return this._getUpdatedState({\n        startBearing: null,\n        startPitch: null\n      });\n    }\n  }, {\n    key: \"zoomStart\",\n    value: function zoomStart(_ref6) {\n      var pos = _ref6.pos;\n      return this._getUpdatedState({\n        startZoomLngLat: this._unproject(pos),\n        startZoom: this._viewportProps.zoom\n      });\n    }\n  }, {\n    key: \"zoom\",\n    value: function zoom(_ref7) {\n      var pos = _ref7.pos,\n          startPos = _ref7.startPos,\n          scale = _ref7.scale;\n      var _this$_interactiveSta2 = this._interactiveState,\n          startZoom = _this$_interactiveSta2.startZoom,\n          startZoomLngLat = _this$_interactiveSta2.startZoomLngLat;\n\n      if (!Number.isFinite(startZoom)) {\n        startZoom = this._viewportProps.zoom;\n        startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n      }\n\n      var zoom = this._calculateNewZoom({\n        scale: scale,\n        startZoom: startZoom\n      });\n\n      var zoomedViewport = this.makeViewport(_objectSpread({}, this._viewportProps, {\n        zoom: zoom\n      }));\n\n      var _zoomedViewport$getMa = zoomedViewport.getMapCenterByLngLatPosition({\n        lngLat: startZoomLngLat,\n        pos: pos\n      }),\n          _zoomedViewport$getMa2 = _slicedToArray(_zoomedViewport$getMa, 2),\n          longitude = _zoomedViewport$getMa2[0],\n          latitude = _zoomedViewport$getMa2[1];\n\n      return this._getUpdatedState({\n        zoom: zoom,\n        longitude: longitude,\n        latitude: latitude\n      });\n    }\n  }, {\n    key: \"zoomEnd\",\n    value: function zoomEnd() {\n      return this._getUpdatedState({\n        startZoomLngLat: null,\n        startZoom: null\n      });\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      return this._zoomFromCenter(2);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      return this._zoomFromCenter(0.5);\n    }\n  }, {\n    key: \"moveLeft\",\n    value: function moveLeft() {\n      return this._panFromCenter([100, 0]);\n    }\n  }, {\n    key: \"moveRight\",\n    value: function moveRight() {\n      return this._panFromCenter([-100, 0]);\n    }\n  }, {\n    key: \"moveUp\",\n    value: function moveUp() {\n      return this._panFromCenter([0, 100]);\n    }\n  }, {\n    key: \"moveDown\",\n    value: function moveDown() {\n      return this._panFromCenter([0, -100]);\n    }\n  }, {\n    key: \"rotateLeft\",\n    value: function rotateLeft() {\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing - 15\n      });\n    }\n  }, {\n    key: \"rotateRight\",\n    value: function rotateRight() {\n      return this._getUpdatedState({\n        bearing: this._viewportProps.bearing + 15\n      });\n    }\n  }, {\n    key: \"rotateUp\",\n    value: function rotateUp() {\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch + 10\n      });\n    }\n  }, {\n    key: \"rotateDown\",\n    value: function rotateDown() {\n      return this._getUpdatedState({\n        pitch: this._viewportProps.pitch - 10\n      });\n    }\n  }, {\n    key: \"shortestPathFrom\",\n    value: function shortestPathFrom(viewState) {\n      var fromProps = viewState.getViewportProps();\n      var props = Object.assign({}, this._viewportProps);\n      var bearing = props.bearing,\n          longitude = props.longitude;\n\n      if (Math.abs(bearing - fromProps.bearing) > 180) {\n        props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n      }\n\n      if (Math.abs(longitude - fromProps.longitude) > 180) {\n        props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n      }\n\n      return props;\n    }\n  }, {\n    key: \"_zoomFromCenter\",\n    value: function _zoomFromCenter(scale) {\n      var _this$_viewportProps = this._viewportProps,\n          width = _this$_viewportProps.width,\n          height = _this$_viewportProps.height;\n      return this.zoom({\n        pos: [width / 2, height / 2],\n        scale: scale\n      });\n    }\n  }, {\n    key: \"_panFromCenter\",\n    value: function _panFromCenter(offset) {\n      var _this$_viewportProps2 = this._viewportProps,\n          width = _this$_viewportProps2.width,\n          height = _this$_viewportProps2.height;\n      return this.pan({\n        startPos: [width / 2, height / 2],\n        pos: [width / 2 + offset[0], height / 2 + offset[1]]\n      });\n    }\n  }, {\n    key: \"_getUpdatedState\",\n    value: function _getUpdatedState(newProps) {\n      return new this.constructor(_objectSpread({\n        makeViewport: this.makeViewport\n      }, this._viewportProps, {}, this._interactiveState, {}, newProps));\n    }\n  }, {\n    key: \"_applyConstraints\",\n    value: function _applyConstraints(props) {\n      var maxZoom = props.maxZoom,\n          minZoom = props.minZoom,\n          zoom = props.zoom;\n      props.zoom = clamp(zoom, minZoom, maxZoom);\n      var maxPitch = props.maxPitch,\n          minPitch = props.minPitch,\n          pitch = props.pitch;\n      props.pitch = clamp(pitch, minPitch, maxPitch);\n      Object.assign(props, normalizeViewportProps(props));\n      return props;\n    }\n  }, {\n    key: \"_unproject\",\n    value: function _unproject(pos) {\n      var viewport = this.makeViewport(this._viewportProps);\n      return pos && viewport.unproject(pos);\n    }\n  }, {\n    key: \"_calculateNewLngLat\",\n    value: function _calculateNewLngLat(_ref8) {\n      var startPanLngLat = _ref8.startPanLngLat,\n          pos = _ref8.pos;\n      var viewport = this.makeViewport(this._viewportProps);\n      return viewport.getMapCenterByLngLatPosition({\n        lngLat: startPanLngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"_calculateNewZoom\",\n    value: function _calculateNewZoom(_ref9) {\n      var scale = _ref9.scale,\n          startZoom = _ref9.startZoom;\n      var _this$_viewportProps3 = this._viewportProps,\n          maxZoom = _this$_viewportProps3.maxZoom,\n          minZoom = _this$_viewportProps3.minZoom;\n      var zoom = startZoom + Math.log2(scale);\n      return clamp(zoom, minZoom, maxZoom);\n    }\n  }, {\n    key: \"_calculateNewPitchAndBearing\",\n    value: function _calculateNewPitchAndBearing(_ref10) {\n      var deltaScaleX = _ref10.deltaScaleX,\n          deltaScaleY = _ref10.deltaScaleY,\n          startBearing = _ref10.startBearing,\n          startPitch = _ref10.startPitch;\n      deltaScaleY = clamp(deltaScaleY, -1, 1);\n      var _this$_viewportProps4 = this._viewportProps,\n          minPitch = _this$_viewportProps4.minPitch,\n          maxPitch = _this$_viewportProps4.maxPitch;\n      var bearing = startBearing + 180 * deltaScaleX;\n      var pitch = startPitch;\n\n      if (deltaScaleY > 0) {\n        pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n      } else if (deltaScaleY < 0) {\n        pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n      }\n\n      return {\n        pitch: pitch,\n        bearing: bearing\n      };\n    }\n  }]);\n\n  return MapState;\n}(ViewState);\n\nvar MapController = function (_Controller) {\n  _inherits(MapController, _Controller);\n\n  function MapController(props) {\n    var _this2;\n\n    _classCallCheck(this, MapController);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(MapController).call(this, MapState, props));\n    _this2.invertPan = true;\n    return _this2;\n  }\n\n  _createClass(MapController, [{\n    key: \"_getTransitionProps\",\n    value: function _getTransitionProps() {\n      return LINEAR_TRANSITION_PROPS;\n    }\n  }, {\n    key: \"_onPanRotate\",\n    value: function _onPanRotate(event) {\n      if (!this.dragRotate) {\n        return false;\n      }\n\n      var deltaX = event.deltaX,\n          deltaY = event.deltaY;\n\n      var _this$getCenter = this.getCenter(event),\n          _this$getCenter2 = _slicedToArray(_this$getCenter, 2),\n          centerY = _this$getCenter2[1];\n\n      var startY = centerY - deltaY;\n\n      var _this$controllerState = this.controllerState.getViewportProps(),\n          width = _this$controllerState.width,\n          height = _this$controllerState.height;\n\n      var deltaScaleX = deltaX / width;\n      var deltaScaleY = 0;\n\n      if (deltaY > 0) {\n        if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n        }\n      } else if (deltaY < 0) {\n        if (startY > PITCH_MOUSE_THRESHOLD) {\n          deltaScaleY = 1 - centerY / startY;\n        }\n      }\n\n      deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n      var newControllerState = this.controllerState.rotate({\n        deltaScaleX: deltaScaleX,\n        deltaScaleY: deltaScaleY\n      });\n      return this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n        isDragging: true,\n        isRotating: true\n      });\n    }\n  }]);\n\n  return MapController;\n}(Controller);\n\nexport { MapController as default };\n//# sourceMappingURL=map-controller.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\n\nvar MapView = function (_View) {\n  _inherits(MapView, _View);\n\n  function MapView(props) {\n    _classCallCheck(this, MapView);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MapView).call(this, Object.assign({}, props, {\n      type: WebMercatorViewport\n    })));\n  }\n\n  _createClass(MapView, [{\n    key: \"controller\",\n    get: function get() {\n      return this._getControllerProps({\n        type: MapController\n      });\n    }\n  }]);\n\n  return MapView;\n}(View);\n\nexport { MapView as default };\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar idCount = 0;\nexport var AmbientLight = function AmbientLight() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, AmbientLight);\n\n  var _props$color = props.color,\n      color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n  var _props$intensity = props.intensity,\n      intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n  this.id = props.id || \"ambient-\".concat(idCount++);\n  this.color = color;\n  this.intensity = intensity;\n  this.type = 'ambient';\n};\n//# sourceMappingURL=ambient-light.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3 } from 'math.gl';\nvar DEFAULT_LIGHT_COLOR = [255, 255, 255];\nvar DEFAULT_LIGHT_INTENSITY = 1.0;\nvar DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nvar idCount = 0;\nexport var DirectionalLight = function () {\n  function DirectionalLight() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, DirectionalLight);\n\n    var _props$color = props.color,\n        color = _props$color === void 0 ? DEFAULT_LIGHT_COLOR : _props$color;\n    var _props$intensity = props.intensity,\n        intensity = _props$intensity === void 0 ? DEFAULT_LIGHT_INTENSITY : _props$intensity;\n    var _props$direction = props.direction,\n        direction = _props$direction === void 0 ? DEFAULT_LIGHT_DIRECTION : _props$direction;\n\n    var _props$_shadow = props._shadow,\n        _shadow = _props$_shadow === void 0 ? false : _props$_shadow;\n\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  _createClass(DirectionalLight, [{\n    key: \"getProjectedLight\",\n    value: function getProjectedLight() {\n      return this;\n    }\n  }]);\n\n  return DirectionalLight;\n}();\n//# sourceMappingURL=directional-light.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Effect = function () {\n  function Effect() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Effect);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'effect' : _props$id;\n    this.id = id;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Effect, [{\n    key: \"preRender\",\n    value: function preRender() {}\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Effect;\n}();\n\nexport { Effect as default };\n//# sourceMappingURL=effect.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nvar Pass = function () {\n  function Pass(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Pass);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? 'pass' : _props$id;\n    this.id = id;\n    this.gl = gl;\n    this.props = {};\n    Object.assign(this.props, props);\n  }\n\n  _createClass(Pass, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {}\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {}\n  }]);\n\n  return Pass;\n}();\n\nexport { Pass as default };\n//# sourceMappingURL=pass.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nimport log from '../utils/log';\n\nvar LayersPass = function (_Pass) {\n  _inherits(LayersPass, _Pass);\n\n  function LayersPass() {\n    _classCallCheck(this, LayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(LayersPass).apply(this, arguments));\n  }\n\n  _createClass(LayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      var gl = this.gl;\n      setParameters(gl, {\n        framebuffer: props.target\n      });\n      return this._drawLayers(props);\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(props) {\n      var viewports = props.viewports,\n          views = props.views,\n          onViewportActive = props.onViewportActive,\n          _props$clearCanvas = props.clearCanvas,\n          clearCanvas = _props$clearCanvas === void 0 ? true : _props$clearCanvas;\n      var gl = this.gl;\n\n      if (clearCanvas) {\n        clearGLCanvas(gl);\n      }\n\n      var renderStats = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = viewports[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var viewportOrDescriptor = _step.value;\n          var viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n          var view = views && views[viewport.id];\n          onViewportActive(viewport);\n\n          var drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n          props.view = view;\n          var subViewports = viewport.subViewports || [viewport];\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = subViewports[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var subViewport = _step2.value;\n              props.viewport = subViewport;\n\n              var stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n              renderStats.push(stats);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                _iterator2[\"return\"]();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return renderStats;\n    }\n  }, {\n    key: \"_getDrawLayerParams\",\n    value: function _getDrawLayerParams(viewport, _ref) {\n      var layers = _ref.layers,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'unknown' : _ref$pass,\n          layerFilter = _ref.layerFilter,\n          effects = _ref.effects,\n          moduleParameters = _ref.moduleParameters;\n      var drawLayerParams = [];\n      var indexResolver = layerIndexResolver();\n\n      for (var layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n        var layer = layers[layerIndex];\n\n        var shouldDrawLayer = this._shouldDrawLayer(layer, viewport, pass, layerFilter);\n\n        var layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n        var layerParam = {\n          shouldDrawLayer: shouldDrawLayer,\n          layerRenderIndex: layerRenderIndex\n        };\n\n        if (shouldDrawLayer) {\n          layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n          layerParam.layerParameters = this.getLayerParameters(layer, layerIndex);\n        }\n\n        drawLayerParams[layerIndex] = layerParam;\n      }\n\n      return drawLayerParams;\n    }\n  }, {\n    key: \"_drawLayersInViewport\",\n    value: function _drawLayersInViewport(gl, _ref2, drawLayerParams) {\n      var layers = _ref2.layers,\n          onError = _ref2.onError,\n          viewport = _ref2.viewport,\n          view = _ref2.view;\n      var glViewport = getGLViewport(gl, {\n        viewport: viewport\n      });\n\n      if (view && view.props.clear) {\n        var clearOpts = view.props.clear === true ? {\n          color: true,\n          depth: true\n        } : view.props.clear;\n        withParameters(gl, {\n          scissorTest: true,\n          scissor: glViewport\n        }, function () {\n          return clear(gl, clearOpts);\n        });\n      }\n\n      var renderStatus = {\n        totalCount: layers.length,\n        visibleCount: 0,\n        compositeCount: 0,\n        pickableCount: 0\n      };\n      setParameters(gl, {\n        viewport: glViewport\n      });\n\n      for (var layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n        var layer = layers[layerIndex];\n        var _drawLayerParams$laye = drawLayerParams[layerIndex],\n            shouldDrawLayer = _drawLayerParams$laye.shouldDrawLayer,\n            layerRenderIndex = _drawLayerParams$laye.layerRenderIndex,\n            moduleParameters = _drawLayerParams$laye.moduleParameters,\n            layerParameters = _drawLayerParams$laye.layerParameters;\n\n        if (shouldDrawLayer && layer.props.pickable) {\n          renderStatus.pickableCount++;\n        }\n\n        if (layer.isComposite) {\n          renderStatus.compositeCount++;\n        } else if (shouldDrawLayer) {\n          renderStatus.visibleCount++;\n          moduleParameters.viewport = viewport;\n\n          try {\n            layer.drawLayer({\n              moduleParameters: moduleParameters,\n              uniforms: {\n                layerIndex: layerRenderIndex\n              },\n              parameters: layerParameters\n            });\n          } catch (err) {\n            if (onError) {\n              onError(err, layer);\n            } else {\n              log.error(\"error during drawing of \".concat(layer), err)();\n            }\n          }\n        }\n      }\n\n      return renderStatus;\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return true;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer, effects) {\n      return null;\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      return layer.props.parameters;\n    }\n  }, {\n    key: \"_shouldDrawLayer\",\n    value: function _shouldDrawLayer(layer, viewport, pass, layerFilter) {\n      var shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n      if (shouldDrawLayer && layerFilter) {\n        shouldDrawLayer = layerFilter({\n          layer: layer,\n          viewport: viewport,\n          isPicking: pass.startsWith('picking'),\n          renderPass: pass\n        });\n      }\n\n      if (shouldDrawLayer) {\n        layer.activateViewport(viewport);\n      }\n\n      return shouldDrawLayer;\n    }\n  }, {\n    key: \"_getModuleParameters\",\n    value: function _getModuleParameters(layer, effects, pass, overrides) {\n      var moduleParameters = Object.assign(Object.create(layer.props), {\n        autoWrapLongitude: layer.wrapLongitude,\n        viewport: layer.context.viewport,\n        mousePosition: layer.context.mousePosition,\n        pickingActive: 0,\n        devicePixelRatio: cssToDeviceRatio(this.gl)\n      });\n\n      if (effects) {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = effects[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var effect = _step3.value;\n            Object.assign(moduleParameters, effect.getModuleParameters(layer));\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n              _iterator3[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n\n      return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n    }\n  }]);\n\n  return LayersPass;\n}(Pass);\n\nexport { LayersPass as default };\nexport function layerIndexResolver() {\n  var startIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var layerIndices = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var resolvers = {};\n  return function (layer, isDrawn) {\n    var indexOverride = layer.props._offset;\n    var layerId = layer.id;\n    var parentId = layer.parent && layer.parent.id;\n    var index;\n\n    if (parentId in resolvers) {\n      var resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n}\n\nfunction getGLViewport(gl, _ref3) {\n  var viewport = _ref3.viewport;\n  var height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  var dimensions = viewport;\n  var pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\n\nvar ShadowPass = function (_LayersPass) {\n  _inherits(ShadowPass, _LayersPass);\n\n  function ShadowPass(gl, props) {\n    var _parameters, _attachments;\n\n    var _this;\n\n    _classCallCheck(this, ShadowPass);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShadowPass).call(this, gl, props));\n    _this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n    });\n    _this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    _this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: (_attachments = {}, _defineProperty(_attachments, 36064, _this.shadowMap), _defineProperty(_attachments, 36096, _this.depthBuffer), _attachments)\n    });\n    return _this;\n  }\n\n  _createClass(ShadowPass, [{\n    key: \"render\",\n    value: function render(params) {\n      var _this2 = this;\n\n      var target = this.fbo;\n      withParameters(this.gl, {\n        depthRange: [0, 1],\n        depthTest: true,\n        blend: false,\n        clearColor: [1, 1, 1, 1]\n      }, function () {\n        var viewport = params.viewports[0];\n        var pixelRatio = cssToDeviceRatio(_this2.gl);\n        var width = viewport.width * pixelRatio;\n        var height = viewport.height * pixelRatio;\n\n        if (width !== target.width || height !== target.height) {\n          target.resize({\n            width: width,\n            height: height\n          });\n        }\n\n        _get(_getPrototypeOf(ShadowPass.prototype), \"render\", _this2).call(_this2, _objectSpread({}, params, {\n          target: target,\n          pass: 'shadow'\n        }));\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.shadowEnabled !== false;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        drawToShadowMap: true\n      };\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.fbo) {\n        this.fbo[\"delete\"]();\n        this.fbo = null;\n      }\n\n      if (this.shadowMap) {\n        this.shadowMap[\"delete\"]();\n        this.shadowMap = null;\n      }\n\n      if (this.depthBuffer) {\n        this.depthBuffer[\"delete\"]();\n        this.depthBuffer = null;\n      }\n    }\n  }]);\n\n  return ShadowPass;\n}(LayersPass);\n\nexport { ShadowPass as default };\n//# sourceMappingURL=shadow-pass.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nvar vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nvar fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nvar getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nvar getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition(_ref) {\n  var viewport = _ref.viewport,\n      center = _ref.center;\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices(_ref2) {\n  var viewport = _ref2.viewport,\n      shadowMatrices = _ref2.shadowMatrices;\n  var projectionMatrices = [];\n  var pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  var farZ = viewport.isGeospatial ? undefined : 1;\n  var corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(function (pixel) {\n    return screenToCommonSpace(pixel, pixelUnprojectionMatrix);\n  });\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var shadowMatrix = _step.value;\n      var viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n      var positions = corners.map(function (corner) {\n        return viewMatrix.transform(corner);\n      });\n      var projectionMatrix = new Matrix4().ortho({\n        left: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        right: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[0];\n        }))),\n        bottom: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        top: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return position[1];\n        }))),\n        near: Math.min.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        }))),\n        far: Math.max.apply(Math, _toConsumableArray(positions.map(function (position) {\n          return -position[2];\n        })))\n      });\n      projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n    };\n\n    for (var _iterator = shadowMatrices[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      _loop();\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  var center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  var projectCenters = [];\n  var viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (var i = 0; i < opts.shadowMatrices.length; i++) {\n    var viewProjectionMatrix = viewProjectionMatrices[i];\n    var viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (var _i = 0; _i < viewProjectionMatrices.length; _i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(_i, \"]\")] = viewProjectionMatrices[_i];\n    uniforms[\"shadow_uProjectCenters[\".concat(_i, \"]\")] = projectCenters[_i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.shadowMaps[_i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(_i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs: vs,\n  fs: fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: function getUniforms() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      var shadowUniforms = {};\n      var _opts$shadowEnabled = opts.shadowEnabled,\n          shadowEnabled = _opts$shadowEnabled === void 0 ? true : _opts$shadowEnabled;\n\n      if (shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0) {\n        Object.assign(shadowUniforms, createShadowUniforms(opts, context));\n      } else {\n        Object.assign(shadowUniforms, {\n          shadow_uDrawShadowMap: false,\n          shadow_uUseShadowMap: false\n        });\n      }\n\n      return shadowUniforms;\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nvar DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nvar DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nvar DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\n\nvar LightingEffect = function (_Effect) {\n  _inherits(LightingEffect, _Effect);\n\n  function LightingEffect(props) {\n    var _this;\n\n    _classCallCheck(this, LightingEffect);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LightingEffect).call(this, props));\n    _this.ambientLight = null;\n    _this.directionalLights = [];\n    _this.pointLights = [];\n    _this.shadowColor = DEFAULT_SHADOW_COLOR;\n    _this.shadowPasses = [];\n    _this.shadowMaps = [];\n    _this.dummyShadowMap = null;\n    _this.shadow = false;\n    _this.programManager = null;\n\n    for (var key in props) {\n      var lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          _this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          _this.directionalLights.push(lightSource);\n\n          break;\n\n        case 'point':\n          _this.pointLights.push(lightSource);\n\n          break;\n\n        default:\n      }\n    }\n\n    _this._applyDefaultLights();\n\n    _this.shadow = _this.directionalLights.some(function (light) {\n      return light.shadow;\n    });\n    return _this;\n  }\n\n  _createClass(LightingEffect, [{\n    key: \"preRender\",\n    value: function preRender(gl, _ref) {\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          views = _ref.views;\n      if (!this.shadow) return;\n      this.shadowMatrices = this._createLightMatrix();\n\n      if (this.shadowPasses.length === 0) {\n        this._createShadowPasses(gl);\n      }\n\n      if (!this.programManager) {\n        this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n        if (shadow) {\n          this.programManager.addDefaultModule(shadow);\n        }\n      }\n\n      if (!this.dummyShadowMap) {\n        this.dummyShadowMap = new Texture2D(gl, {\n          width: 1,\n          height: 1\n        });\n      }\n\n      for (var i = 0; i < this.shadowPasses.length; i++) {\n        var shadowPass = this.shadowPasses[i];\n        shadowPass.render({\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          views: views,\n          moduleParameters: {\n            shadowLightId: i,\n            dummyShadowMap: this.dummyShadowMap,\n            shadowMatrices: this.shadowMatrices\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters(layer) {\n      var parameters = this.shadow ? {\n        shadowMaps: this.shadowMaps,\n        dummyShadowMap: this.dummyShadowMap,\n        shadowColor: this.shadowColor,\n        shadowMatrices: this.shadowMatrices\n      } : {};\n      parameters.lightSources = {\n        ambientLight: this.ambientLight,\n        directionalLights: this.directionalLights.map(function (directionalLight) {\n          return directionalLight.getProjectedLight({\n            layer: layer\n          });\n        }),\n        pointLights: this.pointLights.map(function (pointLight) {\n          return pointLight.getProjectedLight({\n            layer: layer\n          });\n        })\n      };\n      return parameters;\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.shadowPasses[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var shadowPass = _step.value;\n          shadowPass[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.shadowPasses.length = 0;\n      this.shadowMaps.length = 0;\n\n      if (this.dummyShadowMap) {\n        this.dummyShadowMap[\"delete\"]();\n        this.dummyShadowMap = null;\n      }\n\n      if (this.shadow && this.programManager) {\n        this.programManager.removeDefaultModule(shadow);\n        this.programManager = null;\n      }\n    }\n  }, {\n    key: \"_createLightMatrix\",\n    value: function _createLightMatrix() {\n      var lightMatrices = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.directionalLights[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var light = _step2.value;\n          var viewMatrix = new Matrix4().lookAt({\n            eye: new Vector3(light.direction).negate()\n          });\n          lightMatrices.push(viewMatrix);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return lightMatrices;\n    }\n  }, {\n    key: \"_createShadowPasses\",\n    value: function _createShadowPasses(gl) {\n      for (var i = 0; i < this.directionalLights.length; i++) {\n        var shadowPass = new ShadowPass(gl);\n        this.shadowPasses[i] = shadowPass;\n        this.shadowMaps[i] = shadowPass.shadowMap;\n      }\n    }\n  }, {\n    key: \"_applyDefaultLights\",\n    value: function _applyDefaultLights() {\n      var ambientLight = this.ambientLight,\n          pointLights = this.pointLights,\n          directionalLights = this.directionalLights;\n\n      if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n        this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n        this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n      }\n    }\n  }]);\n\n  return LightingEffect;\n}(Effect);\n\nexport { LightingEffect as default };\n//# sourceMappingURL=lighting-effect.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nvar DEFAULT_LIGHTING_EFFECT = new LightingEffect();\n\nvar EffectManager = function () {\n  function EffectManager() {\n    _classCallCheck(this, EffectManager);\n\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  _createClass(EffectManager, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('effects' in props) {\n        if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n          this.setEffects(props.effects);\n          this._needsRedraw = 'effects changed';\n        }\n      }\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"getEffects\",\n    value: function getEffects() {\n      return this._internalEffects;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      this.cleanup();\n    }\n  }, {\n    key: \"setEffects\",\n    value: function setEffects() {\n      var effects = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      this.cleanup();\n      this.effects = effects;\n\n      this._createInternalEffects();\n    }\n  }, {\n    key: \"cleanup\",\n    value: function cleanup() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.effects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var effect = _step.value;\n          effect.cleanup();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this._internalEffects[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _effect = _step2.value;\n\n          _effect.cleanup();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      this.effects.length = 0;\n      this._internalEffects.length = 0;\n    }\n  }, {\n    key: \"_createInternalEffects\",\n    value: function _createInternalEffects() {\n      this._internalEffects = this.effects.slice();\n\n      if (!this.effects.some(function (effect) {\n        return effect instanceof LightingEffect;\n      })) {\n        this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n      }\n    }\n  }]);\n\n  return EffectManager;\n}();\n\nexport { EffectManager as default };\n//# sourceMappingURL=effect-manager.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport LayersPass from './layers-pass';\n\nvar DrawLayersPass = function (_LayersPass) {\n  _inherits(DrawLayersPass, _LayersPass);\n\n  function DrawLayersPass() {\n    _classCallCheck(this, DrawLayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DrawLayersPass).apply(this, arguments));\n  }\n\n  return DrawLayersPass;\n}(LayersPass);\n\nexport { DrawLayersPass as default };\n//# sourceMappingURL=draw-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nvar PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\n\nvar PickLayersPass = function (_LayersPass) {\n  _inherits(PickLayersPass, _LayersPass);\n\n  function PickLayersPass() {\n    _classCallCheck(this, PickLayersPass);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PickLayersPass).apply(this, arguments));\n  }\n\n  _createClass(PickLayersPass, [{\n    key: \"render\",\n    value: function render(props) {\n      if (props.pickingFBO) {\n        this._drawPickingBuffer(props);\n      } else {\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", this).call(this, props);\n      }\n    }\n  }, {\n    key: \"_drawPickingBuffer\",\n    value: function _drawPickingBuffer(_ref) {\n      var _this = this;\n\n      var layers = _ref.layers,\n          layerFilter = _ref.layerFilter,\n          viewports = _ref.viewports,\n          onViewportActive = _ref.onViewportActive,\n          pickingFBO = _ref.pickingFBO,\n          _ref$deviceRect = _ref.deviceRect,\n          x = _ref$deviceRect.x,\n          y = _ref$deviceRect.y,\n          width = _ref$deviceRect.width,\n          height = _ref$deviceRect.height,\n          _ref$pass = _ref.pass,\n          pass = _ref$pass === void 0 ? 'picking' : _ref$pass,\n          redrawReason = _ref.redrawReason,\n          pickZ = _ref.pickZ;\n      var gl = this.gl;\n      this.pickZ = pickZ;\n      return withParameters(gl, _objectSpread({\n        scissorTest: true,\n        scissor: [x, y, width, height],\n        clearColor: [0, 0, 0, 0],\n        depthMask: true,\n        depthTest: true,\n        depthRange: [0, 1],\n        colorMask: [true, true, true, true]\n      }, PICKING_PARAMETERS, {\n        blend: !pickZ\n      }), function () {\n        _get(_getPrototypeOf(PickLayersPass.prototype), \"render\", _this).call(_this, {\n          target: pickingFBO,\n          layers: layers,\n          layerFilter: layerFilter,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          pass: pass,\n          redrawReason: redrawReason\n        });\n      });\n    }\n  }, {\n    key: \"shouldDrawLayer\",\n    value: function shouldDrawLayer(layer) {\n      return layer.props.pickable;\n    }\n  }, {\n    key: \"getModuleParameters\",\n    value: function getModuleParameters() {\n      return {\n        pickingActive: 1,\n        pickingAttribute: this.pickZ,\n        lightSources: {}\n      };\n    }\n  }, {\n    key: \"getLayerParameters\",\n    value: function getLayerParameters(layer, layerIndex) {\n      var pickParameters = this.pickZ ? {\n        blend: false\n      } : _objectSpread({}, PICKING_PARAMETERS, {\n        blend: true,\n        blendColor: [0, 0, 0, (layerIndex + 1) / 255]\n      });\n      return Object.assign({}, layer.props.parameters, pickParameters);\n    }\n  }]);\n\n  return PickLayersPass;\n}(LayersPass);\n\nexport { PickLayersPass as default };\n//# sourceMappingURL=pick-layers-pass.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nvar TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\n\nvar DeckRenderer = function () {\n  function DeckRenderer(gl) {\n    _classCallCheck(this, DeckRenderer);\n\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n    this._onError = null;\n  }\n\n  _createClass(DeckRenderer, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n        this.layerFilter = props.layerFilter;\n        this._needsRedraw = 'layerFilter changed';\n      }\n\n      if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n        this.drawPickingColors = props.drawPickingColors;\n        this._needsRedraw = 'drawPickingColors changed';\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers(opts) {\n      var layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n      opts.layerFilter = this.layerFilter;\n      opts.onError = this._onError;\n      opts.effects = opts.effects || [];\n      opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n      this._preRender(opts.effects, opts);\n\n      var outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n      var renderStats = layerPass.render(_objectSpread({}, opts, {\n        target: outputBuffer\n      }));\n\n      this._postRender(opts.effects, opts);\n\n      this.renderCount++;\n      debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      return redraw;\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      var renderBuffers = this.renderBuffers;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = renderBuffers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var buffer = _step.value;\n          buffer[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      renderBuffers.length = 0;\n    }\n  }, {\n    key: \"_preRender\",\n    value: function _preRender(effects, opts) {\n      var lastPostProcessEffect = null;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = effects[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var effect = _step2.value;\n          effect.preRender(this.gl, opts);\n\n          if (effect.postRender) {\n            lastPostProcessEffect = effect;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      if (lastPostProcessEffect) {\n        this._resizeRenderBuffers();\n      }\n\n      this.lastPostProcessEffect = lastPostProcessEffect;\n    }\n  }, {\n    key: \"_resizeRenderBuffers\",\n    value: function _resizeRenderBuffers() {\n      var renderBuffers = this.renderBuffers;\n\n      if (renderBuffers.length === 0) {\n        renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = renderBuffers[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var buffer = _step3.value;\n          buffer.resize();\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_postRender\",\n    value: function _postRender(effects, opts) {\n      var renderBuffers = this.renderBuffers;\n      var params = {\n        inputBuffer: renderBuffers[0],\n        swapBuffer: renderBuffers[1],\n        target: null\n      };\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = effects[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var effect = _step4.value;\n\n          if (effect.postRender) {\n            if (effect === this.lastPostProcessEffect) {\n              params.target = opts.target;\n              effect.postRender(this.gl, params);\n              break;\n            }\n\n            var buffer = effect.postRender(this.gl, params);\n            params.inputBuffer = buffer;\n            params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  }]);\n\n  return DeckRenderer;\n}();\n\nexport { DeckRenderer as default };\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nvar NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject(_ref) {\n  var pickedColors = _ref.pickedColors,\n      layers = _ref.layers,\n      deviceX = _ref.deviceX,\n      deviceY = _ref.deviceY,\n      deviceRadius = _ref.deviceRadius,\n      deviceRect = _ref.deviceRect;\n\n  if (pickedColors) {\n    var x = deviceRect.x,\n        y = deviceRect.y,\n        width = deviceRect.width,\n        height = deviceRect.height;\n    var minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    var closestPixelIndex = -1;\n    var i = 0;\n\n    for (var row = 0; row < height; row++) {\n      var dy = row + y - deviceY;\n      var dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (var col = 0; col < width; col++) {\n          var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            var dx = col + x - deviceX;\n            var d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      var _pickedLayerIndex = pickedColors[closestPixelIndex + 3] - 1;\n\n      var pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      var pickedLayer = layers[_pickedLayerIndex];\n\n      if (pickedLayer) {\n        var pickedObjectIndex = pickedLayer.decodePickingColor(pickedColor);\n\n        var _dy = Math.floor(closestPixelIndex / 4 / width);\n\n        var _dx = closestPixelIndex / 4 - _dy * width;\n\n        return {\n          pickedColor: pickedColor,\n          pickedLayer: pickedLayer,\n          pickedObjectIndex: pickedObjectIndex,\n          pickedX: x + _dx,\n          pickedY: y + _dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects(_ref2) {\n  var pickedColors = _ref2.pickedColors,\n      layers = _ref2.layers;\n  var uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (var i = 0; i < pickedColors.length; i += 4) {\n      var pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        var pickedColor = pickedColors.slice(i, i + 4);\n        var colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          var pickedLayer = layers[pickedLayerIndex];\n\n          if (pickedLayer) {\n            uniqueColors.set(colorKey, {\n              pickedColor: pickedColor,\n              pickedLayer: pickedLayer,\n              pickedObjectIndex: pickedLayer.decodePickingColor(pickedColor)\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function processPickInfo(_ref) {\n  var pickInfo = _ref.pickInfo,\n      lastPickedInfo = _ref.lastPickedInfo,\n      mode = _ref.mode,\n      layers = _ref.layers,\n      viewports = _ref.viewports,\n      x = _ref.x,\n      y = _ref.y,\n      z = _ref.z,\n      pixelRatio = _ref.pixelRatio;\n  var pickedColor = pickInfo.pickedColor,\n      pickedLayer = pickInfo.pickedLayer,\n      pickedObjectIndex = pickInfo.pickedObjectIndex;\n  var affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    var lastPickedObjectIndex = lastPickedInfo.index;\n    var lastPickedLayerId = lastPickedInfo.layerId;\n    var pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        var lastPickedLayer = layers.find(function (layer) {\n          return layer.props.id === lastPickedLayerId;\n        });\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  var viewport = getViewportFromCoordinates({\n    viewports: viewports\n  });\n  var coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y], {\n    targetZ: z\n  });\n  var baseInfo = {\n    color: null,\n    layer: null,\n    index: -1,\n    picked: false,\n    x: x,\n    y: y,\n    pixel: [x, y],\n    coordinate: coordinate,\n    lngLat: coordinate,\n    devicePixel: [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio: pixelRatio\n  };\n  var infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(function (layer) {\n    var info = Object.assign({}, baseInfo);\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer: layer,\n      info: info,\n      mode: mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    if (info) {\n      infos.set(info.layer.id, info);\n    }\n\n    if (mode === 'hover' && layer.props.autoHighlight) {\n      var pickingModuleParameters = {\n        pickingSelectedColor: pickedLayer === layer ? pickedColor : null\n      };\n      var highlightColor = layer.props.highlightColor;\n\n      if (pickedLayer === layer && typeof highlightColor === 'function') {\n        pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n      }\n\n      layer.setModuleParameters(pickingModuleParameters);\n      layer.setNeedsRedraw();\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo(_ref2) {\n  var layer = _ref2.layer,\n      info = _ref2.info,\n      mode = _ref2.mode;\n\n  while (layer && info) {\n    var sourceLayer = info.layer || layer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info: info,\n      mode: mode,\n      sourceLayer: sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(_ref3) {\n  var viewports = _ref3.viewports;\n  var viewport = viewports[0];\n  return viewport;\n}\n//# sourceMappingURL=pick-info.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport log from '../utils/log';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo } from './picking/pick-info';\n\nvar DeckPicker = function () {\n  function DeckPicker(gl) {\n    _classCallCheck(this, DeckPicker);\n\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n    this._onError = null;\n  }\n\n  _createClass(DeckPicker, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('layerFilter' in props) {\n        this.layerFilter = props.layerFilter;\n      }\n\n      if ('onError' in props) {\n        this._onError = props.onError;\n      }\n    }\n  }, {\n    key: \"finalize\",\n    value: function finalize() {\n      if (this.pickingFBO) {\n        this.pickingFBO[\"delete\"]();\n      }\n\n      if (this.depthFBO) {\n        this.depthFBO.color[\"delete\"]();\n        this.depthFBO[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      return this._pickClosestObject(opts);\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pickVisibleObjects(opts);\n    }\n  }, {\n    key: \"getLastPickedObject\",\n    value: function getLastPickedObject(_ref) {\n      var x = _ref.x,\n          y = _ref.y,\n          layers = _ref.layers,\n          viewports = _ref.viewports;\n      var lastPickedInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.lastPickedInfo.info;\n      var lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n      var layer = lastPickedLayerId ? layers.find(function (l) {\n        return l.id === lastPickedLayerId;\n      }) : null;\n      var coordinate = viewports[0] && viewports[0].unproject([x, y]);\n      var info = {\n        x: x,\n        y: y,\n        coordinate: coordinate,\n        lngLat: coordinate,\n        layer: layer\n      };\n\n      if (layer) {\n        return Object.assign({}, lastPickedInfo, info);\n      }\n\n      return Object.assign(info, {\n        color: null,\n        object: null,\n        index: -1\n      });\n    }\n  }, {\n    key: \"_resizeBuffer\",\n    value: function _resizeBuffer() {\n      var gl = this.gl;\n\n      if (!this.pickingFBO) {\n        this.pickingFBO = new Framebuffer(gl);\n\n        if (Framebuffer.isSupported(gl, {\n          colorBufferFloat: true\n        })) {\n          this.depthFBO = new Framebuffer(gl);\n          this.depthFBO.attach(_defineProperty({}, 36064, new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })));\n        }\n      }\n\n      this.pickingFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n\n      if (this.depthFBO) {\n        this.depthFBO.resize({\n          width: gl.canvas.width,\n          height: gl.canvas.height\n        });\n      }\n\n      return this.pickingFBO;\n    }\n  }, {\n    key: \"_getPickable\",\n    value: function _getPickable(layers) {\n      var pickableLayers = layers.filter(function (layer) {\n        return layer.isPickable() && !layer.isComposite;\n      });\n\n      if (pickableLayers.length > 255) {\n        log.warn('Too many pickable layers, only picking the first 255')();\n        return pickableLayers.slice(0, 255);\n      }\n\n      return pickableLayers;\n    }\n  }, {\n    key: \"_pickClosestObject\",\n    value: function _pickClosestObject(_ref2) {\n      var layers = _ref2.layers,\n          viewports = _ref2.viewports,\n          x = _ref2.x,\n          y = _ref2.y,\n          _ref2$radius = _ref2.radius,\n          radius = _ref2$radius === void 0 ? 0 : _ref2$radius,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? 1 : _ref2$depth,\n          _ref2$mode = _ref2.mode,\n          mode = _ref2$mode === void 0 ? 'query' : _ref2$mode,\n          unproject3D = _ref2.unproject3D,\n          onViewportActive = _ref2.onViewportActive;\n      layers = this._getPickable(layers);\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n      var devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n      var deviceRadius = Math.round(radius * pixelRatio);\n      var _this$pickingFBO = this.pickingFBO,\n          width = _this$pickingFBO.width,\n          height = _this$pickingFBO.height;\n\n      var deviceRect = this._getPickingRect({\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius: deviceRadius,\n        deviceWidth: width,\n        deviceHeight: height\n      });\n\n      var infos;\n      var result = [];\n      var affectedLayers = {};\n\n      for (var i = 0; i < depth; i++) {\n        var pickedColors = deviceRect && this._drawAndSample({\n          layers: layers,\n          viewports: viewports,\n          onViewportActive: onViewportActive,\n          deviceRect: deviceRect,\n          pass: \"picking:\".concat(mode),\n          redrawReason: mode\n        });\n\n        var pickInfo = getClosestObject({\n          pickedColors: pickedColors,\n          layers: layers,\n          deviceX: devicePixel[0],\n          deviceY: devicePixel[1],\n          deviceRadius: deviceRadius,\n          deviceRect: deviceRect\n        });\n        var z = void 0;\n\n        if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n          var zValues = this._drawAndSample({\n            layers: [pickInfo.pickedLayer],\n            viewports: viewports,\n            onViewportActive: onViewportActive,\n            deviceRect: {\n              x: pickInfo.pickedX,\n              y: pickInfo.pickedY,\n              width: 1,\n              height: 1\n            },\n            pass: \"picking:\".concat(mode),\n            redrawReason: 'pick-z',\n            pickZ: true\n          });\n\n          z = zValues[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n        }\n\n        if (pickInfo.pickedColor && i + 1 < depth) {\n          var layerId = pickInfo.pickedColor[3] - 1;\n          affectedLayers[layerId] = true;\n          layers[layerId].clearPickingColor(pickInfo.pickedColor);\n        }\n\n        infos = processPickInfo({\n          pickInfo: pickInfo,\n          lastPickedInfo: this.lastPickedInfo,\n          mode: mode,\n          layers: layers,\n          viewports: viewports,\n          x: x,\n          y: y,\n          z: z,\n          pixelRatio: pixelRatio\n        });\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = infos.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var info = _step.value;\n\n            if (info.layer) {\n              result.push(info);\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        if (!pickInfo.pickedColor) {\n          break;\n        }\n      }\n\n      for (var _layerId in affectedLayers) {\n        layers[_layerId].restorePickingColors();\n      }\n\n      return {\n        result: result,\n        emptyInfo: infos && infos.get(null)\n      };\n    }\n  }, {\n    key: \"_pickVisibleObjects\",\n    value: function _pickVisibleObjects(_ref3) {\n      var layers = _ref3.layers,\n          viewports = _ref3.viewports,\n          x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$mode = _ref3.mode,\n          mode = _ref3$mode === void 0 ? 'query' : _ref3$mode,\n          onViewportActive = _ref3.onViewportActive;\n      layers = this._getPickable(layers);\n\n      this._resizeBuffer();\n\n      var pixelRatio = cssToDeviceRatio(this.gl);\n      var leftTop = cssToDevicePixels(this.gl, [x, y], true);\n      var deviceLeft = leftTop.x;\n      var deviceTop = leftTop.y + leftTop.height;\n      var rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n      var deviceRight = rightBottom.x + rightBottom.width;\n      var deviceBottom = rightBottom.y;\n      var deviceRect = {\n        x: deviceLeft,\n        y: deviceBottom,\n        width: deviceRight - deviceLeft,\n        height: deviceTop - deviceBottom\n      };\n\n      var pickedColors = this._drawAndSample({\n        layers: layers,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        deviceRect: deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      var pickInfos = getUniqueObjects({\n        pickedColors: pickedColors,\n        layers: layers\n      });\n      var uniqueInfos = new Map();\n      pickInfos.forEach(function (pickInfo) {\n        var info = {\n          color: pickInfo.pickedColor,\n          layer: null,\n          index: pickInfo.pickedObjectIndex,\n          picked: true,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          pixelRatio: pixelRatio\n        };\n        info = getLayerPickingInfo({\n          layer: pickInfo.pickedLayer,\n          info: info,\n          mode: mode\n        });\n\n        if (!uniqueInfos.has(info.object)) {\n          uniqueInfos.set(info.object, info);\n        }\n      });\n      return Array.from(uniqueInfos.values());\n    }\n  }, {\n    key: \"_drawAndSample\",\n    value: function _drawAndSample(_ref4) {\n      var layers = _ref4.layers,\n          viewports = _ref4.viewports,\n          onViewportActive = _ref4.onViewportActive,\n          deviceRect = _ref4.deviceRect,\n          pass = _ref4.pass,\n          redrawReason = _ref4.redrawReason,\n          pickZ = _ref4.pickZ;\n      assert(deviceRect.width > 0 && deviceRect.height > 0);\n\n      if (layers.length < 1) {\n        return null;\n      }\n\n      var pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n      this.pickLayersPass.render({\n        layers: layers,\n        layerFilter: this.layerFilter,\n        onError: this._onError,\n        viewports: viewports,\n        onViewportActive: onViewportActive,\n        pickingFBO: pickingFBO,\n        deviceRect: deviceRect,\n        pass: pass,\n        redrawReason: redrawReason,\n        pickZ: pickZ\n      });\n      var x = deviceRect.x,\n          y = deviceRect.y,\n          width = deviceRect.width,\n          height = deviceRect.height;\n      var pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n      readPixelsToArray(pickingFBO, {\n        sourceX: x,\n        sourceY: y,\n        sourceWidth: width,\n        sourceHeight: height,\n        target: pickedColors\n      });\n      return pickedColors;\n    }\n  }, {\n    key: \"_getPickingRect\",\n    value: function _getPickingRect(_ref5) {\n      var deviceX = _ref5.deviceX,\n          deviceY = _ref5.deviceY,\n          deviceRadius = _ref5.deviceRadius,\n          deviceWidth = _ref5.deviceWidth,\n          deviceHeight = _ref5.deviceHeight;\n      var x = Math.max(0, deviceX - deviceRadius);\n      var y = Math.max(0, deviceY - deviceRadius);\n      var width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n      var height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n      if (width <= 0 || height <= 0) {\n        return null;\n      }\n\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    }\n  }]);\n\n  return DeckPicker;\n}();\n\nexport { DeckPicker as default };\n//# sourceMappingURL=deck-picker.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\n\nvar Tooltip = function () {\n  function Tooltip(canvas) {\n    _classCallCheck(this, Tooltip);\n\n    var canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n  }\n\n  _createClass(Tooltip, [{\n    key: \"setTooltip\",\n    value: function setTooltip(displayInfo, x, y) {\n      var el = this.el;\n\n      if (typeof displayInfo === 'string') {\n        el.innerText = displayInfo;\n      } else if (!displayInfo) {\n        el.style.display = 'none';\n        return;\n      } else {\n        if ('text' in displayInfo) {\n          el.innerText = displayInfo.text;\n        }\n\n        if ('html' in displayInfo) {\n          el.innerHTML = displayInfo.html;\n        }\n\n        if ('className' in displayInfo) {\n          el.className = displayInfo.className;\n        }\n\n        Object.assign(el.style, displayInfo.style);\n      }\n\n      el.style.display = 'block';\n      el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      if (this.el) {\n        this.el.remove();\n      }\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };\n//# sourceMappingURL=tooltip.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","import { global, isBrowser } from '../utils/globals';\nvar _parseImageNode = global._parseImageNode;\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nvar DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    case 'html':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}\n//# sourceMappingURL=image-type.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      var imageData = context.getImageData(0, 0, image.width, image.height);\n      return imageData;\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","var SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    var textDecoder = new TextDecoder();\n    var xmlText = textDecoder.decode(arrayBuffer);\n    var src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlobOrSVGDataUrl } from './svg-utils';\nexport default function parseToImage(_x, _x2, _x3) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blobOrDataUrl, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n            URL = self.URL || self.webkitURL;\n            objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n            _context.prev = 3;\n            _context.next = 6;\n            return loadToImage(objectUrl || blobOrDataUrl, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            _context.prev = 7;\n\n            if (objectUrl) {\n              URL.revokeObjectURL(objectUrl);\n            }\n\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3,, 7, 10]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x4, _x5) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}\n//# sourceMappingURL=parse-to-image.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nvar EMPTY_OBJECT = {};\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2, _x3) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blob, image, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isSVG(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 3;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 3:\n            image = _context.sent;\n            blob = image;\n            _context.next = 8;\n            break;\n\n          case 7:\n            blob = getBlob(arrayBuffer, url);\n\n          case 8:\n            imagebitmapOptions = options && options.imagebitmap;\n            _context.next = 11;\n            return safeCreateImageBitmap(blob, imagebitmapOptions);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction safeCreateImageBitmap(_x4) {\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction _safeCreateImageBitmap() {\n  _safeCreateImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(blob) {\n    var imagebitmapOptions,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imagebitmapOptions = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : null;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 3;\n            _context2.next = 6;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.warn(_context2.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 13:\n            _context2.next = 15;\n            return createImageBitmap(blob);\n\n          case 15:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 9]]);\n  }));\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","var BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  var _ref = getBinaryImageMetadata(arrayBuffer) || {},\n      mimeType = _ref.mimeType;\n\n  var _parseImageNode = global._parseImageNode;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 8 : _context.t0 === 'image' ? 12 : _context.t0 === 'data' ? 16 : 20;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return parseToImageBitmap(arrayBuffer, options, url);\n\n          case 10:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 12:\n            _context.next = 14;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 14:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 16:\n            _context.next = 18;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 20:\n            assert(false);\n\n          case 21:\n            if (imageType === 'data') {\n              image = getImageData(image);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nvar VERSION = typeof \"2.2.7\" !== 'undefined' ? \"2.2.7\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vndmicrosofticon', 'image/svg+xml'];\nvar ImageLoader = {\n  id: 'image',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  test: function test(arrayBuffer) {\n    return Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)));\n  },\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;\n//# sourceMappingURL=image-loader.js.map","function isJSON(text) {\n  var firstChar = text[0];\n  var lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nvar version = typeof \"8.2.3\" !== 'undefined' ? \"8.2.3\" : global.DECK_VERSION || 'untranspiled source';\nvar existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  if (process.env.NODE_ENV !== 'production') {\n    log.log(0, \"deck.gl \".concat(version, \" - set deck.log.level=1 (or higher) to trace attribute updates\"))();\n  }\n\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version: version,\n    log: log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, ImageLoader]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar GL_QUERY_RESULT = 0x8866;\nvar GL_QUERY_RESULT_AVAILABLE = 0x8867;\nvar GL_TIME_ELAPSED_EXT = 0x88bf;\nvar GL_GPU_DISJOINT_EXT = 0x8fbb;\nvar GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nvar GL_ANY_SAMPLES_PASSED = 0x8c2f;\nvar GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\n\nvar Query = function (_Resource) {\n  _inherits(Query, _Resource);\n\n  _createClass(Query, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var webgl2 = isWebGL2(gl);\n      var hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n      var supported = webgl2 || hasTimerQuery;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = opts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n\n          switch (key) {\n            case 'queries':\n              supported = supported && webgl2;\n              break;\n\n            case 'timers':\n              supported = supported && hasTimerQuery;\n              break;\n\n            default:\n              assert(false);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Query(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Query);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Query).call(this, gl, opts));\n    _this.target = null;\n    _this._queryPending = false;\n    _this._pollingPromise = null;\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Query, [{\n    key: \"beginTimeElapsedQuery\",\n    value: function beginTimeElapsedQuery() {\n      return this.begin(GL_TIME_ELAPSED_EXT);\n    }\n  }, {\n    key: \"beginOcclusionQuery\",\n    value: function beginOcclusionQuery() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$conservative = _ref.conservative,\n          conservative = _ref$conservative === void 0 ? false : _ref$conservative;\n\n      return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n    }\n  }, {\n    key: \"beginTransformFeedbackQuery\",\n    value: function beginTransformFeedbackQuery() {\n      return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n    }\n  }, {\n    key: \"begin\",\n    value: function begin(target) {\n      if (this._queryPending) {\n        return this;\n      }\n\n      this.target = target;\n      this.gl.beginQuery(this.target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._queryPending) {\n        return this;\n      }\n\n      if (this.target) {\n        this.gl.endQuery(this.target);\n        this.target = null;\n        this._queryPending = true;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"isResultAvailable\",\n    value: function isResultAvailable() {\n      if (!this._queryPending) {\n        return false;\n      }\n\n      var resultAvailable = this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n      if (resultAvailable) {\n        this._queryPending = false;\n      }\n\n      return resultAvailable;\n    }\n  }, {\n    key: \"isTimerDisjoint\",\n    value: function isTimerDisjoint() {\n      return this.gl.getParameter(GL_GPU_DISJOINT_EXT);\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.gl.getQueryParameter(this.handle, GL_QUERY_RESULT);\n    }\n  }, {\n    key: \"getTimerMilliseconds\",\n    value: function getTimerMilliseconds() {\n      return this.getResult() / 1e6;\n    }\n  }, {\n    key: \"createPoll\",\n    value: function createPoll() {\n      var _this2 = this;\n\n      var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Number.POSITIVE_INFINITY;\n\n      if (this._pollingPromise) {\n        return this._pollingPromise;\n      }\n\n      var counter = 0;\n      this._pollingPromise = new Promise(function (resolve, reject) {\n        var poll = function poll() {\n          if (_this2.isResultAvailable()) {\n            resolve(_this2.getResult());\n            _this2._pollingPromise = null;\n          } else if (counter++ > limit) {\n            reject('Timed out');\n            _this2._pollingPromise = null;\n          } else {\n            requestAnimationFrame(poll);\n          }\n        };\n\n        requestAnimationFrame(poll);\n      });\n      return this._pollingPromise;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return Query.isSupported(this.gl) ? this.gl.createQuery() : null;\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteQuery(this.handle);\n    }\n  }]);\n\n  return Query;\n}(Resource);\n\nexport { Query as default };\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nvar isPage = isBrowser() && typeof document !== 'undefined';\nvar statIdCounter = 0;\n\nvar AnimationLoop = function () {\n  function AnimationLoop() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnimationLoop);\n\n    var _props$onCreateContex = props.onCreateContext,\n        onCreateContext = _props$onCreateContex === void 0 ? function (opts) {\n      return createGLContext(opts);\n    } : _props$onCreateContex,\n        _props$onAddHTML = props.onAddHTML,\n        onAddHTML = _props$onAddHTML === void 0 ? null : _props$onAddHTML,\n        _props$onInitialize = props.onInitialize,\n        onInitialize = _props$onInitialize === void 0 ? function () {} : _props$onInitialize,\n        _props$onRender = props.onRender,\n        onRender = _props$onRender === void 0 ? function () {} : _props$onRender,\n        _props$onFinalize = props.onFinalize,\n        onFinalize = _props$onFinalize === void 0 ? function () {} : _props$onFinalize,\n        onError = props.onError,\n        _props$gl = props.gl,\n        gl = _props$gl === void 0 ? null : _props$gl,\n        _props$glOptions = props.glOptions,\n        glOptions = _props$glOptions === void 0 ? {} : _props$glOptions,\n        _props$debug = props.debug,\n        debug = _props$debug === void 0 ? false : _props$debug,\n        _props$createFramebuf = props.createFramebuffer,\n        createFramebuffer = _props$createFramebuf === void 0 ? false : _props$createFramebuf,\n        _props$autoResizeView = props.autoResizeViewport,\n        autoResizeViewport = _props$autoResizeView === void 0 ? true : _props$autoResizeView,\n        _props$autoResizeDraw = props.autoResizeDrawingBuffer,\n        autoResizeDrawingBuffer = _props$autoResizeDraw === void 0 ? true : _props$autoResizeDraw,\n        _props$stats = props.stats,\n        stats = _props$stats === void 0 ? lumaStats.get(\"animation-loop-\".concat(statIdCounter++)) : _props$stats;\n    var _props$useDevicePixel = props.useDevicePixels,\n        useDevicePixels = _props$useDevicePixel === void 0 ? true : _props$useDevicePixel;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext: onCreateContext,\n      onAddHTML: onAddHTML,\n      onInitialize: onInitialize,\n      onRender: onRender,\n      onFinalize: onFinalize,\n      onError: onError,\n      gl: gl,\n      glOptions: glOptions,\n      debug: debug,\n      createFramebuffer: createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport: autoResizeViewport,\n      autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n      useDevicePixels: useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  _createClass(AnimationLoop, [{\n    key: \"delete\",\n    value: function _delete() {\n      this.stop();\n\n      this._setDisplay(null);\n    }\n  }, {\n    key: \"setNeedsRedraw\",\n    value: function setNeedsRedraw(reason) {\n      assert(typeof reason === 'string');\n      this.needsRedraw = this.needsRedraw || reason;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('autoResizeViewport' in props) {\n        this.autoResizeViewport = props.autoResizeViewport;\n      }\n\n      if ('autoResizeDrawingBuffer' in props) {\n        this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      }\n\n      if ('useDevicePixels' in props) {\n        this.useDevicePixels = props.useDevicePixels;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this = this;\n\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._running) {\n        return this;\n      }\n\n      this._running = true;\n\n      var startPromise = this._getPageLoadPromise().then(function () {\n        if (!_this._running || _this._initialized) {\n          return null;\n        }\n\n        _this._createWebGLContext(opts);\n\n        _this._createFramebuffer();\n\n        _this._startEventHandling();\n\n        _this._initializeCallbackData();\n\n        _this._updateCallbackData();\n\n        _this._resizeCanvasDrawingBuffer();\n\n        _this._resizeViewport();\n\n        _this._gpuTimeQuery = Query.isSupported(_this.gl, ['timers']) ? new Query(_this.gl) : null;\n        _this._initialized = true;\n        return _this.onInitialize(_this.animationProps);\n      }).then(function (appContext) {\n        if (_this._running) {\n          _this._addCallbackData(appContext || {});\n\n          if (appContext !== false) {\n            _this._startLoop();\n          }\n        }\n      });\n\n      if (this.props.onError) {\n        startPromise[\"catch\"](this.props.onError);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      this._beginTimers();\n\n      this._setupFrame();\n\n      this._updateCallbackData();\n\n      this._renderFrame(this.animationProps);\n\n      this._clearNeedsRedraw();\n\n      if (this.offScreen && this.gl.commit) {\n        this.gl.commit();\n      }\n\n      if (this._resolveNextFrame) {\n        this._resolveNextFrame(this);\n\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n      }\n\n      this._endTimers();\n\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this._running) {\n        this._finalizeCallbackData();\n\n        cancelAnimationFrame(this._animationFrameId);\n        this._nextFramePromise = null;\n        this._resolveNextFrame = null;\n        this._animationFrameId = null;\n        this._running = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"attachTimeline\",\n    value: function attachTimeline(timeline) {\n      this.timeline = timeline;\n      return this.timeline;\n    }\n  }, {\n    key: \"detachTimeline\",\n    value: function detachTimeline() {\n      this.timeline = null;\n    }\n  }, {\n    key: \"waitForRender\",\n    value: function waitForRender() {\n      var _this2 = this;\n\n      this.setNeedsRedraw('waitForRender');\n\n      if (!this._nextFramePromise) {\n        this._nextFramePromise = new Promise(function (resolve) {\n          _this2._resolveNextFrame = resolve;\n        });\n      }\n\n      return this._nextFramePromise;\n    }\n  }, {\n    key: \"toDataURL\",\n    value: function () {\n      var _toDataURL = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setNeedsRedraw('toDataURL');\n                _context.next = 3;\n                return this.waitForRender();\n\n              case 3:\n                return _context.abrupt(\"return\", this.gl.canvas.toDataURL());\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function toDataURL() {\n        return _toDataURL.apply(this, arguments);\n      }\n\n      return toDataURL;\n    }()\n  }, {\n    key: \"onCreateContext\",\n    value: function onCreateContext() {\n      var _this$props;\n\n      return (_this$props = this.props).onCreateContext.apply(_this$props, arguments);\n    }\n  }, {\n    key: \"onInitialize\",\n    value: function onInitialize() {\n      var _this$props2;\n\n      return (_this$props2 = this.props).onInitialize.apply(_this$props2, arguments);\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {\n      var _this$props3;\n\n      return (_this$props3 = this.props).onRender.apply(_this$props3, arguments);\n    }\n  }, {\n    key: \"onFinalize\",\n    value: function onFinalize() {\n      var _this$props4;\n\n      return (_this$props4 = this.props).onFinalize.apply(_this$props4, arguments);\n    }\n  }, {\n    key: \"getHTMLControlValue\",\n    value: function getHTMLControlValue(id) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var element = document.getElementById(id);\n      return element ? Number(element.value) : defaultValue;\n    }\n  }, {\n    key: \"setViewParameters\",\n    value: function setViewParameters() {\n      log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n      return this;\n    }\n  }, {\n    key: \"_startLoop\",\n    value: function _startLoop() {\n      var _this3 = this;\n\n      var renderFrame = function renderFrame() {\n        if (!_this3._running) {\n          return;\n        }\n\n        _this3.redraw();\n\n        _this3._animationFrameId = _this3._requestAnimationFrame(renderFrame);\n      };\n\n      cancelAnimationFrame(this._animationFrameId);\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    }\n  }, {\n    key: \"_getPageLoadPromise\",\n    value: function _getPageLoadPromise() {\n      if (!this._pageLoadPromise) {\n        this._pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n          if (isPage && document.readyState === 'complete') {\n            resolve(document);\n            return;\n          }\n\n          window.addEventListener('load', function () {\n            resolve(document);\n          });\n        }) : Promise.resolve({});\n      }\n\n      return this._pageLoadPromise;\n    }\n  }, {\n    key: \"_setDisplay\",\n    value: function _setDisplay(display) {\n      if (this.display) {\n        this.display[\"delete\"]();\n        this.display.animationLoop = null;\n      }\n\n      if (display) {\n        display.animationLoop = this;\n      }\n\n      this.display = display;\n    }\n  }, {\n    key: \"_requestAnimationFrame\",\n    value: function _requestAnimationFrame(renderFrameCallback) {\n      if (this.display && this.display.requestAnimationFrame(renderFrameCallback)) {\n        return;\n      }\n\n      requestAnimationFrame(renderFrameCallback);\n    }\n  }, {\n    key: \"_renderFrame\",\n    value: function _renderFrame() {\n      if (this.display) {\n        var _this$display;\n\n        (_this$display = this.display)._renderFrame.apply(_this$display, arguments);\n\n        return;\n      }\n\n      this.onRender.apply(this, arguments);\n    }\n  }, {\n    key: \"_clearNeedsRedraw\",\n    value: function _clearNeedsRedraw() {\n      this.needsRedraw = null;\n    }\n  }, {\n    key: \"_setupFrame\",\n    value: function _setupFrame() {\n      if (this._onSetupFrame) {\n        this._onSetupFrame(this.animationProps);\n      } else {\n        this._resizeCanvasDrawingBuffer();\n\n        this._resizeViewport();\n\n        this._resizeFramebuffer();\n      }\n    }\n  }, {\n    key: \"_initializeCallbackData\",\n    value: function _initializeCallbackData() {\n      this.animationProps = {\n        gl: this.gl,\n        stop: this.stop,\n        canvas: this.gl.canvas,\n        framebuffer: this.framebuffer,\n        useDevicePixels: this.useDevicePixels,\n        needsRedraw: null,\n        startTime: Date.now(),\n        engineTime: 0,\n        tick: 0,\n        tock: 0,\n        time: 0,\n        _timeline: this.timeline,\n        _loop: this,\n        _animationLoop: this,\n        _mousePosition: null\n      };\n    }\n  }, {\n    key: \"_updateCallbackData\",\n    value: function _updateCallbackData() {\n      var _this$_getSizeAndAspe = this._getSizeAndAspect(),\n          width = _this$_getSizeAndAspe.width,\n          height = _this$_getSizeAndAspe.height,\n          aspect = _this$_getSizeAndAspe.aspect;\n\n      if (width !== this.animationProps.width || height !== this.animationProps.height) {\n        this.setNeedsRedraw('drawing buffer resized');\n      }\n\n      if (aspect !== this.animationProps.aspect) {\n        this.setNeedsRedraw('drawing buffer aspect changed');\n      }\n\n      this.animationProps.width = width;\n      this.animationProps.height = height;\n      this.animationProps.aspect = aspect;\n      this.animationProps.needsRedraw = this.needsRedraw;\n      this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n      if (this.timeline) {\n        this.timeline.update(this.animationProps.engineTime);\n      }\n\n      this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n      this.animationProps.tock++;\n      this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n      this.animationProps._offScreen = this.offScreen;\n    }\n  }, {\n    key: \"_finalizeCallbackData\",\n    value: function _finalizeCallbackData() {\n      this.onFinalize(this.animationProps);\n    }\n  }, {\n    key: \"_addCallbackData\",\n    value: function _addCallbackData(appContext) {\n      if (_typeof(appContext) === 'object' && appContext !== null) {\n        this.animationProps = Object.assign({}, this.animationProps, appContext);\n      }\n    }\n  }, {\n    key: \"_createWebGLContext\",\n    value: function _createWebGLContext(opts) {\n      this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n      opts = Object.assign({}, opts, this.props.glOptions);\n      this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n      if (!isWebGL(this.gl)) {\n        throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n      }\n\n      resetParameters(this.gl);\n\n      this._createInfoDiv();\n    }\n  }, {\n    key: \"_createInfoDiv\",\n    value: function _createInfoDiv() {\n      if (this.gl.canvas && this.props.onAddHTML) {\n        var wrapperDiv = document.createElement('div');\n        document.body.appendChild(wrapperDiv);\n        wrapperDiv.style.position = 'relative';\n        var div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.left = '10px';\n        div.style.bottom = '10px';\n        div.style.width = '300px';\n        div.style.background = 'white';\n        wrapperDiv.appendChild(this.gl.canvas);\n        wrapperDiv.appendChild(div);\n        var html = this.props.onAddHTML(div);\n\n        if (html) {\n          div.innerHTML = html;\n        }\n      }\n    }\n  }, {\n    key: \"_getSizeAndAspect\",\n    value: function _getSizeAndAspect() {\n      var width = this.gl.drawingBufferWidth;\n      var height = this.gl.drawingBufferHeight;\n      var aspect = 1;\n      var canvas = this.gl.canvas;\n\n      if (canvas && canvas.clientHeight) {\n        aspect = canvas.clientWidth / canvas.clientHeight;\n      } else if (width > 0 && height > 0) {\n        aspect = width / height;\n      }\n\n      return {\n        width: width,\n        height: height,\n        aspect: aspect\n      };\n    }\n  }, {\n    key: \"_resizeViewport\",\n    value: function _resizeViewport() {\n      if (this.autoResizeViewport) {\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n      }\n    }\n  }, {\n    key: \"_resizeCanvasDrawingBuffer\",\n    value: function _resizeCanvasDrawingBuffer() {\n      if (this.autoResizeDrawingBuffer) {\n        resizeGLContext(this.gl, {\n          useDevicePixels: this.useDevicePixels\n        });\n      }\n    }\n  }, {\n    key: \"_createFramebuffer\",\n    value: function _createFramebuffer() {\n      if (this.props.createFramebuffer) {\n        this.framebuffer = new Framebuffer(this.gl);\n      }\n    }\n  }, {\n    key: \"_resizeFramebuffer\",\n    value: function _resizeFramebuffer() {\n      if (this.framebuffer) {\n        this.framebuffer.resize({\n          width: this.gl.drawingBufferWidth,\n          height: this.gl.drawingBufferHeight\n        });\n      }\n    }\n  }, {\n    key: \"_beginTimers\",\n    value: function _beginTimers() {\n      this.frameRate.timeEnd();\n      this.frameRate.timeStart();\n\n      if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n        this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n      }\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.beginTimeElapsedQuery();\n      }\n\n      this.cpuTime.timeStart();\n    }\n  }, {\n    key: \"_endTimers\",\n    value: function _endTimers() {\n      this.cpuTime.timeEnd();\n\n      if (this._gpuTimeQuery) {\n        this._gpuTimeQuery.end();\n      }\n    }\n  }, {\n    key: \"_startEventHandling\",\n    value: function _startEventHandling() {\n      var canvas = this.gl.canvas;\n\n      if (canvas) {\n        canvas.addEventListener('mousemove', this._onMousemove);\n        canvas.addEventListener('mouseleave', this._onMouseleave);\n      }\n    }\n  }, {\n    key: \"_onMousemove\",\n    value: function _onMousemove(e) {\n      this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n    }\n  }, {\n    key: \"_onMouseleave\",\n    value: function _onMouseleave(e) {\n      this.animationProps._mousePosition = null;\n    }\n  }]);\n\n  return AnimationLoop;\n}();\n\nexport { AnimationLoop as default };\n//# sourceMappingURL=animation-loop.js.map","var INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\nfunction some(array, predict) {\n  for (var i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  var oldHandler = PointerEventInput.prototype.handler;\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    var store = this.store;\n\n    if (ev.button > 0) {\n      if (!some(store, function (e) {\n        return e.pointerId === ev.pointerId;\n      })) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    var eventType = MOUSE_INPUT_MAP[ev.type];\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport var Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","import Hammer from './utils/hammer';\nexport var RECOGNIZERS = Hammer ? [[Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], [Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null;\nexport var RECOGNIZER_COMPATIBLE_MAP = {\n  rotate: ['pinch'],\n  pinch: ['pan'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\nexport var RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\nexport var BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport var INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: ['wheel', 'mousewheel', 'DOMMouseScroll']\n};\nexport var EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\nexport var GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nvar firefox = userAgent.indexOf('firefox') !== -1;\nvar WHEEL_EVENTS = INPUT_EVENT_TYPES.WHEEL_EVENTS;\nvar EVENT_TYPE = 'wheel';\nvar WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nvar WHEEL_DELTA_PER_LINE = 40;\nvar SHIFT_MULTIPLIER = 0.25;\n\nvar WheelInput = function () {\n  function WheelInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, WheelInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent, passiveSupported ? {\n        passive: false\n      } : false);\n    });\n  }\n\n  _createClass(WheelInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      var value = event.deltaY;\n\n      if (window.WheelEvent) {\n        if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n          value /= window.devicePixelRatio;\n        }\n\n        if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n          value *= WHEEL_DELTA_PER_LINE;\n        }\n      }\n\n      var wheelPosition = {\n        x: event.clientX,\n        y: event.clientY\n      };\n\n      if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n        value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n      }\n\n      if (event.shiftKey && value) {\n        value = value * SHIFT_MULTIPLIER;\n      }\n\n      this._onWheel(event, -value, wheelPosition);\n    }\n  }, {\n    key: \"_onWheel\",\n    value: function _onWheel(srcEvent, delta, position) {\n      this.callback({\n        type: EVENT_TYPE,\n        center: position,\n        delta: delta,\n        srcEvent: srcEvent,\n        pointerType: 'mouse',\n        target: srcEvent.target\n      });\n    }\n  }]);\n\n  return WheelInput;\n}();\n\nexport { WheelInput as default };\n//# sourceMappingURL=wheel-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar MOUSE_EVENTS = INPUT_EVENT_TYPES.MOUSE_EVENTS;\nvar MOVE_EVENT_TYPE = 'pointermove';\nvar OVER_EVENT_TYPE = 'pointerover';\nvar OUT_EVENT_TYPE = 'pointerout';\nvar LEAVE_EVENT_TYPE = 'pointerleave';\n\nvar MoveInput = function () {\n  function MoveInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, MoveInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(MoveInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === MOVE_EVENT_TYPE) {\n        this.enableMoveEvent = enabled;\n      }\n\n      if (eventType === OVER_EVENT_TYPE) {\n        this.enableOverEvent = enabled;\n      }\n\n      if (eventType === OUT_EVENT_TYPE) {\n        this.enableOutEvent = enabled;\n      }\n\n      if (eventType === LEAVE_EVENT_TYPE) {\n        this.enableLeaveEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      this.handleOverEvent(event);\n      this.handleOutEvent(event);\n      this.handleLeaveEvent(event);\n      this.handleMoveEvent(event);\n    }\n  }, {\n    key: \"handleOverEvent\",\n    value: function handleOverEvent(event) {\n      if (this.enableOverEvent) {\n        if (event.type === 'mouseover') {\n          this.callback({\n            type: OVER_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleOutEvent\",\n    value: function handleOutEvent(event) {\n      if (this.enableOutEvent) {\n        if (event.type === 'mouseout') {\n          this.callback({\n            type: OUT_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleLeaveEvent\",\n    value: function handleLeaveEvent(event) {\n      if (this.enableLeaveEvent) {\n        if (event.type === 'mouseleave') {\n          this.callback({\n            type: LEAVE_EVENT_TYPE,\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleMoveEvent\",\n    value: function handleMoveEvent(event) {\n      if (this.enableMoveEvent) {\n        switch (event.type) {\n          case 'mousedown':\n            if (event.button >= 0) {\n              this.pressed = true;\n            }\n\n            break;\n\n          case 'mousemove':\n            if (event.which === 0) {\n              this.pressed = false;\n            }\n\n            if (!this.pressed) {\n              this.callback({\n                type: MOVE_EVENT_TYPE,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n              });\n            }\n\n            break;\n\n          case 'mouseup':\n            this.pressed = false;\n            break;\n\n          default:\n        }\n      }\n    }\n  }]);\n\n  return MoveInput;\n}();\n\nexport { MoveInput as default };\n//# sourceMappingURL=move-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { INPUT_EVENT_TYPES } from '../constants';\nvar KEY_EVENTS = INPUT_EVENT_TYPES.KEY_EVENTS;\nvar DOWN_EVENT_TYPE = 'keydown';\nvar UP_EVENT_TYPE = 'keyup';\n\nvar KeyInput = function () {\n  function KeyInput(element, callback) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, KeyInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = options.tabIndex || 0;\n    element.style.outline = 'none';\n    this.events.forEach(function (event) {\n      return element.addEventListener(event, _this.handleEvent);\n    });\n  }\n\n  _createClass(KeyInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      var _this2 = this;\n\n      this.events.forEach(function (event) {\n        return _this2.element.removeEventListener(event, _this2.handleEvent);\n      });\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === DOWN_EVENT_TYPE) {\n        this.enableDownEvent = enabled;\n      }\n\n      if (eventType === UP_EVENT_TYPE) {\n        this.enableUpEvent = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var targetElement = event.target || event.srcElement;\n\n      if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n        return;\n      }\n\n      if (this.enableDownEvent && event.type === 'keydown') {\n        this.callback({\n          type: DOWN_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n\n      if (this.enableUpEvent && event.type === 'keyup') {\n        this.callback({\n          type: UP_EVENT_TYPE,\n          srcEvent: event,\n          key: event.key,\n          target: event.target\n        });\n      }\n    }\n  }]);\n\n  return KeyInput;\n}();\n\nexport { KeyInput as default };\n//# sourceMappingURL=key-input.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar EVENT_TYPE = 'contextmenu';\n\nvar ContextmenuInput = function () {\n  function ContextmenuInput(element, callback) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, ContextmenuInput);\n\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  _createClass(ContextmenuInput, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n  }, {\n    key: \"enableEventType\",\n    value: function enableEventType(eventType, enabled) {\n      if (eventType === EVENT_TYPE) {\n        this.options.enable = enabled;\n      }\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (!this.options.enable) {\n        return;\n      }\n\n      this.callback({\n        type: EVENT_TYPE,\n        center: {\n          x: event.clientX,\n          y: event.clientY\n        },\n        srcEvent: event,\n        pointerType: 'mouse',\n        target: event.target\n      });\n    }\n  }]);\n\n  return ContextmenuInput;\n}();\n\nexport { ContextmenuInput as default };\n//# sourceMappingURL=contextmenu-input.js.map","var DOWN_EVENT = 1;\nvar MOVE_EVENT = 2;\nvar UP_EVENT = 4;\nvar MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\nvar MOUSE_EVENT_WHICH_LEFT = 1;\nvar MOUSE_EVENT_WHICH_MIDDLE = 2;\nvar MOUSE_EVENT_WHICH_RIGHT = 3;\nvar MOUSE_EVENT_BUTTON_LEFT = 0;\nvar MOUSE_EVENT_BUTTON_MIDDLE = 1;\nvar MOUSE_EVENT_BUTTON_RIGHT = 2;\nvar MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nvar MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nvar MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\nexport function whichButtons(event) {\n  var eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    return null;\n  }\n\n  var _event$srcEvent = event.srcEvent,\n      buttons = _event$srcEvent.buttons,\n      button = _event$srcEvent.button,\n      which = _event$srcEvent.which;\n  var leftButton = false;\n  var middleButton = false;\n  var rightButton = false;\n\n  if (eventType === UP_EVENT || eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton: leftButton,\n    middleButton: middleButton,\n    rightButton: rightButton\n  };\n}\nexport function getOffsetPosition(event, rootElement) {\n  var srcEvent = event.srcEvent;\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    return null;\n  }\n\n  var center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  var rect = rootElement.getBoundingClientRect();\n  var scaleX = rect.width / rootElement.offsetWidth;\n  var scaleY = rect.height / rootElement.offsetHeight;\n  var offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center: center,\n    offsetCenter: offsetCenter\n  };\n}\n//# sourceMappingURL=event-utils.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { whichButtons, getOffsetPosition } from './event-utils';\nvar DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\n\nvar EventRegistrar = function () {\n  function EventRegistrar(eventManager) {\n    _classCallCheck(this, EventRegistrar);\n\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  _createClass(EventRegistrar, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      return !this._active;\n    }\n  }, {\n    key: \"add\",\n    value: function add(type, handler, opts) {\n      var once = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var passive = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      if (opts && (_typeof(opts) !== 'object' || opts.addEventListener)) {\n        opts = {\n          srcElement: opts\n        };\n      }\n\n      opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n      var entries = handlersByElement.get(opts.srcElement);\n\n      if (!entries) {\n        entries = [];\n        handlersByElement.set(opts.srcElement, entries);\n      }\n\n      var entry = {\n        type: type,\n        handler: handler,\n        srcElement: opts.srcElement,\n        priority: opts.priority\n      };\n\n      if (once) {\n        entry.once = true;\n      }\n\n      if (passive) {\n        entry.passive = true;\n      }\n\n      handlers.push(entry);\n      this._active = this._active || !entry.passive;\n      var insertPosition = entries.length - 1;\n\n      while (insertPosition >= 0) {\n        if (entries[insertPosition].priority >= entry.priority) {\n          break;\n        }\n\n        insertPosition--;\n      }\n\n      entries.splice(insertPosition + 1, 0, entry);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(type, handler) {\n      var handlers = this.handlers,\n          handlersByElement = this.handlersByElement;\n\n      for (var i = handlers.length - 1; i >= 0; i--) {\n        var entry = handlers[i];\n\n        if (entry.type === type && entry.handler === handler) {\n          handlers.splice(i, 1);\n          var entries = handlersByElement.get(entry.srcElement);\n          entries.splice(entries.indexOf(entry), 1);\n\n          if (entries.length === 0) {\n            handlersByElement[\"delete\"](entry.srcElement);\n          }\n        }\n      }\n\n      this._active = handlers.some(function (entry) {\n        return !entry.passive;\n      });\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      if (this.isEmpty()) {\n        return;\n      }\n\n      var mjolnirEvent = this._normalizeEvent(event);\n\n      var target = event.srcEvent.target;\n\n      while (target && target !== mjolnirEvent.rootElement) {\n        this._emit(mjolnirEvent, target);\n\n        if (mjolnirEvent.handled) {\n          return;\n        }\n\n        target = target.parentNode;\n      }\n\n      this._emit(mjolnirEvent, 'root');\n    }\n  }, {\n    key: \"_emit\",\n    value: function _emit(event, srcElement) {\n      var entries = this.handlersByElement.get(srcElement);\n\n      if (entries) {\n        var immediatePropagationStopped = false;\n\n        var stopPropagation = function stopPropagation() {\n          event.handled = true;\n        };\n\n        var stopImmediatePropagation = function stopImmediatePropagation() {\n          event.handled = true;\n          immediatePropagationStopped = true;\n        };\n\n        var entriesToRemove = [];\n\n        for (var i = 0; i < entries.length; i++) {\n          var _entries$i = entries[i],\n              type = _entries$i.type,\n              handler = _entries$i.handler,\n              once = _entries$i.once;\n          handler(Object.assign({}, event, {\n            type: type,\n            stopPropagation: stopPropagation,\n            stopImmediatePropagation: stopImmediatePropagation\n          }));\n\n          if (once) {\n            entriesToRemove.push(entries[i]);\n          }\n\n          if (immediatePropagationStopped) {\n            break;\n          }\n        }\n\n        for (var _i = 0; _i < entriesToRemove.length; _i++) {\n          var _entriesToRemove$_i = entriesToRemove[_i],\n              type = _entriesToRemove$_i.type,\n              handler = _entriesToRemove$_i.handler;\n          this.remove(type, handler);\n        }\n      }\n    }\n  }, {\n    key: \"_normalizeEvent\",\n    value: function _normalizeEvent(event) {\n      var rootElement = this.eventManager.element;\n      return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n        handled: false,\n        rootElement: rootElement\n      });\n    }\n  }]);\n\n  return EventRegistrar;\n}();\n\nexport { EventRegistrar as default };\n//# sourceMappingURL=event-registrar.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nvar DEFAULT_OPTIONS = {\n  events: null,\n  recognizers: null,\n  recognizerOptions: {},\n  Manager: Manager,\n  touchAction: 'none',\n  tabIndex: 0\n};\n\nvar EventManager = function () {\n  function EventManager() {\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, EventManager);\n\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element);\n    var events = options.events;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  _createClass(EventManager, [{\n    key: \"setElement\",\n    value: function setElement(element) {\n      var _this = this;\n\n      if (this.element) {\n        this.destroy();\n      }\n\n      this.element = element;\n\n      if (!element) {\n        return;\n      }\n\n      var options = this.options;\n      var ManagerClass = options.Manager;\n      this.manager = new ManagerClass(element, {\n        touchAction: options.touchAction,\n        recognizers: options.recognizers || RECOGNIZERS\n      }).on('hammer.input', this._onBasicInput);\n\n      if (!options.recognizers) {\n        Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(function (name) {\n          var recognizer = _this.manager.get(name);\n\n          if (recognizer) {\n            RECOGNIZER_COMPATIBLE_MAP[name].forEach(function (otherName) {\n              recognizer.recognizeWith(otherName);\n            });\n          }\n        });\n      }\n\n      for (var recognizerName in options.recognizerOptions) {\n        var recognizer = this.manager.get(recognizerName);\n\n        if (recognizer) {\n          var recognizerOption = options.recognizerOptions[recognizerName];\n          delete recognizerOption.enable;\n          recognizer.set(recognizerOption);\n        }\n      }\n\n      this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.moveInput = new MoveInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      this.keyInput = new KeyInput(element, this._onOtherEvent, {\n        enable: false,\n        tabIndex: options.tabIndex\n      });\n      this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n        enable: false\n      });\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              eventAlias = _step$value[0],\n              eventRegistrar = _step$value[1];\n\n          if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n            this.manager.on(eventAlias, eventRegistrar.handleEvent);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.element) {\n        this.wheelInput.destroy();\n        this.moveInput.destroy();\n        this.keyInput.destroy();\n        this.contextmenuInput.destroy();\n        this.manager.destroy();\n        this.wheelInput = null;\n        this.moveInput = null;\n        this.keyInput = null;\n        this.contextmenuInput = null;\n        this.manager = null;\n        this.element = null;\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false);\n    }\n  }, {\n    key: \"once\",\n    value: function once(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, true);\n    }\n  }, {\n    key: \"watch\",\n    value: function watch(event, handler, opts) {\n      this._addEventHandler(event, handler, opts, false, true);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, handler) {\n      this._removeEventHandler(event, handler);\n    }\n  }, {\n    key: \"_toggleRecognizer\",\n    value: function _toggleRecognizer(name, enabled) {\n      var manager = this.manager;\n\n      if (!manager) {\n        return;\n      }\n\n      var recognizer = manager.get(name);\n\n      if (recognizer && recognizer.options.enable !== enabled) {\n        recognizer.set({\n          enable: enabled\n        });\n        var fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n        if (fallbackRecognizers && !this.options.recognizers) {\n          fallbackRecognizers.forEach(function (otherName) {\n            var otherRecognizer = manager.get(otherName);\n\n            if (enabled) {\n              otherRecognizer.requireFailure(name);\n              recognizer.dropRequireFailure(otherName);\n            } else {\n              otherRecognizer.dropRequireFailure(name);\n            }\n          });\n        }\n      }\n\n      this.wheelInput.enableEventType(name, enabled);\n      this.moveInput.enableEventType(name, enabled);\n      this.keyInput.enableEventType(name, enabled);\n      this.contextmenuInput.enableEventType(name, enabled);\n    }\n  }, {\n    key: \"_addEventHandler\",\n    value: function _addEventHandler(event, handler, opts, once, passive) {\n      if (typeof event !== 'string') {\n        opts = handler;\n\n        for (var eventName in event) {\n          this._addEventHandler(eventName, event[eventName], opts, once, passive);\n        }\n\n        return;\n      }\n\n      var manager = this.manager,\n          events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        eventRegistrar = new EventRegistrar(this);\n        events.set(eventAlias, eventRegistrar);\n        eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n\n        if (manager) {\n          manager.on(eventAlias, eventRegistrar.handleEvent);\n        }\n      }\n\n      eventRegistrar.add(event, handler, opts, once, passive);\n\n      if (!eventRegistrar.isEmpty()) {\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n      }\n    }\n  }, {\n    key: \"_removeEventHandler\",\n    value: function _removeEventHandler(event, handler) {\n      if (typeof event !== 'string') {\n        for (var eventName in event) {\n          this._removeEventHandler(eventName, event[eventName]);\n        }\n\n        return;\n      }\n\n      var events = this.events;\n      var eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n      var eventRegistrar = events.get(eventAlias);\n\n      if (!eventRegistrar) {\n        return;\n      }\n\n      eventRegistrar.remove(event, handler);\n\n      if (eventRegistrar.isEmpty()) {\n        var recognizerName = eventRegistrar.recognizerName;\n        var isRecognizerUsed = false;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = events.values()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var eh = _step2.value;\n\n            if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n              isRecognizerUsed = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (!isRecognizerUsed) {\n          this._toggleRecognizer(recognizerName, false);\n        }\n      }\n    }\n  }, {\n    key: \"_onBasicInput\",\n    value: function _onBasicInput(event) {\n      var srcEvent = event.srcEvent;\n      var alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n      if (alias) {\n        this.manager.emit(alias, event);\n      }\n    }\n  }, {\n    key: \"_onOtherEvent\",\n    value: function _onOtherEvent(event) {\n      this.manager.emit(event.type, event);\n    }\n  }]);\n\n  return EventManager;\n}();\n\nexport { EventManager as default };\n//# sourceMappingURL=event-manager.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nvar getCursor = function getCursor(_ref) {\n  var isDragging = _ref.isDragging;\n  return isDragging ? 'grabbing' : 'grab';\n};\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool\n  };\n}\n\nvar defaultProps = {\n  id: 'deckgl-overlay',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  _framebuffer: null,\n  _animate: false,\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: null,\n  _onMetrics: null,\n  getCursor: getCursor,\n  debug: false,\n  drawPickingColors: false\n};\n\nvar Deck = function () {\n  function Deck(props) {\n    _classCallCheck(this, Deck);\n\n    props = Object.assign({}, defaultProps, props);\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n    this._pickAndCallback = this._pickAndCallback.bind(this);\n    this._onRendererInitialized = this._onRendererInitialized.bind(this);\n    this._onRenderFrame = this._onRenderFrame.bind(this);\n    this._onViewStateChange = this._onViewStateChange.bind(this);\n    this._onInteractiveStateChange = this._onInteractiveStateChange.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n    this.animationLoop.start();\n  }\n\n  _createClass(Deck, [{\n    key: \"finalize\",\n    value: function finalize() {\n      this.animationLoop.stop();\n      this.animationLoop = null;\n      this._lastPointerDownInfo = null;\n\n      if (this.layerManager) {\n        this.layerManager.finalize();\n        this.layerManager = null;\n        this.viewManager.finalize();\n        this.viewManager = null;\n        this.effectManager.finalize();\n        this.effectManager = null;\n        this.deckRenderer.finalize();\n        this.deckRenderer = null;\n        this.deckPicker.finalize();\n        this.deckPicker = null;\n        this.eventManager.destroy();\n        this.eventManager = null;\n        this.tooltip.remove();\n        this.tooltip = null;\n      }\n\n      if (!this.props.canvas && !this.props.gl && this.canvas) {\n        this.canvas.parentElement.removeChild(this.canvas);\n        this.canvas = null;\n      }\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this.stats.get('setProps Time').timeStart();\n\n      if ('onLayerHover' in props) {\n        log.removed('onLayerHover', 'onHover')();\n      }\n\n      if ('onLayerClick' in props) {\n        log.removed('onLayerClick', 'onClick')();\n      }\n\n      if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n        this.viewState = props.initialViewState;\n      }\n\n      Object.assign(this.props, props);\n\n      this._setCanvasSize(this.props);\n\n      var resolvedProps = Object.create(this.props);\n      Object.assign(resolvedProps, {\n        views: this._getViews(),\n        width: this.width,\n        height: this.height,\n        viewState: this._getViewState()\n      });\n      this.animationLoop.setProps(resolvedProps);\n\n      if (this.layerManager) {\n        this.viewManager.setProps(resolvedProps);\n        this.layerManager.activateViewport(this.getViewports()[0]);\n        this.layerManager.setProps(resolvedProps);\n        this.effectManager.setProps(resolvedProps);\n        this.deckRenderer.setProps(resolvedProps);\n        this.deckPicker.setProps(resolvedProps);\n      }\n\n      this.stats.get('setProps Time').timeEnd();\n    }\n  }, {\n    key: \"needsRedraw\",\n    value: function needsRedraw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        clearRedrawFlags: false\n      };\n\n      if (this.props._animate) {\n        return 'Deck._animate';\n      }\n\n      var redraw = this._needsRedraw;\n\n      if (opts.clearRedrawFlags) {\n        this._needsRedraw = false;\n      }\n\n      var viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n      var layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n      var effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n      var deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n      redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n      return redraw;\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw(force) {\n      if (!this.layerManager) {\n        return;\n      }\n\n      var redrawReason = force || this.needsRedraw({\n        clearRedrawFlags: true\n      });\n\n      if (!redrawReason) {\n        return;\n      }\n\n      this.stats.get('Redraw Count').incrementCount();\n\n      if (this.props._customRender) {\n        this.props._customRender(redrawReason);\n      } else {\n        this._drawLayers(redrawReason);\n      }\n    }\n  }, {\n    key: \"getViews\",\n    value: function getViews() {\n      return this.viewManager.views;\n    }\n  }, {\n    key: \"getViewports\",\n    value: function getViewports(rect) {\n      return this.viewManager.getViewports(rect);\n    }\n  }, {\n    key: \"pickObject\",\n    value: function pickObject(opts) {\n      var infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n      return infos.length ? infos[0] : null;\n    }\n  }, {\n    key: \"pickMultipleObjects\",\n    value: function pickMultipleObjects(opts) {\n      opts.depth = opts.depth || 10;\n      return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n    }\n  }, {\n    key: \"pickObjects\",\n    value: function pickObjects(opts) {\n      return this._pick('pickObjects', 'pickObjects Time', opts);\n    }\n  }, {\n    key: \"_addResources\",\n    value: function _addResources(resources) {\n      var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      for (var id in resources) {\n        this.layerManager.resourceManager.add({\n          resourceId: id,\n          data: resources[id],\n          forceUpdate: forceUpdate\n        });\n      }\n    }\n  }, {\n    key: \"_removeResources\",\n    value: function _removeResources(resourceIds) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = resourceIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var id = _step.value;\n          this.layerManager.resourceManager.remove(id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_pick\",\n    value: function _pick(method, statKey, opts) {\n      var stats = this.stats;\n      stats.get('Pick Count').incrementCount();\n      stats.get(statKey).timeStart();\n      var infos = this.deckPicker[method](Object.assign({\n        layers: this.layerManager.getLayers(opts),\n        viewports: this.getViewports(opts),\n        onViewportActive: this.layerManager.activateViewport\n      }, opts));\n      stats.get(statKey).timeEnd();\n      return infos;\n    }\n  }, {\n    key: \"_createCanvas\",\n    value: function _createCanvas(props) {\n      var canvas = props.canvas;\n\n      if (typeof canvas === 'string') {\n        canvas = document.getElementById(canvas);\n        assert(canvas);\n      }\n\n      if (!canvas) {\n        canvas = document.createElement('canvas');\n        var parent = props.parent || document.body;\n        parent.appendChild(canvas);\n      }\n\n      var id = props.id,\n          style = props.style;\n      canvas.id = id;\n      Object.assign(canvas.style, style);\n      return canvas;\n    }\n  }, {\n    key: \"_setCanvasSize\",\n    value: function _setCanvasSize(props) {\n      if (!this.canvas) {\n        return;\n      }\n\n      var width = props.width,\n          height = props.height;\n\n      if (width || width === 0) {\n        width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n        this.canvas.style.width = width;\n      }\n\n      if (height || height === 0) {\n        height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.height = height;\n      }\n    }\n  }, {\n    key: \"_updateCanvasSize\",\n    value: function _updateCanvasSize() {\n      if (this._checkForCanvasSizeChange()) {\n        var width = this.width,\n            height = this.height;\n        this.viewManager.setProps({\n          width: width,\n          height: height\n        });\n        this.props.onResize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n  }, {\n    key: \"_checkForCanvasSizeChange\",\n    value: function _checkForCanvasSizeChange() {\n      var canvas = this.canvas;\n\n      if (!canvas) {\n        return false;\n      }\n\n      var newWidth = canvas.clientWidth || canvas.width;\n      var newHeight = canvas.clientHeight || canvas.height;\n\n      if (newWidth !== this.width || newHeight !== this.height) {\n        this.width = newWidth;\n        this.height = newHeight;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_createAnimationLoop\",\n    value: function _createAnimationLoop(props) {\n      var _this = this;\n\n      var width = props.width,\n          height = props.height,\n          gl = props.gl,\n          glOptions = props.glOptions,\n          debug = props.debug,\n          useDevicePixels = props.useDevicePixels,\n          autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n      return new AnimationLoop({\n        width: width,\n        height: height,\n        useDevicePixels: useDevicePixels,\n        autoResizeDrawingBuffer: autoResizeDrawingBuffer,\n        autoResizeViewport: false,\n        gl: gl,\n        onCreateContext: function onCreateContext(opts) {\n          return createGLContext(Object.assign({}, glOptions, opts, {\n            canvas: _this.canvas,\n            debug: debug\n          }));\n        },\n        onInitialize: this._onRendererInitialized,\n        onRender: this._onRenderFrame,\n        onBeforeRender: props.onBeforeRender,\n        onAfterRender: props.onAfterRender\n      });\n    }\n  }, {\n    key: \"_getViewState\",\n    value: function _getViewState() {\n      return this.props.viewState || this.viewState;\n    }\n  }, {\n    key: \"_getViews\",\n    value: function _getViews() {\n      var views = this.props.views || [new MapView({\n        id: 'default-view'\n      })];\n      views = Array.isArray(views) ? views : [views];\n\n      if (views.length && this.props.controller) {\n        views[0].props.controller = this.props.controller;\n      }\n\n      return views;\n    }\n  }, {\n    key: \"_onPointerMove\",\n    value: function _onPointerMove(event) {\n      var _pickRequest = this._pickRequest;\n\n      if (event.type === 'pointerleave') {\n        _pickRequest.x = -1;\n        _pickRequest.y = -1;\n        _pickRequest.radius = 0;\n      } else if (event.leftButton || event.rightButton) {\n        return;\n      } else {\n        var pos = event.offsetCenter;\n\n        if (!pos) {\n          return;\n        }\n\n        _pickRequest.x = pos.x;\n        _pickRequest.y = pos.y;\n        _pickRequest.radius = this.props.pickingRadius;\n      }\n\n      if (this.layerManager) {\n        this.layerManager.context.mousePosition = {\n          x: _pickRequest.x,\n          y: _pickRequest.y\n        };\n      }\n\n      _pickRequest.event = event;\n      _pickRequest.mode = 'hover';\n    }\n  }, {\n    key: \"_pickAndCallback\",\n    value: function _pickAndCallback() {\n      var _pickRequest = this._pickRequest;\n\n      if (_pickRequest.event) {\n        var _this$_pick = this._pick('pickObject', 'pickObject Time', _pickRequest),\n            result = _this$_pick.result,\n            emptyInfo = _this$_pick.emptyInfo;\n\n        var pickedInfo = emptyInfo;\n        var handled = false;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = result[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var info = _step2.value;\n            pickedInfo = info;\n            handled = info.layer.onHover(info, _pickRequest.event);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n              _iterator2[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (!handled && this.props.onHover) {\n          this.props.onHover(pickedInfo, _pickRequest.event);\n        }\n\n        if (this.props.getTooltip) {\n          var displayInfo = this.props.getTooltip(pickedInfo);\n          this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n        }\n\n        _pickRequest.event = null;\n      }\n    }\n  }, {\n    key: \"_updateCursor\",\n    value: function _updateCursor() {\n      var container = this.props.parent || this.canvas;\n\n      if (container) {\n        container.style.cursor = this.props.getCursor(this.interactiveState);\n      }\n    }\n  }, {\n    key: \"_setGLContext\",\n    value: function _setGLContext(gl) {\n      if (this.layerManager) {\n        return;\n      }\n\n      if (!this.canvas) {\n        this.canvas = gl.canvas;\n        instrumentGLContext(gl, {\n          enable: true,\n          copyState: true\n        });\n      }\n\n      this.tooltip = new Tooltip(this.canvas);\n      setParameters(gl, {\n        blend: true,\n        blendFunc: [770, 771, 1, 771],\n        polygonOffsetFill: true,\n        depthTest: true,\n        depthFunc: 515\n      });\n      this.props.onWebGLInitialized(gl);\n      var timeline = new Timeline();\n      timeline.play();\n      this.animationLoop.attachTimeline(timeline);\n      this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n        touchAction: this.props.touchAction,\n        events: {\n          pointerdown: this._onPointerDown,\n          pointermove: this._onPointerMove,\n          pointerleave: this._onPointerMove\n        }\n      });\n\n      for (var eventType in EVENTS) {\n        this.eventManager.on(eventType, this._onEvent);\n      }\n\n      this.viewManager = new ViewManager({\n        timeline: timeline,\n        eventManager: this.eventManager,\n        onViewStateChange: this._onViewStateChange,\n        onInteractiveStateChange: this._onInteractiveStateChange,\n        views: this._getViews(),\n        viewState: this._getViewState(),\n        width: this.width,\n        height: this.height\n      });\n      var viewport = this.viewManager.getViewports()[0];\n      this.layerManager = new LayerManager(gl, {\n        deck: this,\n        stats: this.stats,\n        viewport: viewport,\n        timeline: timeline\n      });\n      this.effectManager = new EffectManager();\n      this.deckRenderer = new DeckRenderer(gl);\n      this.deckPicker = new DeckPicker(gl);\n      this.setProps(this.props);\n\n      this._updateCanvasSize();\n\n      this.props.onLoad();\n    }\n  }, {\n    key: \"_drawLayers\",\n    value: function _drawLayers(redrawReason, renderOptions) {\n      var gl = this.layerManager.context.gl;\n      setParameters(gl, this.props.parameters);\n      this.props.onBeforeRender({\n        gl: gl\n      });\n      this.deckRenderer.renderLayers(Object.assign({\n        target: this.props._framebuffer,\n        layers: this.layerManager.getLayers(),\n        viewports: this.viewManager.getViewports(),\n        onViewportActive: this.layerManager.activateViewport,\n        views: this.viewManager.getViews(),\n        pass: 'screen',\n        redrawReason: redrawReason,\n        effects: this.effectManager.getEffects()\n      }, renderOptions));\n      this.props.onAfterRender({\n        gl: gl\n      });\n    }\n  }, {\n    key: \"_onRendererInitialized\",\n    value: function _onRendererInitialized(_ref2) {\n      var gl = _ref2.gl;\n\n      this._setGLContext(gl);\n    }\n  }, {\n    key: \"_onRenderFrame\",\n    value: function _onRenderFrame(animationProps) {\n      this._getFrameStats();\n\n      if (this._metricsCounter++ % 60 === 0) {\n        this._getMetrics();\n\n        this.stats.reset();\n        log.table(4, this.metrics)();\n\n        if (this.props._onMetrics) {\n          this.props._onMetrics(this.metrics);\n        }\n      }\n\n      this._updateCanvasSize();\n\n      this._updateCursor();\n\n      this.layerManager.updateLayers();\n\n      this._pickAndCallback();\n\n      this.redraw(false);\n\n      if (this.viewManager) {\n        this.viewManager.updateViewStates();\n      }\n    }\n  }, {\n    key: \"_onViewStateChange\",\n    value: function _onViewStateChange(params) {\n      var viewState = this.props.onViewStateChange(params) || params.viewState;\n\n      if (this.viewState) {\n        this.viewState = _objectSpread({}, this.viewState, _defineProperty({}, params.viewId, viewState));\n\n        if (!this.props.viewState) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_onInteractiveStateChange\",\n    value: function _onInteractiveStateChange(_ref3) {\n      var _ref3$isDragging = _ref3.isDragging,\n          isDragging = _ref3$isDragging === void 0 ? false : _ref3$isDragging;\n\n      if (isDragging !== this.interactiveState.isDragging) {\n        this.interactiveState.isDragging = isDragging;\n      }\n    }\n  }, {\n    key: \"_onEvent\",\n    value: function _onEvent(event) {\n      var eventOptions = EVENTS[event.type];\n      var pos = event.offsetCenter;\n\n      if (!eventOptions || !pos) {\n        return;\n      }\n\n      var layers = this.layerManager.getLayers();\n      var info = this.deckPicker.getLastPickedObject({\n        x: pos.x,\n        y: pos.y,\n        layers: layers,\n        viewports: this.getViewports(pos)\n      }, this._lastPointerDownInfo);\n      var layer = info.layer;\n      var layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n      var rootHandler = this.props[eventOptions.handler];\n      var handled = false;\n\n      if (layerHandler) {\n        handled = layerHandler.call(layer, info, event);\n      }\n\n      if (!handled && rootHandler) {\n        rootHandler(info, event);\n      }\n    }\n  }, {\n    key: \"_onPointerDown\",\n    value: function _onPointerDown(event) {\n      var pos = event.offsetCenter;\n      this._lastPointerDownInfo = this.pickObject({\n        x: pos.x,\n        y: pos.y,\n        radius: this.props.pickingRadius\n      });\n    }\n  }, {\n    key: \"_getFrameStats\",\n    value: function _getFrameStats() {\n      var stats = this.stats;\n      stats.get('frameRate').timeEnd();\n      stats.get('frameRate').timeStart();\n      var animationLoopStats = this.animationLoop.stats;\n      stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n      stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n    }\n  }, {\n    key: \"_getMetrics\",\n    value: function _getMetrics() {\n      var metrics = this.metrics,\n          stats = this.stats;\n      metrics.fps = stats.get('frameRate').getHz();\n      metrics.setPropsTime = stats.get('setProps Time').time;\n      metrics.updateAttributesTime = stats.get('Update Attributes').time;\n      metrics.framesRedrawn = stats.get('Redraw Count').count;\n      metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n      metrics.pickCount = stats.get('Pick Count').count;\n      metrics.gpuTime = stats.get('GPU Time').time;\n      metrics.cpuTime = stats.get('CPU Time').time;\n      metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n      metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n      var memoryStats = lumaStats.get('Memory Usage');\n      metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n      metrics.textureMemory = memoryStats.get('Texture Memory').count;\n      metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n      metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n    }\n  }]);\n\n  return Deck;\n}();\n\nexport { Deck as default };\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Deck, WebMercatorViewport } from '@deck.gl/core';\nexport function getDeckInstance(_ref) {\n  var map = _ref.map,\n      gl = _ref.gl,\n      deck = _ref.deck;\n\n  if (map.__deck) {\n    return map.__deck;\n  }\n\n  var customRender = deck && deck.props._customRender;\n  var deckProps = {\n    useDevicePixels: true,\n    _customRender: function _customRender() {\n      map.triggerRepaint();\n\n      if (customRender) {\n        customRender();\n      }\n    },\n    parameters: {\n      depthMask: true,\n      depthTest: true,\n      blendFunc: [770, 771, 1, 771],\n      blendEquation: 32774\n    },\n    userData: {\n      isExternal: false,\n      mapboxLayers: new Set()\n    }\n  };\n\n  if (deck) {\n    deck.setProps(deckProps);\n    deck.props.userData.isExternal = true;\n  } else {\n    Object.assign(deckProps, {\n      gl: gl,\n      width: false,\n      height: false,\n      viewState: getViewState(map)\n    });\n    deck = new Deck(deckProps);\n    map.on('move', function () {\n      return onMapMove(deck, map);\n    });\n    map.on('remove', function () {\n      deck.finalize();\n      map.__deck = null;\n    });\n  }\n\n  deck.props.userData.mapboxVersion = getMapboxVersion(map);\n  map.__deck = deck;\n  map.on('render', function () {\n    if (deck.layerManager) afterRender(deck, map);\n  });\n  return deck;\n}\nexport function addLayer(deck, layer) {\n  deck.props.userData.mapboxLayers.add(layer);\n  updateLayers(deck);\n}\nexport function removeLayer(deck, layer) {\n  deck.props.userData.mapboxLayers[\"delete\"](layer);\n  updateLayers(deck);\n}\nexport function updateLayer(deck, layer) {\n  updateLayers(deck);\n}\nexport function drawLayer(deck, map, layer) {\n  var currentViewport = deck.props.userData.currentViewport;\n\n  if (!currentViewport) {\n    currentViewport = getViewport(deck, map, true);\n    deck.props.userData.currentViewport = currentViewport;\n  }\n\n  if (!deck.layerManager) {\n    return;\n  }\n\n  deck._drawLayers('mapbox-repaint', {\n    viewports: [currentViewport],\n    layers: getLayers(deck, function (deckLayer) {\n      return shouldDrawLayer(layer.id, deckLayer);\n    }),\n    clearCanvas: false\n  });\n}\n\nfunction getViewState(map) {\n  var _map$getCenter = map.getCenter(),\n      lng = _map$getCenter.lng,\n      lat = _map$getCenter.lat;\n\n  return {\n    longitude: lng,\n    latitude: lat,\n    zoom: map.getZoom(),\n    bearing: map.getBearing(),\n    pitch: map.getPitch()\n  };\n}\n\nfunction getMapboxVersion(map) {\n  var major = 0;\n  var minor = 0;\n\n  if (map.version) {\n    var _map$version$split$sl = map.version.split('.').slice(0, 2).map(Number);\n\n    var _map$version$split$sl2 = _slicedToArray(_map$version$split$sl, 2);\n\n    major = _map$version$split$sl2[0];\n    minor = _map$version$split$sl2[1];\n  }\n\n  return {\n    major: major,\n    minor: minor\n  };\n}\n\nfunction getViewport(deck, map) {\n  var useMapboxProjection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var mapboxVersion = deck.props.userData.mapboxVersion;\n  return new WebMercatorViewport(Object.assign({\n    x: 0,\n    y: 0,\n    width: deck.width,\n    height: deck.height,\n    repeat: true\n  }, getViewState(map), useMapboxProjection ? {\n    nearZMultiplier: mapboxVersion.major === 1 && mapboxVersion.minor >= 3 || mapboxVersion.major >= 2 ? 0.02 : 1 / (deck.height || 1)\n  } : {\n    nearZMultiplier: 0.1\n  }));\n}\n\nfunction afterRender(deck, map) {\n  var _deck$props$userData = deck.props.userData,\n      mapboxLayers = _deck$props$userData.mapboxLayers,\n      isExternal = _deck$props$userData.isExternal;\n\n  if (isExternal) {\n    var mapboxLayerIds = Array.from(mapboxLayers, function (layer) {\n      return layer.id;\n    });\n    var layers = getLayers(deck, function (deckLayer) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = mapboxLayerIds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var id = _step.value;\n\n          if (shouldDrawLayer(id, deckLayer)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return true;\n    });\n\n    if (layers.length > 0) {\n      deck._drawLayers('mapbox-repaint', {\n        viewports: [getViewport(deck, map, false)],\n        layers: layers,\n        clearCanvas: false\n      });\n    }\n  }\n\n  deck.props.userData.currentViewport = null;\n}\n\nfunction onMapMove(deck, map) {\n  deck.setProps({\n    viewState: getViewState(map)\n  });\n  deck.needsRedraw({\n    clearRedrawFlags: true\n  });\n}\n\nfunction getLayers(deck, layerFilter) {\n  var layers = deck.layerManager.getLayers();\n  return layers.filter(layerFilter);\n}\n\nfunction shouldDrawLayer(id, layer) {\n  var layerInstance = layer;\n\n  while (layerInstance) {\n    if (layerInstance.id === id) {\n      return true;\n    }\n\n    layerInstance = layerInstance.parent;\n  }\n\n  return false;\n}\n\nfunction updateLayers(deck) {\n  if (deck.props.userData.isExternal) {\n    return;\n  }\n\n  var layers = [];\n  deck.props.userData.mapboxLayers.forEach(function (deckLayer) {\n    var LayerType = deckLayer.props.type;\n    var layer = new LayerType(deckLayer.props);\n    layers.push(layer);\n  });\n  deck.setProps({\n    layers: layers\n  });\n}\n//# sourceMappingURL=deck-utils.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getDeckInstance, addLayer, removeLayer, updateLayer, drawLayer } from './deck-utils';\n\nvar MapboxLayer = function () {\n  function MapboxLayer(props) {\n    _classCallCheck(this, MapboxLayer);\n\n    if (!props.id) {\n      throw new Error('Layer must have an unique id');\n    }\n\n    this.id = props.id;\n    this.type = 'custom';\n    this.renderingMode = props.renderingMode || '3d';\n    this.map = null;\n    this.deck = null;\n    this.props = props;\n  }\n\n  _createClass(MapboxLayer, [{\n    key: \"onAdd\",\n    value: function onAdd(map, gl) {\n      this.map = map;\n      this.deck = getDeckInstance({\n        map: map,\n        gl: gl,\n        deck: this.props.deck\n      });\n      addLayer(this.deck, this);\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      removeLayer(this.deck, this);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      Object.assign(this.props, props, {\n        id: this.id\n      });\n\n      if (this.deck) {\n        updateLayer(this.deck, this);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(gl, matrix) {\n      drawLayer(this.deck, this.map, this);\n    }\n  }]);\n\n  return MapboxLayer;\n}();\n\nexport { MapboxLayer as default };\n//# sourceMappingURL=mapbox-layer.js.map","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import { assert } from '../utils';\nimport { isWebGL, isWebGL2 } from '@luma.gl/gltools';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}\n//# sourceMappingURL=webgl-checks.js.map","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aFunction = require('../internals/a-function');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar bind = require('../internals/function-bind');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\n\n// `Reflect.construct` method\n// https://tc39.github.io/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.github.io/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","import _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getTypedArrayFromGLType } from '../webgl-utils';\nimport { checkProps, assert } from '../utils';\nvar DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nvar PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\n\nvar Accessor = function () {\n  _createClass(Accessor, null, [{\n    key: \"getBytesPerElement\",\n    value: function getBytesPerElement(accessor) {\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT;\n    }\n  }, {\n    key: \"getBytesPerVertex\",\n    value: function getBytesPerVertex(accessor) {\n      assert(accessor.size);\n      var ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n      return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve() {\n      for (var _len = arguments.length, accessors = new Array(_len), _key = 0; _key < _len; _key++) {\n        accessors[_key] = arguments[_key];\n      }\n\n      return _construct(Accessor, [DEFAULT_ACCESSOR_VALUES].concat(accessors));\n    }\n  }]);\n\n  function Accessor() {\n    var _this = this;\n\n    _classCallCheck(this, Accessor);\n\n    for (var _len2 = arguments.length, accessors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      accessors[_key2] = arguments[_key2];\n    }\n\n    accessors.forEach(function (accessor) {\n      return _this._assign(accessor);\n    });\n    Object.freeze(this);\n  }\n\n  _createClass(Accessor, [{\n    key: \"toString\",\n    value: function toString() {\n      return JSON.stringify(this);\n    }\n  }, {\n    key: \"_assign\",\n    value: function _assign() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      props = checkProps('Accessor', props, PROP_CHECKS);\n\n      if (props.type !== undefined) {\n        this.type = props.type;\n\n        if (props.type === 5124 || props.type === 5125) {\n          this.integer = true;\n        }\n      }\n\n      if (props.size !== undefined) {\n        this.size = props.size;\n      }\n\n      if (props.offset !== undefined) {\n        this.offset = props.offset;\n      }\n\n      if (props.stride !== undefined) {\n        this.stride = props.stride;\n      }\n\n      if (props.normalized !== undefined) {\n        this.normalized = props.normalized;\n      }\n\n      if (props.integer !== undefined) {\n        this.integer = props.integer;\n      }\n\n      if (props.divisor !== undefined) {\n        this.divisor = props.divisor;\n      }\n\n      if (props.buffer !== undefined) {\n        this.buffer = props.buffer;\n      }\n\n      if (props.index !== undefined) {\n        if (typeof index === 'boolean') {\n          this.index = props.index ? 1 : 0;\n        } else {\n          this.index = props.index;\n        }\n      }\n\n      if (props.instanced !== undefined) {\n        this.divisor = props.instanced ? 1 : 0;\n      }\n\n      if (props.isInstanced !== undefined) {\n        this.divisor = props.isInstanced ? 1 : 0;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"BYTES_PER_ELEMENT\",\n    get: function get() {\n      return Accessor.getBytesPerElement(this);\n    }\n  }, {\n    key: \"BYTES_PER_VERTEX\",\n    get: function get() {\n      return Accessor.getBytesPerVertex(this);\n    }\n  }]);\n\n  return Accessor;\n}();\n\nexport { Accessor as default };\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","export var userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nvar window_ = typeof window !== 'undefined' ? window : global;\nvar global_ = typeof global !== 'undefined' ? global : window;\nvar document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\nvar passiveSupported = false;\n\ntry {\n  var options = {\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","import assert from './assert';\nvar uidCounters = {};\nexport function uid() {\n  var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'id';\n  uidCounters[id] = uidCounters[id] || 1;\n  var count = uidCounters[id]++;\n  return \"\".concat(id, \"-\").concat(count);\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  var isEmpty = true;\n\n  for (var key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { config } from './lib/common';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\nexport { default as assert } from './lib/assert';\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nvar global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config: config\n};\n//# sourceMappingURL=index.js.map","import log from '../utils/log';\nexport var COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: function get() {\n    return log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0;\n  }\n});\nexport var PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport var EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nimport assert from '../../utils/assert';\nvar ZERO_VECTOR = [0, 0, 0, 0];\nvar VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nvar IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nvar DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nvar DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nvar getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem) {\n  var coordinateOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_COORDINATE_ORIGIN;\n  var shaderCoordinateOrigin = coordinateOrigin;\n  var geospatialOrigin;\n  var offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin: geospatialOrigin,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    offsetMode: offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  var viewMatrixUncentered = viewport.viewMatrixUncentered,\n      projectionMatrix = viewport.projectionMatrix;\n  var viewMatrix = viewport.viewMatrix,\n      viewProjectionMatrix = viewport.viewProjectionMatrix;\n  var projectionCenter = ZERO_VECTOR;\n  var cameraPosCommon = viewport.cameraPosition;\n\n  var _getOffsetOrigin = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin),\n      geospatialOrigin = _getOffsetOrigin.geospatialOrigin,\n      shaderCoordinateOrigin = _getOffsetOrigin.shaderCoordinateOrigin,\n      offsetMode = _getOffsetOrigin.offsetMode;\n\n  if (offsetMode) {\n    var positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - positionCommonSpace[0], cameraPosCommon[1] - positionCommonSpace[1], cameraPosCommon[2] - positionCommonSpace[2]];\n    positionCommonSpace[3] = 1;\n    projectionCenter = vec4.transformMat4([], positionCommonSpace, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix: viewMatrix,\n    viewProjectionMatrix: viewProjectionMatrix,\n    projectionCenter: projectionCenter,\n    cameraPosCommon: cameraPosCommon,\n    shaderCoordinateOrigin: shaderCoordinateOrigin,\n    geospatialOrigin: geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      viewport = _ref.viewport,\n      _ref$devicePixelRatio = _ref.devicePixelRatio,\n      devicePixelRatio = _ref$devicePixelRatio === void 0 ? 1 : _ref$devicePixelRatio,\n      _ref$modelMatrix = _ref.modelMatrix,\n      modelMatrix = _ref$modelMatrix === void 0 ? null : _ref$modelMatrix,\n      _ref$coordinateSystem = _ref.coordinateSystem,\n      coordinateSystem = _ref$coordinateSystem === void 0 ? COORDINATE_SYSTEM.DEFAULT : _ref$coordinateSystem,\n      coordinateOrigin = _ref.coordinateOrigin,\n      _ref$autoWrapLongitud = _ref.autoWrapLongitude,\n      autoWrapLongitude = _ref$autoWrapLongitud === void 0 ? false : _ref$autoWrapLongitud,\n      projectionMode = _ref.projectionMode,\n      positionOrigin = _ref.positionOrigin;\n\n  assert(viewport);\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  var uniforms = getMemoizedViewportUniforms({\n    viewport: viewport,\n    devicePixelRatio: devicePixelRatio,\n    coordinateSystem: coordinateSystem,\n    coordinateOrigin: coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms(_ref2) {\n  var viewport = _ref2.viewport,\n      devicePixelRatio = _ref2.devicePixelRatio,\n      coordinateSystem = _ref2.coordinateSystem,\n      coordinateOrigin = _ref2.coordinateOrigin;\n\n  var _calculateMatrixAndOf = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin),\n      projectionCenter = _calculateMatrixAndOf.projectionCenter,\n      viewProjectionMatrix = _calculateMatrixAndOf.viewProjectionMatrix,\n      cameraPosCommon = _calculateMatrixAndOf.cameraPosCommon,\n      shaderCoordinateOrigin = _calculateMatrixAndOf.shaderCoordinateOrigin,\n      geospatialOrigin = _calculateMatrixAndOf.geospatialOrigin;\n\n  var distanceScales = viewport.getDistanceScales();\n  var viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  var uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCenter: projectionCenter,\n    project_uAntimeridian: (viewport.longitude || 0) - 180,\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: viewport.focalDistance || 1,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    var distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar has = require('../internals/has');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\n\n// `Reflect.get` method\n// https://tc39.github.io/ecma262/#sec-reflect.get\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var descriptor, prototype;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey)) return has(descriptor, 'value')\n    ? descriptor.value\n    : descriptor.get === undefined\n      ? undefined\n      : descriptor.get.call(receiver);\n  if (isObject(prototype = getPrototypeOf(target))) return get(prototype, propertyKey, receiver);\n}\n\n$({ target: 'Reflect', stat: true }, {\n  get: get\n});\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { uid, assert } from '@luma.gl/webgl';\nexport var DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\n\nvar Geometry = function () {\n  _createClass(Geometry, null, [{\n    key: \"DRAW_MODE\",\n    get: function get() {\n      return DRAW_MODE;\n    }\n  }]);\n\n  function Geometry() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Geometry);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('geometry') : _props$id,\n        _props$drawMode = props.drawMode,\n        drawMode = _props$drawMode === void 0 ? DRAW_MODE.TRIANGLES : _props$drawMode,\n        _props$attributes = props.attributes,\n        attributes = _props$attributes === void 0 ? {} : _props$attributes,\n        _props$indices = props.indices,\n        indices = _props$indices === void 0 ? null : _props$indices,\n        _props$vertexCount = props.vertexCount,\n        vertexCount = _props$vertexCount === void 0 ? null : _props$vertexCount;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  _createClass(Geometry, [{\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.indices ? _objectSpread({\n        indices: this.indices\n      }, this.attributes) : this.attributes;\n    }\n  }, {\n    key: \"_print\",\n    value: function _print(attributeName) {\n      return \"Geometry \".concat(this.id, \" attribute \").concat(attributeName);\n    }\n  }, {\n    key: \"_setAttributes\",\n    value: function _setAttributes(attributes, indices) {\n      if (indices) {\n        this.indices = ArrayBuffer.isView(indices) ? {\n          value: indices,\n          size: 1\n        } : indices;\n      }\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        attribute = ArrayBuffer.isView(attribute) ? {\n          value: attribute\n        } : attribute;\n        assert(ArrayBuffer.isView(attribute.value), \"\".concat(this._print(attributeName), \": must be typed array or object with value as typed array\"));\n\n        if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n          attribute.size = 3;\n        }\n\n        if (attributeName === 'indices') {\n          assert(!this.indices);\n          this.indices = attribute;\n        } else {\n          this.attributes[attributeName] = attribute;\n        }\n      }\n\n      if (this.indices && this.indices.isIndexed !== undefined) {\n        this.indices = Object.assign({}, this.indices);\n        delete this.indices.isIndexed;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_calculateVertexCount\",\n    value: function _calculateVertexCount(attributes, indices) {\n      if (indices) {\n        return indices.value.length;\n      }\n\n      var vertexCount = Infinity;\n\n      for (var attributeName in attributes) {\n        var attribute = attributes[attributeName];\n        var value = attribute.value,\n            size = attribute.size,\n            constant = attribute.constant;\n\n        if (!constant && value && size >= 1) {\n          vertexCount = Math.min(vertexCount, value.length / size);\n        }\n      }\n\n      assert(Number.isFinite(vertexCount));\n      return vertexCount;\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this.drawMode;\n    }\n  }]);\n\n  return Geometry;\n}();\n\nexport { Geometry as default };\n//# sourceMappingURL=geometry.js.map","export default \"#define SHADER_NAME arc-layer-vertex-shader\\n\\nattribute vec3 positions;\\nattribute vec4 instanceSourceColors;\\nattribute vec4 instanceTargetColors;\\nattribute vec3 instanceSourcePositions;\\nattribute vec3 instanceSourcePositions64Low;\\nattribute vec3 instanceTargetPositions;\\nattribute vec3 instanceTargetPositions64Low;\\nattribute vec3 instancePickingColors;\\nattribute float instanceWidths;\\nattribute float instanceHeights;\\nattribute float instanceTilts;\\n\\nuniform bool greatCircle;\\nuniform float numSegments;\\nuniform float opacity;\\nuniform float widthScale;\\nuniform float widthMinPixels;\\nuniform float widthMaxPixels;\\n\\nvarying vec4 vColor;\\nvarying vec2 uv;\\nvarying float isValid;\\n\\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\\n\\n  float deltaZ = targetZ - sourceZ;\\n  float dh = distance * instanceHeights;\\n  float unitZ = dh == 0.0 ? 0.0 : deltaZ / dh;\\n  float p2 = unitZ * unitZ + 1.0;\\n  float dir = step(deltaZ, 0.0);\\n  float z0 = mix(sourceZ, targetZ, dir);\\n  float r = mix(ratio, 1.0 - ratio, dir);\\n  return sqrt(r * (p2 - r)) * dh + z0;\\n}\\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\\n  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);\\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\\n\\n  return dir_screenspace * offset_direction * width / 2.0;\\n}\\n\\nfloat getSegmentRatio(float index) {\\n  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));\\n}\\n\\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\\n  float distance = length(source.xy - target.xy);\\n  float z = paraboloid(distance, source.z, target.z, segmentRatio);\\n\\n  float tiltAngle = radians(instanceTilts);\\n  vec2 tiltDirection = normalize(target.xy - source.xy);\\n  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\\n\\n  return vec3(\\n    mix(source.xy, target.xy, segmentRatio) + tilt,\\n    z * cos(tiltAngle)\\n  );\\n}\\nfloat getAngularDist (vec2 source, vec2 target) {\\n  vec2 sourceRadians = radians(source);\\n  vec2 targetRadians = radians(target);\\n  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\\n  vec2 shd_sq = sin_half_delta * sin_half_delta;\\n\\n  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\\n  return 2.0 * asin(sqrt(a));\\n}\\n\\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\\n  vec2 lngLat;\\n  if(abs(angularDist - PI) < 0.001) {\\n    lngLat = (1.0 - t) * source.xy + t * target.xy;\\n  } else {\\n    float a = sin((1.0 - t) * angularDist);\\n    float b = sin(t * angularDist);\\n    vec3 p = source3D.yxz * a + target3D.yxz * b;\\n    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\\n  }\\n\\n  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\\n\\n  return vec3(lngLat, z);\\n}\\n\\nvoid main(void) {\\n  geometry.worldPosition = instanceSourcePositions;\\n  geometry.worldPositionAlt = instanceTargetPositions;\\n\\n  float segmentIndex = positions.x;\\n  float segmentRatio = getSegmentRatio(segmentIndex);\\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\\n  isValid = 1.0;\\n\\n  uv = vec2(segmentRatio, positions.y);\\n  geometry.uv = uv;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  vec4 curr;\\n  vec4 next;\\n  vec3 source;\\n  vec3 target;\\n\\n  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\\n    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\\n    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\\n  \\n    float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\\n    float nextSegmentRatio = getSegmentRatio(min(numSegments, segmentIndex + 1.0));\\n\\n    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\\n    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\\n    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\\n\\n    if (abs(currPos.x - prevPos.x) > 180.0) {\\n      indexDir = -1.0;\\n      isValid = 0.0;\\n    } else if (abs(currPos.x - nextPos.x) > 180.0) {\\n      indexDir = 1.0;\\n      isValid = 0.0;\\n    }\\n    nextPos = indexDir < 0.0 ? prevPos : nextPos;\\n    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\\n\\n    if (isValid == 0.0) {\\n      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\\n      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\\n      currPos = mix(currPos, nextPos, t);\\n      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);\\n    }\\n\\n    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\\n    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\\n  \\n    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\\n    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\\n  \\n  } else {\\n    source = project_position(instanceSourcePositions, instanceSourcePositions64Low);\\n    target = project_position(instanceTargetPositions, instanceTargetPositions64Low);\\n\\n    float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\\n    vec3 currPos = interpolateFlat(source, target, segmentRatio);\\n    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\\n    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));\\n    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));\\n    geometry.position = vec4(currPos, 1.0);\\n  }\\n  float widthPixels = clamp(\\n    project_size_to_pixel(instanceWidths * widthScale),\\n    widthMinPixels, widthMaxPixels\\n  );\\n  vec3 offset = vec3(\\n    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),\\n    0.0);\\n  DECKGL_FILTER_SIZE(offset, geometry);\\n  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n\\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\\n  vColor = vec4(color.rgb, color.a * opacity);\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";\n//# sourceMappingURL=arc-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME arc-layer-fragment-shader\\n\\nprecision highp float;\\n\\nvarying vec4 vColor;\\nvarying vec2 uv;\\nvarying float isValid;\\n\\nvoid main(void) {\\n  if (isValid == 0.0) {\\n    discard;\\n  }\\n\\n  gl_FragColor = vColor;\\n  geometry.uv = uv;\\n\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=arc-layer-fragment.glsl.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Layer, project32, picking } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './arc-layer-vertex.glsl';\nimport fs from './arc-layer-fragment.glsl';\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  getSourcePosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.sourcePosition;\n    }\n  },\n  getTargetPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.targetPosition;\n    }\n  },\n  getSourceColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getTargetColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  getHeight: {\n    type: 'accessor',\n    value: 1\n  },\n  getTilt: {\n    type: 'accessor',\n    value: 0\n  },\n  greatCircle: false,\n  widthUnits: 'pixels',\n  widthScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  widthMinPixels: {\n    type: 'number',\n    value: 0,\n    min: 0\n  },\n  widthMaxPixels: {\n    type: 'number',\n    value: Number.MAX_SAFE_INTEGER,\n    min: 0\n  }\n};\n\nvar ArcLayer = function (_Layer) {\n  _inherits(ArcLayer, _Layer);\n\n  function ArcLayer() {\n    _classCallCheck(this, ArcLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ArcLayer).apply(this, arguments));\n  }\n\n  _createClass(ArcLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      return _get(_getPrototypeOf(ArcLayer.prototype), \"getShaders\", this).call(this, {\n        vs: vs,\n        fs: fs,\n        modules: [project32, picking]\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instanceSourcePositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          transition: true,\n          accessor: 'getSourcePosition'\n        },\n        instanceTargetPositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          transition: true,\n          accessor: 'getTargetPosition'\n        },\n        instanceSourceColors: {\n          size: this.props.colorFormat.length,\n          type: 5121,\n          normalized: true,\n          transition: true,\n          accessor: 'getSourceColor',\n          defaultValue: DEFAULT_COLOR\n        },\n        instanceTargetColors: {\n          size: this.props.colorFormat.length,\n          type: 5121,\n          normalized: true,\n          transition: true,\n          accessor: 'getTargetColor',\n          defaultValue: DEFAULT_COLOR\n        },\n        instanceWidths: {\n          size: 1,\n          transition: true,\n          accessor: 'getWidth',\n          defaultValue: 1\n        },\n        instanceHeights: {\n          size: 1,\n          transition: true,\n          accessor: 'getHeight',\n          defaultValue: 1\n        },\n        instanceTilts: {\n          size: 1,\n          transition: true,\n          accessor: 'getTilt',\n          defaultValue: 0\n        }\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n\n      _get(_getPrototypeOf(ArcLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (changeFlags.extensionsChanged) {\n        var gl = this.context.gl;\n\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        this.setState({\n          model: this._getModel(gl)\n        });\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          widthUnits = _this$props.widthUnits,\n          widthScale = _this$props.widthScale,\n          widthMinPixels = _this$props.widthMinPixels,\n          widthMaxPixels = _this$props.widthMaxPixels,\n          greatCircle = _this$props.greatCircle;\n      var widthMultiplier = widthUnits === 'pixels' ? viewport.metersPerPixel : 1;\n      this.state.model.setUniforms(uniforms).setUniforms({\n        greatCircle: greatCircle,\n        widthScale: widthScale * widthMultiplier,\n        widthMinPixels: widthMinPixels,\n        widthMaxPixels: widthMaxPixels\n      }).draw();\n    }\n  }, {\n    key: \"_getModel\",\n    value: function _getModel(gl) {\n      var positions = [];\n      var NUM_SEGMENTS = 50;\n\n      for (var i = 0; i < NUM_SEGMENTS; i++) {\n        positions = positions.concat([i, 1, 0, i, -1, 0]);\n      }\n\n      var model = new Model(gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        geometry: new Geometry({\n          drawMode: 5,\n          attributes: {\n            positions: new Float32Array(positions)\n          }\n        }),\n        isInstanced: true\n      }));\n      model.setUniforms({\n        numSegments: NUM_SEGMENTS\n      });\n      return model;\n    }\n  }]);\n\n  return ArcLayer;\n}(Layer);\n\nexport { ArcLayer as default };\nArcLayer.layerName = 'ArcLayer';\nArcLayer.defaultProps = defaultProps;\n//# sourceMappingURL=arc-layer.js.map","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","export function flatten(array) {\n  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return true;\n  };\n\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  var index = -1;\n\n  while (++index < array.length) {\n    var value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol !== \"undefined\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport assert from './assert';\nvar RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nvar DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nvar config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  for (var key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$precision = _ref.precision,\n      precision = _ref$precision === void 0 ? config.precision || 4 : _ref$precision;\n\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : _construct(Array, _toConsumableArray(array));\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (var i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, function (degrees) {\n    return degrees * DEGREES_TO_RADIANS;\n  }, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, function (radians) {\n    return radians * RADIANS_TO_DEGREES;\n  }, result);\n}\nexport function sin(radians) {\n  return map(radians, function (angle) {\n    return Math.sin(angle);\n  });\n}\nexport function cos(radians) {\n  return map(radians, function (angle) {\n    return Math.cos(angle);\n  });\n}\nexport function tan(radians) {\n  return map(radians, function (angle) {\n    return Math.tan(angle);\n  });\n}\nexport function asin(radians) {\n  return map(radians, function (angle) {\n    return Math.asin(angle);\n  });\n}\nexport function acos(radians) {\n  return map(radians, function (angle) {\n    return Math.acos(angle);\n  });\n}\nexport function atan(radians) {\n  return map(radians, function (angle) {\n    return Math.atan(angle);\n  });\n}\nexport function clamp(value, min, max) {\n  return map(value, function (value) {\n    return Math.max(min, Math.min(max, value));\n  });\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map(function (ai, i) {\n      return lerp(ai, b[i], t);\n    });\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  var oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (var i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && _typeof(a) === 'object' && b && _typeof(b) === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  var oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  var value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  // eslint-disable-next-line max-len\n  if (isForced(CONSTRUCTOR_NAME, typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n    new NativeConstructor().entries().next();\n  })))) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { isObjectEmpty } from '../utils';\n\nvar TransformFeedback = function (_Resource) {\n  _inherits(TransformFeedback, _Resource);\n\n  _createClass(TransformFeedback, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      return isWebGL2(gl);\n    }\n  }]);\n\n  function TransformFeedback(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TransformFeedback);\n\n    assertWebGL2Context(gl);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TransformFeedback).call(this, gl, props));\n\n    _this.initialize(props);\n\n    _this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TransformFeedback, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.buffers = {};\n      this.unused = {};\n      this.configuration = null;\n      this.bindOnUse = true;\n\n      if (!isObjectEmpty(this.buffers)) {\n        this.bind(function () {\n          return _this2._unbindBuffers();\n        });\n      }\n\n      this.setProps(props);\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      if ('buffers' in props) {\n        this.setBuffers(props.buffers);\n      }\n    }\n  }, {\n    key: \"setBuffers\",\n    value: function setBuffers() {\n      var _this3 = this;\n\n      var buffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.bind(function () {\n        for (var bufferName in buffers) {\n          _this3.setBuffer(bufferName, buffers[bufferName]);\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, bufferOrParams) {\n      var _this4 = this;\n\n      var location = this._getVaryingIndex(locationOrName);\n\n      var _this$_getBufferParam = this._getBufferParams(bufferOrParams),\n          buffer = _this$_getBufferParam.buffer,\n          byteSize = _this$_getBufferParam.byteSize,\n          byteOffset = _this$_getBufferParam.byteOffset;\n\n      if (location < 0) {\n        this.unused[locationOrName] = buffer;\n        log.warn(function () {\n          return \"\".concat(_this4.id, \" unused varying buffer \").concat(locationOrName);\n        })();\n        return this;\n      }\n\n      this.buffers[location] = bufferOrParams;\n\n      if (!this.bindOnUse) {\n        this._bindBuffer(location, buffer, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {\n      var primitiveMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.gl.bindTransformFeedback(36386, this.handle);\n\n      this._bindBuffers();\n\n      this.gl.beginTransformFeedback(primitiveMode);\n      return this;\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      this.gl.endTransformFeedback();\n\n      this._unbindBuffers();\n\n      this.gl.bindTransformFeedback(36386, null);\n      return this;\n    }\n  }, {\n    key: \"_getBufferParams\",\n    value: function _getBufferParams(bufferOrParams) {\n      var byteOffset;\n      var byteSize;\n      var buffer;\n\n      if (bufferOrParams instanceof Buffer === false) {\n        buffer = bufferOrParams.buffer;\n        byteSize = bufferOrParams.byteSize;\n        byteOffset = bufferOrParams.byteOffset;\n      } else {\n        buffer = bufferOrParams;\n      }\n\n      if (byteOffset !== undefined || byteSize !== undefined) {\n        byteOffset = byteOffset || 0;\n        byteSize = byteSize || buffer.byteLength - byteOffset;\n      }\n\n      return {\n        buffer: buffer,\n        byteOffset: byteOffset,\n        byteSize: byteSize\n      };\n    }\n  }, {\n    key: \"_getVaryingInfo\",\n    value: function _getVaryingInfo(locationOrName) {\n      return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n    }\n  }, {\n    key: \"_getVaryingIndex\",\n    value: function _getVaryingIndex(locationOrName) {\n      if (this.configuration) {\n        return this.configuration.getVaryingInfo(locationOrName).location;\n      }\n\n      var location = Number(locationOrName);\n      return Number.isFinite(location) ? location : -1;\n    }\n  }, {\n    key: \"_bindBuffers\",\n    value: function _bindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          var _this$_getBufferParam2 = this._getBufferParams(this.buffers[bufferIndex]),\n              buffer = _this$_getBufferParam2.buffer,\n              byteSize = _this$_getBufferParam2.byteSize,\n              byteOffset = _this$_getBufferParam2.byteOffset;\n\n          this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n        }\n      }\n    }\n  }, {\n    key: \"_unbindBuffers\",\n    value: function _unbindBuffers() {\n      if (this.bindOnUse) {\n        for (var bufferIndex in this.buffers) {\n          this._bindBuffer(bufferIndex, null);\n        }\n      }\n    }\n  }, {\n    key: \"_bindBuffer\",\n    value: function _bindBuffer(index, buffer) {\n      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var byteSize = arguments.length > 3 ? arguments[3] : undefined;\n      var handle = buffer && buffer.handle;\n\n      if (!handle || byteSize === undefined) {\n        this.gl.bindBufferBase(35982, index, handle);\n      } else {\n        this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTransformFeedback();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTransformFeedback(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindTransformFeedback(36386, this.handle);\n    }\n  }]);\n\n  return TransformFeedback;\n}(Resource);\n\nexport { TransformFeedback as default };\n//# sourceMappingURL=transform-feedback.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nexport var TypedArrayManager = function () {\n  function TypedArrayManager() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$overAlloc = _ref.overAlloc,\n        overAlloc = _ref$overAlloc === void 0 ? 2 : _ref$overAlloc,\n        _ref$poolSize = _ref.poolSize,\n        poolSize = _ref$poolSize === void 0 ? 100 : _ref$poolSize;\n\n    _classCallCheck(this, TypedArrayManager);\n\n    this.overAlloc = overAlloc;\n    this.poolSize = poolSize;\n    this._pool = [];\n  }\n\n  _createClass(TypedArrayManager, [{\n    key: \"allocate\",\n    value: function allocate(typedArray, count, _ref2) {\n      var _ref2$size = _ref2.size,\n          size = _ref2$size === void 0 ? 1 : _ref2$size,\n          type = _ref2.type,\n          _ref2$padding = _ref2.padding,\n          padding = _ref2$padding === void 0 ? 0 : _ref2$padding,\n          _ref2$copy = _ref2.copy,\n          copy = _ref2$copy === void 0 ? false : _ref2$copy,\n          _ref2$initialize = _ref2.initialize,\n          initialize = _ref2$initialize === void 0 ? false : _ref2$initialize;\n      var Type = type || typedArray && typedArray.constructor || Float32Array;\n      var newSize = count * size + padding;\n\n      if (ArrayBuffer.isView(typedArray)) {\n        if (newSize <= typedArray.length) {\n          return typedArray;\n        }\n\n        if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n          return new Type(typedArray.buffer, 0, newSize);\n        }\n      }\n\n      var newArray = this._allocate(Type, newSize, initialize);\n\n      if (typedArray && copy) {\n        newArray.set(typedArray);\n      } else if (!initialize) {\n        newArray.fill(0, 0, 4);\n      }\n\n      this._release(typedArray);\n\n      return newArray;\n    }\n  }, {\n    key: \"release\",\n    value: function release(typedArray) {\n      this._release(typedArray);\n    }\n  }, {\n    key: \"_allocate\",\n    value: function _allocate(Type, size, initialize) {\n      size = Math.max(Math.ceil(size * this.overAlloc), 1);\n      var pool = this._pool;\n      var byteLength = Type.BYTES_PER_ELEMENT * size;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i >= 0) {\n        var array = new Type(pool.splice(i, 1)[0], 0, size);\n\n        if (initialize) {\n          array.fill(0);\n        }\n\n        return array;\n      }\n\n      return new Type(size);\n    }\n  }, {\n    key: \"_release\",\n    value: function _release(typedArray) {\n      if (!ArrayBuffer.isView(typedArray)) {\n        return;\n      }\n\n      var pool = this._pool;\n      var buffer = typedArray.buffer;\n      var byteLength = buffer.byteLength;\n      var i = pool.findIndex(function (b) {\n        return b.byteLength >= byteLength;\n      });\n\n      if (i < 0) {\n        pool.push(buffer);\n      } else if (i > 0 || pool.length < this.poolSize) {\n        pool.splice(i, 0, buffer);\n      }\n\n      if (pool.length > this.poolSize) {\n        pool.shift();\n      }\n    }\n  }]);\n\n  return TypedArrayManager;\n}();\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","export * from '@math.gl/core';\n//# sourceMappingURL=index.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils';\nvar LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (var cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, \"Feature: \".concat(cap, \" not supported\"))();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var isSupported;\n  var featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = featureDefinition[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var extension = _step.value;\n        isSupported = isSupported && Boolean(gl.getExtension(extension));\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport var VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport var isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction getStorage(type) {\n  try {\n    var storage = window[type];\n    var x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nvar LocalStorage = function () {\n  function LocalStorage(id, defaultSettings) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'sessionStorage';\n\n    _classCallCheck(this, LocalStorage);\n\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  _createClass(LocalStorage, [{\n    key: \"getConfiguration\",\n    value: function getConfiguration() {\n      return this.config;\n    }\n  }, {\n    key: \"setConfiguration\",\n    value: function setConfiguration(configuration) {\n      this.config = {};\n      return this.updateConfiguration(configuration);\n    }\n  }, {\n    key: \"updateConfiguration\",\n    value: function updateConfiguration(configuration) {\n      Object.assign(this.config, configuration);\n\n      if (this.storage) {\n        var serialized = JSON.stringify(this.config);\n        this.storage.setItem(this.id, serialized);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_loadConfiguration\",\n    value: function _loadConfiguration() {\n      var configuration = {};\n\n      if (this.storage) {\n        var serializedConfiguration = this.storage.getItem(this.id);\n        configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n      }\n\n      Object.assign(this.config, configuration);\n      return this;\n    }\n  }]);\n\n  return LocalStorage;\n}();\n\nexport { LocalStorage as default };\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  var formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 8;\n  var padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale) {\n  var maxWidth = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 600;\n  var imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  var width = image.width * scale;\n  var height = image.height * scale;\n  var style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport var COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","function _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport function autobind(obj) {\n  var predefined = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ['constructor'];\n  var proto = Object.getPrototypeOf(obj);\n  var propNames = Object.getOwnPropertyNames(proto);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n\n      if (typeof obj[key] === 'function') {\n        if (!predefined.find(function (name) {\n          return key === name;\n        })) {\n          obj[key] = obj[key].bind(obj);\n        }\n      }\n    };\n\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  var timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    var timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport _assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nvar originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nvar DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nvar cache = {};\nvar ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (var key in table) {\n    for (var title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nvar Log = function () {\n  function Log() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        id = _ref.id;\n\n    _classCallCheck(this, Log);\n\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  _createClass(Log, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this._storage.config.enabled;\n    }\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      return this._storage.config.level;\n    }\n  }, {\n    key: \"getTotal\",\n    value: function getTotal() {\n      return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n    }\n  }, {\n    key: \"getDelta\",\n    value: function getDelta() {\n      return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority() {\n      return this.level;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this._storage.updateConfiguration({\n        enabled: enabled\n      });\n\n      return this;\n    }\n  }, {\n    key: \"setLevel\",\n    value: function setLevel(level) {\n      this._storage.updateConfiguration({\n        level: level\n      });\n\n      return this;\n    }\n  }, {\n    key: \"assert\",\n    value: function assert(condition, message) {\n      _assert(condition, message);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn(message) {\n      return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n    }\n  }, {\n    key: \"error\",\n    value: function error(message) {\n      return this._getLogFunction(0, message, originalConsole.error, arguments);\n    }\n  }, {\n    key: \"deprecated\",\n    value: function deprecated(oldUsage, newUsage) {\n      return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"removed\",\n    value: function removed(oldUsage, newUsage) {\n      return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n    }\n  }, {\n    key: \"probe\",\n    value: function probe(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n        time: true,\n        once: true\n      });\n    }\n  }, {\n    key: \"log\",\n    value: function log(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n    }\n  }, {\n    key: \"info\",\n    value: function info(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.info, arguments);\n    }\n  }, {\n    key: \"once\",\n    value: function once(logLevel, message) {\n      return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n    }\n  }, {\n    key: \"table\",\n    value: function table(logLevel, _table, columns) {\n      if (_table) {\n        return this._getLogFunction(logLevel, _table, console.table || noop, columns && [columns], {\n          tag: getTableHeader(_table)\n        });\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"image\",\n    value: function image(_ref2) {\n      var logLevel = _ref2.logLevel,\n          priority = _ref2.priority,\n          _image = _ref2.image,\n          _ref2$message = _ref2.message,\n          message = _ref2$message === void 0 ? '' : _ref2$message,\n          _ref2$scale = _ref2.scale,\n          scale = _ref2$scale === void 0 ? 1 : _ref2$scale;\n\n      if (!this._shouldLog(logLevel || priority)) {\n        return noop;\n      }\n\n      return isBrowser ? logImageInBrowser({\n        image: _image,\n        message: message,\n        scale: scale\n      }) : logImageInNode({\n        image: _image,\n        message: message,\n        scale: scale\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      if (console.table) {\n        console.table(this._storage.config);\n      } else {\n        console.log(this._storage.config);\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get(setting) {\n      return this._storage.config[setting];\n    }\n  }, {\n    key: \"set\",\n    value: function set(setting, value) {\n      this._storage.updateConfiguration(_defineProperty({}, setting, value));\n    }\n  }, {\n    key: \"time\",\n    value: function time(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n    }\n  }, {\n    key: \"timeStamp\",\n    value: function timeStamp(logLevel, message) {\n      return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n    }\n  }, {\n    key: \"group\",\n    value: function group(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n        collapsed: false\n      };\n      opts = normalizeArguments({\n        logLevel: logLevel,\n        message: message,\n        opts: opts\n      });\n      var _opts = opts,\n          collapsed = _opts.collapsed;\n      opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n      return this._getLogFunction(opts);\n    }\n  }, {\n    key: \"groupCollapsed\",\n    value: function groupCollapsed(logLevel, message) {\n      var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.group(logLevel, message, Object.assign({}, opts, {\n        collapsed: true\n      }));\n    }\n  }, {\n    key: \"groupEnd\",\n    value: function groupEnd(logLevel) {\n      return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n    }\n  }, {\n    key: \"withGroup\",\n    value: function withGroup(logLevel, message, func) {\n      this.group(logLevel, message)();\n\n      try {\n        func();\n      } finally {\n        this.groupEnd(logLevel)();\n      }\n    }\n  }, {\n    key: \"trace\",\n    value: function trace() {\n      if (console.trace) {\n        console.trace();\n      }\n    }\n  }, {\n    key: \"_shouldLog\",\n    value: function _shouldLog(logLevel) {\n      return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n    }\n  }, {\n    key: \"_getLogFunction\",\n    value: function _getLogFunction(logLevel, message, method) {\n      var args = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var opts = arguments.length > 4 ? arguments[4] : undefined;\n\n      if (this._shouldLog(logLevel)) {\n        var _method;\n\n        opts = normalizeArguments({\n          logLevel: logLevel,\n          message: message,\n          args: args,\n          opts: opts\n        });\n        method = method || opts.method;\n\n        _assert(method);\n\n        opts.total = this.getTotal();\n        opts.delta = this.getDelta();\n        this._deltaTs = getHiResTimestamp();\n        var tag = opts.tag || opts.message;\n\n        if (opts.once) {\n          if (!cache[tag]) {\n            cache[tag] = getHiResTimestamp();\n          } else {\n            return noop;\n          }\n        }\n\n        message = decorateMessage(this.id, opts.message, opts);\n        return (_method = method).bind.apply(_method, [console, message].concat(_toConsumableArray(opts.args)));\n      }\n\n      return noop;\n    }\n  }, {\n    key: \"level\",\n    set: function set(newLevel) {\n      this.setLevel(newLevel);\n    },\n    get: function get() {\n      return this.getLevel();\n    }\n  }, {\n    key: \"priority\",\n    set: function set(newPriority) {\n      this.level = newPriority;\n    },\n    get: function get() {\n      return this.level;\n    }\n  }]);\n\n  return Log;\n}();\n\nexport { Log as default };\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  var resolvedLevel;\n\n  switch (_typeof(logLevel)) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  _assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  var logLevel = opts.logLevel,\n      message = opts.message;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  var args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (_typeof(logLevel)) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  var messageType = _typeof(opts.message);\n\n  _assert(messageType === 'string' || messageType === 'object');\n\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    var time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode(_ref3) {\n  var image = _ref3.image,\n      _ref3$message = _ref3.message,\n      message = _ref3$message === void 0 ? '' : _ref3$message,\n      _ref3$scale = _ref3.scale,\n      scale = _ref3$scale === void 0 ? 1 : _ref3$scale;\n  var asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return function () {\n      return asciify(image, {\n        fit: 'box',\n        width: \"\".concat(Math.round(80 * scale), \"%\")\n      }).then(function (data) {\n        return console.log(data);\n      });\n    };\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser(_ref4) {\n  var image = _ref4.image,\n      _ref4$message = _ref4.message,\n      message = _ref4$message === void 0 ? '' : _ref4$message,\n      _ref4$scale = _ref4.scale,\n      scale = _ref4$scale === void 0 ? 1 : _ref4$scale;\n\n  if (typeof image === 'string') {\n    var img = new Image();\n\n    img.onload = function () {\n      var _console;\n\n      var args = formatImage(img, message, scale);\n\n      (_console = console).log.apply(_console, _toConsumableArray(args));\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  var element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    var _console2;\n\n    (_console2 = console).log.apply(_console2, _toConsumableArray(formatImage(image, message, scale)));\n\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    var _img = new Image();\n\n    _img.onload = function () {\n      var _console3;\n\n      return (_console3 = console).log.apply(_console3, _toConsumableArray(formatImage(_img, message, scale)));\n    };\n\n    _img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport log from '../utils/log';\nimport { createMat4, extractCameraVectors, getFrustumPlanes as _getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals as _equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales as _getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nvar DEGREES_TO_RADIANS = Math.PI / 180;\nvar IDENTITY = createMat4();\nvar ZERO_VECTOR = [0, 0, 0];\nvar DEFAULT_ZOOM = 0;\nvar DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\n\nvar Viewport = function () {\n  function Viewport() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Viewport);\n\n    var _opts$id = opts.id,\n        id = _opts$id === void 0 ? null : _opts$id,\n        _opts$x = opts.x,\n        x = _opts$x === void 0 ? 0 : _opts$x,\n        _opts$y = opts.y,\n        y = _opts$y === void 0 ? 0 : _opts$y,\n        _opts$width = opts.width,\n        width = _opts$width === void 0 ? 1 : _opts$width,\n        _opts$height = opts.height,\n        height = _opts$height === void 0 ? 1 : _opts$height;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  _createClass(Viewport, [{\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof Viewport)) {\n        return false;\n      }\n\n      if (this === viewport) {\n        return true;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && _equals(viewport.projectionMatrix, this.projectionMatrix) && _equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$topLeft = _ref.topLeft,\n          topLeft = _ref$topLeft === void 0 ? true : _ref$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft,\n          targetZ = _ref2.targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _this$projectFlat = this.projectFlat(xyz),\n          _this$projectFlat2 = _slicedToArray(_this$projectFlat, 2),\n          X = _this$projectFlat2[0],\n          Y = _this$projectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _this$unprojectFlat = this.unprojectFlat(xyz),\n          _this$unprojectFlat2 = _slicedToArray(_this$unprojectFlat, 2),\n          X = _this$unprojectFlat2[0],\n          Y = _this$unprojectFlat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(xyz) {\n      if (this.isGeospatial) {\n        return lngLatToWorld(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xyz) {\n      if (this.isGeospatial) {\n        return worldToLngLat(xyz);\n      }\n\n      return xyz;\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var unprojectOption = {\n        targetZ: options.z || 0\n      };\n      var topLeft = this.unproject([0, 0], unprojectOption);\n      var topRight = this.unproject([this.width, 0], unprojectOption);\n      var bottomLeft = this.unproject([0, this.height], unprojectOption);\n      var bottomRight = this.unproject([this.width, this.height], unprojectOption);\n      return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n    }\n  }, {\n    key: \"getDistanceScales\",\n    value: function getDistanceScales() {\n      var coordinateOrigin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (coordinateOrigin) {\n        return _getDistanceScales({\n          longitude: coordinateOrigin[0],\n          latitude: coordinateOrigin[1],\n          highPrecision: true\n        });\n      }\n\n      return this.distanceScales;\n    }\n  }, {\n    key: \"containsPixel\",\n    value: function containsPixel(_ref3) {\n      var x = _ref3.x,\n          y = _ref3.y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height;\n      return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n    }\n  }, {\n    key: \"getFrustumPlanes\",\n    value: function getFrustumPlanes() {\n      if (this._frustumPlanes.near) {\n        return this._frustumPlanes;\n      }\n\n      var _this$projectionProps = this.projectionProps,\n          near = _this$projectionProps.near,\n          far = _this$projectionProps.far,\n          fovyRadians = _this$projectionProps.fovyRadians,\n          aspect = _this$projectionProps.aspect;\n      Object.assign(this._frustumPlanes, _getFrustumPlanes({\n        aspect: aspect,\n        near: near,\n        far: far,\n        fovyRadians: fovyRadians,\n        position: this.cameraPosition,\n        direction: this.cameraDirection,\n        up: this.cameraUp,\n        right: this.cameraRight\n      }));\n      return this._frustumPlanes;\n    }\n  }, {\n    key: \"getCameraPosition\",\n    value: function getCameraPosition() {\n      return this.cameraPosition;\n    }\n  }, {\n    key: \"getCameraDirection\",\n    value: function getCameraDirection() {\n      return this.cameraDirection;\n    }\n  }, {\n    key: \"getCameraUp\",\n    value: function getCameraUp() {\n      return this.cameraUp;\n    }\n  }, {\n    key: \"_createProjectionMatrix\",\n    value: function _createProjectionMatrix(_ref4) {\n      var orthographic = _ref4.orthographic,\n          fovyRadians = _ref4.fovyRadians,\n          aspect = _ref4.aspect,\n          focalDistance = _ref4.focalDistance,\n          near = _ref4.near,\n          far = _ref4.far;\n      return orthographic ? new Matrix4().orthographic({\n        fovy: fovyRadians,\n        aspect: aspect,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      }) : new Matrix4().perspective({\n        fovy: fovyRadians,\n        aspect: aspect,\n        near: near,\n        far: far\n      });\n    }\n  }, {\n    key: \"_initViewMatrix\",\n    value: function _initViewMatrix(opts) {\n      var _opts$viewMatrix = opts.viewMatrix,\n          viewMatrix = _opts$viewMatrix === void 0 ? IDENTITY : _opts$viewMatrix,\n          _opts$longitude = opts.longitude,\n          longitude = _opts$longitude === void 0 ? null : _opts$longitude,\n          _opts$latitude = opts.latitude,\n          latitude = _opts$latitude === void 0 ? null : _opts$latitude,\n          _opts$zoom = opts.zoom,\n          zoom = _opts$zoom === void 0 ? null : _opts$zoom,\n          _opts$position = opts.position,\n          position = _opts$position === void 0 ? null : _opts$position,\n          _opts$modelMatrix = opts.modelMatrix,\n          modelMatrix = _opts$modelMatrix === void 0 ? null : _opts$modelMatrix,\n          _opts$focalDistance = opts.focalDistance,\n          focalDistance = _opts$focalDistance === void 0 ? 1 : _opts$focalDistance,\n          _opts$distanceScales = opts.distanceScales,\n          distanceScales = _opts$distanceScales === void 0 ? null : _opts$distanceScales;\n      this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n      this.zoom = zoom;\n\n      if (!Number.isFinite(this.zoom)) {\n        this.zoom = this.isGeospatial ? getMeterZoom({\n          latitude: latitude\n        }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n      }\n\n      var scale = Math.pow(2, this.zoom);\n      this.scale = scale;\n      this.distanceScales = this.isGeospatial ? _getDistanceScales({\n        latitude: latitude,\n        longitude: longitude\n      }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n      this.focalDistance = focalDistance;\n      this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n      this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n      this.position = ZERO_VECTOR;\n      this.meterOffset = ZERO_VECTOR;\n\n      if (position) {\n        this.position = position;\n        this.modelMatrix = modelMatrix;\n        this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n      }\n\n      if (this.isGeospatial) {\n        this.longitude = longitude;\n        this.latitude = latitude;\n        this.center = this._getCenterInWorld({\n          longitude: longitude,\n          latitude: latitude\n        });\n      } else {\n        this.center = position ? this.projectPosition(position) : [0, 0, 0];\n      }\n\n      this.viewMatrixUncentered = viewMatrix;\n      this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n    }\n  }, {\n    key: \"_getCenterInWorld\",\n    value: function _getCenterInWorld(_ref5) {\n      var longitude = _ref5.longitude,\n          latitude = _ref5.latitude;\n      var meterOffset = this.meterOffset,\n          distanceScales = this.distanceScales;\n      var center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n      if (meterOffset) {\n        var commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n        center.add(commonPosition);\n      }\n\n      return center;\n    }\n  }, {\n    key: \"_initProjectionMatrix\",\n    value: function _initProjectionMatrix(opts) {\n      var _opts$projectionMatri = opts.projectionMatrix,\n          projectionMatrix = _opts$projectionMatri === void 0 ? null : _opts$projectionMatri,\n          _opts$orthographic = opts.orthographic,\n          orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n          fovyRadians = opts.fovyRadians,\n          _opts$fovy = opts.fovy,\n          fovy = _opts$fovy === void 0 ? 75 : _opts$fovy,\n          _opts$near = opts.near,\n          near = _opts$near === void 0 ? 0.1 : _opts$near,\n          _opts$far = opts.far,\n          far = _opts$far === void 0 ? 1000 : _opts$far,\n          _opts$focalDistance2 = opts.focalDistance,\n          focalDistance = _opts$focalDistance2 === void 0 ? 1 : _opts$focalDistance2;\n      this.projectionProps = {\n        orthographic: orthographic,\n        fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n        aspect: this.width / this.height,\n        focalDistance: focalDistance,\n        near: near,\n        far: far\n      };\n      this.projectionMatrix = projectionMatrix || this._createProjectionMatrix(this.projectionProps);\n    }\n  }, {\n    key: \"_initPixelMatrices\",\n    value: function _initPixelMatrices() {\n      var vpm = createMat4();\n      mat4.multiply(vpm, vpm, this.projectionMatrix);\n      mat4.multiply(vpm, vpm, this.viewMatrix);\n      this.viewProjectionMatrix = vpm;\n      this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n\n      var _extractCameraVectors = extractCameraVectors({\n        viewMatrix: this.viewMatrix,\n        viewMatrixInverse: this.viewMatrixInverse\n      }),\n          eye = _extractCameraVectors.eye,\n          direction = _extractCameraVectors.direction,\n          up = _extractCameraVectors.up,\n          right = _extractCameraVectors.right;\n\n      this.cameraPosition = eye;\n      this.cameraDirection = direction;\n      this.cameraUp = up;\n      this.cameraRight = right;\n      var viewportMatrix = createMat4();\n      var pixelProjectionMatrix = createMat4();\n      mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n      mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n      mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n      this.pixelProjectionMatrix = pixelProjectionMatrix;\n      this.viewportMatrix = viewportMatrix;\n      this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n      if (!this.pixelUnprojectionMatrix) {\n        log.warn('Pixel project matrix not invertible')();\n      }\n    }\n  }, {\n    key: \"metersPerPixel\",\n    get: function get() {\n      return this.distanceScales.metersPerUnit[2] / this.scale;\n    }\n  }, {\n    key: \"projectionMode\",\n    get: function get() {\n      if (this.isGeospatial) {\n        return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n      }\n\n      return PROJECTION_MODE.IDENTITY;\n    }\n  }]);\n\n  return Viewport;\n}();\n\nexport { Viewport as default };\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { assert } from '../utils';\nvar pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  var dataType = options.dataType || 'text';\n  return fetch(url, options).then(function (res) {\n    return res[dataType]();\n  });\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise(function (resolve, reject) {\n    try {\n      var image = new Image();\n\n      image.onload = function () {\n        return resolve(image);\n      };\n\n      image.onerror = function () {\n        return reject(new Error(\"Could not load image \".concat(url, \".\")));\n      };\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Texture from './texture';\nimport { assertWebGLContext } from '../webgl-utils';\nimport { loadImage } from '../utils/load-file';\n\nvar Texture2D = function (_Texture) {\n  _inherits(Texture2D, _Texture);\n\n  _createClass(Texture2D, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl, opts) {\n      return Texture.isSupported(gl, opts);\n    }\n  }]);\n\n  function Texture2D(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Texture2D);\n\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture2D).call(this, gl, Object.assign({}, props, {\n      target: 3553\n    })));\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  return Texture2D;\n}(Texture);\n\nexport { Texture2D as default };\n//# sourceMappingURL=texture-2d.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { isObjectEmpty, isWebGL, assert } from '../utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  var compositeSetters = {};\n\n  for (var key in values) {\n    var glConstant = Number(key);\n    var setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  var cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (var _key in compositeSetters) {\n      var compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[_key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    var key = parameters;\n    var getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  var parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  var state = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = parameterKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _key2 = _step.value;\n      var _getter = GL_PARAMETER_GETTERS[_key2];\n      state[_key2] = _getter ? _getter(gl, Number(_key2)) : gl.getParameter(Number(_key2));\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  var _parameters$nocatch = parameters.nocatch,\n      nocatch = _parameters$nocatch === void 0 ? true : _parameters$nocatch;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  var value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\nexport function isObjectEmpty(object) {\n  for (var key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  var isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  var isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (var i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","export function cssToDeviceRatio(gl) {\n  if (gl.canvas && gl.luma) {\n    var clientWidth = gl.luma.canvasSizeInfo.clientWidth;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel) {\n  var yInvert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var ratio = cssToDeviceRatio(gl);\n  var width = gl.drawingBufferWidth;\n  var height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  var windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  var x = scaleX(pixel[0], ratio, width);\n  var y = scaleY(pixel[1], ratio, height, yInvert);\n  var t = scaleX(pixel[0] + 1, ratio, width);\n  var xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  var yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x: x,\n    y: y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  var r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { assert } from './utils';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  return Boolean(gl && gl._version === 2);\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n}\n//# sourceMappingURL=webgl-checks.js.map","import { Log } from 'probe.gl';\nexport { assert, deepArrayEqual, isObjectEmpty } from './utils';\nexport { cssToDevicePixels, cssToDeviceRatio, getDevicePixelRatio } from './device-pixels';\nexport { isWebGL, isWebGL2 } from './webgl-checks';\nexport var log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=index.js.map","var fp32shader = \"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\";\nexport default {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nvar COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(function (key) {\n  return \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\");\n}).join('');\nvar PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(function (key) {\n  return \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\");\n}).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform float project_uAntimeridian;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\\n  }\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\\n  );\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy) * WORLD_SCALE,\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\\n  }\\n\\n  return project_offset_(position_world);\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","import { fp32 } from '@luma.gl/core';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32],\n  vs: projectShader,\n  getUniforms: getUniforms\n};\n//# sourceMappingURL=project.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nvar loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    var _loggers$eventType;\n\n    (_loggers$eventType = loggers[eventType]).call.apply(_loggers$eventType, arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar TYPE_DEFINITIONS = {\n  number: {\n    validate: function validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n  },\n  array: {\n    validate: function validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n  }\n};\nexport function parsePropTypes(propDefs) {\n  var propTypes = {};\n\n  for (var propName in propDefs) {\n    var propDef = propDefs[propName];\n    var propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  var type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type: type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type: type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return _typeof(value);\n}\n//# sourceMappingURL=prop-types.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nvar VERTEX_SHADER = 'vs';\nvar FRAGMENT_SHADER = 'fs';\n\nvar ShaderModule = function () {\n  function ShaderModule(_ref) {\n    var name = _ref.name,\n        vs = _ref.vs,\n        fs = _ref.fs,\n        _ref$dependencies = _ref.dependencies,\n        dependencies = _ref$dependencies === void 0 ? [] : _ref$dependencies,\n        uniforms = _ref.uniforms,\n        getUniforms = _ref.getUniforms,\n        _ref$deprecations = _ref.deprecations,\n        deprecations = _ref$deprecations === void 0 ? [] : _ref$deprecations,\n        _ref$defines = _ref.defines,\n        defines = _ref$defines === void 0 ? {} : _ref$defines,\n        _ref$inject = _ref.inject,\n        inject = _ref$inject === void 0 ? {} : _ref$inject,\n        vertexShader = _ref.vertexShader,\n        fragmentShader = _ref.fragmentShader;\n\n    _classCallCheck(this, ShaderModule);\n\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  _createClass(ShaderModule, [{\n    key: \"getModuleSource\",\n    value: function getModuleSource(type) {\n      var moduleSource;\n\n      switch (type) {\n        case VERTEX_SHADER:\n          moduleSource = this.vs || '';\n          break;\n\n        case FRAGMENT_SHADER:\n          moduleSource = this.fs || '';\n          break;\n\n        default:\n          assert(false);\n      }\n\n      return \"#define MODULE_\".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_'), \"\\n\").concat(moduleSource, \"// END MODULE_\").concat(this.name, \"\\n\\n\");\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(opts, uniforms) {\n      if (this.getModuleUniforms) {\n        return this.getModuleUniforms(opts, uniforms);\n      }\n\n      if (this.uniforms) {\n        return this._defaultGetUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"getDefines\",\n    value: function getDefines() {\n      return this.defines;\n    }\n  }, {\n    key: \"checkDeprecations\",\n    value: function checkDeprecations(shaderSource, log) {\n      this.deprecations.forEach(function (def) {\n        if (def.regex.test(shaderSource)) {\n          if (def.deprecated) {\n            log.deprecated(def.old, def[\"new\"])();\n          } else {\n            log.removed(def.old, def[\"new\"])();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_parseDeprecationDefinitions\",\n    value: function _parseDeprecationDefinitions(deprecations) {\n      deprecations.forEach(function (def) {\n        switch (def.type) {\n          case 'function':\n            def.regex = new RegExp(\"\\\\b\".concat(def.old, \"\\\\(\"));\n            break;\n\n          default:\n            def.regex = new RegExp(\"\".concat(def.type, \" \").concat(def.old, \";\"));\n        }\n      });\n      return deprecations;\n    }\n  }, {\n    key: \"_defaultGetUniforms\",\n    value: function _defaultGetUniforms() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var uniforms = {};\n      var propTypes = this.uniforms;\n\n      for (var key in propTypes) {\n        var propDef = propTypes[key];\n\n        if (key in opts && !propDef[\"private\"]) {\n          if (propDef.validate) {\n            assert(propDef.validate(opts[key], propDef), \"\".concat(this.name, \": invalid \").concat(key));\n          }\n\n          uniforms[key] = opts[key];\n        } else {\n          uniforms[key] = propDef.value;\n        }\n      }\n\n      return uniforms;\n    }\n  }]);\n\n  return ShaderModule;\n}();\n\nexport { ShaderModule as default };\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      var shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (var hook in injections) {\n    var injection = injections[hook];\n    var stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        injection: injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  var moduleMap = {};\n  var moduleDepth = {};\n  getDependencyGraph({\n    modules: modules,\n    level: 0,\n    moduleMap: moduleMap,\n    moduleDepth: moduleDepth\n  });\n  return Object.keys(moduleDepth).sort(function (a, b) {\n    return moduleDepth[b] - moduleDepth[a];\n  }).map(function (name) {\n    return moduleMap[name];\n  });\n}\n\nfunction getDependencyGraph(_ref) {\n  var modules = _ref.modules,\n      level = _ref.level,\n      moduleMap = _ref.moduleMap,\n      moduleDepth = _ref.moduleDepth;\n\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n      moduleMap[module.name] = module;\n\n      if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n        moduleDepth[module.name] = level;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _module = _step2.value;\n\n      if (_module.dependencies) {\n        getDependencyGraph({\n          modules: _module.dependencies,\n          level: level + 1,\n          moduleMap: moduleMap,\n          moduleDepth: moduleDepth\n        });\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(function (module) {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', \"Shader module use by name is deprecated. Import shader module '\".concat(module, \"' and use it directly.\"));\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport var TEST_EXPORTS = {\n  getShaderDependencies: getShaderDependencies,\n  getDependencyGraph: getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  var userAgent = opts.userAgent || navigator.userAgent || '';\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nvar GL_VENDOR = 0x1f00;\nvar GL_RENDERER = 0x1f01;\nvar GL_VERSION = 0x1f02;\nvar GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nvar WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nvar FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(function (key) {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  var info = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  var renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  var gpuVendor = identifyGPUVendor(vendor, renderer);\n  var gpuInfo = {\n    gpuVendor: gpuVendor,\n    vendor: vendor,\n    renderer: renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nvar compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  var extensionName = feature[0];\n  var behavior = opts.behavior || 'enable';\n  var source = \"#extension GL_\".concat(extensionName, \" : \").concat(behavior, \"\\nvoid main(void) {}\");\n  var shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  var feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  var extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  var value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(function (feature) {\n    return getFeature(gl, feature);\n  });\n}\n//# sourceMappingURL=webgl-info.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  var debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return \"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";\n\n    case 'intel':\n      return \"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n\n    case 'amd':\n      return \"#define AMD_GPU\\n\";\n\n    default:\n      return \"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  var versionDefines = \"#if (__VERSION__ > 120)\\n\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += \"// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += \"// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define DERIVATIVES\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += \"// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define DRAW_BUFFERS\\n#endif\\n\";\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += \"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n# define TEXTURE_LOD\\n#define texture2DLod texture2DLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define textureCubeLod textureCubeLodEXT\\n#define texture2DGrad texture2DGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define textureCubeGrad textureCubeGradEXT\\n#endif\\n\";\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","export default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertVertexShaderTo300(source) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertVertexShaderTo100(source) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(\"unknown GLSL version \".concat(targetGLSLVersion));\n  }\n}\nvar FS_OUTPUT_REGEX = /^[ \\t]*out[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\s+/m;\n\nfunction convertVertexShaderTo300(source) {\n  return source.replace(/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n').replace(/^[ \\t]*attribute[ \\t]+(.+;)/gm, 'in $1').replace(/^[ \\t]*varying[ \\t]+(.+;)/gm, 'out $1').replace(/\\btexture2D\\(/g, 'texture(').replace(/\\btextureCube\\(+/g, 'texture(').replace(/\\btexture2DLodEXT\\(/g, 'textureLod(').replace(/\\btextureCubeLodEXT\\(/g, 'textureLod(');\n}\n\nfunction convertFragmentShaderTo300(source) {\n  return source.replace(/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n').replace(/^[ \\t]*varying[ \\t]+(.+;)/gm, 'in $1').replace(/\\btexture2D\\(/g, 'texture(').replace(/\\btextureCube\\(/g, 'texture(').replace(/\\btexture2DLodEXT\\(/g, 'textureLod(').replace(/\\btextureCubeLodEXT\\(/g, 'textureLod(');\n}\n\nfunction convertVertexShaderTo100(source) {\n  return source.replace(/^#version[ \\t]+300[ \\t]+es/, '#version 100').replace(/^[ \\t]*in[ \\t]+(.+;)/gm, 'attribute $1').replace(/^[ \\t]*out[ \\t]+(.+;)/gm, 'varying $1').replace(/\\btexture\\(/g, 'texture2D(').replace(/\\btextureLod\\(/g, 'texture2DLodEXT(');\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = source.replace(/^#version[ \\t]+300[ \\t]+es/, '#version 100').replace(/^[ \\t]*in[ \\t]+/gm, 'varying ').replace(/\\btexture\\(/g, 'texture2D(').replace(/\\btextureLod\\(/g, 'texture2DLodEXT(');\n  var outputMatch = source.match(FS_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    var outputName = outputMatch[1];\n    source = source.replace(FS_OUTPUT_REGEX, '').replace(new RegExp(\"\\\\b\".concat(outputName, \"\\\\b\"), 'g'), 'gl_FragColor');\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _SHADER_TYPE;\n\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nvar INJECT_SHADER_DECLARATIONS = \"\\n\\n\".concat(DECLARATION_INJECT_MARKER, \"\\n\\n\");\nvar SHADER_TYPE = (_SHADER_TYPE = {}, _defineProperty(_SHADER_TYPE, VERTEX_SHADER, 'vertex'), _defineProperty(_SHADER_TYPE, FRAGMENT_SHADER, 'fragment'), _SHADER_TYPE);\nvar FRAGMENT_SHADER_PROLOGUE = \"precision highp float;\\n\\n\";\nexport function assembleShaders(gl, opts) {\n  var vs = opts.vs,\n      fs = opts.fs;\n  var modules = resolveModules(opts.modules || []);\n  return {\n    gl: gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules: modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules: modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, _ref) {\n  var id = _ref.id,\n      source = _ref.source,\n      type = _ref.type,\n      modules = _ref.modules,\n      _ref$defines = _ref.defines,\n      defines = _ref$defines === void 0 ? {} : _ref$defines,\n      _ref$hookFunctions = _ref.hookFunctions,\n      hookFunctions = _ref$hookFunctions === void 0 ? [] : _ref$hookFunctions,\n      _ref$inject = _ref.inject,\n      inject = _ref$inject === void 0 ? {} : _ref$inject,\n      _ref$transpileToGLSL = _ref.transpileToGLSL100,\n      transpileToGLSL100 = _ref$transpileToGLSL === void 0 ? false : _ref$transpileToGLSL,\n      _ref$prologue = _ref.prologue,\n      prologue = _ref$prologue === void 0 ? true : _ref$prologue,\n      log = _ref.log;\n  assert(typeof source === 'string', 'shader source must be a string');\n  var isVertex = type === VERTEX_SHADER;\n  var sourceLines = source.split('\\n');\n  var glslVersion = 100;\n  var versionLine = '';\n  var coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = \"#version \".concat(glslVersion);\n  }\n\n  var allDefines = {};\n  modules.forEach(function (module) {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  var assembledSource = prologue ? \"\".concat(versionLine, \"\\n\").concat(getShaderName({\n    id: id,\n    source: source,\n    type: type\n  }), \"\\n\").concat(getShaderType({\n    type: type\n  }), \"\\n\").concat(getPlatformShaderDefines(gl), \"\\n\").concat(getVersionDefines(gl, glslVersion, !isVertex), \"\\n\").concat(getApplicationDefines(allDefines), \"\\n\").concat(isVertex ? '' : FRAGMENT_SHADER_PROLOGUE, \"\\n\") : \"\".concat(versionLine, \"\\n\");\n  hookFunctions = normalizeHookFunctions(hookFunctions);\n  var hookInjections = {};\n  var declInjections = {};\n  var mainInjections = {};\n\n  for (var key in inject) {\n    var injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    var match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      var hash = match[2];\n      var name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = modules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var module = _step.value;\n\n      if (log) {\n        module.checkDeprecations(coreSource, log);\n      }\n\n      var moduleSource = module.getModuleSource(type, glslVersion);\n      assembledSource += moduleSource;\n      var injections = module.injections[type];\n\n      for (var _key in injections) {\n        var _match = _key.match(/^(v|f)s:#([\\w-]+)$/);\n\n        if (_match) {\n          var _name = _match[2];\n          var injectionType = _name === 'decl' ? declInjections : mainInjections;\n          injectionType[_key] = injectionType[_key] || [];\n\n          injectionType[_key].push(injections[_key]);\n        } else {\n          hookInjections[_key] = hookInjections[_key] || [];\n\n          hookInjections[_key].push(injections[_key]);\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctions[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    var uniforms = {};\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var module = _step2.value;\n        var moduleUniforms = module.getUniforms(opts, uniforms);\n        Object.assign(uniforms, moduleUniforms);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n          _iterator2[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType(_ref2) {\n  var type = _ref2.type;\n  return \"\\n#define SHADER_TYPE_\".concat(SHADER_TYPE[type].toUpperCase(), \"\\n\");\n}\n\nfunction getShaderName(_ref3) {\n  var id = _ref3.id,\n      source = _ref3.source,\n      type = _ref3.type;\n  var injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? \"\\n#define SHADER_NAME \".concat(id, \"_\").concat(SHADER_TYPE[type], \"\\n\\n\") : '';\n}\n\nfunction getApplicationDefines() {\n  var defines = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var count = 0;\n  var sourceText = '';\n\n  for (var define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    var value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += \"#define \".concat(define.toUpperCase(), \" \").concat(defines[define], \"\\n\");\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  var result = '';\n\n  for (var hookName in hookFunctions) {\n    var hookFunction = hookFunctions[hookName];\n    result += \"void \".concat(hookFunction.signature, \" {\\n\");\n\n    if (hookFunction.header) {\n      result += \"  \".concat(hookFunction.header);\n    }\n\n    if (hookInjections[hookName]) {\n      var injections = hookInjections[hookName];\n      injections.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = injections[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var injection = _step3.value;\n          result += \"  \".concat(injection.injection, \"\\n\");\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n            _iterator3[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += \"  \".concat(hookFunction.footer);\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  var result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(function (hook) {\n    var opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n\n    var _hook$split = hook.split(':'),\n        _hook$split2 = _slicedToArray(_hook$split, 2),\n        stage = _hook$split2[0],\n        signature = _hook$split2[1];\n\n    var name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature: signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\n\nvar ProgramManager = function () {\n  _createClass(ProgramManager, null, [{\n    key: \"getDefaultProgramManager\",\n    value: function getDefaultProgramManager(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n      return gl.luma.defaultProgramManager;\n    }\n  }]);\n\n  function ProgramManager(gl) {\n    _classCallCheck(this, ProgramManager);\n\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  _createClass(ProgramManager, [{\n    key: \"addDefaultModule\",\n    value: function addDefaultModule(module) {\n      if (!this._defaultModules.find(function (m) {\n        return m.name === module.name;\n      })) {\n        this._defaultModules.push(module);\n      }\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"removeDefaultModule\",\n    value: function removeDefaultModule(module) {\n      var moduleName = typeof module === 'string' ? module : module.name;\n      this._defaultModules = this._defaultModules.filter(function (m) {\n        return m.name !== moduleName;\n      });\n      this.stateHash++;\n    }\n  }, {\n    key: \"addShaderHook\",\n    value: function addShaderHook(hook, opts) {\n      if (opts) {\n        hook = Object.assign(opts, {\n          hook: hook\n        });\n      }\n\n      this._hookFunctions.push(hook);\n\n      this.stateHash++;\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _props$vs = props.vs,\n          vs = _props$vs === void 0 ? '' : _props$vs,\n          _props$fs = props.fs,\n          fs = _props$fs === void 0 ? '' : _props$fs,\n          _props$defines = props.defines,\n          defines = _props$defines === void 0 ? {} : _props$defines,\n          _props$inject = props.inject,\n          inject = _props$inject === void 0 ? {} : _props$inject,\n          _props$varyings = props.varyings,\n          varyings = _props$varyings === void 0 ? [] : _props$varyings,\n          _props$bufferMode = props.bufferMode,\n          bufferMode = _props$bufferMode === void 0 ? 0x8c8d : _props$bufferMode,\n          _props$transpileToGLS = props.transpileToGLSL100,\n          transpileToGLSL100 = _props$transpileToGLS === void 0 ? false : _props$transpileToGLS;\n\n      var modules = this._getModuleList(props.modules);\n\n      var vsHash = this._getHash(vs);\n\n      var fsHash = this._getHash(fs);\n\n      var moduleHashes = modules.map(function (m) {\n        return _this._getHash(m.name);\n      }).sort();\n      var varyingHashes = varyings.map(function (v) {\n        return _this._getHash(v);\n      });\n      var defineKeys = Object.keys(defines).sort();\n      var injectKeys = Object.keys(inject).sort();\n      var defineHashes = [];\n      var injectHashes = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = defineKeys[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n          defineHashes.push(this._getHash(key));\n          defineHashes.push(this._getHash(defines[key]));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = injectKeys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _key = _step2.value;\n          injectHashes.push(this._getHash(_key));\n          injectHashes.push(this._getHash(inject[_key]));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var hash = \"\".concat(vsHash, \"/\").concat(fsHash, \"D\").concat(defineHashes.join('/'), \"M\").concat(moduleHashes.join('/'), \"I\").concat(injectHashes.join('/'), \"V\").concat(varyingHashes.join('/'), \"H\").concat(this.stateHash, \"B\").concat(bufferMode).concat(transpileToGLSL100 ? 'T' : '');\n\n      if (!this._programCache[hash]) {\n        var assembled = assembleShaders(this.gl, {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          hookFunctions: this._hookFunctions,\n          transpileToGLSL100: transpileToGLSL100\n        });\n        this._programCache[hash] = new Program(this.gl, {\n          hash: hash,\n          vs: assembled.vs,\n          fs: assembled.fs,\n          varyings: varyings,\n          bufferMode: bufferMode\n        });\n\n        this._getUniforms[hash] = assembled.getUniforms || function (x) {};\n\n        this._useCounts[hash] = 0;\n      }\n\n      this._useCounts[hash]++;\n      return this._programCache[hash];\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms(program) {\n      return this._getUniforms[program.hash] || null;\n    }\n  }, {\n    key: \"release\",\n    value: function release(program) {\n      var hash = program.hash;\n      this._useCounts[hash]--;\n\n      if (this._useCounts[hash] === 0) {\n        this._programCache[hash][\"delete\"]();\n\n        delete this._programCache[hash];\n        delete this._getUniforms[hash];\n        delete this._useCounts[hash];\n      }\n    }\n  }, {\n    key: \"_getHash\",\n    value: function _getHash(key) {\n      if (this._hashes[key] === undefined) {\n        this._hashes[key] = this._hashCounter++;\n      }\n\n      return this._hashes[key];\n    }\n  }, {\n    key: \"_getModuleList\",\n    value: function _getModuleList() {\n      var appModules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var modules = new Array(this._defaultModules.length + appModules.length);\n      var seen = {};\n      var count = 0;\n\n      for (var i = 0, len = this._defaultModules.length; i < len; ++i) {\n        var module = this._defaultModules[i];\n        var name = module.name;\n        modules[count++] = module;\n        seen[name] = true;\n      }\n\n      for (var _i = 0, _len = appModules.length; _i < _len; ++_i) {\n        var _module = appModules[_i];\n        var _name = _module.name;\n\n        if (!seen[_name]) {\n          modules[count++] = _module;\n          seen[_name] = true;\n        }\n      }\n\n      modules.length = count;\n      return modules;\n    }\n  }]);\n\n  return ProgramManager;\n}();\n\nexport { ProgramManager as default };\n//# sourceMappingURL=program-manager.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport trackContextState from '../state-tracker/track-context-state';\nimport { log as _log, assert, getDevicePixelRatio, isWebGL2 } from '../utils';\nexport var ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport var ERR_WEBGL = ERR_CONTEXT;\nexport var ERR_WEBGL2 = 'Requires WebGL2';\nvar isBrowser = getIsBrowser();\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  assert(isBrowser, \"createGLContext on available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options = options,\n      width = _options.width,\n      height = _options.height;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  var gl;\n  var _options2 = options,\n      canvas = _options2.canvas;\n  var targetCanvas = getCanvas({\n    canvas: canvas,\n    width: width,\n    height: height,\n    onError: onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  var _options3 = options,\n      manageState = _options3.manageState,\n      debug = _options3.debug;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: function log() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _log.log.apply(_log, [1].concat(args))();\n      }\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      _log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      _log.level = Math.max(_log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  var vendorMasked = gl.getParameter(7936);\n  var rendererMasked = gl.getParameter(7937);\n  var ext = gl.getExtension('WEBGL_debug_renderer_info');\n  var vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  var rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked: vendorMasked,\n    rendererMasked: rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (gl.canvas) {\n    var devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  var ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && \"width\" in options && \"height\" in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  var onError = options.onError;\n\n  var onCreateError = function onCreateError(error) {\n    return onError(\"WebGL context: \".concat(error.statusMessage || 'error'));\n  };\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  var _options$webgl = options.webgl1,\n      webgl1 = _options$webgl === void 0 ? true : _options$webgl,\n      _options$webgl2 = options.webgl2,\n      webgl2 = _options$webgl2 === void 0 ? true : _options$webgl2;\n  var gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(\"Failed to create \".concat(webgl2 && !webgl1 ? 'WebGL2' : 'WebGL', \" context\"));\n  }\n\n  return gl;\n}\n\nfunction getCanvas(_ref) {\n  var canvas = _ref.canvas,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      onError = _ref.onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    var isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  var webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  var info = getContextDebugInfo(gl);\n  var driver = info ? \"(\".concat(info.vendor, \",\").concat(info.renderer, \")\") : '';\n  var debug = gl.debug ? ' debug' : '';\n\n  _log.info(1, \"\".concat(webGL).concat(debug, \" context \").concat(driver))();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  var clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  var clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    _log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  var cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    var clampedPixelRatio = devicePixelRatio;\n    var canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    var canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      _log.warn(\"Device pixel ratio clamped\")();\n\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth: clientWidth,\n      clientHeight: clientHeight,\n      devicePixelRatio: devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  var hasParser = loader.parseTextSync || loader.parseSync || loader.parse || loader.parseStream || loader.parseInBatches;\n  var loaderOptions = loader.options && loader.options[loader.id];\n  hasParser = hasParser || loaderOptions && loaderOptions.workerUrl;\n  return hasParser;\n}\nexport function normalizeLoader(loader) {\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  var options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = _objectSpread(_objectSpread({}, loader), {}, {\n      options: _objectSpread(_objectSpread({}, loader.options), options)\n    });\n  }\n\n  if (loader.extension) {\n    loader.extensions = loader.extensions || loader.extension;\n    delete loader.extension;\n  }\n\n  if (!Array.isArray(loader.extensions)) {\n    loader.extensions = [loader.extensions];\n  }\n\n  assert(loader.extensions && loader.extensions.length > 0 && loader.extensions[0]);\n\n  if (loader.parseTextSync) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\n\nvar Stat = function () {\n  function Stat(name, type) {\n    _classCallCheck(this, Stat);\n\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  _createClass(Stat, [{\n    key: \"setSampleSize\",\n    value: function setSampleSize(samples) {\n      this.sampleSize = samples;\n      return this;\n    }\n  }, {\n    key: \"incrementCount\",\n    value: function incrementCount() {\n      this.addCount(1);\n      return this;\n    }\n  }, {\n    key: \"decrementCount\",\n    value: function decrementCount() {\n      this.subtractCount(1);\n      return this;\n    }\n  }, {\n    key: \"addCount\",\n    value: function addCount(value) {\n      this._count += value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"subtractCount\",\n    value: function subtractCount(value) {\n      this._count -= value;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"addTime\",\n    value: function addTime(time) {\n      this._time += time;\n      this.lastTiming = time;\n      this._samples++;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"timeStart\",\n    value: function timeStart() {\n      this._startTime = getHiResTimestamp();\n      this._timerPending = true;\n      return this;\n    }\n  }, {\n    key: \"timeEnd\",\n    value: function timeEnd() {\n      if (!this._timerPending) {\n        return this;\n      }\n\n      this.addTime(getHiResTimestamp() - this._startTime);\n      this._timerPending = false;\n\n      this._checkSampling();\n\n      return this;\n    }\n  }, {\n    key: \"getSampleAverageCount\",\n    value: function getSampleAverageCount() {\n      return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleAverageTime\",\n    value: function getSampleAverageTime() {\n      return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n    }\n  }, {\n    key: \"getSampleHz\",\n    value: function getSampleHz() {\n      return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n    }\n  }, {\n    key: \"getAverageCount\",\n    value: function getAverageCount() {\n      return this.samples > 0 ? this.count / this.samples : 0;\n    }\n  }, {\n    key: \"getAverageTime\",\n    value: function getAverageTime() {\n      return this.samples > 0 ? this.time / this.samples : 0;\n    }\n  }, {\n    key: \"getHz\",\n    value: function getHz() {\n      return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.time = 0;\n      this.count = 0;\n      this.samples = 0;\n      this.lastTiming = 0;\n      this.lastSampleTime = 0;\n      this.lastSampleCount = 0;\n      this._count = 0;\n      this._time = 0;\n      this._samples = 0;\n      this._startTime = 0;\n      this._timerPending = false;\n      return this;\n    }\n  }, {\n    key: \"_checkSampling\",\n    value: function _checkSampling() {\n      if (this._samples === this.sampleSize) {\n        this.lastSampleTime = this._time;\n        this.lastSampleCount = this._count;\n        this.count += this._count;\n        this.time += this._time;\n        this.samples += this._samples;\n        this._time = 0;\n        this._count = 0;\n        this._samples = 0;\n      }\n    }\n  }]);\n\n  return Stat;\n}();\n\nexport { Stat as default };\n//# sourceMappingURL=stat.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport Stat from './stat';\n\nvar Stats = function () {\n  function Stats(_ref) {\n    var id = _ref.id,\n        stats = _ref.stats;\n\n    _classCallCheck(this, Stats);\n\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  _createClass(Stats, [{\n    key: \"get\",\n    value: function get(name) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'count';\n      return this._getOrCreate({\n        name: name,\n        type: type\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      for (var key in this.stats) {\n        this.stats[key].reset();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(fn) {\n      for (var key in this.stats) {\n        fn(this.stats[key]);\n      }\n    }\n  }, {\n    key: \"getTable\",\n    value: function getTable() {\n      var table = {};\n      this.forEach(function (stat) {\n        table[stat.name] = {\n          time: stat.time || 0,\n          count: stat.count || 0,\n          average: stat.getAverageTime() || 0,\n          hz: stat.getHz() || 0\n        };\n      });\n      return table;\n    }\n  }, {\n    key: \"_initializeStats\",\n    value: function _initializeStats() {\n      var _this = this;\n\n      var stats = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      stats.forEach(function (stat) {\n        return _this._getOrCreate(stat);\n      });\n    }\n  }, {\n    key: \"_getOrCreate\",\n    value: function _getOrCreate(stat) {\n      if (!stat || !stat.name) {\n        return null;\n      }\n\n      var name = stat.name,\n          type = stat.type;\n\n      if (!this.stats[name]) {\n        if (stat instanceof Stat) {\n          this.stats[name] = stat;\n        } else {\n          this.stats[name] = new Stat(name, type);\n        }\n      }\n\n      return this.stats[name];\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return Object.keys(this.stats).length;\n    }\n  }]);\n\n  return Stats;\n}();\n\nexport { Stats as default };\n//# sourceMappingURL=stats.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { isWebGL2, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { uid, isPowerOfTwo, assert } from '../utils';\nvar NPOT_MIN_FILTERS = [9729, 9728];\n\nvar WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nvar Texture = function (_Resource) {\n  _inherits(Texture, _Resource);\n\n  _createClass(Texture, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format,\n          linearFiltering = _ref.linearFiltering;\n\n      var supported = true;\n\n      if (format) {\n        supported = supported && isFormatSupported(gl, format);\n        supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n      }\n\n      return supported;\n    }\n  }]);\n\n  function Texture(gl, props) {\n    var _this;\n\n    _classCallCheck(this, Texture);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('texture') : _props$id,\n        handle = props.handle,\n        target = props.target;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Texture).call(this, gl, {\n      id: id,\n      handle: handle\n    }));\n    _this.target = target;\n    _this.textureUnit = undefined;\n    _this.loaded = false;\n    _this.width = undefined;\n    _this.height = undefined;\n    _this.depth = undefined;\n    _this.format = undefined;\n    _this.type = undefined;\n    _this.dataFormat = undefined;\n    _this.border = undefined;\n    _this.textureUnit = undefined;\n    _this.mipmaps = undefined;\n    return _this;\n  }\n\n  _createClass(Texture, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"Texture(\".concat(this.id, \",\").concat(this.width, \"x\").concat(this.height, \")\");\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var _this2 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var data = props.data;\n\n      if (data instanceof Promise) {\n        data.then(function (resolvedImageData) {\n          return _this2.initialize(Object.assign({}, props, {\n            pixels: resolvedImageData,\n            data: resolvedImageData\n          }));\n        });\n        return this;\n      }\n\n      var _props$pixels = props.pixels,\n          pixels = _props$pixels === void 0 ? null : _props$pixels,\n          _props$format = props.format,\n          format = _props$format === void 0 ? 6408 : _props$format,\n          _props$border = props.border,\n          border = _props$border === void 0 ? 0 : _props$border,\n          _props$recreate = props.recreate,\n          recreate = _props$recreate === void 0 ? false : _props$recreate,\n          _props$parameters = props.parameters,\n          parameters = _props$parameters === void 0 ? {} : _props$parameters,\n          _props$pixelStore = props.pixelStore,\n          pixelStore = _props$pixelStore === void 0 ? {} : _props$pixelStore,\n          _props$textureUnit = props.textureUnit,\n          textureUnit = _props$textureUnit === void 0 ? undefined : _props$textureUnit;\n      var _props$mipmaps = props.mipmaps,\n          mipmaps = _props$mipmaps === void 0 ? true : _props$mipmaps;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var width = props.width,\n          height = props.height,\n          dataFormat = props.dataFormat,\n          type = props.type;\n      var _props$depth = props.depth,\n          depth = _props$depth === void 0 ? 0 : _props$depth;\n\n      var _this$_deduceParamete = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: false,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      width = _this$_deduceParamete.width;\n      height = _this$_deduceParamete.height;\n      dataFormat = _this$_deduceParamete.dataFormat;\n      type = _this$_deduceParamete.type;\n      this.width = width;\n      this.height = height;\n      this.depth = depth;\n      this.format = format;\n      this.type = type;\n      this.dataFormat = dataFormat;\n      this.border = border;\n      this.textureUnit = textureUnit;\n\n      if (Number.isFinite(this.textureUnit)) {\n        this.gl.activeTexture(33984 + this.textureUnit);\n        this.gl.bindTexture(this.target, this.handle);\n      }\n\n      if (mipmaps && this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        mipmaps = false;\n\n        this._updateForNPOT(parameters);\n      }\n\n      this.mipmaps = mipmaps;\n      this.setImageData({\n        data: data,\n        width: width,\n        height: height,\n        depth: depth,\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        border: border,\n        mipmaps: mipmaps,\n        parameters: pixelStore\n      });\n\n      if (mipmaps) {\n        this.generateMipmap();\n      }\n\n      this.setParameters(parameters);\n\n      if (recreate) {\n        this.data = data;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref2) {\n      var height = _ref2.height,\n          width = _ref2.width,\n          _ref2$mipmaps = _ref2.mipmaps,\n          mipmaps = _ref2$mipmaps === void 0 ? false : _ref2$mipmaps;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          type: this.type,\n          dataFormat: this.dataFormat,\n          border: this.border,\n          mipmaps: mipmaps\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"generateMipmap\",\n    value: function generateMipmap() {\n      var _this3 = this;\n\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this._isNPOT()) {\n        log.warn(\"texture: \".concat(this, \" is Non-Power-Of-Two, disabling mipmaping\"))();\n        return this;\n      }\n\n      this.mipmaps = true;\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, params, function () {\n        _this3.gl.generateMipmap(_this3.target);\n      });\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"setImageData\",\n    value: function setImageData(options) {\n      this._trackDeallocatedMemory('Texture');\n\n      var _options$target = options.target,\n          target = _options$target === void 0 ? this.target : _options$target,\n          _options$pixels = options.pixels,\n          pixels = _options$pixels === void 0 ? null : _options$pixels,\n          _options$level = options.level,\n          level = _options$level === void 0 ? 0 : _options$level,\n          _options$format = options.format,\n          format = _options$format === void 0 ? this.format : _options$format,\n          _options$border = options.border,\n          border = _options$border === void 0 ? this.border : _options$border,\n          _options$offset = options.offset,\n          offset = _options$offset === void 0 ? 0 : _options$offset,\n          _options$parameters = options.parameters,\n          parameters = _options$parameters === void 0 ? {} : _options$parameters;\n      var _options$data = options.data,\n          data = _options$data === void 0 ? null : _options$data,\n          _options$type = options.type,\n          type = _options$type === void 0 ? this.type : _options$type,\n          _options$width = options.width,\n          width = _options$width === void 0 ? this.width : _options$width,\n          _options$height = options.height,\n          height = _options$height === void 0 ? this.height : _options$height,\n          _options$dataFormat = options.dataFormat,\n          dataFormat = _options$dataFormat === void 0 ? this.dataFormat : _options$dataFormat,\n          _options$compressed = options.compressed,\n          compressed = _options$compressed === void 0 ? false : _options$compressed;\n\n      if (!data) {\n        data = pixels;\n      }\n\n      var _this$_deduceParamete2 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete2.type;\n      dataFormat = _this$_deduceParamete2.dataFormat;\n      compressed = _this$_deduceParamete2.compressed;\n      width = _this$_deduceParamete2.width;\n      height = _this$_deduceParamete2.height;\n      var gl = this.gl;\n      gl.bindTexture(this.target, this.handle);\n      var dataType = null;\n\n      var _this$_getDataType = this._getDataType({\n        data: data,\n        compressed: compressed\n      });\n\n      data = _this$_getDataType.data;\n      dataType = _this$_getDataType.dataType;\n      withParameters(this.gl, parameters, function () {\n        switch (dataType) {\n          case 'null':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            break;\n\n          case 'typed-array':\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n            break;\n\n          case 'buffer':\n            assertWebGL2Context(gl);\n            gl.bindBuffer(35052, data.handle || data);\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n            gl.bindBuffer(35052, null);\n            break;\n\n          case 'browser-object':\n            if (isWebGL2(gl)) {\n              gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n            } else {\n              gl.texImage2D(target, level, format, dataFormat, type, data);\n            }\n\n            break;\n\n          case 'compressed':\n            gl.compressedTexImage2D(target, level, format, width, height, border, data);\n            break;\n\n          default:\n            assert(false, 'Unknown image data type');\n        }\n      });\n\n      if (data && data.byteLength) {\n        this._trackAllocatedMemory(data.byteLength, 'Texture');\n      } else {\n        var channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n        var channelSize = TYPE_SIZES[this.type] || 1;\n\n        this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n      }\n\n      this.loaded = true;\n      return this;\n    }\n  }, {\n    key: \"setSubImageData\",\n    value: function setSubImageData(_ref3) {\n      var _this4 = this;\n\n      var _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$pixels = _ref3.pixels,\n          pixels = _ref3$pixels === void 0 ? null : _ref3$pixels,\n          _ref3$data = _ref3.data,\n          data = _ref3$data === void 0 ? null : _ref3$data,\n          _ref3$x = _ref3.x,\n          x = _ref3$x === void 0 ? 0 : _ref3$x,\n          _ref3$y = _ref3.y,\n          y = _ref3$y === void 0 ? 0 : _ref3$y,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? this.width : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? this.height : _ref3$height,\n          _ref3$level = _ref3.level,\n          level = _ref3$level === void 0 ? 0 : _ref3$level,\n          _ref3$format = _ref3.format,\n          format = _ref3$format === void 0 ? this.format : _ref3$format,\n          _ref3$type = _ref3.type,\n          type = _ref3$type === void 0 ? this.type : _ref3$type,\n          _ref3$dataFormat = _ref3.dataFormat,\n          dataFormat = _ref3$dataFormat === void 0 ? this.dataFormat : _ref3$dataFormat,\n          _ref3$compressed = _ref3.compressed,\n          compressed = _ref3$compressed === void 0 ? false : _ref3$compressed,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          _ref3$border = _ref3.border,\n          border = _ref3$border === void 0 ? this.border : _ref3$border,\n          _ref3$parameters = _ref3.parameters,\n          parameters = _ref3$parameters === void 0 ? {} : _ref3$parameters;\n\n      var _this$_deduceParamete3 = this._deduceParameters({\n        format: format,\n        type: type,\n        dataFormat: dataFormat,\n        compressed: compressed,\n        data: data,\n        width: width,\n        height: height\n      });\n\n      type = _this$_deduceParamete3.type;\n      dataFormat = _this$_deduceParamete3.dataFormat;\n      compressed = _this$_deduceParamete3.compressed;\n      width = _this$_deduceParamete3.width;\n      height = _this$_deduceParamete3.height;\n      assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n      if (!data) {\n        data = pixels;\n      }\n\n      if (data && data.data) {\n        var ndarray = data;\n        data = ndarray.data;\n        width = ndarray.shape[0];\n        height = ndarray.shape[1];\n      }\n\n      if (data instanceof Buffer) {\n        data = data.handle;\n      }\n\n      this.gl.bindTexture(this.target, this.handle);\n      withParameters(this.gl, parameters, function () {\n        if (compressed) {\n          _this4.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n        } else if (data === null) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n        } else if (ArrayBuffer.isView(data)) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n        } else if (data instanceof WebGLBuffer) {\n          assertWebGL2Context(_this4.gl);\n\n          _this4.gl.bindBuffer(35052, data);\n\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n\n          _this4.gl.bindBuffer(35052, null);\n        } else if (isWebGL2(_this4.gl)) {\n          _this4.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n        } else {\n          _this4.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n        }\n      });\n      this.gl.bindTexture(this.target, null);\n    }\n  }, {\n    key: \"copyFramebuffer\",\n    value: function copyFramebuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n      return null;\n    }\n  }, {\n    key: \"getActiveUnit\",\n    value: function getActiveUnit() {\n      return this.gl.getParameter(34016) - 33984;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, this.handle);\n      return textureUnit;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var textureUnit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.textureUnit;\n      var gl = this.gl;\n\n      if (textureUnit !== undefined) {\n        this.textureUnit = textureUnit;\n        gl.activeTexture(33984 + textureUnit);\n      }\n\n      gl.bindTexture(this.target, null);\n      return textureUnit;\n    }\n  }, {\n    key: \"_getDataType\",\n    value: function _getDataType(_ref4) {\n      var data = _ref4.data,\n          _ref4$compressed = _ref4.compressed,\n          compressed = _ref4$compressed === void 0 ? false : _ref4$compressed;\n\n      if (compressed) {\n        return {\n          data: data,\n          dataType: 'compressed'\n        };\n      }\n\n      if (data === null) {\n        return {\n          data: data,\n          dataType: 'null'\n        };\n      }\n\n      if (ArrayBuffer.isView(data)) {\n        return {\n          data: data,\n          dataType: 'typed-array'\n        };\n      }\n\n      if (data instanceof Buffer) {\n        return {\n          data: data.handle,\n          dataType: 'buffer'\n        };\n      }\n\n      if (data instanceof WebGLBuffer) {\n        return {\n          data: data,\n          dataType: 'buffer'\n        };\n      }\n\n      return {\n        data: data,\n        dataType: 'browser-object'\n      };\n    }\n  }, {\n    key: \"_deduceParameters\",\n    value: function _deduceParameters(opts) {\n      var format = opts.format,\n          data = opts.data;\n      var width = opts.width,\n          height = opts.height,\n          dataFormat = opts.dataFormat,\n          type = opts.type,\n          compressed = opts.compressed;\n      var textureFormat = TEXTURE_FORMATS[format];\n      dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n      type = type || textureFormat && textureFormat.types[0];\n      compressed = compressed || textureFormat && textureFormat.compressed;\n\n      var _this$_deduceImageSiz = this._deduceImageSize(data, width, height);\n\n      width = _this$_deduceImageSiz.width;\n      height = _this$_deduceImageSiz.height;\n      return {\n        dataFormat: dataFormat,\n        type: type,\n        compressed: compressed,\n        width: width,\n        height: height,\n        format: format,\n        data: data\n      };\n    }\n  }, {\n    key: \"_deduceImageSize\",\n    value: function _deduceImageSize(data, width, height) {\n      var size;\n\n      if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n        size = {\n          width: data.naturalWidth,\n          height: data.naturalHeight\n        };\n      } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n        size = {\n          width: data.width,\n          height: data.height\n        };\n      } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n        size = {\n          width: data.videoWidth,\n          height: data.videoHeight\n        };\n      } else if (!data) {\n        size = {\n          width: width >= 0 ? width : 1,\n          height: height >= 0 ? height : 1\n        };\n      } else {\n        size = {\n          width: width,\n          height: height\n        };\n      }\n\n      assert(size, 'Could not deduced texture size');\n      assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n      assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n      return size;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createTexture();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteTexture(this.handle);\n\n      this._trackDeallocatedMemory('Texture');\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      switch (pname) {\n        case 4096:\n          return this.width;\n\n        case 4097:\n          return this.height;\n\n        default:\n          this.gl.bindTexture(this.target, this.handle);\n          var value = this.gl.getTexParameter(this.target, pname);\n          this.gl.bindTexture(this.target, null);\n          return value;\n      }\n    }\n  }, {\n    key: \"_setParameter\",\n    value: function _setParameter(pname, param) {\n      this.gl.bindTexture(this.target, this.handle);\n      param = this._getNPOTParam(pname, param);\n\n      switch (pname) {\n        case 33082:\n        case 33083:\n          this.gl.texParameterf(this.handle, pname, param);\n          break;\n\n        case 4096:\n        case 4097:\n          assert(false);\n          break;\n\n        default:\n          this.gl.texParameteri(this.target, pname, param);\n          break;\n      }\n\n      this.gl.bindTexture(this.target, null);\n      return this;\n    }\n  }, {\n    key: \"_isNPOT\",\n    value: function _isNPOT() {\n      if (isWebGL2(this.gl)) {\n        return false;\n      }\n\n      if (!this.width || !this.height) {\n        return false;\n      }\n\n      return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n    }\n  }, {\n    key: \"_updateForNPOT\",\n    value: function _updateForNPOT(parameters) {\n      if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n        parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n      }\n\n      if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n        parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n      }\n    }\n  }, {\n    key: \"_getNPOTParam\",\n    value: function _getNPOTParam(pname, param) {\n      if (this._isNPOT()) {\n        switch (pname) {\n          case 10241:\n            if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n              param = 9729;\n            }\n\n            break;\n\n          case 10242:\n          case 10243:\n            if (param !== 33071) {\n              param = 33071;\n            }\n\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return param;\n    }\n  }]);\n\n  return Texture;\n}(Resource);\n\nexport { Texture as default };\n//# sourceMappingURL=texture.js.map","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _$33190$36012$;\n\nvar EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default (_$33190$36012$ = {}, _defineProperty(_$33190$36012$, 33189, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33190, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 36012, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36168, {\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 34041, {\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 35056, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36013, {\n  gl2: true,\n  bpp: 5\n}), _defineProperty(_$33190$36012$, 32854, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 36194, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 32855, {\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33321, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33330, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33329, {\n  gl2: true,\n  bpp: 1\n}), _defineProperty(_$33190$36012$, 33332, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33331, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33334, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33333, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33323, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33336, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33335, {\n  gl2: true,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33338, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33337, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33340, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33339, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 32849, {\n  gl2: true,\n  bpp: 3\n}), _defineProperty(_$33190$36012$, 32856, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 32857, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36220, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36238, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36975, {\n  gl2: true,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 36214, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36232, {\n  gl2: true,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 36226, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 36208, {\n  gl2: true,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 33325, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 2\n}), _defineProperty(_$33190$36012$, 33327, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 34842, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 33326, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _defineProperty(_$33190$36012$, 33328, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 8\n}), _defineProperty(_$33190$36012$, 34836, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 16\n}), _defineProperty(_$33190$36012$, 35898, {\n  gl2: EXT_FLOAT_WEBGL2,\n  bpp: 4\n}), _$33190$36012$);\n//# sourceMappingURL=renderbuffer-formats.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils';\n\nfunction isFormatSupported(gl, format, formats) {\n  var info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nvar Renderbuffer = function (_Resource) {\n  _inherits(Renderbuffer, _Resource);\n\n  _createClass(Renderbuffer, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          format = _ref.format;\n\n      return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n    }\n  }, {\n    key: \"getSamplesForFormat\",\n    value: function getSamplesForFormat(gl, _ref2) {\n      var format = _ref2.format;\n      return gl.getInternalformatParameter(36161, format, 32937);\n    }\n  }]);\n\n  function Renderbuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Renderbuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Renderbuffer).call(this, gl, opts));\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Renderbuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref3) {\n      var format = _ref3.format,\n          _ref3$width = _ref3.width,\n          width = _ref3$width === void 0 ? 1 : _ref3$width,\n          _ref3$height = _ref3.height,\n          height = _ref3$height === void 0 ? 1 : _ref3$height,\n          _ref3$samples = _ref3.samples,\n          samples = _ref3$samples === void 0 ? 0 : _ref3$samples;\n      assert(format, 'Needs format');\n\n      this._trackDeallocatedMemory();\n\n      this.gl.bindRenderbuffer(36161, this.handle);\n\n      if (samples !== 0 && isWebGL2(this.gl)) {\n        this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n      } else {\n        this.gl.renderbufferStorage(36161, format, width, height);\n      }\n\n      this.format = format;\n      this.width = width;\n      this.height = height;\n      this.samples = samples;\n\n      this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref4) {\n      var width = _ref4.width,\n          height = _ref4.height;\n\n      if (width !== this.width || height !== this.height) {\n        return this.initialize({\n          width: width,\n          height: height,\n          format: this.format,\n          samples: this.samples\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createRenderbuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteRenderbuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindRenderbuffer(36161, handle);\n    }\n  }, {\n    key: \"_syncHandle\",\n    value: function _syncHandle(handle) {\n      this.format = this.getParameter(36164);\n      this.width = this.getParameter(36162);\n      this.height = this.getParameter(36163);\n      this.samples = this.getParameter(36011);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindRenderbuffer(36161, this.handle);\n      var value = this.gl.getRenderbufferParameter(36161, pname);\n      return value;\n    }\n  }]);\n\n  return Renderbuffer;\n}(Resource);\n\nexport { Renderbuffer as default };\n//# sourceMappingURL=renderbuffer.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction noop() {}\n\nvar DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\n\nvar Transition = function () {\n  function Transition(timeline) {\n    _classCallCheck(this, Transition);\n\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  _createClass(Transition, [{\n    key: \"start\",\n    value: function start(props) {\n      this.cancel();\n      this.settings = Object.assign({}, DEFAULT_SETTINGS, props);\n      this._inProgress = true;\n      this.settings.onStart(this);\n    }\n  }, {\n    key: \"end\",\n    value: function end() {\n      if (this._inProgress) {\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n        this.settings.onEnd(this);\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this._inProgress) {\n        this.settings.onInterrupt(this);\n        this.timeline.removeChannel(this._handle);\n        this._handle = null;\n        this._inProgress = false;\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      if (!this._inProgress) {\n        return false;\n      }\n\n      if (this._handle === null) {\n        var timeline = this.timeline,\n            settings = this.settings;\n        this._handle = timeline.addChannel({\n          delay: timeline.getTime(),\n          duration: settings.duration\n        });\n      }\n\n      this.time = this.timeline.getTime(this._handle);\n\n      this._onUpdate();\n\n      this.settings.onUpdate(this);\n\n      if (this.timeline.isFinished(this._handle)) {\n        this.end();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_onUpdate\",\n    value: function _onUpdate() {}\n  }, {\n    key: \"inProgress\",\n    get: function get() {\n      return this._inProgress;\n    }\n  }]);\n\n  return Transition;\n}();\n\nexport { Transition as default };\n//# sourceMappingURL=transition.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _COMPOSITE_GL_TYPES;\n\nimport { assert } from '../utils';\nvar GL_BYTE = 0x1400;\nvar GL_UNSIGNED_BYTE = 0x1401;\nvar GL_SHORT = 0x1402;\nvar GL_UNSIGNED_SHORT = 0x1403;\nvar GL_POINTS = 0x0;\nvar GL_LINES = 0x1;\nvar GL_LINE_LOOP = 0x2;\nvar GL_LINE_STRIP = 0x3;\nvar GL_TRIANGLES = 0x4;\nvar GL_TRIANGLE_STRIP = 0x5;\nvar GL_TRIANGLE_FAN = 0x6;\nvar GL_FLOAT = 0x1406;\nvar GL_FLOAT_VEC2 = 0x8b50;\nvar GL_FLOAT_VEC3 = 0x8b51;\nvar GL_FLOAT_VEC4 = 0x8b52;\nvar GL_INT = 0x1404;\nvar GL_INT_VEC2 = 0x8b53;\nvar GL_INT_VEC3 = 0x8b54;\nvar GL_INT_VEC4 = 0x8b55;\nvar GL_UNSIGNED_INT = 0x1405;\nvar GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nvar GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nvar GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nvar GL_BOOL = 0x8b56;\nvar GL_BOOL_VEC2 = 0x8b57;\nvar GL_BOOL_VEC3 = 0x8b58;\nvar GL_BOOL_VEC4 = 0x8b59;\nvar GL_FLOAT_MAT2 = 0x8b5a;\nvar GL_FLOAT_MAT3 = 0x8b5b;\nvar GL_FLOAT_MAT4 = 0x8b5c;\nvar GL_FLOAT_MAT2x3 = 0x8b65;\nvar GL_FLOAT_MAT2x4 = 0x8b66;\nvar GL_FLOAT_MAT3x2 = 0x8b67;\nvar GL_FLOAT_MAT3x4 = 0x8b68;\nvar GL_FLOAT_MAT4x2 = 0x8b69;\nvar GL_FLOAT_MAT4x3 = 0x8b6a;\nvar COMPOSITE_GL_TYPES = (_COMPOSITE_GL_TYPES = {}, _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT, [GL_FLOAT, 1, 'float']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC2, [GL_FLOAT, 2, 'vec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC3, [GL_FLOAT, 3, 'vec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_VEC4, [GL_FLOAT, 4, 'vec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT, [GL_INT, 1, 'int']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC2, [GL_INT, 2, 'ivec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC3, [GL_INT, 3, 'ivec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_INT_VEC4, [GL_INT, 4, 'ivec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT, [GL_UNSIGNED_INT, 1, 'uint']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC2, [GL_UNSIGNED_INT, 2, 'uvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC3, [GL_UNSIGNED_INT, 3, 'uvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_UNSIGNED_INT_VEC4, [GL_UNSIGNED_INT, 4, 'uvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL, [GL_FLOAT, 1, 'bool']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC2, [GL_FLOAT, 2, 'bvec2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC3, [GL_FLOAT, 3, 'bvec3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_BOOL_VEC4, [GL_FLOAT, 4, 'bvec4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2, [GL_FLOAT, 8, 'mat2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x3, [GL_FLOAT, 8, 'mat2x3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT2x4, [GL_FLOAT, 8, 'mat2x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3, [GL_FLOAT, 12, 'mat3']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x2, [GL_FLOAT, 12, 'mat3x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT3x4, [GL_FLOAT, 12, 'mat3x4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4, [GL_FLOAT, 16, 'mat4']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x2, [GL_FLOAT, 16, 'mat4x2']), _defineProperty(_COMPOSITE_GL_TYPES, GL_FLOAT_MAT4x3, [GL_FLOAT, 16, 'mat4x3']), _COMPOSITE_GL_TYPES);\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount(_ref) {\n  var drawMode = _ref.drawMode,\n      vertexCount = _ref.vertexCount;\n\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount(_ref2) {\n  var drawMode = _ref2.drawMode,\n      vertexCount = _ref2.vertexCount;\n  var primitiveCount = getPrimitiveCount({\n    drawMode: drawMode,\n    vertexCount: vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  var typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  var _typeAndSize = _slicedToArray(typeAndSize, 2),\n      type = _typeAndSize[0],\n      components = _typeAndSize[1];\n\n  return {\n    type: type,\n    components: components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (var glType in COMPOSITE_GL_TYPES) {\n    var _COMPOSITE_GL_TYPES$g = _slicedToArray(COMPOSITE_GL_TYPES[glType], 3),\n        compType = _COMPOSITE_GL_TYPES$g[0],\n        compComponents = _COMPOSITE_GL_TYPES$g[1],\n        name = _COMPOSITE_GL_TYPES$g[2];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType: glType,\n        name: name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","module.exports = require(\"regenerator-runtime\");\n","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { withParameters } from '@luma.gl/gltools';\nimport { assertWebGL2Context } from '../webgl-utils';\nimport { assert } from '../utils';\nvar GL_DEPTH_BUFFER_BIT = 0x00000100;\nvar GL_STENCIL_BUFFER_BIT = 0x00000400;\nvar GL_COLOR_BUFFER_BIT = 0x00004000;\nvar GL_COLOR = 0x1800;\nvar GL_DEPTH = 0x1801;\nvar GL_STENCIL = 0x1802;\nvar GL_DEPTH_STENCIL = 0x84f9;\nvar ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$framebuffer = _ref.framebuffer,\n      framebuffer = _ref$framebuffer === void 0 ? null : _ref$framebuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? null : _ref$color,\n      _ref$depth = _ref.depth,\n      depth = _ref$depth === void 0 ? null : _ref$depth,\n      _ref$stencil = _ref.stencil,\n      stencil = _ref$stencil === void 0 ? null : _ref$stencil;\n\n  var parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  var clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, function () {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$framebuffer = _ref2.framebuffer,\n      framebuffer = _ref2$framebuffer === void 0 ? null : _ref2$framebuffer,\n      _ref2$buffer = _ref2.buffer,\n      buffer = _ref2$buffer === void 0 ? GL_COLOR : _ref2$buffer,\n      _ref2$drawBuffer = _ref2.drawBuffer,\n      drawBuffer = _ref2$drawBuffer === void 0 ? 0 : _ref2$drawBuffer,\n      _ref2$value = _ref2.value,\n      value = _ref2$value === void 0 ? [0, 0, 0, 0] : _ref2$value;\n\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        var _value = _slicedToArray(value, 2),\n            depth = _value[0],\n            stencil = _value[1];\n\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { withParameters, log } from '@luma.gl/gltools';\nimport { assertWebGL2Context, flipRows, scalePixels } from '../webgl-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils';\nexport function readPixelsToArray(source) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$sourceX = _ref.sourceX,\n      sourceX = _ref$sourceX === void 0 ? 0 : _ref$sourceX,\n      _ref$sourceY = _ref.sourceY,\n      sourceY = _ref$sourceY === void 0 ? 0 : _ref$sourceY,\n      _ref$sourceFormat = _ref.sourceFormat,\n      sourceFormat = _ref$sourceFormat === void 0 ? 6408 : _ref$sourceFormat,\n      _ref$sourceAttachment = _ref.sourceAttachment,\n      sourceAttachment = _ref$sourceAttachment === void 0 ? 36064 : _ref$sourceAttachment,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? null : _ref$target,\n      sourceWidth = _ref.sourceWidth,\n      sourceHeight = _ref.sourceHeight,\n      sourceType = _ref.sourceType;\n\n  var _getFramebuffer = getFramebuffer(source),\n      framebuffer = _getFramebuffer.framebuffer,\n      deleteFramebuffer = _getFramebuffer.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle,\n      attachments = framebuffer.attachments;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, _ref2) {\n  var _ref2$sourceX = _ref2.sourceX,\n      sourceX = _ref2$sourceX === void 0 ? 0 : _ref2$sourceX,\n      _ref2$sourceY = _ref2.sourceY,\n      sourceY = _ref2$sourceY === void 0 ? 0 : _ref2$sourceY,\n      _ref2$sourceFormat = _ref2.sourceFormat,\n      sourceFormat = _ref2$sourceFormat === void 0 ? 6408 : _ref2$sourceFormat,\n      _ref2$target = _ref2.target,\n      target = _ref2$target === void 0 ? null : _ref2$target,\n      _ref2$targetByteOffse = _ref2.targetByteOffset,\n      targetByteOffset = _ref2$targetByteOffse === void 0 ? 0 : _ref2$targetByteOffse,\n      sourceWidth = _ref2.sourceWidth,\n      sourceHeight = _ref2.sourceHeight,\n      sourceType = _ref2.sourceType;\n\n  var _getFramebuffer2 = getFramebuffer(source),\n      framebuffer = _getFramebuffer2.framebuffer,\n      deleteFramebuffer = _getFramebuffer2.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  assertWebGL2Context(gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    var components = glFormatToComponents(sourceFormat);\n    var byteCount = glTypeToBytes(sourceType);\n    var byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl, {\n      byteLength: byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl, {\n    framebuffer: framebuffer\n  }, function () {\n    gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source) {\n  var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref3$sourceAttachmen = _ref3.sourceAttachment,\n      sourceAttachment = _ref3$sourceAttachmen === void 0 ? 36064 : _ref3$sourceAttachmen,\n      _ref3$targetMaxHeight = _ref3.targetMaxHeight,\n      targetMaxHeight = _ref3$targetMaxHeight === void 0 ? Number.MAX_SAFE_INTEGER : _ref3$targetMaxHeight;\n\n  var data = readPixelsToArray(source, {\n    sourceAttachment: sourceAttachment\n  });\n  var width = source.width,\n      height = source.height;\n\n  while (height > targetMaxHeight) {\n    var _scalePixels = scalePixels({\n      data: data,\n      width: width,\n      height: height\n    });\n\n    data = _scalePixels.data;\n    width = _scalePixels.width;\n    height = _scalePixels.height;\n  }\n\n  flipRows({\n    data: data,\n    width: width,\n    height: height\n  });\n  var canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  var context = canvas.getContext('2d');\n  var imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source) {\n  var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref4$sourceAttachmen = _ref4.sourceAttachment,\n      sourceAttachment = _ref4$sourceAttachmen === void 0 ? 36064 : _ref4$sourceAttachmen,\n      _ref4$targetImage = _ref4.targetImage,\n      targetImage = _ref4$targetImage === void 0 ? null : _ref4$targetImage;\n\n  var dataUrl = copyToDataUrl(source, {\n    sourceAttachment: sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target) {\n  var _ref5 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref5$sourceX = _ref5.sourceX,\n      sourceX = _ref5$sourceX === void 0 ? 0 : _ref5$sourceX,\n      _ref5$sourceY = _ref5.sourceY,\n      sourceY = _ref5$sourceY === void 0 ? 0 : _ref5$sourceY,\n      targetX = _ref5.targetX,\n      targetY = _ref5.targetY,\n      targetZ = _ref5.targetZ,\n      _ref5$targetMipmaplev = _ref5.targetMipmaplevel,\n      targetMipmaplevel = _ref5$targetMipmaplev === void 0 ? 0 : _ref5$targetMipmaplev,\n      _ref5$targetInternalF = _ref5.targetInternalFormat,\n      targetInternalFormat = _ref5$targetInternalF === void 0 ? 6408 : _ref5$targetInternalF,\n      width = _ref5.width,\n      height = _ref5.height;\n\n  var _getFramebuffer3 = getFramebuffer(source),\n      framebuffer = _getFramebuffer3.framebuffer,\n      deleteFramebuffer = _getFramebuffer3.deleteFramebuffer;\n\n  assert(framebuffer);\n  var gl = framebuffer.gl,\n      handle = framebuffer.handle;\n  var isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  var prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  var texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        gl.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer[\"delete\"]();\n  }\n\n  return texture;\n}\nexport function blit(source, target) {\n  var _ref6 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref6$sourceAttachmen = _ref6.sourceAttachment,\n      sourceAttachment = _ref6$sourceAttachmen === void 0 ? 36064 : _ref6$sourceAttachmen,\n      _ref6$sourceX = _ref6.sourceX0,\n      sourceX0 = _ref6$sourceX === void 0 ? 0 : _ref6$sourceX,\n      _ref6$sourceY = _ref6.sourceY0,\n      sourceY0 = _ref6$sourceY === void 0 ? 0 : _ref6$sourceY,\n      sourceX1 = _ref6.sourceX1,\n      sourceY1 = _ref6.sourceY1,\n      _ref6$targetX = _ref6.targetX0,\n      targetX0 = _ref6$targetX === void 0 ? 0 : _ref6$targetX,\n      _ref6$targetY = _ref6.targetY0,\n      targetY0 = _ref6$targetY === void 0 ? 0 : _ref6$targetY,\n      targetX1 = _ref6.targetX1,\n      targetY1 = _ref6.targetY1,\n      _ref6$color = _ref6.color,\n      color = _ref6$color === void 0 ? true : _ref6$color,\n      _ref6$depth = _ref6.depth,\n      depth = _ref6$depth === void 0 ? false : _ref6$depth,\n      _ref6$stencil = _ref6.stencil,\n      stencil = _ref6$stencil === void 0 ? false : _ref6$stencil,\n      _ref6$mask = _ref6.mask,\n      mask = _ref6$mask === void 0 ? 0 : _ref6$mask,\n      _ref6$filter = _ref6.filter,\n      filter = _ref6$filter === void 0 ? 9728 : _ref6$filter;\n\n  var _getFramebuffer4 = getFramebuffer(source),\n      srcFramebuffer = _getFramebuffer4.framebuffer,\n      deleteSrcFramebuffer = _getFramebuffer4.deleteFramebuffer;\n\n  var _getFramebuffer5 = getFramebuffer(target),\n      dstFramebuffer = _getFramebuffer5.framebuffer,\n      deleteDstFramebuffer = _getFramebuffer5.deleteFramebuffer;\n\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  var gl = dstFramebuffer.gl,\n      handle = dstFramebuffer.handle,\n      width = dstFramebuffer.width,\n      height = dstFramebuffer.height,\n      readBuffer = dstFramebuffer.readBuffer;\n  assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  var prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  var prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl.readBuffer(sourceAttachment);\n  gl.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl.readBuffer(readBuffer);\n  gl.bindFramebuffer(36008, prevReadHandle || null);\n  gl.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer[\"delete\"]();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer[\"delete\"]();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  var ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  var components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","'use strict';\nvar redefineAll = require('../internals/redefine-all');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar $has = require('../internals/has');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.entries.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], that, IS_MAP);\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && $has(data, state.id) && delete data[state.id];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && $has(data, state.id);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.3.3.3 WeakMap.prototype.get(key)\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // 23.3.3.5 WeakMap.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // 23.4.3.1 WeakSet.prototype.add(value)\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return C;\n  }\n};\n","export var VERTEX_SHADER = 'vs';\nexport var FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","import { assert } from '../utils';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  var number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  var value = gl[name];\n  assert(value !== undefined, \"Accessing undefined constant GL.\".concat(name));\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (var key in gl) {\n    if (gl[key] === value) {\n      return \"GL.\".concat(key);\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _MODULE_INJECTORS;\n\nimport { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nvar MODULE_INJECTORS = (_MODULE_INJECTORS = {}, _defineProperty(_MODULE_INJECTORS, VERTEX_SHADER, MODULE_INJECTORS_VS), _defineProperty(_MODULE_INJECTORS, FRAGMENT_SHADER, MODULE_INJECTORS_FS), _MODULE_INJECTORS);\nexport var DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nvar REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nvar REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nvar fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs) {\n  var isVertex = type === VERTEX_SHADER;\n\n  var _loop = function _loop(key) {\n    var fragmentData = inject[key];\n    fragmentData.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    fragments.length = fragmentData.length;\n\n    for (var i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    var fragmentString = \"\".concat(fragments.join('\\n'), \"\\n\");\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, function (match) {\n            return match + fragmentString;\n          });\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, function (match) {\n            return fragmentString + match;\n          });\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, function (match) {\n          return match + fragmentString;\n        });\n    }\n  };\n\n  for (var key in inject) {\n    _loop(key);\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, function (match) {\n      return match + MODULE_INJECTORS[type];\n    });\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  var result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(function (inject) {\n    for (var key in inject) {\n      result[key] = result[key] ? \"\".concat(result[key], \"\\n\").concat(inject[key]) : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","export var MODULE_INJECTORS_VS = \"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\";\nexport var MODULE_INJECTORS_FS = \"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\";\n//# sourceMappingURL=module-injectors.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _GL_PARAMETER_DEFAULT, _GL_PARAMETER_SETTERS, _GL_PARAMETER_GETTERS;\n\nimport { isWebGL2 } from '../utils';\nexport var GL_PARAMETER_DEFAULTS = (_GL_PARAMETER_DEFAULT = {}, _defineProperty(_GL_PARAMETER_DEFAULT, 3042, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32773, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 32777, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 34877, 32774), _defineProperty(_GL_PARAMETER_DEFAULT, 32969, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32968, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32971, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32970, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3106, new Float32Array([0, 0, 0, 0])), _defineProperty(_GL_PARAMETER_DEFAULT, 3107, [true, true, true, true]), _defineProperty(_GL_PARAMETER_DEFAULT, 2884, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2885, 1029), _defineProperty(_GL_PARAMETER_DEFAULT, 2929, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2931, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 2932, 513), _defineProperty(_GL_PARAMETER_DEFAULT, 2928, new Float32Array([0, 1])), _defineProperty(_GL_PARAMETER_DEFAULT, 2930, true), _defineProperty(_GL_PARAMETER_DEFAULT, 3024, true), _defineProperty(_GL_PARAMETER_DEFAULT, 36006, null), _defineProperty(_GL_PARAMETER_DEFAULT, 2886, 2305), _defineProperty(_GL_PARAMETER_DEFAULT, 33170, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 2849, 1), _defineProperty(_GL_PARAMETER_DEFAULT, 32823, false), _defineProperty(_GL_PARAMETER_DEFAULT, 32824, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 10752, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32938, 1.0), _defineProperty(_GL_PARAMETER_DEFAULT, 32939, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3089, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3088, new Int32Array([0, 0, 1024, 1024])), _defineProperty(_GL_PARAMETER_DEFAULT, 2960, false), _defineProperty(_GL_PARAMETER_DEFAULT, 2961, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2968, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 36005, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2962, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 2967, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 2963, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 34816, 519), _defineProperty(_GL_PARAMETER_DEFAULT, 36003, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 36004, 0xffffffff), _defineProperty(_GL_PARAMETER_DEFAULT, 2964, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2965, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2966, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34817, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34818, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 34819, 7680), _defineProperty(_GL_PARAMETER_DEFAULT, 2978, [0, 0, 1024, 1024]), _defineProperty(_GL_PARAMETER_DEFAULT, 3333, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 3317, 4), _defineProperty(_GL_PARAMETER_DEFAULT, 37440, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37441, false), _defineProperty(_GL_PARAMETER_DEFAULT, 37443, 37444), _defineProperty(_GL_PARAMETER_DEFAULT, 35723, 4352), _defineProperty(_GL_PARAMETER_DEFAULT, 36010, null), _defineProperty(_GL_PARAMETER_DEFAULT, 35977, false), _defineProperty(_GL_PARAMETER_DEFAULT, 3330, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3332, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3331, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3314, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32878, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3316, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 3315, 0), _defineProperty(_GL_PARAMETER_DEFAULT, 32877, 0), _GL_PARAMETER_DEFAULT);\n\nvar enable = function enable(gl, value, key) {\n  return value ? gl.enable(key) : gl.disable(key);\n};\n\nvar hint = function hint(gl, value, key) {\n  return gl.hint(key, value);\n};\n\nvar pixelStorei = function pixelStorei(gl, value, key) {\n  return gl.pixelStorei(key, value);\n};\n\nvar drawFramebuffer = function drawFramebuffer(gl, value) {\n  var target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nvar readFramebuffer = function readFramebuffer(gl, value) {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport var GL_PARAMETER_SETTERS = (_GL_PARAMETER_SETTERS = {}, _defineProperty(_GL_PARAMETER_SETTERS, 3042, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32773, function (gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32777, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 34877, 'blendEquation'), _defineProperty(_GL_PARAMETER_SETTERS, 32969, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32968, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32971, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 32970, 'blendFunc'), _defineProperty(_GL_PARAMETER_SETTERS, 3106, function (gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3107, function (gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2884, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2885, function (gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2929, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2931, function (gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2932, function (gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2928, function (gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2930, function (gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3024, enable), _defineProperty(_GL_PARAMETER_SETTERS, 35723, hint), _defineProperty(_GL_PARAMETER_SETTERS, 36006, drawFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 2886, function (gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 33170, hint), _defineProperty(_GL_PARAMETER_SETTERS, 2849, function (gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 32823, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32824, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 10752, 'polygonOffset'), _defineProperty(_GL_PARAMETER_SETTERS, 35977, enable), _defineProperty(_GL_PARAMETER_SETTERS, 32938, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 32939, 'sampleCoverage'), _defineProperty(_GL_PARAMETER_SETTERS, 3089, enable), _defineProperty(_GL_PARAMETER_SETTERS, 3088, function (gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2960, enable), _defineProperty(_GL_PARAMETER_SETTERS, 2961, function (gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2968, function (gl, value) {\n  return gl.stencilMaskSeparate(1028, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 36005, function (gl, value) {\n  return gl.stencilMaskSeparate(1029, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, 2962, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2967, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2963, 'stencilFuncFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34816, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36003, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 36004, 'stencilFuncBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2964, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2965, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 2966, 'stencilOpFront'), _defineProperty(_GL_PARAMETER_SETTERS, 34817, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34818, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 34819, 'stencilOpBack'), _defineProperty(_GL_PARAMETER_SETTERS, 2978, function (gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, 3333, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3317, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37440, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37441, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 37443, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3330, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3332, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3331, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 36010, readFramebuffer), _defineProperty(_GL_PARAMETER_SETTERS, 3314, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32878, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3316, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 3315, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, 32877, pixelStorei), _defineProperty(_GL_PARAMETER_SETTERS, \"framebuffer\", function framebuffer(gl, _framebuffer) {\n  var handle = _framebuffer && 'handle' in _framebuffer ? _framebuffer.handle : _framebuffer;\n  return gl.bindFramebuffer(36160, handle);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blend\", function blend(gl, value) {\n  return value ? gl.enable(3042) : gl.disable(3042);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendColor\", function blendColor(gl, value) {\n  return gl.blendColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendEquation\", function blendEquation(gl, args) {\n  args = isArray(args) ? args : [args, args];\n  gl.blendEquationSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"blendFunc\", function blendFunc(gl, args) {\n  args = isArray(args) && args.length === 2 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n  gl.blendFuncSeparate.apply(gl, _toConsumableArray(args));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearColor\", function clearColor(gl, value) {\n  return gl.clearColor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearDepth\", function clearDepth(gl, value) {\n  return gl.clearDepth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"clearStencil\", function clearStencil(gl, value) {\n  return gl.clearStencil(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"colorMask\", function colorMask(gl, value) {\n  return gl.colorMask.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cull\", function cull(gl, value) {\n  return value ? gl.enable(2884) : gl.disable(2884);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"cullFace\", function cullFace(gl, value) {\n  return gl.cullFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthTest\", function depthTest(gl, value) {\n  return value ? gl.enable(2929) : gl.disable(2929);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthFunc\", function depthFunc(gl, value) {\n  return gl.depthFunc(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthMask\", function depthMask(gl, value) {\n  return gl.depthMask(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"depthRange\", function depthRange(gl, value) {\n  return gl.depthRange.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"dither\", function dither(gl, value) {\n  return value ? gl.enable(3024) : gl.disable(3024);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"derivativeHint\", function derivativeHint(gl, value) {\n  gl.hint(35723, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"frontFace\", function frontFace(gl, value) {\n  return gl.frontFace(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"mipmapHint\", function mipmapHint(gl, value) {\n  return gl.hint(33170, value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"lineWidth\", function lineWidth(gl, value) {\n  return gl.lineWidth(value);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffsetFill\", function polygonOffsetFill(gl, value) {\n  return value ? gl.enable(32823) : gl.disable(32823);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"polygonOffset\", function polygonOffset(gl, value) {\n  return gl.polygonOffset.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"sampleCoverage\", function sampleCoverage(gl, value) {\n  return gl.sampleCoverage.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissorTest\", function scissorTest(gl, value) {\n  return value ? gl.enable(3089) : gl.disable(3089);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"scissor\", function scissor(gl, value) {\n  return gl.scissor.apply(gl, _toConsumableArray(value));\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilTest\", function stencilTest(gl, value) {\n  return value ? gl.enable(2960) : gl.disable(2960);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilMask\", function stencilMask(gl, value) {\n  value = isArray(value) ? value : [value, value];\n\n  var _value = value,\n      _value2 = _slicedToArray(_value, 2),\n      mask = _value2[0],\n      backMask = _value2[1];\n\n  gl.stencilMaskSeparate(1028, mask);\n  gl.stencilMaskSeparate(1029, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilFunc\", function stencilFunc(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args = args,\n      _args2 = _slicedToArray(_args, 6),\n      func = _args2[0],\n      ref = _args2[1],\n      mask = _args2[2],\n      backFunc = _args2[3],\n      backRef = _args2[4],\n      backMask = _args2[5];\n\n  gl.stencilFuncSeparate(1028, func, ref, mask);\n  gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"stencilOp\", function stencilOp(gl, args) {\n  args = isArray(args) && args.length === 3 ? [].concat(_toConsumableArray(args), _toConsumableArray(args)) : args;\n\n  var _args3 = args,\n      _args4 = _slicedToArray(_args3, 6),\n      sfail = _args4[0],\n      dpfail = _args4[1],\n      dppass = _args4[2],\n      backSfail = _args4[3],\n      backDpfail = _args4[4],\n      backDppass = _args4[5];\n\n  gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n  gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n}), _defineProperty(_GL_PARAMETER_SETTERS, \"viewport\", function viewport(gl, value) {\n  return gl.viewport.apply(gl, _toConsumableArray(value));\n}), _GL_PARAMETER_SETTERS);\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport var GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: function blendEquation(gl, values, cache) {\n    return gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache));\n  },\n  blendFunc: function blendFunc(gl, values, cache) {\n    return gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache));\n  },\n  polygonOffset: function polygonOffset(gl, values, cache) {\n    return gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache));\n  },\n  sampleCoverage: function sampleCoverage(gl, values, cache) {\n    return gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache));\n  },\n  stencilFuncFront: function stencilFuncFront(gl, values, cache) {\n    return gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache));\n  },\n  stencilFuncBack: function stencilFuncBack(gl, values, cache) {\n    return gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache));\n  },\n  stencilOpFront: function stencilOpFront(gl, values, cache) {\n    return gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache));\n  },\n  stencilOpBack: function stencilOpBack(gl, values, cache) {\n    return gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache));\n  }\n};\nexport var GL_HOOKED_SETTERS = {\n  enable: function enable(update, capability) {\n    return update(_defineProperty({}, capability, true));\n  },\n  disable: function disable(update, capability) {\n    return update(_defineProperty({}, capability, false));\n  },\n  pixelStorei: function pixelStorei(update, pname, value) {\n    return update(_defineProperty({}, pname, value));\n  },\n  hint: function hint(update, pname, _hint) {\n    return update(_defineProperty({}, pname, _hint));\n  },\n  bindFramebuffer: function bindFramebuffer(update, target, framebuffer) {\n    var _update5;\n\n    switch (target) {\n      case 36160:\n        return update((_update5 = {}, _defineProperty(_update5, 36006, framebuffer), _defineProperty(_update5, 36010, framebuffer), _update5));\n\n      case 36009:\n        return update(_defineProperty({}, 36006, framebuffer));\n\n      case 36008:\n        return update(_defineProperty({}, 36010, framebuffer));\n\n      default:\n        return null;\n    }\n  },\n  blendColor: function blendColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 32773, new Float32Array([r, g, b, a])));\n  },\n  blendEquation: function blendEquation(update, mode) {\n    var _update9;\n\n    return update((_update9 = {}, _defineProperty(_update9, 32777, mode), _defineProperty(_update9, 34877, mode), _update9));\n  },\n  blendEquationSeparate: function blendEquationSeparate(update, modeRGB, modeAlpha) {\n    var _update10;\n\n    return update((_update10 = {}, _defineProperty(_update10, 32777, modeRGB), _defineProperty(_update10, 34877, modeAlpha), _update10));\n  },\n  blendFunc: function blendFunc(update, src, dst) {\n    var _update11;\n\n    return update((_update11 = {}, _defineProperty(_update11, 32969, src), _defineProperty(_update11, 32968, dst), _defineProperty(_update11, 32971, src), _defineProperty(_update11, 32970, dst), _update11));\n  },\n  blendFuncSeparate: function blendFuncSeparate(update, srcRGB, dstRGB, srcAlpha, dstAlpha) {\n    var _update12;\n\n    return update((_update12 = {}, _defineProperty(_update12, 32969, srcRGB), _defineProperty(_update12, 32968, dstRGB), _defineProperty(_update12, 32971, srcAlpha), _defineProperty(_update12, 32970, dstAlpha), _update12));\n  },\n  clearColor: function clearColor(update, r, g, b, a) {\n    return update(_defineProperty({}, 3106, new Float32Array([r, g, b, a])));\n  },\n  clearDepth: function clearDepth(update, depth) {\n    return update(_defineProperty({}, 2931, depth));\n  },\n  clearStencil: function clearStencil(update, s) {\n    return update(_defineProperty({}, 2961, s));\n  },\n  colorMask: function colorMask(update, r, g, b, a) {\n    return update(_defineProperty({}, 3107, [r, g, b, a]));\n  },\n  cullFace: function cullFace(update, mode) {\n    return update(_defineProperty({}, 2885, mode));\n  },\n  depthFunc: function depthFunc(update, func) {\n    return update(_defineProperty({}, 2932, func));\n  },\n  depthRange: function depthRange(update, zNear, zFar) {\n    return update(_defineProperty({}, 2928, new Float32Array([zNear, zFar])));\n  },\n  depthMask: function depthMask(update, mask) {\n    return update(_defineProperty({}, 2930, mask));\n  },\n  frontFace: function frontFace(update, face) {\n    return update(_defineProperty({}, 2886, face));\n  },\n  lineWidth: function lineWidth(update, width) {\n    return update(_defineProperty({}, 2849, width));\n  },\n  polygonOffset: function polygonOffset(update, factor, units) {\n    var _update23;\n\n    return update((_update23 = {}, _defineProperty(_update23, 32824, factor), _defineProperty(_update23, 10752, units), _update23));\n  },\n  sampleCoverage: function sampleCoverage(update, value, invert) {\n    var _update24;\n\n    return update((_update24 = {}, _defineProperty(_update24, 32938, value), _defineProperty(_update24, 32939, invert), _update24));\n  },\n  scissor: function scissor(update, x, y, width, height) {\n    return update(_defineProperty({}, 3088, new Int32Array([x, y, width, height])));\n  },\n  stencilMask: function stencilMask(update, mask) {\n    var _update26;\n\n    return update((_update26 = {}, _defineProperty(_update26, 2968, mask), _defineProperty(_update26, 36005, mask), _update26));\n  },\n  stencilMaskSeparate: function stencilMaskSeparate(update, face, mask) {\n    return update(_defineProperty({}, face === 1028 ? 2968 : 36005, mask));\n  },\n  stencilFunc: function stencilFunc(update, func, ref, mask) {\n    var _update28;\n\n    return update((_update28 = {}, _defineProperty(_update28, 2962, func), _defineProperty(_update28, 2967, ref), _defineProperty(_update28, 2963, mask), _defineProperty(_update28, 34816, func), _defineProperty(_update28, 36003, ref), _defineProperty(_update28, 36004, mask), _update28));\n  },\n  stencilFuncSeparate: function stencilFuncSeparate(update, face, func, ref, mask) {\n    var _update29;\n\n    return update((_update29 = {}, _defineProperty(_update29, face === 1028 ? 2962 : 34816, func), _defineProperty(_update29, face === 1028 ? 2967 : 36003, ref), _defineProperty(_update29, face === 1028 ? 2963 : 36004, mask), _update29));\n  },\n  stencilOp: function stencilOp(update, fail, zfail, zpass) {\n    var _update30;\n\n    return update((_update30 = {}, _defineProperty(_update30, 2964, fail), _defineProperty(_update30, 2965, zfail), _defineProperty(_update30, 2966, zpass), _defineProperty(_update30, 34817, fail), _defineProperty(_update30, 34818, zfail), _defineProperty(_update30, 34819, zpass), _update30));\n  },\n  stencilOpSeparate: function stencilOpSeparate(update, face, fail, zfail, zpass) {\n    var _update31;\n\n    return update((_update31 = {}, _defineProperty(_update31, face === 1028 ? 2964 : 34817, fail), _defineProperty(_update31, face === 1028 ? 2965 : 34818, zfail), _defineProperty(_update31, face === 1028 ? 2966 : 34819, zpass), _update31));\n  },\n  viewport: function viewport(update, x, y, width, height) {\n    return update(_defineProperty({}, 2978, [x, y, width, height]));\n  }\n};\n\nvar isEnabled = function isEnabled(gl, key) {\n  return gl.isEnabled(key);\n};\n\nexport var GL_PARAMETER_GETTERS = (_GL_PARAMETER_GETTERS = {}, _defineProperty(_GL_PARAMETER_GETTERS, 3042, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2884, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2929, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3024, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32823, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32926, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 32928, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 3089, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 2960, isEnabled), _defineProperty(_GL_PARAMETER_GETTERS, 35977, isEnabled), _GL_PARAMETER_GETTERS);\n//# sourceMappingURL=webgl-parameter-tables.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nvar VERSION = typeof \"8.2.0\" !== 'undefined' ? \"8.2.0\" : 'untranspiled source';\nvar STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nvar StatsManager = function () {\n  function StatsManager() {\n    _classCallCheck(this, StatsManager);\n\n    this.stats = new Map();\n  }\n\n  _createClass(StatsManager, [{\n    key: \"get\",\n    value: function get(name) {\n      if (!this.stats.has(name)) {\n        this.stats.set(name, new Stats({\n          id: name\n        }));\n      }\n\n      return this.stats.get(name);\n    }\n  }]);\n\n  return StatsManager;\n}();\n\nvar lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(global.luma.VERSION, \" vs \").concat(VERSION));\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, \"luma.gl \".concat(VERSION, \" - \").concat(STARTUP_MESSAGE))();\n  }\n\n  global.luma = global.luma || {\n    VERSION: VERSION,\n    version: VERSION,\n    log: log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Accessor from './accessor';\nimport { assertWebGL2Context, getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils';\nimport { log } from '@luma.gl/gltools';\nimport { assert, checkProps } from '../utils';\nvar DEBUG_DATA_LENGTH = 10;\nvar DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nvar PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nvar PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\n\nvar Buffer = function (_Resource) {\n  _inherits(Buffer, _Resource);\n\n  function Buffer(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Buffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Buffer).call(this, gl, props));\n\n    _this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n\n    _this.target = props.target || (_this.gl.webgl2 ? 36662 : 34962);\n\n    _this.initialize(props);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Buffer, [{\n    key: \"getElementCount\",\n    value: function getElementCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      var accessor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.accessor;\n      return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      if (Number.isFinite(props)) {\n        props = {\n          byteLength: props\n        };\n      }\n\n      props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n      this.usage = props.usage || 35044;\n      this.debugData = null;\n      this.setAccessor(Object.assign({}, props, props.accessor));\n\n      if (props.data) {\n        this._setData(props.data, props.offset, props.byteLength);\n      } else {\n        this._setByteLength(props.byteLength || 0);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n      if ('accessor' in props) {\n        this.setAccessor(props.accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setAccessor\",\n    value: function setAccessor(accessor) {\n      accessor = Object.assign({}, accessor);\n      delete accessor.buffer;\n      this.accessor = new Accessor(accessor);\n      return this;\n    }\n  }, {\n    key: \"reallocate\",\n    value: function reallocate(byteLength) {\n      if (byteLength > this.byteLength) {\n        this._setByteLength(byteLength);\n\n        return true;\n      }\n\n      this.bytesUsed = byteLength;\n      return false;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(props) {\n      return this.initialize(props);\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(props) {\n      if (ArrayBuffer.isView(props)) {\n        props = {\n          data: props\n        };\n      }\n\n      var _props = props,\n          data = _props.data,\n          _props$offset = _props.offset,\n          offset = _props$offset === void 0 ? 0 : _props$offset,\n          _props$srcOffset = _props.srcOffset,\n          srcOffset = _props$srcOffset === void 0 ? 0 : _props$srcOffset;\n      var byteLength = props.byteLength || props.length;\n      assert(data);\n      var target = this.gl.webgl2 ? 36663 : this.target;\n      this.gl.bindBuffer(target, this.handle);\n\n      if (srcOffset !== 0 || byteLength !== undefined) {\n        assertWebGL2Context(this.gl);\n        this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n      } else {\n        this.gl.bufferSubData(target, offset, data);\n      }\n\n      this.gl.bindBuffer(target, null);\n      this.debugData = null;\n\n      this._inferType(data);\n\n      return this;\n    }\n  }, {\n    key: \"copyData\",\n    value: function copyData(_ref) {\n      var sourceBuffer = _ref.sourceBuffer,\n          _ref$readOffset = _ref.readOffset,\n          readOffset = _ref$readOffset === void 0 ? 0 : _ref$readOffset,\n          _ref$writeOffset = _ref.writeOffset,\n          writeOffset = _ref$writeOffset === void 0 ? 0 : _ref$writeOffset,\n          size = _ref.size;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      gl.bindBuffer(36662, sourceBuffer.handle);\n      gl.bindBuffer(36663, this.handle);\n      gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n      gl.bindBuffer(36662, null);\n      gl.bindBuffer(36663, null);\n      this.debugData = null;\n      return this;\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$dstData = _ref2.dstData,\n          dstData = _ref2$dstData === void 0 ? null : _ref2$dstData,\n          _ref2$srcByteOffset = _ref2.srcByteOffset,\n          srcByteOffset = _ref2$srcByteOffset === void 0 ? 0 : _ref2$srcByteOffset,\n          _ref2$dstOffset = _ref2.dstOffset,\n          dstOffset = _ref2$dstOffset === void 0 ? 0 : _ref2$dstOffset,\n          _ref2$length = _ref2.length,\n          length = _ref2$length === void 0 ? 0 : _ref2$length;\n\n      assertWebGL2Context(this.gl);\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n\n      var sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n      var dstElementOffset = dstOffset;\n      var dstAvailableElementCount;\n      var dstElementCount;\n\n      if (dstData) {\n        dstElementCount = dstData.length;\n        dstAvailableElementCount = dstElementCount - dstElementOffset;\n      } else {\n        dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n        dstElementCount = dstElementOffset + dstAvailableElementCount;\n      }\n\n      var copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n      length = length || copyElementCount;\n      assert(length <= copyElementCount);\n      dstData = dstData || new ArrayType(dstElementCount);\n      this.gl.bindBuffer(36662, this.handle);\n      this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n      this.gl.bindBuffer(36662, null);\n      return dstData;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$target = _ref3.target,\n          target = _ref3$target === void 0 ? this.target : _ref3$target,\n          _ref3$index = _ref3.index,\n          index = _ref3$index === void 0 ? this.accessor && this.accessor.index : _ref3$index,\n          _ref3$offset = _ref3.offset,\n          offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n          size = _ref3.size;\n\n      if (target === 35345 || target === 35982) {\n        if (size !== undefined) {\n          this.gl.bindBufferRange(target, index, this.handle, offset, size);\n        } else {\n          assert(offset === 0);\n          this.gl.bindBufferBase(target, index, this.handle);\n        }\n      } else {\n        this.gl.bindBuffer(target, this.handle);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? this.target : _ref4$target,\n          _ref4$index = _ref4.index,\n          index = _ref4$index === void 0 ? this.accessor && this.accessor.index : _ref4$index;\n\n      var isIndexedBuffer = target === 35345 || target === 35982;\n\n      if (isIndexedBuffer) {\n        this.gl.bindBufferBase(target, index, null);\n      } else {\n        this.gl.bindBuffer(target, null);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getDebugData\",\n    value: function getDebugData() {\n      if (!this.debugData) {\n        this.debugData = this.getData({\n          length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n        });\n        return {\n          data: this.debugData,\n          changed: true\n        };\n      }\n\n      return {\n        data: this.debugData,\n        changed: false\n      };\n    }\n  }, {\n    key: \"invalidateDebugData\",\n    value: function invalidateDebugData() {\n      this.debugData = null;\n    }\n  }, {\n    key: \"_setData\",\n    value: function _setData(data) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var byteLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : data.byteLength + offset;\n      assert(ArrayBuffer.isView(data));\n\n      this._trackDeallocatedMemory();\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, byteLength, this.usage);\n      this.gl.bufferSubData(target, offset, data);\n      this.gl.bindBuffer(target, null);\n      this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      var type = getGLTypeFromTypedArray(data);\n      assert(type);\n      this.setAccessor(new Accessor(this.accessor, {\n        type: type\n      }));\n      return this;\n    }\n  }, {\n    key: \"_setByteLength\",\n    value: function _setByteLength(byteLength) {\n      var usage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.usage;\n      assert(byteLength >= 0);\n\n      this._trackDeallocatedMemory();\n\n      var data = byteLength;\n\n      if (byteLength === 0) {\n        data = new Float32Array(0);\n      }\n\n      var target = this._getTarget();\n\n      this.gl.bindBuffer(target, this.handle);\n      this.gl.bufferData(target, data, usage);\n      this.gl.bindBuffer(target, null);\n      this.usage = usage;\n      this.debugData = null;\n      this.bytesUsed = byteLength;\n\n      this._trackAllocatedMemory(byteLength);\n\n      return this;\n    }\n  }, {\n    key: \"_getTarget\",\n    value: function _getTarget() {\n      return this.gl.webgl2 ? 36663 : this.target;\n    }\n  }, {\n    key: \"_getAvailableElementCount\",\n    value: function _getAvailableElementCount(srcByteOffset) {\n      var ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n        clamped: false\n      });\n      var sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n      return this.getElementCount() - sourceElementOffset;\n    }\n  }, {\n    key: \"_inferType\",\n    value: function _inferType(data) {\n      if (!this.accessor.type) {\n        this.setAccessor(new Accessor(this.accessor, {\n          type: getGLTypeFromTypedArray(data)\n        }));\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createBuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteBuffer(this.handle);\n\n      this._trackDeallocatedMemory();\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname) {\n      this.gl.bindBuffer(this.target, this.handle);\n      var value = this.gl.getBufferParameter(this.target, pname);\n      this.gl.bindBuffer(this.target, null);\n      return value;\n    }\n  }, {\n    key: \"setByteLength\",\n    value: function setByteLength(byteLength) {\n      log.deprecated('setByteLength', 'reallocate')();\n      return this.reallocate(byteLength);\n    }\n  }, {\n    key: \"updateAccessor\",\n    value: function updateAccessor(opts) {\n      log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n      this.accessor = new Accessor(this.accessor, opts);\n      return this;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n      return this.accessor.type;\n    }\n  }, {\n    key: \"bytes\",\n    get: function get() {\n      log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n      return this.byteLength;\n    }\n  }]);\n\n  return Buffer;\n}(Resource);\n\nexport { Buffer as default };\n//# sourceMappingURL=buffer.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  var upgradeMessage = \"See luma.gl \".concat(version, \" Upgrade Guide at https://luma.gl/docs/upgrade-guide\");\n  var prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(function (methodName) {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = function () {\n      log.removed(\"Calling removed method \".concat(className, \".\").concat(methodName, \": \"), upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _FEATURES$WEBGL2$FEAT;\n\nimport Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport var FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  var testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  var testFb = new Framebuffer(gl, {\n    id: \"test-framebuffer\",\n    check: false,\n    attachments: _defineProperty({}, 36064, testTexture)\n  });\n  var status = testFb.getStatus();\n  testTexture[\"delete\"]();\n  testFb[\"delete\"]();\n  return status === 36053;\n}\n\nexport default (_FEATURES$WEBGL2$FEAT = {}, _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.WEBGL2, [false, true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.VERTEX_ARRAY_OBJECT, ['OES_vertex_array_object', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TIMER_QUERY, ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.INSTANCED_RENDERING, ['ANGLE_instanced_arrays', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.MULTIPLE_RENDER_TARGETS, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.ELEMENT_INDEX_UINT32, ['OES_element_index_uint', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.BLEND_EQUATION_MINMAX, ['EXT_blend_minmax', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.FLOAT_BLEND, ['EXT_float_blend']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ENCODING_SRGB, ['EXT_sRGB', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_DEPTH, ['WEBGL_depth_texture', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FLOAT, ['OES_texture_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_HALF_FLOAT, ['OES_texture_half_float', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_FLOAT, ['OES_texture_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT, ['OES_texture_half_float_linear']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.TEXTURE_FILTER_ANISOTROPIC, ['EXT_texture_filter_anisotropic']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_RGBA32F, [checkFloat32ColorAttachment, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_FLOAT, [false, 'EXT_color_buffer_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.COLOR_ATTACHMENT_HALF_FLOAT, ['EXT_color_buffer_half_float']), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DATA, ['WEBGL_draw_buffers', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_FRAG_DEPTH, ['EXT_frag_depth', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_DERIVATIVES, ['OES_standard_derivatives', true]), _defineProperty(_FEATURES$WEBGL2$FEAT, FEATURES.GLSL_TEXTURE_LOD, ['EXT_shader_texture_lod', true]), _FEATURES$WEBGL2$FEAT);\n//# sourceMappingURL=webgl-features-table.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.asyncIterator` well-known symbol\n// https://tc39.github.io/ecma262/#sec-symbol.asynciterator\ndefineWellKnownSymbol('asyncIterator');\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron[\"default\"])();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _TEXTURE_FORMATS, _DATA_FORMAT_CHANNELS, _TYPE_SIZES;\n\nimport { isWebGL2 } from '@luma.gl/gltools';\nexport var TEXTURE_FORMATS = (_TEXTURE_FORMATS = {}, _defineProperty(_TEXTURE_FORMATS, 6407, {\n  dataFormat: 6407,\n  types: [5121, 33635]\n}), _defineProperty(_TEXTURE_FORMATS, 6408, {\n  dataFormat: 6408,\n  types: [5121, 32819, 32820]\n}), _defineProperty(_TEXTURE_FORMATS, 6406, {\n  dataFormat: 6406,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6409, {\n  dataFormat: 6409,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 6410, {\n  dataFormat: 6410,\n  types: [5121]\n}), _defineProperty(_TEXTURE_FORMATS, 33326, {\n  dataFormat: 6403,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 33328, {\n  dataFormat: 33319,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34837, {\n  dataFormat: 6407,\n  types: [5126],\n  gl2: true\n}), _defineProperty(_TEXTURE_FORMATS, 34836, {\n  dataFormat: 6408,\n  types: [5126],\n  gl2: true\n}), _TEXTURE_FORMATS);\nexport var DATA_FORMAT_CHANNELS = (_DATA_FORMAT_CHANNELS = {}, _defineProperty(_DATA_FORMAT_CHANNELS, 6403, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 36244, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 33319, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 33320, 2), _defineProperty(_DATA_FORMAT_CHANNELS, 6407, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 36248, 3), _defineProperty(_DATA_FORMAT_CHANNELS, 6408, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 36249, 4), _defineProperty(_DATA_FORMAT_CHANNELS, 6402, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 34041, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6406, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6409, 1), _defineProperty(_DATA_FORMAT_CHANNELS, 6410, 2), _DATA_FORMAT_CHANNELS);\nexport var TYPE_SIZES = (_TYPE_SIZES = {}, _defineProperty(_TYPE_SIZES, 5126, 4), _defineProperty(_TYPE_SIZES, 5125, 4), _defineProperty(_TYPE_SIZES, 5124, 4), _defineProperty(_TYPE_SIZES, 5123, 2), _defineProperty(_TYPE_SIZES, 5122, 2), _defineProperty(_TYPE_SIZES, 5131, 2), _defineProperty(_TYPE_SIZES, 5120, 1), _defineProperty(_TYPE_SIZES, 5121, 1), _TYPE_SIZES);\nexport function isFormatSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  var value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  var info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  var result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  var modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n//# sourceMappingURL=math-utils.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { createMat4, transformVector } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nvar PI = Math.PI;\nvar PI_4 = PI / 4;\nvar DEGREES_TO_RADIANS = PI / 180;\nvar RADIANS_TO_DEGREES = 180 / PI;\nvar TILE_SIZE = 512;\nvar EARTH_CIRCUMFERENCE = 40.03e6;\nvar DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return Math.log2(scale);\n}\nexport function lngLatToWorld(_ref) {\n  var _ref2 = _slicedToArray(_ref, 2),\n      lng = _ref2[0],\n      lat = _ref2[1];\n\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  var lambda2 = lng * DEGREES_TO_RADIANS;\n  var phi2 = lat * DEGREES_TO_RADIANS;\n  var x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  var y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat(_ref3) {\n  var _ref4 = _slicedToArray(_ref3, 2),\n      x = _ref4[0],\n      y = _ref4[1];\n\n  var lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  var phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom(_ref5) {\n  var latitude = _ref5.latitude;\n  assert(Number.isFinite(latitude));\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales(_ref6) {\n  var latitude = _ref6.latitude,\n      longitude = _ref6.longitude,\n      _ref6$highPrecision = _ref6.highPrecision,\n      highPrecision = _ref6$highPrecision === void 0 ? false : _ref6$highPrecision;\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  var result = {};\n  var worldSize = TILE_SIZE;\n  var latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  var unitsPerDegreeX = worldSize / 360;\n  var unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  var altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  if (highPrecision) {\n    var latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    var unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    var altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    var altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  var _lngLatZ = _slicedToArray(lngLatZ, 3),\n      longitude = _lngLatZ[0],\n      latitude = _lngLatZ[1],\n      z0 = _lngLatZ[2];\n\n  var _xyz = _slicedToArray(xyz, 3),\n      x = _xyz[0],\n      y = _xyz[1],\n      z = _xyz[2];\n\n  var _getDistanceScales = getDistanceScales({\n    longitude: longitude,\n    latitude: latitude,\n    highPrecision: true\n  }),\n      unitsPerMeter = _getDistanceScales.unitsPerMeter,\n      unitsPerMeter2 = _getDistanceScales.unitsPerMeter2;\n\n  var worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  var newLngLat = worldToLngLat(worldspace);\n  var newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix(_ref7) {\n  var height = _ref7.height,\n      pitch = _ref7.pitch,\n      bearing = _ref7.bearing,\n      altitude = _ref7.altitude,\n      scale = _ref7.scale,\n      _ref7$center = _ref7.center,\n      center = _ref7$center === void 0 ? null : _ref7$center;\n  var vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters(_ref8) {\n  var width = _ref8.width,\n      height = _ref8.height,\n      _ref8$altitude = _ref8.altitude,\n      altitude = _ref8$altitude === void 0 ? DEFAULT_ALTITUDE : _ref8$altitude,\n      _ref8$pitch = _ref8.pitch,\n      pitch = _ref8$pitch === void 0 ? 0 : _ref8$pitch,\n      _ref8$nearZMultiplier = _ref8.nearZMultiplier,\n      nearZMultiplier = _ref8$nearZMultiplier === void 0 ? 1 : _ref8$nearZMultiplier,\n      _ref8$farZMultiplier = _ref8.farZMultiplier,\n      farZMultiplier = _ref8$farZMultiplier === void 0 ? 1 : _ref8$farZMultiplier;\n  var pitchRadians = pitch * DEGREES_TO_RADIANS;\n  var halfFov = Math.atan(0.5 / altitude);\n  var topHalfSurfaceDistance = Math.sin(halfFov) * altitude / Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n  var farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + altitude;\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance: altitude,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix(_ref9) {\n  var width = _ref9.width,\n      height = _ref9.height,\n      pitch = _ref9.pitch,\n      altitude = _ref9.altitude,\n      nearZMultiplier = _ref9.nearZMultiplier,\n      farZMultiplier = _ref9.farZMultiplier;\n\n  var _getProjectionParamet = getProjectionParameters({\n    width: width,\n    height: height,\n    altitude: altitude,\n    pitch: pitch,\n    nearZMultiplier: nearZMultiplier,\n    farZMultiplier: farZMultiplier\n  }),\n      fov = _getProjectionParamet.fov,\n      aspect = _getProjectionParamet.aspect,\n      near = _getProjectionParamet.near,\n      far = _getProjectionParamet.far;\n\n  var projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  var _xyz2 = _slicedToArray(xyz, 3),\n      x = _xyz2[0],\n      y = _xyz2[1],\n      _xyz2$ = _xyz2[2],\n      z = _xyz2$ === void 0 ? 0 : _xyz2$;\n\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix) {\n  var targetZ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  var _xyz3 = _slicedToArray(xyz, 3),\n      x = _xyz3[0],\n      y = _xyz3[1],\n      z = _xyz3[2];\n\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    var coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  var z0 = coord0[2];\n  var z1 = coord1[2];\n  var t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nexport default function fitBounds(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      bounds = _ref.bounds,\n      _ref$minExtent = _ref.minExtent,\n      minExtent = _ref$minExtent === void 0 ? 0 : _ref$minExtent,\n      _ref$maxZoom = _ref.maxZoom,\n      maxZoom = _ref$maxZoom === void 0 ? 24 : _ref$maxZoom,\n      _ref$padding = _ref.padding,\n      padding = _ref$padding === void 0 ? 0 : _ref$padding,\n      _ref$offset = _ref.offset,\n      offset = _ref$offset === void 0 ? [0, 0] : _ref$offset;\n\n  var _bounds = _slicedToArray(bounds, 2),\n      _bounds$ = _slicedToArray(_bounds[0], 2),\n      west = _bounds$[0],\n      south = _bounds$[1],\n      _bounds$2 = _slicedToArray(_bounds[1], 2),\n      east = _bounds$2[0],\n      north = _bounds$2[1];\n\n  if (Number.isFinite(padding)) {\n    var p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  var viewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  var nw = viewport.project([west, north]);\n  var se = viewport.project([east, south]);\n  var size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  var targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  var scaleX = targetSize[0] / size[0];\n  var scaleY = targetSize[1] / size[1];\n  var offsetX = (padding.right - padding.left) / 2 / scaleX;\n  var offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  var center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  var centerLngLat = viewport.unproject(center);\n  var zoom = Math.min(maxZoom, viewport.zoom + Math.log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom: zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nvar DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport) {\n  var z = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var width = viewport.width,\n      height = viewport.height,\n      unproject = viewport.unproject;\n  var unprojectOps = {\n    targetZ: z\n  };\n  var bottomLeft = unproject([0, height], unprojectOps);\n  var bottomRight = unproject([width, height], unprojectOps);\n  var topLeft;\n  var topRight;\n  var halfFov = Math.atan(0.5 / viewport.altitude);\n  var angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  var pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  var coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  var coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  var z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  var t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  var coord = vec2.lerp([], coord0, coord1, t);\n  var result = worldToLngLat(coord);\n  result[2] = targetZ;\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { createMat4 } from './math-utils';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, worldToPixels, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport _fitBounds from './fit-bounds';\nimport getBounds from './get-bounds';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\n\nvar WebMercatorViewport = function () {\n  function WebMercatorViewport() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      width: 1,\n      height: 1\n    },\n        width = _ref.width,\n        height = _ref.height,\n        _ref$latitude = _ref.latitude,\n        latitude = _ref$latitude === void 0 ? 0 : _ref$latitude,\n        _ref$longitude = _ref.longitude,\n        longitude = _ref$longitude === void 0 ? 0 : _ref$longitude,\n        _ref$zoom = _ref.zoom,\n        zoom = _ref$zoom === void 0 ? 0 : _ref$zoom,\n        _ref$pitch = _ref.pitch,\n        pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n        _ref$bearing = _ref.bearing,\n        bearing = _ref$bearing === void 0 ? 0 : _ref$bearing,\n        _ref$altitude = _ref.altitude,\n        altitude = _ref$altitude === void 0 ? 1.5 : _ref$altitude,\n        _ref$nearZMultiplier = _ref.nearZMultiplier,\n        nearZMultiplier = _ref$nearZMultiplier === void 0 ? 0.02 : _ref$nearZMultiplier,\n        _ref$farZMultiplier = _ref.farZMultiplier,\n        farZMultiplier = _ref$farZMultiplier === void 0 ? 1.01 : _ref$farZMultiplier;\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    width = width || 1;\n    height = height || 1;\n    var scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    var center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n    this.projectionMatrix = getProjectionMatrix({\n      width: width,\n      height: height,\n      pitch: pitch,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    });\n    this.viewMatrix = getViewMatrix({\n      height: height,\n      scale: scale,\n      center: center,\n      pitch: pitch,\n      bearing: bearing,\n      altitude: altitude\n    });\n    this.width = width;\n    this.height = height;\n    this.scale = scale;\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.center = center;\n    this.distanceScales = getDistanceScales(this);\n\n    this._initMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    Object.freeze(this);\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"_initMatrices\",\n    value: function _initMatrices() {\n      var width = this.width,\n          height = this.height,\n          projectionMatrix = this.projectionMatrix,\n          viewMatrix = this.viewMatrix;\n      var vpm = createMat4();\n      mat4.multiply(vpm, vpm, projectionMatrix);\n      mat4.multiply(vpm, vpm, viewMatrix);\n      this.viewProjectionMatrix = vpm;\n      var m = createMat4();\n      mat4.scale(m, m, [width / 2, -height / 2, 1]);\n      mat4.translate(m, m, [1, -1, 0]);\n      mat4.multiply(m, m, vpm);\n      var mInverse = mat4.invert(createMat4(), m);\n\n      if (!mInverse) {\n        throw new Error('Pixel project matrix not invertible');\n      }\n\n      this.pixelProjectionMatrix = m;\n      this.pixelUnprojectionMatrix = mInverse;\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(viewport) {\n      if (!(viewport instanceof WebMercatorViewport)) {\n        return false;\n      }\n\n      return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n    }\n  }, {\n    key: \"project\",\n    value: function project(xyz) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref2$topLeft = _ref2.topLeft,\n          topLeft = _ref2$topLeft === void 0 ? true : _ref2$topLeft;\n\n      var worldPosition = this.projectPosition(xyz);\n      var coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n\n      var _coord = _slicedToArray(coord, 2),\n          x = _coord[0],\n          y = _coord[1];\n\n      var y2 = topLeft ? y : this.height - y;\n      return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n  }, {\n    key: \"unproject\",\n    value: function unproject(xyz) {\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref3$topLeft = _ref3.topLeft,\n          topLeft = _ref3$topLeft === void 0 ? true : _ref3$topLeft,\n          _ref3$targetZ = _ref3.targetZ,\n          targetZ = _ref3$targetZ === void 0 ? undefined : _ref3$targetZ;\n\n      var _xyz = _slicedToArray(xyz, 3),\n          x = _xyz[0],\n          y = _xyz[1],\n          z = _xyz[2];\n\n      var y2 = topLeft ? y : this.height - y;\n      var targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n      var coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n\n      var _this$unprojectPositi = this.unprojectPosition(coord),\n          _this$unprojectPositi2 = _slicedToArray(_this$unprojectPositi, 3),\n          X = _this$unprojectPositi2[0],\n          Y = _this$unprojectPositi2[1],\n          Z = _this$unprojectPositi2[2];\n\n      if (Number.isFinite(z)) {\n        return [X, Y, Z];\n      }\n\n      return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n  }, {\n    key: \"projectPosition\",\n    value: function projectPosition(xyz) {\n      var _lngLatToWorld = lngLatToWorld(xyz),\n          _lngLatToWorld2 = _slicedToArray(_lngLatToWorld, 2),\n          X = _lngLatToWorld2[0],\n          Y = _lngLatToWorld2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"unprojectPosition\",\n    value: function unprojectPosition(xyz) {\n      var _worldToLngLat = worldToLngLat(xyz),\n          _worldToLngLat2 = _slicedToArray(_worldToLngLat, 2),\n          X = _worldToLngLat2[0],\n          Y = _worldToLngLat2[1];\n\n      var Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n      return [X, Y, Z];\n    }\n  }, {\n    key: \"projectFlat\",\n    value: function projectFlat(lngLat) {\n      return lngLatToWorld(lngLat);\n    }\n  }, {\n    key: \"unprojectFlat\",\n    value: function unprojectFlat(xy) {\n      return worldToLngLat(xy);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref4) {\n      var lngLat = _ref4.lngLat,\n          pos = _ref4.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = lngLatToWorld(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return worldToLngLat(newCenter);\n    }\n  }, {\n    key: \"getLocationAtPoint\",\n    value: function getLocationAtPoint(_ref5) {\n      var lngLat = _ref5.lngLat,\n          pos = _ref5.pos;\n      return this.getMapCenterByLngLatPosition({\n        lngLat: lngLat,\n        pos: pos\n      });\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds(options) {\n      var corners = this.getBoundingRegion(options);\n      var west = Math.min.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[0];\n      })));\n      var east = Math.max.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[0];\n      })));\n      var south = Math.min.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[1];\n      })));\n      var north = Math.max.apply(Math, _toConsumableArray(corners.map(function (p) {\n        return p[1];\n      })));\n      return [[west, south], [east, north]];\n    }\n  }, {\n    key: \"getBoundingRegion\",\n    value: function getBoundingRegion() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return getBounds(this, options.z || 0);\n    }\n  }]);\n\n  return WebMercatorViewport;\n}();\n\nexport { WebMercatorViewport as default };\n//# sourceMappingURL=web-mercator-viewport.js.map","import WebMercatorViewport from './web-mercator-viewport';\nimport { mod } from './math-utils';\nvar MAX_LATITUDE = 85.05113;\nvar MIN_LATITUDE = -85.05113;\nexport default function normalizeViewportProps(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      longitude = _ref.longitude,\n      latitude = _ref.latitude,\n      zoom = _ref.zoom,\n      _ref$pitch = _ref.pitch,\n      pitch = _ref$pitch === void 0 ? 0 : _ref$pitch,\n      _ref$bearing = _ref.bearing,\n      bearing = _ref$bearing === void 0 ? 0 : _ref$bearing;\n\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  var flatViewport = new WebMercatorViewport({\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom\n  });\n  var topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n  var bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  var shiftY = 0;\n\n  if (bottomY - topY < height) {\n    zoom += Math.log2(height / (bottomY - topY));\n    flatViewport = new WebMercatorViewport({\n      width: width,\n      height: height,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom\n    });\n    topY = flatViewport.project([longitude, MAX_LATITUDE])[1];\n    bottomY = flatViewport.project([longitude, MIN_LATITUDE])[1];\n  }\n\n  if (topY > 0) {\n    shiftY = topY;\n  } else if (bottomY < height) {\n    shiftY = bottomY - height;\n  }\n\n  if (shiftY) {\n    latitude = flatViewport.unproject([width / 2, height / 2 + shiftY])[1];\n  }\n\n  return {\n    width: width,\n    height: height,\n    longitude: longitude,\n    latitude: latitude,\n    zoom: zoom,\n    pitch: pitch,\n    bearing: bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","// This file enables: import 'probe.gl/bench'.\n// Note: Must be published using package.json \"files\" field\nmodule.exports = require('./dist/es5/env');\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","var arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  var scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray(_ref) {\n  var target = _ref.target,\n      source = _ref.source,\n      _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count;\n  var length = source.length;\n  var total = count * length;\n  var copied = 0;\n\n  for (var i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils';\nimport { getBrowser } from 'probe.gl';\nvar ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\n\nvar VertexArrayObject = function (_Resource) {\n  _inherits(VertexArrayObject, _Resource);\n\n  _createClass(VertexArrayObject, null, [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (options.constantAttributeZero) {\n        return isWebGL2(gl) || getBrowser() === 'Chrome';\n      }\n\n      return true;\n    }\n  }, {\n    key: \"getDefaultArray\",\n    value: function getDefaultArray(gl) {\n      gl.luma = gl.luma || {};\n\n      if (!gl.luma.defaultVertexArray) {\n        gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n          handle: null,\n          isDefaultArray: true\n        });\n      }\n\n      return gl.luma.defaultVertexArray;\n    }\n  }, {\n    key: \"getMaxAttributes\",\n    value: function getMaxAttributes(gl) {\n      VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n      return VertexArrayObject.MAX_ATTRIBUTES;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(gl, location, array) {\n      switch (array.constructor) {\n        case Float32Array:\n          VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n          break;\n\n        case Int32Array:\n          VertexArrayObject._setConstantIntArray(gl, location, array);\n\n          break;\n\n        case Uint32Array:\n          VertexArrayObject._setConstantUintArray(gl, location, array);\n\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  function VertexArrayObject(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArrayObject);\n\n    var id = opts.id || opts.program && opts.program.id;\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(VertexArrayObject).call(this, gl, Object.assign({}, opts, {\n      id: id\n    })));\n    _this.buffer = null;\n    _this.bufferValue = null;\n    _this.isDefaultArray = opts.isDefaultArray || false;\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(VertexArrayObject, [{\n    key: \"delete\",\n    value: function _delete() {\n      _get(_getPrototypeOf(VertexArrayObject.prototype), \"delete\", this).call(this);\n\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.setProps(props);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var _this2 = this;\n\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n      this.bind(function () {\n        _this2.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(location, buffer, accessor) {\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, accessor);\n      }\n\n      var size = accessor.size,\n          type = accessor.type,\n          stride = accessor.stride,\n          offset = accessor.offset,\n          normalized = accessor.normalized,\n          integer = accessor.integer,\n          divisor = accessor.divisor;\n      var gl = this.gl;\n      location = Number(location);\n      this.bind(function () {\n        gl.bindBuffer(34962, buffer.handle);\n\n        if (integer) {\n          assert(isWebGL2(gl));\n          gl.vertexAttribIPointer(location, size, type, stride, offset);\n        } else {\n          gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n        }\n\n        gl.enableVertexAttribArray(location);\n        gl.vertexAttribDivisor(location, divisor || 0);\n      });\n      return this;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable(location) {\n      var _this3 = this;\n\n      var _enable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      var disablingAttributeZero = !_enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      });\n\n      if (!disablingAttributeZero) {\n        location = Number(location);\n        this.bind(function () {\n          return _enable ? _this3.gl.enableVertexAttribArray(location) : _this3.gl.disableVertexAttribArray(location);\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getConstantBuffer\",\n    value: function getConstantBuffer(elementCount, value, accessor) {\n      var constantValue = this._normalizeConstantArrayValue(value, accessor);\n\n      var byteLength = constantValue.byteLength * elementCount;\n      var length = constantValue.length * elementCount;\n      var updateNeeded = !this.buffer;\n      this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n      updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n      updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n      if (updateNeeded) {\n        var typedArray = getScratchArray(value.constructor, length);\n        fillArray({\n          target: typedArray,\n          source: constantValue,\n          start: 0,\n          count: length\n        });\n        this.buffer.subData(typedArray);\n        this.bufferValue = value;\n      }\n\n      return this.buffer;\n    }\n  }, {\n    key: \"_normalizeConstantArrayValue\",\n    value: function _normalizeConstantArrayValue(arrayValue, accessor) {\n      if (Array.isArray(arrayValue)) {\n        return new Float32Array(arrayValue);\n      }\n\n      return arrayValue;\n    }\n  }, {\n    key: \"_compareConstantArrayValues\",\n    value: function _compareConstantArrayValues(v1, v2) {\n      if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n        return false;\n      }\n\n      for (var i = 0; i < v1.length; ++i) {\n        if (v1[i] !== v2[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createVertexArray();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle(handle) {\n      this.gl.deleteVertexArray(handle);\n      return [this.elements];\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      this.gl.bindVertexArray(handle);\n    }\n  }, {\n    key: \"_getParameter\",\n    value: function _getParameter(pname, _ref) {\n      var _this4 = this;\n\n      var location = _ref.location;\n      assert(Number.isFinite(location));\n      return this.bind(function () {\n        switch (pname) {\n          case 34373:\n            return _this4.gl.getVertexAttribOffset(location, pname);\n\n          default:\n            return _this4.gl.getVertexAttrib(location, pname);\n        }\n      });\n    }\n  }, {\n    key: \"MAX_ATTRIBUTES\",\n    get: function get() {\n      return VertexArrayObject.getMaxAttributes(this.gl);\n    }\n  }], [{\n    key: \"_setConstantFloatArray\",\n    value: function _setConstantFloatArray(gl, location, array) {\n      switch (array.length) {\n        case 1:\n          gl.vertexAttrib1fv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttrib2fv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttrib3fv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttrib4fv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantIntArray\",\n    value: function _setConstantIntArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1iv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2iv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3iv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4iv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }, {\n    key: \"_setConstantUintArray\",\n    value: function _setConstantUintArray(gl, location, array) {\n      assert(isWebGL2(gl));\n\n      switch (array.length) {\n        case 1:\n          gl.vertexAttribI1uiv(location, array);\n          break;\n\n        case 2:\n          gl.vertexAttribI2uiv(location, array);\n          break;\n\n        case 3:\n          gl.vertexAttribI3uiv(location, array);\n          break;\n\n        case 4:\n          gl.vertexAttribI4uiv(location, array);\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n  }]);\n\n  return VertexArrayObject;\n}(Resource);\n\nexport { VertexArrayObject as default };\n//# sourceMappingURL=vertex-array-object.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert, stubRemovedMethods } from '../utils';\nvar ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nvar MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nvar DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\n\nvar VertexArray = function () {\n  function VertexArray(gl) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, VertexArray);\n\n    var id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  _createClass(VertexArray, [{\n    key: \"delete\",\n    value: function _delete() {\n      if (this.buffer) {\n        this.buffer[\"delete\"]();\n      }\n\n      this.vertexArrayObject[\"delete\"]();\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.reset();\n      this.configuration = null;\n      this.bindOnUse = false;\n      return this.setProps(props);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.elements = null;\n      this.elementsAccessor = null;\n      var MAX_ATTRIBUTES = this.vertexArrayObject.MAX_ATTRIBUTES;\n      this.values = new Array(MAX_ATTRIBUTES).fill(null);\n      this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n      this.unused = {};\n      this.drawParams = null;\n      return this;\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      if ('program' in props) {\n        this.configuration = props.program && props.program.configuration;\n      }\n\n      if ('configuration' in props) {\n        this.configuration = props.configuration;\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('elements' in props) {\n        this.setElementBuffer(props.elements);\n      }\n\n      if ('bindOnUse' in props) {\n        props = props.bindOnUse;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"clearDrawParams\",\n    value: function clearDrawParams() {\n      this.drawParams = null;\n    }\n  }, {\n    key: \"getDrawParams\",\n    value: function getDrawParams() {\n      this.drawParams = this.drawParams || this._updateDrawParams();\n      return this.drawParams;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes(attributes) {\n      var _this = this;\n\n      Object.assign(this.attributes, attributes);\n      this.vertexArrayObject.bind(function () {\n        for (var locationOrName in attributes) {\n          var value = attributes[locationOrName];\n\n          _this._setAttribute(locationOrName, value);\n        }\n\n        _this.gl.bindBuffer(34962, null);\n      });\n      return this;\n    }\n  }, {\n    key: \"setElementBuffer\",\n    value: function setElementBuffer() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.elements = elementBuffer;\n      this.elementsAccessor = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n      return this;\n    }\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(locationOrName, buffer) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (buffer.target === 34963) {\n        return this.setElementBuffer(buffer, appAccessor);\n      }\n\n      var _this$_resolveLocatio = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor),\n          location = _this$_resolveLocatio.location,\n          accessor = _this$_resolveLocatio.accessor;\n\n      if (location >= 0) {\n        this.values[location] = buffer;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.setBuffer(location, buffer, accessor);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setConstant\",\n    value: function setConstant(locationOrName, arrayValue) {\n      var appAccessor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var _this$_resolveLocatio2 = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n        size: arrayValue.length\n      }, appAccessor)),\n          location = _this$_resolveLocatio2.location,\n          accessor = _this$_resolveLocatio2.accessor;\n\n      if (location >= 0) {\n        arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue, accessor);\n        this.values[location] = arrayValue;\n        this.accessors[location] = accessor;\n        this.clearDrawParams();\n        this.vertexArrayObject.enable(location, false);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unbindBuffers\",\n    value: function unbindBuffers() {\n      var _this2 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this2.elements) {\n          _this2.vertexArrayObject.setElementBuffer(null);\n        }\n\n        _this2.buffer = _this2.buffer || new Buffer(_this2.gl, {\n          accessor: {\n            size: 4\n          }\n        });\n\n        for (var location = 0; location < _this2.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          if (_this2.values[location] instanceof Buffer) {\n            _this2.gl.disableVertexAttribArray(location);\n\n            _this2.gl.bindBuffer(34962, _this2.buffer.handle);\n\n            _this2.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindBuffers\",\n    value: function bindBuffers() {\n      var _this3 = this;\n\n      this.vertexArrayObject.bind(function () {\n        if (_this3.elements) {\n          _this3.setElementBuffer(_this3.elements);\n        }\n\n        for (var location = 0; location < _this3.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n          var buffer = _this3.values[location];\n\n          if (buffer instanceof Buffer) {\n            _this3.setBuffer(location, buffer);\n          }\n        }\n      });\n      return this;\n    }\n  }, {\n    key: \"bindForDraw\",\n    value: function bindForDraw(vertexCount, instanceCount, func) {\n      var _this4 = this;\n\n      var value;\n      this.vertexArrayObject.bind(function () {\n        _this4._setConstantAttributes(vertexCount, instanceCount);\n\n        value = func();\n      });\n      return value;\n    }\n  }, {\n    key: \"_resolveLocationAndAccessor\",\n    value: function _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n      var _this5 = this;\n\n      var _this$_getAttributeIn = this._getAttributeIndex(locationOrName),\n          location = _this$_getAttributeIn.location,\n          name = _this$_getAttributeIn.name;\n\n      if (!Number.isFinite(location) || location < 0) {\n        this.unused[locationOrName] = value;\n        log.once(3, function () {\n          return \"unused value \".concat(locationOrName, \" in \").concat(_this5.id);\n        })();\n        return this;\n      }\n\n      var accessInfo = this._getAttributeInfo(name || location);\n\n      if (!accessInfo) {\n        return {\n          location: -1,\n          accessor: null\n        };\n      }\n\n      var currentAccessor = this.accessors[location] || {};\n      var accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n      var size = accessor.size,\n          type = accessor.type;\n      assert(Number.isFinite(size) && Number.isFinite(type));\n      return {\n        location: location,\n        accessor: accessor\n      };\n    }\n  }, {\n    key: \"_getAttributeInfo\",\n    value: function _getAttributeInfo(attributeName) {\n      return this.configuration && this.configuration.getAttributeInfo(attributeName);\n    }\n  }, {\n    key: \"_getAttributeIndex\",\n    value: function _getAttributeIndex(locationOrName) {\n      var location = Number(locationOrName);\n\n      if (Number.isFinite(location)) {\n        return {\n          location: location\n        };\n      }\n\n      var multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n      var name = multiLocation ? multiLocation[1] : locationOrName;\n      var locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n      if (this.configuration) {\n        return {\n          location: this.configuration.getAttributeLocation(name) + locationOffset,\n          name: name\n        };\n      }\n\n      return {\n        location: -1\n      };\n    }\n  }, {\n    key: \"_setAttribute\",\n    value: function _setAttribute(locationOrName, value) {\n      if (value instanceof Buffer) {\n        this.setBuffer(locationOrName, value);\n      } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n        var buffer = value[0];\n        var accessor = value[1];\n        this.setBuffer(locationOrName, buffer, accessor);\n      } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n        var constant = value;\n        this.setConstant(locationOrName, constant);\n      } else if (value.buffer instanceof Buffer) {\n        var _accessor = value;\n        this.setBuffer(locationOrName, _accessor.buffer, _accessor);\n      } else {\n        throw new Error(ERR_ATTRIBUTE_TYPE);\n      }\n    }\n  }, {\n    key: \"_setConstantAttributes\",\n    value: function _setConstantAttributes(vertexCount, instanceCount) {\n      var elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n      var constant = this.values[0];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttributeZero(constant, elementCount);\n      }\n\n      for (var location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        constant = this.values[location];\n\n        if (ArrayBuffer.isView(constant)) {\n          this._setConstantAttribute(location, constant);\n        }\n      }\n    }\n  }, {\n    key: \"_setConstantAttributeZero\",\n    value: function _setConstantAttributeZero(constant, elementCount) {\n      if (VertexArrayObject.isSupported(this.gl, {\n        constantAttributeZero: true\n      })) {\n        this._setConstantAttribute(0, constant);\n\n        return;\n      }\n\n      var buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n      this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n    }\n  }, {\n    key: \"_setConstantAttribute\",\n    value: function _setConstantAttribute(location, constant) {\n      VertexArrayObject.setConstant(this.gl, location, constant);\n    }\n  }, {\n    key: \"_updateDrawParams\",\n    value: function _updateDrawParams() {\n      var drawParams = {\n        isIndexed: false,\n        isInstanced: false,\n        indexCount: Infinity,\n        vertexCount: Infinity,\n        instanceCount: Infinity\n      };\n\n      for (var location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        this._updateDrawParamsForLocation(drawParams, location);\n      }\n\n      if (this.elements) {\n        drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n        drawParams.isIndexed = true;\n        drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n        drawParams.indexOffset = this.elementsAccessor.offset || 0;\n      }\n\n      if (drawParams.indexCount === Infinity) {\n        drawParams.indexCount = 0;\n      }\n\n      if (drawParams.vertexCount === Infinity) {\n        drawParams.vertexCount = 0;\n      }\n\n      if (drawParams.instanceCount === Infinity) {\n        drawParams.instanceCount = 0;\n      }\n\n      return drawParams;\n    }\n  }, {\n    key: \"_updateDrawParamsForLocation\",\n    value: function _updateDrawParamsForLocation(drawParams, location) {\n      var value = this.values[location];\n      var accessor = this.accessors[location];\n\n      if (!value) {\n        return;\n      }\n\n      var divisor = accessor.divisor;\n      var isInstanced = divisor > 0;\n      drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n      if (value instanceof Buffer) {\n        var buffer = value;\n\n        if (isInstanced) {\n          var instanceCount = buffer.getVertexCount(accessor);\n          drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n        } else {\n          var vertexCount = buffer.getVertexCount(accessor);\n          drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n        }\n      }\n    }\n  }, {\n    key: \"setElements\",\n    value: function setElements() {\n      var elementBuffer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      log.deprecated('setElements', 'setElementBuffer')();\n      return this.setElementBuffer(elementBuffer, accessor);\n    }\n  }]);\n\n  return VertexArray;\n}();\n\nexport { VertexArray as default };\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  var _opts$maxElts = opts.maxElts,\n      maxElts = _opts$maxElts === void 0 ? 16 : _opts$maxElts,\n      _opts$size = opts.size,\n      size = _opts$size === void 0 ? 1 : _opts$size;\n  var string = '[';\n\n  for (var i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  var terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatValue(v) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var EPSILON = 1e-16;\n  var _opts$isInteger = opts.isInteger,\n      isInteger = _opts$isInteger === void 0 ? false : _opts$isInteger;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  var string = v.toPrecision(2);\n  var decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils';\nexport function getDebugTableForVertexArray() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      vertexArray = _ref.vertexArray,\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Attributes' : _ref$header;\n\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  var table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  var attributes = vertexArray.values;\n\n  for (var attributeLocation in attributes) {\n    var info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      var rowHeader = \"\".concat(attributeLocation, \": \").concat(info.name);\n      var accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = \"\".concat(attributeLocation, \": \").concat(getGLSLDeclaration(info.name, accessor));\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  var _ref4;\n\n  var gl = vertexArray.gl;\n\n  if (!attribute) {\n    var _ref2;\n\n    return _ref2 = {}, _defineProperty(_ref2, header, 'null'), _defineProperty(_ref2, 'Format ', 'N/A'), _ref2;\n  }\n\n  var type = 'NOT PROVIDED';\n  var size = 'N/A';\n  var verts = 'N/A';\n  var bytes = 'N/A';\n  var isInteger;\n  var marker;\n  var value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    var _ref3;\n\n    var buffer = attribute;\n\n    var _buffer$getDebugData = buffer.getDebugData(),\n        data = _buffer$getDebugData.data,\n        modified = _buffer$getDebugData.modified;\n\n    marker = modified ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    var format;\n\n    if (accessor) {\n      var instanced = accessor.divisor > 0;\n      format = \"\".concat(instanced ? 'I ' : 'P ', \" \").concat(verts, \" (x\").concat(size, \"=\").concat(bytes, \" bytes \").concat(getKey(gl, type), \")\");\n    } else {\n      isInteger = true;\n      format = \"\".concat(bytes, \" bytes\");\n    }\n\n    return _ref3 = {}, _defineProperty(_ref3, header, \"\".concat(marker).concat(formatValue(value, {\n      size: size,\n      isInteger: isInteger\n    }))), _defineProperty(_ref3, 'Format ', format), _ref3;\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return _ref4 = {}, _defineProperty(_ref4, header, \"\".concat(formatValue(value, {\n    size: size,\n    isInteger: isInteger\n  }), \" (constant)\")), _defineProperty(_ref4, 'Format ', \"\".concat(size, \"x\").concat(type, \" (constant)\")), _ref4;\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  var type = accessor.type,\n      size = accessor.size;\n  var typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? \"\".concat(name, \" (\").concat(typeAndName.name, \")\") : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { formatValue, assert } from '../utils';\nexport function getDebugTableForUniforms() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$header = _ref.header,\n      header = _ref$header === void 0 ? 'Uniforms' : _ref$header,\n      program = _ref.program,\n      uniforms = _ref.uniforms,\n      _ref$undefinedOnly = _ref.undefinedOnly,\n      undefinedOnly = _ref$undefinedOnly === void 0 ? false : _ref$undefinedOnly;\n\n  assert(program);\n  var SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  var PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  var uniformLocations = program._uniformSetters;\n  var table = {};\n  var uniformNames = Object.keys(uniformLocations).sort();\n  var count = 0;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = uniformNames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _uniformName = _step.value;\n\n      if (!_uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !_uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = uniformNames[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _uniformName2 = _step2.value;\n\n      if (_uniformName2.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName2,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = uniformNames[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _uniformName3 = _step3.value;\n\n      if (!table[_uniformName3]) {\n        if (addUniformToTable({\n          table: table,\n          header: header,\n          uniforms: uniforms,\n          uniformName: _uniformName3,\n          undefinedOnly: undefinedOnly\n        })) {\n          count++;\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n        _iterator3[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  var unusedCount = 0;\n  var unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (var uniformName in uniforms) {\n      var uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = _defineProperty({\n          Type: \"NOT USED: \".concat(uniform)\n        }, header, formatValue(uniform));\n      }\n    }\n  }\n\n  return {\n    table: table,\n    count: count,\n    unusedTable: unusedTable,\n    unusedCount: unusedCount\n  };\n}\n\nfunction addUniformToTable(_ref2) {\n  var table = _ref2.table,\n      header = _ref2.header,\n      uniforms = _ref2.uniforms,\n      uniformName = _ref2.uniformName,\n      undefinedOnly = _ref2.undefinedOnly;\n  var value = uniforms[uniformName];\n  var isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    var _table$uniformName;\n\n    table[uniformName] = (_table$uniformName = {}, _defineProperty(_table$uniformName, header, isDefined ? formatValue(value) : 'N/A'), _defineProperty(_table$uniformName, 'Uniform Type', isDefined ? value : 'NOT PROVIDED'), _table$uniformName);\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  var table = {};\n  var header = \"Accessors for \".concat(config.id);\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = config.attributeInfos[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var attributeInfo = _step.value;\n\n      if (attributeInfo) {\n        var glslDeclaration = getGLSLDeclaration(attributeInfo);\n        table[\"in \".concat(glslDeclaration)] = _defineProperty({}, header, JSON.stringify(attributeInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n        _iterator[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = config.varyingInfos[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var varyingInfo = _step2.value;\n\n      if (varyingInfo) {\n        var _glslDeclaration = getGLSLDeclaration(varyingInfo);\n\n        table[\"out \".concat(_glslDeclaration)] = _defineProperty({}, header, JSON.stringify(varyingInfo.accessor));\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n        _iterator2[\"return\"]();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  var _attributeInfo$access = attributeInfo.accessor,\n      type = _attributeInfo$access.type,\n      size = _attributeInfo$access.size;\n  var typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return \"\".concat(typeAndName.name, \" \").concat(attributeInfo.name);\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport { Buffer, assert } from '@luma.gl/webgl';\nvar GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  var buffers = {};\n  var indices = geometry.indices;\n\n  for (var name in geometry.attributes) {\n    var attribute = geometry.attributes[name];\n    var remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      var typedArray = attribute.value;\n\n      var accessor = _objectSpread({}, attribute);\n\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    var data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    var _accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data: data,\n      target: 34963\n    }), _accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  var _ref = options || {},\n      _ref$attributeMap = _ref.attributeMap,\n      attributeMap = _ref$attributeMap === void 0 ? GLTF_TO_LUMA_ATTRIBUTE_MAP : _ref$attributeMap;\n\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  var category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), \"attribute \".concat(attributeName, \" needs size\"));\n}\n//# sourceMappingURL=model-utils.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear as _clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nvar LOG_DRAW_PRIORITY = 2;\nvar LOG_DRAW_TIMEOUT = 10000;\nvar ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nvar NOOP = function NOOP() {};\n\nvar DRAW_PARAMS = {};\n\nvar Model = function () {\n  function Model(gl) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Model);\n\n    var _props$id = props.id,\n        id = _props$id === void 0 ? uid('model') : _props$id;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.initialize(props);\n  }\n\n  _createClass(Model, [{\n    key: \"initialize\",\n    value: function initialize(props) {\n      this.props = {};\n      this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n      this._programManagerState = -1;\n      this._managedProgram = false;\n      var _props$program = props.program,\n          program = _props$program === void 0 ? null : _props$program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this.program = null;\n      this.vertexArray = null;\n      this._programDirty = true;\n      this.userData = {};\n      this.needsRedraw = true;\n      this._attributes = {};\n      this.attributes = {};\n      this.uniforms = {};\n      this.pickable = true;\n\n      this._checkProgram();\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n      this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n      this.vertexCount = props.vertexCount || 0;\n      this.geometryBuffers = {};\n      this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n      this._setModelProps(props);\n\n      this.geometry = {};\n      assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setModelProps(props);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      for (var key in this._attributes) {\n        if (this._attributes[key] !== this.attributes[key]) {\n          this._attributes[key][\"delete\"]();\n        }\n      }\n\n      if (this._managedProgram) {\n        this.programManager.release(this.program);\n        this._managedProgram = false;\n      }\n\n      this.vertexArray[\"delete\"]();\n\n      this._deleteGeometryBuffers();\n    }\n  }, {\n    key: \"getDrawMode\",\n    value: function getDrawMode() {\n      return this.drawMode;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount() {\n      return this.vertexCount;\n    }\n  }, {\n    key: \"getInstanceCount\",\n    value: function getInstanceCount() {\n      return this.instanceCount;\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes() {\n      return this.attributes;\n    }\n  }, {\n    key: \"getProgram\",\n    value: function getProgram() {\n      return this.program;\n    }\n  }, {\n    key: \"setProgram\",\n    value: function setProgram(props) {\n      var program = props.program,\n          vs = props.vs,\n          fs = props.fs,\n          modules = props.modules,\n          defines = props.defines,\n          inject = props.inject,\n          varyings = props.varyings,\n          bufferMode = props.bufferMode,\n          transpileToGLSL100 = props.transpileToGLSL100;\n      this.programProps = {\n        program: program,\n        vs: vs,\n        fs: fs,\n        modules: modules,\n        defines: defines,\n        inject: inject,\n        varyings: varyings,\n        bufferMode: bufferMode,\n        transpileToGLSL100: transpileToGLSL100\n      };\n      this._programDirty = true;\n    }\n  }, {\n    key: \"getUniforms\",\n    value: function getUniforms() {\n      return this.uniforms;\n    }\n  }, {\n    key: \"setDrawMode\",\n    value: function setDrawMode(drawMode) {\n      this.drawMode = drawMode;\n      return this;\n    }\n  }, {\n    key: \"setVertexCount\",\n    value: function setVertexCount(vertexCount) {\n      assert(Number.isFinite(vertexCount));\n      this.vertexCount = vertexCount;\n      return this;\n    }\n  }, {\n    key: \"setInstanceCount\",\n    value: function setInstanceCount(instanceCount) {\n      assert(Number.isFinite(instanceCount));\n      this.instanceCount = instanceCount;\n      return this;\n    }\n  }, {\n    key: \"setGeometry\",\n    value: function setGeometry(geometry) {\n      this.drawMode = geometry.drawMode;\n      this.vertexCount = geometry.getVertexCount();\n\n      this._deleteGeometryBuffers();\n\n      this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n      this.vertexArray.setAttributes(this.geometryBuffers);\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(attributes)) {\n        return this;\n      }\n\n      var normalizedAttributes = {};\n\n      for (var name in attributes) {\n        var attribute = attributes[name];\n        normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n      }\n\n      this.vertexArray.setAttributes(normalizedAttributes);\n      return this;\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.assign(this.uniforms, uniforms);\n      return this;\n    }\n  }, {\n    key: \"getModuleUniforms\",\n    value: function getModuleUniforms(opts) {\n      this._checkProgram();\n\n      var getUniforms = this.programManager.getUniforms(this.program);\n\n      if (getUniforms) {\n        return getUniforms(opts);\n      }\n\n      return {};\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings(opts) {\n      var uniforms = this.getModuleUniforms(opts || {});\n      return this.setUniforms(uniforms);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(opts) {\n      _clear(this.program.gl, opts);\n\n      return this;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._checkProgram();\n\n      var _opts$moduleSettings = opts.moduleSettings,\n          moduleSettings = _opts$moduleSettings === void 0 ? null : _opts$moduleSettings,\n          framebuffer = opts.framebuffer,\n          _opts$uniforms = opts.uniforms,\n          uniforms = _opts$uniforms === void 0 ? {} : _opts$uniforms,\n          _opts$attributes = opts.attributes,\n          attributes = _opts$attributes === void 0 ? {} : _opts$attributes,\n          _opts$transformFeedba = opts.transformFeedback,\n          transformFeedback = _opts$transformFeedba === void 0 ? this.transformFeedback : _opts$transformFeedba,\n          _opts$parameters = opts.parameters,\n          parameters = _opts$parameters === void 0 ? {} : _opts$parameters,\n          _opts$vertexArray = opts.vertexArray,\n          vertexArray = _opts$vertexArray === void 0 ? this.vertexArray : _opts$vertexArray;\n      this.setAttributes(attributes);\n      this.updateModuleSettings(moduleSettings);\n      this.setUniforms(uniforms);\n      var logPriority;\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n      }\n\n      var drawParams = this.vertexArray.getDrawParams();\n      var _this$props = this.props,\n          _this$props$isIndexed = _this$props.isIndexed,\n          isIndexed = _this$props$isIndexed === void 0 ? drawParams.isIndexed : _this$props$isIndexed,\n          _this$props$indexType = _this$props.indexType,\n          indexType = _this$props$indexType === void 0 ? drawParams.indexType : _this$props$indexType,\n          _this$props$indexOffs = _this$props.indexOffset,\n          indexOffset = _this$props$indexOffs === void 0 ? drawParams.indexOffset : _this$props$indexOffs,\n          _this$props$vertexArr = _this$props.vertexArrayInstanced,\n          vertexArrayInstanced = _this$props$vertexArr === void 0 ? drawParams.isInstanced : _this$props$vertexArr;\n\n      if (vertexArrayInstanced && !this.isInstanced) {\n        log.warn('Found instanced attributes on non-instanced model', this.id)();\n      }\n\n      var isInstanced = this.isInstanced,\n          instanceCount = this.instanceCount;\n      var _this$props2 = this.props,\n          _this$props2$onBefore = _this$props2.onBeforeRender,\n          onBeforeRender = _this$props2$onBefore === void 0 ? NOOP : _this$props2$onBefore,\n          _this$props2$onAfterR = _this$props2.onAfterRender,\n          onAfterRender = _this$props2$onAfterR === void 0 ? NOOP : _this$props2$onAfterR;\n      onBeforeRender();\n      this.program.setUniforms(this.uniforms);\n      var didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n        logPriority: logPriority,\n        uniforms: null,\n        framebuffer: framebuffer,\n        parameters: parameters,\n        drawMode: this.getDrawMode(),\n        vertexCount: this.getVertexCount(),\n        vertexArray: vertexArray,\n        transformFeedback: transformFeedback,\n        isIndexed: isIndexed,\n        indexType: indexType,\n        isInstanced: isInstanced,\n        instanceCount: instanceCount,\n        offset: isIndexed ? indexOffset : 0\n      }));\n      onAfterRender();\n\n      if (log.priority >= LOG_DRAW_PRIORITY) {\n        this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n      }\n\n      return didDraw;\n    }\n  }, {\n    key: \"transform\",\n    value: function transform() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _opts$discard = opts.discard,\n          discard = _opts$discard === void 0 ? true : _opts$discard,\n          feedbackBuffers = opts.feedbackBuffers,\n          _opts$unbindModels = opts.unbindModels,\n          unbindModels = _opts$unbindModels === void 0 ? [] : _opts$unbindModels;\n      var parameters = opts.parameters;\n\n      if (feedbackBuffers) {\n        this._setFeedbackBuffers(feedbackBuffers);\n      }\n\n      if (discard) {\n        parameters = Object.assign({}, parameters, _defineProperty({}, 35977, discard));\n      }\n\n      unbindModels.forEach(function (model) {\n        return model.vertexArray.unbindBuffers();\n      });\n\n      try {\n        this.draw(Object.assign({}, opts, {\n          parameters: parameters\n        }));\n      } finally {\n        unbindModels.forEach(function (model) {\n          return model.vertexArray.bindBuffers();\n        });\n      }\n\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var uniforms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n      return this.setUniforms(uniforms).draw();\n    }\n  }, {\n    key: \"_setModelProps\",\n    value: function _setModelProps(props) {\n      Object.assign(this.props, props);\n\n      if ('uniforms' in props) {\n        this.setUniforms(props.uniforms);\n      }\n\n      if ('pickable' in props) {\n        this.pickable = props.pickable;\n      }\n\n      if ('instanceCount' in props) {\n        this.instanceCount = props.instanceCount;\n      }\n\n      if ('geometry' in props) {\n        this.setGeometry(props.geometry);\n      }\n\n      if ('attributes' in props) {\n        this.setAttributes(props.attributes);\n      }\n\n      if ('_feedbackBuffers' in props) {\n        this._setFeedbackBuffers(props._feedbackBuffers);\n      }\n    }\n  }, {\n    key: \"_checkProgram\",\n    value: function _checkProgram() {\n      var shaderCache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n      if (!needsUpdate) {\n        return;\n      }\n\n      var program = this.programProps.program;\n\n      if (program) {\n        this._managedProgram = false;\n      } else {\n        var _this$programProps = this.programProps,\n            vs = _this$programProps.vs,\n            fs = _this$programProps.fs,\n            modules = _this$programProps.modules,\n            inject = _this$programProps.inject,\n            defines = _this$programProps.defines,\n            varyings = _this$programProps.varyings,\n            bufferMode = _this$programProps.bufferMode,\n            transpileToGLSL100 = _this$programProps.transpileToGLSL100;\n        program = this.programManager.get({\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          inject: inject,\n          defines: defines,\n          varyings: varyings,\n          bufferMode: bufferMode,\n          transpileToGLSL100: transpileToGLSL100\n        });\n\n        if (this.program && this._managedProgram) {\n          this.programManager.release(this.program);\n        }\n\n        this._programManagerState = this.programManager.stateHash;\n        this._managedProgram = true;\n      }\n\n      assert(program instanceof Program, 'Model needs a program');\n      this._programDirty = false;\n\n      if (program === this.program) {\n        return;\n      }\n\n      this.program = program;\n\n      if (this.vertexArray) {\n        this.vertexArray.setProps({\n          program: this.program,\n          attributes: this.vertexArray.attributes\n        });\n      } else {\n        this.vertexArray = new VertexArray(this.gl, {\n          program: this.program\n        });\n      }\n\n      this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n    }\n  }, {\n    key: \"_deleteGeometryBuffers\",\n    value: function _deleteGeometryBuffers() {\n      for (var name in this.geometryBuffers) {\n        var buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n        if (buffer instanceof Buffer) {\n          buffer[\"delete\"]();\n        }\n      }\n    }\n  }, {\n    key: \"_setAnimationProps\",\n    value: function _setAnimationProps(animationProps) {\n      if (this.animated) {\n        assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n\n        var animatedUniforms = this._evaluateAnimateUniforms(animationProps);\n\n        Object.assign(this.uniforms, animatedUniforms);\n      }\n    }\n  }, {\n    key: \"_setFeedbackBuffers\",\n    value: function _setFeedbackBuffers() {\n      var feedbackBuffers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (isObjectEmpty(feedbackBuffers)) {\n        return this;\n      }\n\n      var gl = this.program.gl;\n      this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n        program: this.program\n      });\n      this.transformFeedback.setBuffers(feedbackBuffers);\n      return this;\n    }\n  }, {\n    key: \"_logDrawCallStart\",\n    value: function _logDrawCallStart(logLevel) {\n      var logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n      if (Date.now() - this.lastLogTime < logDrawTimeout) {\n        return undefined;\n      }\n\n      this.lastLogTime = Date.now();\n      log.group(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id), {\n        collapsed: log.level <= 2\n      })();\n      return logLevel;\n    }\n  }, {\n    key: \"_logDrawCallEnd\",\n    value: function _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n      if (logLevel === undefined) {\n        return;\n      }\n\n      var attributeTable = getDebugTableForVertexArray({\n        vertexArray: vertexArray,\n        header: \"\".concat(this.id, \" attributes\"),\n        attributes: this._attributes\n      });\n\n      var _getDebugTableForUnif = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms)\n      }),\n          uniformTable = _getDebugTableForUnif.table,\n          unusedTable = _getDebugTableForUnif.unusedTable,\n          unusedCount = _getDebugTableForUnif.unusedCount;\n\n      var _getDebugTableForUnif2 = getDebugTableForUniforms({\n        header: \"\".concat(this.id, \" uniforms\"),\n        program: this.program,\n        uniforms: Object.assign({}, this.program.uniforms, uniforms),\n        undefinedOnly: true\n      }),\n          missingTable = _getDebugTableForUnif2.table,\n          missingCount = _getDebugTableForUnif2.count;\n\n      if (missingCount > 0) {\n        log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n      }\n\n      if (unusedCount > 0) {\n        log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n      }\n\n      var configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n      log.table(logLevel, attributeTable)();\n      log.table(logLevel, uniformTable)();\n      log.table(logLevel + 1, configTable)();\n\n      if (framebuffer) {\n        framebuffer.log({\n          logLevel: LOG_DRAW_PRIORITY,\n          message: \"Rendered to \".concat(framebuffer.id)\n        });\n      }\n\n      log.groupEnd(LOG_DRAW_PRIORITY, \">>> DRAWING MODEL \".concat(this.id))();\n    }\n  }]);\n\n  return Model;\n}();\n\nexport { Model as default };\n//# sourceMappingURL=model.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat as _addMetersToLngLat, getProjectionParameters, fitBounds as _fitBounds, getBounds as _getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\n\nvar WebMercatorViewport = function (_Viewport) {\n  _inherits(WebMercatorViewport, _Viewport);\n\n  function WebMercatorViewport() {\n    var _this;\n\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, WebMercatorViewport);\n\n    var _opts$latitude = opts.latitude,\n        latitude = _opts$latitude === void 0 ? 0 : _opts$latitude,\n        _opts$longitude = opts.longitude,\n        longitude = _opts$longitude === void 0 ? 0 : _opts$longitude,\n        _opts$zoom = opts.zoom,\n        zoom = _opts$zoom === void 0 ? 11 : _opts$zoom,\n        _opts$pitch = opts.pitch,\n        pitch = _opts$pitch === void 0 ? 0 : _opts$pitch,\n        _opts$bearing = opts.bearing,\n        bearing = _opts$bearing === void 0 ? 0 : _opts$bearing,\n        _opts$nearZMultiplier = opts.nearZMultiplier,\n        nearZMultiplier = _opts$nearZMultiplier === void 0 ? 0.1 : _opts$nearZMultiplier,\n        _opts$farZMultiplier = opts.farZMultiplier,\n        farZMultiplier = _opts$farZMultiplier === void 0 ? 1.01 : _opts$farZMultiplier,\n        _opts$orthographic = opts.orthographic,\n        orthographic = _opts$orthographic === void 0 ? false : _opts$orthographic,\n        _opts$repeat = opts.repeat,\n        repeat = _opts$repeat === void 0 ? false : _opts$repeat,\n        _opts$worldOffset = opts.worldOffset,\n        worldOffset = _opts$worldOffset === void 0 ? 0 : _opts$worldOffset;\n    var width = opts.width,\n        height = opts.height,\n        _opts$altitude = opts.altitude,\n        altitude = _opts$altitude === void 0 ? 1.5 : _opts$altitude;\n    var scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    altitude = Math.max(0.75, altitude);\n\n    var _getProjectionParamet = getProjectionParameters({\n      width: width,\n      height: height,\n      pitch: pitch,\n      altitude: altitude,\n      nearZMultiplier: nearZMultiplier,\n      farZMultiplier: farZMultiplier\n    }),\n        fov = _getProjectionParamet.fov,\n        aspect = _getProjectionParamet.aspect,\n        focalDistance = _getProjectionParamet.focalDistance,\n        near = _getProjectionParamet.near,\n        far = _getProjectionParamet.far;\n\n    var viewMatrixUncentered = getViewMatrix({\n      height: height,\n      pitch: pitch,\n      bearing: bearing,\n      scale: scale,\n      altitude: altitude\n    });\n\n    if (worldOffset) {\n      var viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    var viewportOpts = Object.assign({}, opts, {\n      width: width,\n      height: height,\n      viewMatrix: viewMatrixUncentered,\n      longitude: longitude,\n      latitude: latitude,\n      zoom: zoom,\n      orthographic: orthographic,\n      fovyRadians: fov,\n      aspect: aspect,\n      focalDistance: orthographic ? focalDistance : 1,\n      near: near,\n      far: far\n    });\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WebMercatorViewport).call(this, viewportOpts));\n    _this.latitude = latitude;\n    _this.longitude = longitude;\n    _this.zoom = zoom;\n    _this.pitch = pitch;\n    _this.bearing = bearing;\n    _this.altitude = altitude;\n    _this.orthographic = orthographic;\n    _this._subViewports = repeat ? [] : null;\n    Object.freeze(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(WebMercatorViewport, [{\n    key: \"addMetersToLngLat\",\n    value: function addMetersToLngLat(lngLatZ, xyz) {\n      return _addMetersToLngLat(lngLatZ, xyz);\n    }\n  }, {\n    key: \"getMapCenterByLngLatPosition\",\n    value: function getMapCenterByLngLatPosition(_ref) {\n      var lngLat = _ref.lngLat,\n          pos = _ref.pos;\n      var fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n      var toLocation = this.projectFlat(lngLat);\n      var translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n      var newCenter = vec2.add([], this.center, translate);\n      return this.unprojectFlat(newCenter);\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var corners = _getBounds(this, options.z || 0);\n\n      return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var width = this.width,\n          height = this.height;\n\n      var _fitBounds2 = _fitBounds(Object.assign({\n        width: width,\n        height: height,\n        bounds: bounds\n      }, options)),\n          longitude = _fitBounds2.longitude,\n          latitude = _fitBounds2.latitude,\n          zoom = _fitBounds2.zoom;\n\n      return new WebMercatorViewport({\n        width: width,\n        height: height,\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      });\n    }\n  }, {\n    key: \"subViewports\",\n    get: function get() {\n      if (this._subViewports && !this._subViewports.length) {\n        var bounds = this.getBounds();\n        var minOffset = Math.floor((bounds[0] + 180) / 360);\n        var maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n        for (var x = minOffset; x <= maxOffset; x++) {\n          var offsetViewport = x ? new WebMercatorViewport(_objectSpread({}, this, {\n            worldOffset: x\n          })) : this;\n\n          this._subViewports.push(offsetViewport);\n        }\n      }\n\n      return this._subViewports;\n    }\n  }]);\n\n  return WebMercatorViewport;\n}(Viewport);\n\nexport { WebMercatorViewport as default };\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\n\nvar Vector = function (_MathArray) {\n  _inherits(Vector, _MathArray);\n\n  function Vector() {\n    _classCallCheck(this, Vector);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Vector).apply(this, arguments));\n  }\n\n  _createClass(Vector, [{\n    key: \"copy\",\n    value: function copy(vector) {\n      assert(false);\n      return this;\n    }\n  }, {\n    key: \"len\",\n    value: function len() {\n      return Math.sqrt(this.lengthSquared());\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return this.len();\n    }\n  }, {\n    key: \"lengthSquared\",\n    value: function lengthSquared() {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        length += this[i] * this[i];\n      }\n\n      return length;\n    }\n  }, {\n    key: \"magnitudeSquared\",\n    value: function magnitudeSquared() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distance\",\n    value: function distance(mathArray) {\n      return Math.sqrt(this.distanceSquared(mathArray));\n    }\n  }, {\n    key: \"distanceSquared\",\n    value: function distanceSquared(mathArray) {\n      var length = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var dist = this[i] - mathArray[i];\n        length += dist * dist;\n      }\n\n      return checkNumber(length);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(mathArray) {\n      var product = 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        product += this[i] * mathArray[i];\n      }\n\n      return checkNumber(product);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var length = this.magnitude();\n\n      if (length !== 0) {\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= length;\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] *= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] /= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lengthSq\",\n    value: function lengthSq() {\n      return this.lengthSquared();\n    }\n  }, {\n    key: \"distanceTo\",\n    value: function distanceTo(vector) {\n      return this.distance(vector);\n    }\n  }, {\n    key: \"distanceToSquared\",\n    value: function distanceToSquared(vector) {\n      return this.distanceSquared(vector);\n    }\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(i) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      return checkNumber(this[i]);\n    }\n  }, {\n    key: \"setComponent\",\n    value: function setComponent(i, value) {\n      assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n      this[i] = value;\n      return this.check();\n    }\n  }, {\n    key: \"addVectors\",\n    value: function addVectors(a, b) {\n      return this.copy(a).add(b);\n    }\n  }, {\n    key: \"subVectors\",\n    value: function subVectors(a, b) {\n      return this.copy(a).subtract(b);\n    }\n  }, {\n    key: \"multiplyVectors\",\n    value: function multiplyVectors(a, b) {\n      return this.copy(a).multiply(b);\n    }\n  }, {\n    key: \"addScaledVector\",\n    value: function addScaledVector(a, b) {\n      return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(value) {\n      this[0] = checkNumber(value);\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(value) {\n      this[1] = checkNumber(value);\n    }\n  }]);\n\n  return Vector;\n}(MathArray);\n\nexport { Vector as default };\n//# sourceMappingURL=vector.js.map","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nvar ORIGIN = [0, 0, 0];\nvar constants = {};\n\nvar Vector3 = function (_Vector) {\n  _inherits(Vector3, _Vector);\n\n  _createClass(Vector3, null, [{\n    key: \"ZERO\",\n    get: function get() {\n      return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n    }\n  }]);\n\n  function Vector3() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, Vector3);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector3).call(this, -0, -0, -0));\n\n    if (arguments.length === 1 && isArray(x)) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n      _this[2] = z;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector3, [{\n    key: \"set\",\n    value: function set(x, y, z) {\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      this[2] = array[2];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n        checkNumber(object.z);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      this[2] = object.z;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      object.z = this[2];\n      return object;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle(vector) {\n      return vec3.angle(this, vector);\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(vector) {\n      vec3.cross(this, this, vector);\n      return this.check();\n    }\n  }, {\n    key: \"rotateX\",\n    value: function rotateX(_ref) {\n      var radians = _ref.radians,\n          _ref$origin = _ref.origin,\n          origin = _ref$origin === void 0 ? ORIGIN : _ref$origin;\n      vec3.rotateX(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateY\",\n    value: function rotateY(_ref2) {\n      var radians = _ref2.radians,\n          _ref2$origin = _ref2.origin,\n          origin = _ref2$origin === void 0 ? ORIGIN : _ref2$origin;\n      vec3.rotateY(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"rotateZ\",\n    value: function rotateZ(_ref3) {\n      var radians = _ref3.radians,\n          _ref3$origin = _ref3.origin,\n          origin = _ref3$origin === void 0 ? ORIGIN : _ref3$origin;\n      vec3.rotateZ(this, this, origin, radians);\n      return this.check();\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec3.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec3_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec3.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec3_transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"transformByQuaternion\",\n    value: function transformByQuaternion(quaternion) {\n      vec3.transformQuat(this, this, quaternion);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 3;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(value) {\n      this[2] = checkNumber(value);\n    }\n  }]);\n\n  return Vector3;\n}(Vector);\n\nexport { Vector3 as default };\n//# sourceMappingURL=vector3.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron[\"default\"];\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n//# sourceMappingURL=index.js.map","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { isWebGL2, log as _log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear as _clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { assertWebGL2Context, getKey } from '../webgl-utils';\nimport { assert } from '../utils';\nvar ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\n\nvar Framebuffer = function (_Resource) {\n  _inherits(Framebuffer, _Resource);\n\n  _createClass(Framebuffer, [{\n    key: \"MAX_COLOR_ATTACHMENTS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS);\n    }\n  }, {\n    key: \"MAX_DRAW_BUFFERS\",\n    get: function get() {\n      return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS);\n    }\n  }], [{\n    key: \"isSupported\",\n    value: function isSupported(gl) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          colorBufferFloat = _ref.colorBufferFloat,\n          colorBufferHalfFloat = _ref.colorBufferHalfFloat;\n\n      var supported = true;\n\n      if (colorBufferFloat) {\n        supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n      }\n\n      if (colorBufferHalfFloat) {\n        supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n      }\n\n      return supported;\n    }\n  }, {\n    key: \"getDefaultFramebuffer\",\n    value: function getDefaultFramebuffer(gl) {\n      gl.luma = gl.luma || {};\n      gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n        id: 'default-framebuffer',\n        handle: null,\n        attachments: {}\n      });\n      return gl.luma.defaultFramebuffer;\n    }\n  }]);\n\n  function Framebuffer(gl) {\n    var _this;\n\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Framebuffer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Framebuffer).call(this, gl, opts));\n    _this.width = null;\n    _this.height = null;\n    _this.attachments = {};\n    _this.readBuffer = 36064;\n    _this.drawBuffers = [36064];\n    _this.ownResources = [];\n\n    _this.initialize(opts);\n\n    Object.seal(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Framebuffer, [{\n    key: \"initialize\",\n    value: function initialize(_ref2) {\n      var _ref2$width = _ref2.width,\n          width = _ref2$width === void 0 ? 1 : _ref2$width,\n          _ref2$height = _ref2.height,\n          height = _ref2$height === void 0 ? 1 : _ref2$height,\n          _ref2$attachments = _ref2.attachments,\n          attachments = _ref2$attachments === void 0 ? null : _ref2$attachments,\n          _ref2$color = _ref2.color,\n          color = _ref2$color === void 0 ? true : _ref2$color,\n          _ref2$depth = _ref2.depth,\n          depth = _ref2$depth === void 0 ? true : _ref2$depth,\n          _ref2$stencil = _ref2.stencil,\n          stencil = _ref2$stencil === void 0 ? false : _ref2$stencil,\n          _ref2$check = _ref2.check,\n          check = _ref2$check === void 0 ? true : _ref2$check,\n          readBuffer = _ref2.readBuffer,\n          drawBuffers = _ref2.drawBuffers;\n      assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n      this.width = width;\n      this.height = height;\n\n      if (attachments) {\n        for (var attachment in attachments) {\n          var target = attachments[attachment];\n          var object = Array.isArray(target) ? target[0] : target;\n          object.resize({\n            width: width,\n            height: height\n          });\n        }\n      } else {\n        attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n      }\n\n      this.update({\n        clearAttachments: true,\n        attachments: attachments,\n        readBuffer: readBuffer,\n        drawBuffers: drawBuffers\n      });\n\n      if (attachments && check) {\n        this.checkStatus();\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.ownResources[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var resource = _step.value;\n          resource[\"delete\"]();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      _get(_getPrototypeOf(Framebuffer.prototype), \"delete\", this).call(this);\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref3) {\n      var _ref3$attachments = _ref3.attachments,\n          attachments = _ref3$attachments === void 0 ? {} : _ref3$attachments,\n          readBuffer = _ref3.readBuffer,\n          drawBuffers = _ref3.drawBuffers,\n          _ref3$clearAttachment = _ref3.clearAttachments,\n          clearAttachments = _ref3$clearAttachment === void 0 ? false : _ref3$clearAttachment,\n          _ref3$resizeAttachmen = _ref3.resizeAttachments,\n          resizeAttachments = _ref3$resizeAttachmen === void 0 ? true : _ref3$resizeAttachmen;\n      this.attach(attachments, {\n        clearAttachments: clearAttachments,\n        resizeAttachments: resizeAttachments\n      });\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n      if (readBuffer) {\n        this._setReadBuffer(readBuffer);\n      }\n\n      if (drawBuffers) {\n        this._setDrawBuffers(drawBuffers);\n      }\n\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          width = _ref4.width,\n          height = _ref4.height;\n\n      if (this.handle === null) {\n        assert(width === undefined && height === undefined);\n        this.width = this.gl.drawingBufferWidth;\n        this.height = this.gl.drawingBufferHeight;\n        return this;\n      }\n\n      if (width === undefined) {\n        width = this.gl.drawingBufferWidth;\n      }\n\n      if (height === undefined) {\n        height = this.gl.drawingBufferHeight;\n      }\n\n      if (width !== this.width && height !== this.height) {\n        _log.log(2, \"Resizing framebuffer \".concat(this.id, \" to \").concat(width, \"x\").concat(height))();\n      }\n\n      for (var attachmentPoint in this.attachments) {\n        this.attachments[attachmentPoint].resize({\n          width: width,\n          height: height\n        });\n      }\n\n      this.width = width;\n      this.height = height;\n      return this;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(attachments) {\n      var _this2 = this;\n\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$clearAttachment = _ref5.clearAttachments,\n          clearAttachments = _ref5$clearAttachment === void 0 ? false : _ref5$clearAttachment,\n          _ref5$resizeAttachmen = _ref5.resizeAttachments,\n          resizeAttachments = _ref5$resizeAttachmen === void 0 ? true : _ref5$resizeAttachmen;\n\n      var newAttachments = {};\n\n      if (clearAttachments) {\n        Object.keys(this.attachments).forEach(function (key) {\n          newAttachments[key] = null;\n        });\n      }\n\n      Object.assign(newAttachments, attachments);\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      for (var key in newAttachments) {\n        assert(key !== undefined, 'Misspelled framebuffer binding point?');\n        var attachment = Number(key);\n        var descriptor = newAttachments[attachment];\n        var object = descriptor;\n\n        if (!object) {\n          this._unattach(attachment);\n        } else if (object instanceof Renderbuffer) {\n          this._attachRenderbuffer({\n            attachment: attachment,\n            renderbuffer: object\n          });\n        } else if (Array.isArray(descriptor)) {\n          var _descriptor = _slicedToArray(descriptor, 3),\n              texture = _descriptor[0],\n              _descriptor$ = _descriptor[1],\n              layer = _descriptor$ === void 0 ? 0 : _descriptor$,\n              _descriptor$2 = _descriptor[2],\n              level = _descriptor$2 === void 0 ? 0 : _descriptor$2;\n\n          object = texture;\n\n          this._attachTexture({\n            attachment: attachment,\n            texture: texture,\n            layer: layer,\n            level: level\n          });\n        } else {\n          this._attachTexture({\n            attachment: attachment,\n            texture: object,\n            layer: 0,\n            level: 0\n          });\n        }\n\n        if (resizeAttachments && object) {\n          object.resize({\n            width: this.width,\n            height: this.height\n          });\n        }\n      }\n\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      Object.assign(this.attachments, attachments);\n      Object.keys(this.attachments).filter(function (key) {\n        return !_this2.attachments[key];\n      }).forEach(function (key) {\n        delete _this2.attachments[key];\n      });\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus() {\n      var gl = this.gl;\n      var status = this.getStatus();\n\n      if (status !== 36053) {\n        throw new Error(_getFrameBufferStatus(status));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"getStatus\",\n    value: function getStatus() {\n      var gl = this.gl;\n      var prevHandle = gl.bindFramebuffer(36160, this.handle);\n      var status = gl.checkFramebufferStatus(36160);\n      gl.bindFramebuffer(36160, prevHandle || null);\n      return status;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          color = _ref6.color,\n          depth = _ref6.depth,\n          stencil = _ref6.stencil,\n          _ref6$drawBuffers = _ref6.drawBuffers,\n          drawBuffers = _ref6$drawBuffers === void 0 ? [] : _ref6$drawBuffers;\n\n      var prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n      if (color || depth || stencil) {\n        _clear(this.gl, {\n          color: color,\n          depth: depth,\n          stencil: stencil\n        });\n      }\n\n      drawBuffers.forEach(function (value, drawBuffer) {\n        clearBuffer({\n          drawBuffer: drawBuffer,\n          value: value\n        });\n      });\n      this.gl.bindFramebuffer(36160, prevHandle || null);\n      return this;\n    }\n  }, {\n    key: \"readPixels\",\n    value: function readPixels() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"readPixelsToBuffer\",\n    value: function readPixelsToBuffer() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToDataUrl\",\n    value: function copyToDataUrl() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToImage\",\n    value: function copyToImage() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n\n      return null;\n    }\n  }, {\n    key: \"copyToTexture\",\n    value: function copyToTexture() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n\n      return null;\n    }\n  }, {\n    key: \"blit\",\n    value: function blit() {\n      var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n\n      return null;\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(_ref7) {\n      var _ref7$attachments = _ref7.attachments,\n          attachments = _ref7$attachments === void 0 ? [] : _ref7$attachments,\n          _ref7$x = _ref7.x,\n          x = _ref7$x === void 0 ? 0 : _ref7$x,\n          _ref7$y = _ref7.y,\n          y = _ref7$y === void 0 ? 0 : _ref7$y,\n          width = _ref7.width,\n          height = _ref7.height;\n      var gl = this.gl;\n      assertWebGL2Context(gl);\n      var prevHandle = gl.bindFramebuffer(36008, this.handle);\n      var invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n      if (invalidateAll) {\n        gl.invalidateFramebuffer(36008, attachments);\n      } else {\n        gl.invalidateFramebuffer(36008, attachments, x, y, width, height);\n      }\n\n      gl.bindFramebuffer(36008, prevHandle);\n      return this;\n    }\n  }, {\n    key: \"getAttachmentParameter\",\n    value: function getAttachmentParameter(attachment, pname, keys) {\n      var value = this._getAttachmentParameterFallback(pname);\n\n      if (value === null) {\n        this.gl.bindFramebuffer(36160, this.handle);\n        value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n        this.gl.bindFramebuffer(36160, null);\n      }\n\n      if (keys && value > 1000) {\n        value = getKey(this.gl, value);\n      }\n\n      return value;\n    }\n  }, {\n    key: \"getAttachmentParameters\",\n    value: function getAttachmentParameters() {\n      var attachment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 36064;\n      var keys = arguments.length > 1 ? arguments[1] : undefined;\n      var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.constructor.ATTACHMENT_PARAMETERS || [];\n      var values = {};\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = parameters[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var pname = _step2.value;\n          var key = keys ? getKey(this.gl, pname) : pname;\n          values[key] = this.getAttachmentParameter(attachment, pname, keys);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return values;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var attachments = Object.keys(this.attachments);\n      var parameters = {};\n\n      for (var _i = 0, _attachments = attachments; _i < _attachments.length; _i++) {\n        var attachmentName = _attachments[_i];\n        var attachment = Number(attachmentName);\n        var key = keys ? getKey(this.gl, attachment) : attachment;\n        parameters[key] = this.getAttachmentParameters(attachment, keys);\n      }\n\n      return parameters;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (typeof window !== 'undefined') {\n        window.open(copyToDataUrl(this), 'luma-debug-texture');\n      }\n\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      var logLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var message = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (logLevel > _log.level || typeof window === 'undefined') {\n        return this;\n      }\n\n      message = message || \"Framebuffer \".concat(this.id);\n      var image = copyToDataUrl(this, {\n        maxHeight: 100\n      });\n\n      _log.image({\n        logLevel: logLevel,\n        message: message,\n        image: image\n      }, message)();\n\n      return this;\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref8$target = _ref8.target,\n          target = _ref8$target === void 0 ? 36160 : _ref8$target;\n\n      this.gl.bindFramebuffer(target, this.handle);\n      return this;\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind() {\n      var _ref9 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref9$target = _ref9.target,\n          target = _ref9$target === void 0 ? 36160 : _ref9$target;\n\n      this.gl.bindFramebuffer(target, null);\n      return this;\n    }\n  }, {\n    key: \"_createDefaultAttachments\",\n    value: function _createDefaultAttachments(color, depth, stencil, width, height) {\n      var defaultAttachments = null;\n\n      if (color) {\n        var _parameters;\n\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36064] = new Texture2D(this.gl, {\n          id: \"\".concat(this.id, \"-color0\"),\n          pixels: null,\n          format: 6408,\n          type: 5121,\n          width: width,\n          height: height,\n          mipmaps: false,\n          parameters: (_parameters = {}, _defineProperty(_parameters, 10241, 9729), _defineProperty(_parameters, 10240, 9729), _defineProperty(_parameters, 10242, 33071), _defineProperty(_parameters, 10243, 33071), _parameters)\n        });\n        this.ownResources.push(defaultAttachments[36064]);\n      }\n\n      if (depth && stencil) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[33306] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth-stencil\"),\n          format: 35056,\n          width: width,\n          height: 111\n        });\n        this.ownResources.push(defaultAttachments[33306]);\n      } else if (depth) {\n        defaultAttachments = defaultAttachments || {};\n        defaultAttachments[36096] = new Renderbuffer(this.gl, {\n          id: \"\".concat(this.id, \"-depth\"),\n          format: 33189,\n          width: width,\n          height: height\n        });\n        this.ownResources.push(defaultAttachments[36096]);\n      } else if (stencil) {\n        assert(false);\n      }\n\n      return defaultAttachments;\n    }\n  }, {\n    key: \"_unattach\",\n    value: function _unattach(attachment) {\n      var oldAttachment = this.attachments[attachment];\n\n      if (!oldAttachment) {\n        return;\n      }\n\n      if (oldAttachment instanceof Renderbuffer) {\n        this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n      } else {\n        this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n      }\n\n      delete this.attachments[attachment];\n    }\n  }, {\n    key: \"_attachRenderbuffer\",\n    value: function _attachRenderbuffer(_ref10) {\n      var _ref10$attachment = _ref10.attachment,\n          attachment = _ref10$attachment === void 0 ? 36064 : _ref10$attachment,\n          renderbuffer = _ref10.renderbuffer;\n      var gl = this.gl;\n      gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n      this.attachments[attachment] = renderbuffer;\n    }\n  }, {\n    key: \"_attachTexture\",\n    value: function _attachTexture(_ref11) {\n      var _ref11$attachment = _ref11.attachment,\n          attachment = _ref11$attachment === void 0 ? 36064 : _ref11$attachment,\n          texture = _ref11.texture,\n          layer = _ref11.layer,\n          level = _ref11.level;\n      var gl = this.gl;\n      gl.bindTexture(texture.target, texture.handle);\n\n      switch (texture.target) {\n        case 35866:\n        case 32879:\n          gl.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n          break;\n\n        case 34067:\n          var face = mapIndexToCubeMapFace(layer);\n          gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n          break;\n\n        case 3553:\n          gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n          break;\n\n        default:\n          assert(false, 'Illegal texture type');\n      }\n\n      gl.bindTexture(texture.target, null);\n      this.attachments[attachment] = texture;\n    }\n  }, {\n    key: \"_setReadBuffer\",\n    value: function _setReadBuffer(readBuffer) {\n      var gl = this.gl;\n\n      if (isWebGL2(gl)) {\n        gl.readBuffer(readBuffer);\n      } else {\n        assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n      }\n\n      this.readBuffer = readBuffer;\n    }\n  }, {\n    key: \"_setDrawBuffers\",\n    value: function _setDrawBuffers(drawBuffers) {\n      var gl = this.gl;\n\n      if (isWebGL2(gl)) {\n        gl.drawBuffers(drawBuffers);\n      } else {\n        var ext = gl.getExtension('WEBGL.draw_buffers');\n\n        if (ext) {\n          ext.drawBuffersWEBGL(drawBuffers);\n        } else {\n          assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n        }\n      }\n\n      this.drawBuffers = drawBuffers;\n    }\n  }, {\n    key: \"_getAttachmentParameterFallback\",\n    value: function _getAttachmentParameterFallback(pname) {\n      var caps = getFeatures(this.gl);\n\n      switch (pname) {\n        case 36052:\n          return !caps.WEBGL2 ? 0 : null;\n\n        case 33298:\n        case 33299:\n        case 33300:\n        case 33301:\n        case 33302:\n        case 33303:\n          return !caps.WEBGL2 ? 8 : null;\n\n        case 33297:\n          return !caps.WEBGL2 ? 5125 : null;\n\n        case 33296:\n          return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n        default:\n          return null;\n      }\n    }\n  }, {\n    key: \"_createHandle\",\n    value: function _createHandle() {\n      return this.gl.createFramebuffer();\n    }\n  }, {\n    key: \"_deleteHandle\",\n    value: function _deleteHandle() {\n      this.gl.deleteFramebuffer(this.handle);\n    }\n  }, {\n    key: \"_bindHandle\",\n    value: function _bindHandle(handle) {\n      return this.gl.bindFramebuffer(36160, handle);\n    }\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"texture\",\n    get: function get() {\n      return this.attachments[36064] || null;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.attachments[36096] || this.attachments[33306] || null;\n    }\n  }, {\n    key: \"stencil\",\n    get: function get() {\n      return this.attachments[36128] || this.attachments[33306] || null;\n    }\n  }]);\n\n  return Framebuffer;\n}(Resource);\n\nexport { Framebuffer as default };\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  var STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || \"Framebuffer error \".concat(status);\n}\n\nexport var FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2[\"default\"])(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2[\"default\"])(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2[\"default\"])(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","var _typeof = require(\"../helpers/typeof\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nmodule.exports = _interopRequireWildcard;","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport setPrototypeOf from \"./setPrototypeOf\";\nimport isNativeFunction from \"./isNativeFunction\";\nimport construct from \"./construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport { config, formatValue, equals as _equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\n\nvar MathArray = function (_Array) {\n  _inherits(MathArray, _Array);\n\n  function MathArray() {\n    _classCallCheck(this, MathArray);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MathArray).apply(this, arguments));\n  }\n\n  _createClass(MathArray, [{\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor().copy(this);\n    }\n  }, {\n    key: \"from\",\n    value: function from(arrayOrObject) {\n      return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(array) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = array[i + offset];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"to\",\n    value: function to(arrayOrObject) {\n      if (arrayOrObject === this) {\n        return this;\n      }\n\n      return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n  }, {\n    key: \"toTarget\",\n    value: function toTarget(target) {\n      return target ? this.to(target) : this;\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        array[offset + i] = this[i];\n      }\n\n      return array;\n    }\n  }, {\n    key: \"toFloat32Array\",\n    value: function toFloat32Array() {\n      return new Float32Array(this);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.formatString(config);\n    }\n  }, {\n    key: \"formatString\",\n    value: function formatString(opts) {\n      var string = '';\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n      }\n\n      return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (!_equals(this[i], array[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"exactEquals\",\n    value: function exactEquals(array) {\n      if (!array || this.length !== array.length) {\n        return false;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        if (this[i] !== array[i]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  }, {\n    key: \"negate\",\n    value: function negate() {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = -this[i];\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      if (t === undefined) {\n        t = b;\n        b = a;\n        a = this;\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        var ai = a[i];\n        this[i] = ai + t * (b[i] - ai);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"min\",\n    value: function min(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"max\",\n    value: function max(vector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.max(vector[i], this[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(minVector, maxVector) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, vectors = new Array(_len), _key = 0; _key < _len; _key++) {\n        vectors[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _vectors = vectors; _i < _vectors.length; _i++) {\n        var vector = _vectors[_i];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] += vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len2 = arguments.length, vectors = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        vectors[_key2] = arguments[_key2];\n      }\n\n      for (var _i2 = 0, _vectors2 = vectors; _i2 < _vectors2.length; _i2++) {\n        var vector = _vectors2[_i2];\n\n        for (var i = 0; i < this.ELEMENTS; ++i) {\n          this[i] -= vector[i];\n        }\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale) {\n      if (Array.isArray(_scale)) {\n        return this.multiply(_scale);\n      }\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= _scale;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(a) {\n      return this.subtract(a);\n    }\n  }, {\n    key: \"setScalar\",\n    value: function setScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"addScalar\",\n    value: function addScalar(a) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += a;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"subScalar\",\n    value: function subScalar(a) {\n      return this.addScalar(-a);\n    }\n  }, {\n    key: \"multiplyScalar\",\n    value: function multiplyScalar(scalar) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= scalar;\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"divideScalar\",\n    value: function divideScalar(a) {\n      return this.scale(1 / a);\n    }\n  }, {\n    key: \"clampScalar\",\n    value: function clampScalar(min, max) {\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        this[i] = Math.min(Math.max(this[i], min), max);\n      }\n\n      return this.check();\n    }\n  }, {\n    key: \"multiplyByScalar\",\n    value: function multiplyByScalar(scalar) {\n      return this.scale(scalar);\n    }\n  }, {\n    key: \"check\",\n    value: function check() {\n      if (config.debug && !this.validate()) {\n        throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate() {\n      var valid = this.length === this.ELEMENTS;\n\n      for (var i = 0; i < this.ELEMENTS; ++i) {\n        valid = valid && Number.isFinite(this[i]);\n      }\n\n      return valid;\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"RANK\",\n    get: function get() {\n      assert(false);\n      return 0;\n    }\n  }, {\n    key: \"elements\",\n    get: function get() {\n      return this;\n    }\n  }]);\n\n  return MathArray;\n}(_wrapNativeSuper(Array));\n\nexport { MathArray as default };\n//# sourceMappingURL=math-array.js.map","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport isElectron from './is-electron';\nexport default function isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert, deepArrayEqual } from '../utils';\n\nfunction installGetterOverride(gl, functionName) {\n  var originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get() {\n    var pname = arguments.length <= 0 ? undefined : arguments[0];\n\n    if (!(pname in gl.state.cache)) {\n      gl.state.cache[pname] = originalGetterFunc.apply(void 0, arguments);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc.apply(void 0, arguments);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-from-cache\"),\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  var originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set() {\n    for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    var _setter = setter.apply(void 0, [gl.state._updateCache].concat(params)),\n        valueChanged = _setter.valueChanged,\n        oldValue = _setter.oldValue;\n\n    if (valueChanged) {\n      originalSetterFunc.apply(void 0, params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: \"\".concat(functionName, \"-to-cache\"),\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  var originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nvar GLState = function () {\n  function GLState(gl) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        _ref$copyState = _ref.copyState,\n        copyState = _ref$copyState === void 0 ? false : _ref$copyState,\n        _ref$log = _ref.log,\n        log = _ref$log === void 0 ? function () {} : _ref$log;\n\n    _classCallCheck(this, GLState);\n\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(GLState, [{\n    key: \"push\",\n    value: function push() {\n      var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.stateStack.push({});\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      assert(this.stateStack.length > 0);\n      var oldValues = this.stateStack[this.stateStack.length - 1];\n      setParameters(this.gl, oldValues, this.cache);\n      this.stateStack.pop();\n    }\n  }, {\n    key: \"_updateCache\",\n    value: function _updateCache(values) {\n      var valueChanged = false;\n      var oldValue;\n      var oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n      for (var key in values) {\n        assert(key !== undefined);\n        var value = values[key];\n        var cached = this.cache[key];\n\n        if (!deepArrayEqual(value, cached)) {\n          valueChanged = true;\n          oldValue = cached;\n\n          if (oldValues && !(key in oldValues)) {\n            oldValues[key] = cached;\n          }\n\n          this.cache[key] = value;\n        }\n      }\n\n      return {\n        valueChanged: valueChanged,\n        oldValue: oldValue\n      };\n    }\n  }]);\n\n  return GLState;\n}();\n\nexport default function trackContextState(gl) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref2$enable = _ref2.enable,\n      enable = _ref2$enable === void 0 ? true : _ref2$enable,\n      copyState = _ref2.copyState;\n\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    var global_ = typeof global !== 'undefined' ? global : window;\n\n    if (global_.polyfillContext) {\n      global_.polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState: copyState,\n      enable: enable\n    });\n    installProgramSpy(gl);\n\n    for (var key in GL_HOOKED_SETTERS) {\n      var setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (var i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length) {\n  var callerName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nvar map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map"],"sourceRoot":""}